var maxItem = 5000; //列表最多显示几条
var isShowToolBar = 0; //不显示头部toolbar

$.fn.extend({
    Scroll: function(opt, callback) {
        //参数初始化
        if (!opt) var opt = {};
        var timerID;
        var _this = this.eq(0).find("ul:first");
        var lineH = _this.find("li:first").height() + 10, //获取行高
            line = opt.line ? parseInt(opt.line, 10) : parseInt(this.height() / lineH, 10), //每次滚动的行数，默认为一屏，即父容器高度
            speed = opt.speed ? parseInt(opt.speed, 10) : 500; //卷动速度，数值越大，速度越慢（毫秒）
        timer = opt.timer //?parseInt(opt.timer,10):3000; //滚动的时间间隔（毫秒）
        if (line == 0) line = 1;
        var upHeight = 0 - line * lineH;
        //滚动函数
        var scrollUp = function() {
                _this.stop().animate({
                    marginTop: upHeight
                }, speed, function() {
                    for (i = 1; i <= line; i++) {
                        _this.find("li:first").appendTo(_this);
                    }
                    _this.css({ marginTop: 0 });
                });

            }
            //Shawphy:自动播放
        var autoPlay = function() {
            if (timer) timerID = window.setInterval(scrollUp, timer);
        };
        var autoStop = function() {
            if (timer) window.clearInterval(timerID);
        };
        //鼠标事件绑定
        _this.hover(autoStop, autoPlay).mouseout();

    }
})

Highcharts.setOptions({
    lang: {
        downloadJPEG: '下载JPEG图片',
        downloadPNG: '下载PNG图片',
        downloadPDF: '下载PDF文件',
        downloadSVG: '下载SVG文件',
        noData: '暂无数据',
        printChart: '打印图片',
        viewFullscreen: '全屏查看',
        noData: '暂无数据',
        contextButtonTitle: '导出'
    }
})
$(document).on("click", "#IpoYieldBtn", function(e) {
    Company.chartClick("#IpoYieldBar")
})
$(document).on("click", "#IpoSalesBtn", function() {
    Company.chartClick("#IpoSalesBar")
})
$(document).on("click", "#IpoBusinessBtn", function() {
    Company.chartClick("#IpoBusinessBar")
})
$(document).on("click", "#IpoStockBtn", function() {
    Company.chartClick("#IpoStockBar")
})
$(document).on("click", ".ipo-bar-icon", function(e) {
    var isnowValue = e.target.dataset.isnow
    var businesstypeValue = e.target.dataset.businesstype
    var businessIndexValue = e.target.dataset.businessindex
    var frequencyValue = e.target.dataset.frequency
    var moduleNameText = null
    switch (businesstypeValue) {
        case '产量':
            moduleNameText = 'IpoYield'
            $('#IpoYieldBar').attr('data-isnow', isnowValue)
            $('#IpoYieldBar').attr('data-businesstype', businesstypeValue)
            $('#IpoYieldBar').attr('data-businessindex', businessIndexValue)
            $('#IpoYieldBar').attr('data-frequency', frequencyValue)
            break
        case '销量':
            moduleNameText = 'IpoSales'
            $('#IpoSalesBar').attr('data-isnow', isnowValue)
            $('#IpoSalesBar').attr('data-businesstype', businesstypeValue)
            $('#IpoSalesBar').attr('data-businessindex', businessIndexValue)
            $('#IpoSalesBar').attr('data-frequency', frequencyValue)
            break
        case '业务量':
            moduleNameText = 'IpoBusiness'
            $('#IpoBusinessBar').attr('data-isnow', isnowValue)
            $('#IpoBusinessBar').attr('data-businesstype', businesstypeValue)
            $('#IpoBusinessBar').attr('data-businessindex', businessIndexValue)
            $('#IpoBusinessBar').attr('data-frequency', frequencyValue)
            break
        case '库存':
            moduleNameText = 'IpoStock'
            $('#IpoStockBar').attr('data-isnow', isnowValue)
            $('#IpoStockBar').attr('data-businesstype', businesstypeValue)
            $('#IpoStockBar').attr('data-businessindex', businessIndexValue)
            $('#IpoStockBar').attr('data-frequency', frequencyValue)
            break
        default:
            break;
    }
    var param = {
        companycode: String(Company.companyId),
        isnow: isnowValue,
        businesstype: businesstypeValue,
        businessIndex: businessIndexValue,
        frequency: frequencyValue
    }
    Company.getIpoChartData(param, moduleNameText)
});
var defaultMenuItem = Highcharts.getOptions().exporting.buttons.contextButton.menuItems;
$(document).on("change", "#selectComparable", function() {
    var oIndex = this.selectedIndex;
    var oId = $(this).find("option").eq(oIndex).attr("data-val");
    oId = (oId && oId.split('|')[1]) ? oId.split('|')[1] : oId;
    var oType = $(this).find("option").eq(oIndex).attr("data-type");
    var oCount = $(this).find("option").eq(oIndex).attr("data-count");
    var oValue = $(this).find("option").eq(oIndex).attr("value");
    oValue = (oValue && oValue.split('|')[1]) ? oValue.split('|')[1] : oValue;
    var oName = $(this).find("option").eq(oIndex).attr("data-name");
    Company.getcomparable($("#getcomparable"), oIndex, oId, oType, oValue, oCount, oName);
});
$(document).on("click", ".jump2Private", function() {
    Common.terminalOrWeb(function() { Common.onMore(2958, 'URC50506') });
    return false;
})
$(document).on("click", "#shareWm", function() {
    function getBase64(img) {
        var canvas = document.createElement("canvas");
        var canvasWidth = canvas.width = 50;
        var canvasHeight = canvas.height = 50;
        var ctx = canvas.getContext("2d");
        var xRate = canvasWidth / img.width;
        var yRate = canvasHeight / img.height;
        var setRate = xRate < yRate ? xRate : yRate;
        if (setRate > 5) { setRate = 5; }
        ctx.drawImage(img, canvasWidth / 2 - img.width * setRate / 2, canvasHeight / 2 - img.height * setRate / 2, img.width * setRate, img.height * setRate);
        var ext = img.src.toLowerCase();
        var dataUrl = canvas.toDataURL(ext);
        return dataUrl.replace(/data:image\/png;base64,/, "");
    }
    var imgUrl = $("#companyLogo").attr("src");
    var img = new Image();
    img.crossOrigin = 'anonymous'
    img.src = imgUrl;
    img.onload = function() {
        var base64 = getBase64(img);
        console.log(base64)
        if (window.external && window.external.ClientFunc) {
            window.external.ClientFunc(JSON.stringify({ func: 'command', Kind: '企业分享', isGlobal: '1', cmdid: '149', OPType: '104', Content: '', Title: Company.companyName, URL: '/WealthManagementServer/Wind.WFC.Enterprise.Web/PC.Front/Company/Company.html?companycode=' + Company.companyCode, URL_Phone: 'companyDetail?1=1&companyCode=' + Company.companyCode, Icon: base64 }))
        }
    }

    return false;
})
$("#newsModelList").on("click", ".wi-link-color", function() {
    var $this = $(this);
    var id = $this.attr("data-id");
    var title = $this.attr("data-title");
    if (id) {
        var url = 'http://SmartReaderServer/SmartReaderWeb/SmartReader/?type=4&id=' + id + '&fav=1'
        if (window.external && window.external.ClientFunc) {
            window.external.ClientFunc(JSON.stringify({
                func: "command",
                isGlobal: 1,
                cmdid: "29979",
                url: url,
                title: title || '',
                disableuppercase: 1
            }));
        } else {
            window.open(url, "_newTab" + new Date().valueOf());
        }
    }
    return false;
})
$(document).on("click", "#changemedicineinfo .each-change-tag:not('.nojump')", function() {
    $this = $(this);
    $("#changemedicineinfo .each-change-tag").removeClass("sel");
    $this.addClass("sel");
    var val = $this.attr("data-val");
    Company.medicineInfoTab = val;
    Company.showmedicineinfo($("#showmedicineinfo"), Company.productType, val);
    return false;
})
$(document).on("click", "#changemedicineBid .each-change-tag:not('.nojump')", function() {
    $this = $(this);
    $("#changemedicineBid .each-change-tag").removeClass("sel");
    $this.addClass("sel");
    var val = $this.attr("data-val");
    Company.bidInfoTab = val;
    Company.showmedicinebid($("#showmedicinebid"), Company.bidType, val);
    return false;
})
$(document).on("click", ".report-detail", function() {
    var $this = $(this);
    var id = $this.attr("data-id");
    var title = $this.attr("data-title");
    if (id) {
        var url = 'http://SmartReaderServer/SmartReaderWeb/SmartReader/?type=3&id=' + id + '&lan=cn'
        if (window.external && window.external.ClientFunc) {
            window.external.ClientFunc(JSON.stringify({
                func: "command",
                isGlobal: 1,
                cmdid: "1902",
                id: id,
                title: title || '',
                disableuppercase: 1
            }));
        } else {
            layer.msg("该功能需登录Wind金融终端。");
        }
    }
    return false;
})
$(document).on("change", "#selectComparable", function() {
    var oIndex = this.selectedIndex;
    var oId = $(this).find("option").eq(oIndex).attr("data-val");
    oId = (oId && oId.split('|')[1]) ? oId.split('|')[1] : oId;
    var oType = $(this).find("option").eq(oIndex).attr("data-type");
    var oCount = $(this).find("option").eq(oIndex).attr("data-count");
    var oValue = $(this).find("option").eq(oIndex).attr("value");
    oValue = (oValue && oValue.split('|')[1]) ? oValue.split('|')[1] : oValue;
    var oName = $(this).find("option").eq(oIndex).attr("data-name");
    Company.getcomparable($("#getcomparable"), oIndex, oId, oType, oValue, oCount, oName);
});
$(document).on("change", ".sel-status", function() {
    $this = $(this);
    var $dom = "";
    if ($this.parent().parent().parent().attr("id") == "workspace") {
        $dom = $("#workspace");
    } else {
        $dom = $this.attr("data-dom") ? $("#" + $this.attr("data-dom")) : $("#workspace");
    }
    var oIndex = this.selectedIndex;
    if ($this.attr('data-dom') == 'showCustomersSup') { //对带下拉框的表格切换进行调整-客户和供应商
        oIndex = $this.attr('data-index')
    }
    //模块右侧下拉框
    var count = $this.find("option").eq(oIndex).attr("data-count");
    fn = $this.attr("data-fn");
    var selName = $this.attr("data-val");
    var val = $this.val();
    Company[selName] = val;
    Company[fn]($dom, oIndex, val, count)
})
$(document).on("click", ".tab-change-chart", function() {
    $this = $(this);
    $parents = $this.parents('.widget-model').eq(0);
    $this.addClass('wi-secondary-color').siblings().removeClass("wi-secondary-color");
    var oIndex = $parents.find(".tab-change-chart").index(this);
    $parents.find('.each-draw-court').hide().eq(oIndex).show();

})
$(document).on('click', '.nav-person-detail-link', function(event) {
        layer.open({
            content: '<div class="person-layer-msg"><span>' + Company.companyDetail + '</span></div>',
            type: 1,
            area: '800px',
            title: '公司简介',
            maxHeight: 200,
            closeBtn: 1,
            skin: 'person-layer-dialog',
        });
    })
    /**
     * 回车事件监听
     */
$('.input-toolbar-search').placeholder().keydown(function(event) {
    //搜索框placehoder及回车后执行搜索事件
    switch (event.keyCode) {
        case 13:
            if ($(this).val().length) {
                //搜索按钮
                var keyword = $('.input-toolbar-search').val();
                $('.input-toolbar-search-list').removeClass('active');
                $('.input-toolbar-before-search').removeClass('active');
                window.open("SearchHomeList.html?linksource=CEL&keyword=" + keyword);
            }
            return false;
            break;
    }
});
$(document).on("mouseover", ".weixin-code", function() {
    //移动显示微信码
    $(this).find(".detail-weixin").show();
})
$(document).on("mouseout", ".weixin-code", function() {
    //移出隐藏微信码
    $(this).find(".detail-weixin").hide();
})
$('#companyName').mouseover(function(e) {
    // 公司名鼠标移动显示复制
    e.stopPropagation();
    var oLeft = $("#companyName").offset().left;
    var oTop = $("#companyName").offset().top;
    $('#tooltip').show().css({
        'left': (e.pageX - 5 - oLeft + 'px'),
        'top': (e.pageY - 5 - oTop + 'px')
    }).show();
}).mouseout(function(e) {
    e.stopPropagation();
    $('#tooltip').hide();
}).mousemove(function(e) {
    e.stopPropagation();
    var oLeft = $("#companyName").offset().left;
    var oTop = $("#companyName").offset().top;
    $tooltip = $('#tooltip');
    $tooltip.css({
        'left': (e.pageX - 5 - oLeft + 'px'),
        'top': (e.pageY - 5 - oTop + 'px')
    });
    if (parseInt($tooltip.css("left")) - $("#companyName").width() > 0 || parseInt($tooltip.css("top")) - $("#companyName").height() > 0) {
        $tooltip.hide();
    } else {
        $tooltip.show();
    }
})
$("#usedName").hover(function() {
    $("#usedNameList").show();
}, function() {
    $("#usedNameList").hide();
})

function copyInit() {
    //点击复制企业名
    try {
        var clipboard = new Clipboard('#tooltip');
        clipboard.on('success', function(e) {
            layer.msg("复制成功", { time: 500 })

        });
        clipboard.on('error', function(e) {
            layer.msg("复制失败，请稍后再试", { time: 500 })
        });
    } catch (e) {

    }
}

$(document).bind("click", function(e) {
    //点击隐藏下拉框
    if ($((e.target || e.srcElement)).closest(".toolbar-search,.input-toolbar-search-list").length == 0) {
        $('.input-toolbar-search-list').removeClass('active');
        $('.input-toolbar-before-search').removeClass('active');
    }
});

$('.input-toolbar-before-search').on("click", ".before-search-key", function(event) {
    //预搜索
    var target = event.target;
    if (!$(target).hasClass('before-search-key')) {
        target = target.closest('.before-search-key');
    }
    var tag = $(target).find('.wi-secondary-color')[1].innerHTML;
    var url = "ShowSearchList.html?companyFeature=" + tag;
    Common.redirectToAdviceSearch(url, tag);
})


$(document).on("click", '#btnToolbarSearch', function(event) {
    //搜索按钮
    var keyword = $.trim($('#inputToolbarSearch').val());
    if (keyword.length && !$('#inputToolbarSearch').hasClass('placeholder')) {
        //深度搜索
        var companyname = encodeURI(keyword);
        var pingParam = buryFCode.paramBuryJson('add', { 'funcType': 'searchCk', 'fromModule': 'toolbar' });
        var url = "SearchHomeList.html?linksource=CEL&keyword=" + keyword + pingParam;
        $("#inputToolbarSearch").val(keyword);
        $('.input-toolbar-search-list').removeClass('active');
        $('.input-toolbar-before-search').removeClass('active');
        window.open(url);
    } else {
        $('#inputToolbarSearch').focus();
    }
});

$(document).on("click", ".show-dialog-content", function() {
    //弹出框
    var msghtml = $(this).find(".judge-content").eq(0).html();
    var msg = msghtml ? msghtml : "暂无信息";
    var tit = $(this).closest("tr").find("td").eq(1).text();
    layer.open({
        type: 1,
        skin: 'layui-layer-rim', //加上边框
        area: ['800px', '600px'], //宽高
        content: msg
    });
    return false;
});

/**随着滚动，导航显示相应模块**/
var timeFun = null;
/**找到当前页面滚动到的锚点位置**/
var findHref = function() {
    var $links = $('.each-module');
    var windowScrollTop = $(window).scrollTop();
    var maxDistance = 100000;
    var result = $links.eq(0);
    $.each($links, function(i, link) {
        var curDistanceToTop = Math.abs($links.eq(i).offset().top - windowScrollTop);
        maxDistance > curDistanceToTop && $links.eq(i).offset().top < windowScrollTop + $(window).height() && (maxDistance = curDistanceToTop, result = $links.eq(i))
    });
    return result;
};
/***使用jQuery创建移动动画*/
var move = function(dis) {
        var $arrow = $('.arrow');
        $arrow.animate({ top: dis }, 'normal');
    }
    /**滚轮事件Handler**/
var wheelHandler = function(e) {
    clearTimeout(timeFun);
    timeFun = setTimeout(function() {
        var href = findHref();
        var id = $(href).attr("id");
        $("#subNavList a").removeClass("sel");
        var $selLink = $("#subNavList a[href='#" + id + "']");
        $selLink.addClass("sel");
        var $curLi = $selLink.parents("li");
        $curLi.find(".second-nav-a").show();
        $curLi.siblings("li").find(".second-nav-a").hide();
    }, 300);
};
/***注册滚轮事件*/
$('body').on('mousewheel', wheelHandler);
$(document).on("click", "#subNavList a:not('.forbiddenJump')", function(event) {
    //二级菜单定位到锚点的问题
    var href = $(this).attr("href");
    //var parentHeight = $(this).parents("#secondNavList").outerHeight(); //一级菜单的高度
    var topdis = $(href).offset().top - 50;
    $("#subNavList a").removeClass("sel");
    $(this).addClass("sel");
    $curLi = $(this).parents("li");
    $curLi.find(".second-nav-a").show();
    $curLi.siblings("li").find(".second-nav-a").hide();
    $(document).scrollTop(topdis)
    event.preventDefault()
    return false;
})
$(document).on('click', '.paginate_button', function(event) {
    //分页跳转
    var target = event.target;
    var topdis = 0;
    try {
        if ($(target).parents('.dataTables_paginate').siblings('table').attr('id') === 'tabNewsList') {
            $('html, body').animate({
                scrollTop: topdis
            }, 200);
            return;
        }
        var tableEle = $('#' + $(target).attr('aria-controls')); // 当前表格元素
        //var documentHeaderHeight = $('#secondNavList').outerHeight(true); // 当前文档的置顶区域高度
        var headerHeight = $(tableEle).closest('.widget-model').find('.widget-header').outerHeight(true); // 当前表格的widget-header高度
        topdis = $(tableEle).offset().top - headerHeight - 41;
        // 兼容 “更多” 页面
        if (Company._fromMoreLink) {
            topdis = 0;
        } else {
            $('html, body').animate({
                scrollTop: topdis
            }, 200);
        }
    } catch (e) {}
})

$(document).on("click", ".merge-holder i", function() {
    Common.burypcfunctioncode('922602100346');
    var $this = $(this);
    var $dom = $("#showShareholder").length > 0 ? $("#showShareholder") : null;
    if ($this.hasClass("sel")) {
        $this.removeClass("sel");
        Company.showShareholder($dom, 0);
    } else {
        $this.addClass("sel");
        Company.showShareholder($dom, 1);
    }
})
$(document).on("click", ".show-relation", function() {
    //列表中的详细和展开
    var initialText = $(this).text();
    if ($(this).text() == intl('138877' /* 收起 */ )) {
        $(this).text(intl('138697' /* 详细信息 */ ));
    } else {
        $(".show-relation").text(intl('138697' /* 详细信息 */ ));
        $(this).text(intl('138877' /* 收起 */ ));
    }
    Company.showRelation(this, $(this).attr("data-tdlen"))
    return false;
})
$(document).on("click", ".show-controller", function() {
    //疑似实际控制人-控制路径图
    if ($(this).text() == intl('138877' /* 收起 */ )) {
        $(".show-controller").text(intl('138697' /* 详细信息 */ ));
        $(this).text(intl('138697' /* 详细信息 */ ));
    } else {
        $(".show-relation").text(intl('138697' /* 详细信息 */ ));
        $(".show-controller").text(intl('138697' /* 详细信息 */ ));
        $(this).text(intl('138877' /* 收起 */ ));
    }
    Company.showController(this, $(this).attr("data-tdlen"), $(this).attr("data-radio"), $(this).attr("data-name"))
    return false;
})
$(document).on("click", ".link-showdetail", function() {
    //显示列表中的'详细'展开
    var initialText = $(this).text();
    var Band = false;
    var seeOrNot = true;
    if ($(this).text() == intl('138877' /* 收起 */ )) {
        $(this).text(intl('138697' /* 详细信息 */ ));
        seeOrNot = false;
    } else {
        $(".link-showdetail").text(intl('138697' /* 详细信息 */ ));
        $(this).text(intl('138877' /* 收起 */ ));
        seeOrNot = true;
    }
    if ($(this).parent().parent().parent().attr('id') == 'tbodyBand') {
        Band = true;
    }
    //bury
    if (seeOrNot) {
        var activeType = 'itemDetailView';
        var opEntity = $(this).attr('data-buryEntity') ? $(this).attr('data-buryEntity') : null;
        var otherParam = buryFCode.paramBuryJson('detail', $(this));
        buryFCode.bury(activeType, opEntity, otherParam);
    }

    Company.showContentDetail(this, $(this).attr("data-tdlen"), Band)
    return false;
})
$(document).on("click", ".show-list-rank", function() {
    var Band = false;
    Company.showContentDetail(this, $(this).attr("data-tdlen"), Band)
    return false;
})
$(document).on("click", ".show-merge", function() {
    //并购显示列表中的'详细'展开
    var initialText = $(this).text();
    if ($(this).text() == intl('138877' /* 收起 */ )) {
        $(this).text(intl('138697' /* 详细信息 */ ));
    } else {
        $(".show-merge").text(intl('138697' /* 详细信息 */ ));
        $(this).text(intl('138877' /* 收起 */ ));
    }
    Company.showMergeDetail(this, $(this).parents("tr").find("td").length)
    return false;
})

$(document).on('click', '.jumpstockStructure,.jumpActControl,.realActControl', function() {
    var urlHash = $(this).attr("href");
    window.open("CompanyChart.html?companycode=" + Company.companyCode + '&companyid=' + Company.companyId + '&companyname=' + Company.companyName + urlHash);
    return false;
})

$(document).on("click", ".jumpinvestChart,.jumpnewsList,.jumpFinanceanalysisIndustry,.jumpfinancingMap,.jumpshowCompanyChange,#jumpStockChart,#jumpshowShareholder,#jumpALLChart,#jumplinkShowAll", function() {
        var urlHash = $(this).attr("href");
        window.open("Company.html" + window.location.search + urlHash);
        return false
    })
    // 企业股东对外投资跳转
$(document).on("click", ".jumpShareholderInvest", function() {
        var urlHash = $(this).attr("href");
        var code = $(this).attr('data-companycode');
        window.open("Company.html?companycode=" + code + urlHash);
        return false
    })
    // 个人信息跳转
    // $(document).on("click", "#person_glqy", function() {
    //     var urlHash = $(this).attr("href");
    //     var name = $(this).attr('person-name');
    //     var code = Company.companyCode;
    //     //bury-person
    //     var pingParam = '';
    //     window.open("Person.html?companycode=" + code + '&personname=' + name + Common.isNoToolbar() + urlHash);
    //     return false
    // })
$(document).on("click", ".show-allchar", function() {
    var $tr = $(this).parents("tr")
    $tr.find(".char-hide").show();
    $tr.find(".char-show").hide();
    $tr.find(".show-allchar").hide();

})
$(document).on("click", "#changeFinanceData .time-tab", function() {
    var index = $("#changeFinanceData .time-tab").index(this);
    $(".time-tab").removeClass("wi-primary-bg");
    $(this).addClass("wi-primary-bg");
    var $dom = $(".keyFinancialIndicatorCompare");
    Company.showFinacalCompare($dom, index);
})
$(document).on("change", "#selTime", function() {
    //指标对比下拉框选择。
    var parentsItem = $("#selFinance02").val();
    Company.FinanceanalysisIndustry(parentsItem, this.value);
    $(this).val(this.value)
})
$(document).on("click", "#selFinance00 span", function() {
    //财务数据下拉框选择。
    var financeUnit = $("#selUnit").val();
    var thisVal = $(this).attr("data-val");
    $(this).addClass("sel").siblings().removeClass("sel");
    Company.FinancialData(thisVal, financeUnit);
})
$(document).on("change", "#selUnit", function() {
    //单位下拉框选择。
    var finance = $("#selFinance00").val();
    Company.FinancialData(finance, this.value);
    $(this).val(this.value)
})
$(document).on("click", "#selFinance span", function() {
    //财务指标下拉框选择。
    var thisVal = $(this).attr("data-val");
    Company.Financeanalysis(thisVal);
})
$(document).on("change", "#selFinance02", function() {
    //指标对比下拉框选择。
    var parentsTime = $("#selTime").val();
    Company.FinanceanalysisIndustry(this.value, parentsTime);
    $(this).val(this.value)
})
$(document).on("click", "#selInvestment span", function() {
    //对外投资图谱一次展开几层
    var val = $(this).attr("data-val");
    $("#selInvestment span").removeClass();
    $(this).addClass("sel");
    Company.investLevel = val;
    if (Company.investLevel == 2) {
        Company.investInt = true;
    }
    Company.investChart()
})
$(document).on("click", ".more-link", function() {
    //点击模块更多
    var urlHash = $(this).attr("href");
    window.open("Company.html" + window.location.search + urlHash);
    return false;
})
$(document).on("click", "#chartList li:not('.no-data-jump') a", function() {
    //点击模块更多
    var urlHash = $(this).attr("href");
    window.history.pushState(null, null, "/Wind.WFC.Enterprise.Web/PC.Front/Company/Company.html" + window.location.search + urlHash);
    var hash = location.hash.substring(1);
    if (hash) {
        if (typeof Company[hash] == 'function') {
            $(document).scrollTop(0)
            Company[hash]();
        } else {
            Company.showOverview();
        }
    } else {
        Company.showOverview();
    }
    return false;
})
$(document).on("click", ".more_side", function() {
    var read = $(this).text();
    if (read == '展开') {
        $(this).text('收起');
        $(this).prev().find('li:gt(4)').show();
    } else {
        $(this).text('展开');
        $(this).prev().find('li:gt(4)').hide();
    }
})
$(document).on("click", ".top_change", function() {
    Company.category_news();
    $(this).parent().remove();
})

$(document).ready(function() {
    var myhost = window.location.host;
    if (myhost == 'localhost' || myhost == '127.0.0.1' || myhost == '114.80.214.59' || myhost == '10.100.5.74') {
        $('#linkcategory_news').parent().parent().css("display", "");
        $('#company_tags').css("display", "inline-block");
    }
})
$(document).on("click", "#secondNavList li:not('.no-data-jump')", function(event) {
    $(this).addClass("current").siblings().removeClass("current");
    $("#subNavList").hide();
    var href = $(this).find("a").attr("href");
    var parentHeight = $(this).parents("#secondNavList").outerHeight();
    var topdis = $(href).offset().top - parentHeight;
    $(document).scrollTop(topdis)
    event.preventDefault()
    return false;
})
$(document).on("click", "#workspace .tab-style a:not('.nojump')", function() {
    var fn = $(this).attr("data-fn");
    var $container = $(this).parents(".each-module").length > 0 ? $("#" + fn) : "";
    Company[fn]($container, $(this).attr("data-index"));
})
$(document).on("click", ".holder-chart-list,.invest-chart-list,.stock-module-list", function() {
    var companycode = $(this).attr('data-companycode');
    Common.linkCompany("Bu3", companycode);
    return false;
})
$(document).on("click", "#btn2Chart", function() {
    if (!Company.companyName) {
        return;
    }
    var url = 'CompanyChart.html?companycode=' + Company.companyCode + '&companyid=' + Company.companyId + '&companyname=' + encodeURIComponent(Company.companyName);
    window.open(url);
    return false;
})
$(document).on("click", "#moreTagsCompany", function() {
    //点击更多，显示弹出框企业标签
    var tagsArr = [];
    tagsArr.push('<div class="dialog-tags">')
    for (var i = 0; i < Company.companyLabel.length; i++) {
        tagsArr.push('<span class="each-tags-company">' + Company.companyLabel[i] + '</span>');
    }
    tagsArr.push('</div>')
    layer.open({
        type: 1,
        skin: 'layui-layer-rim', //加上边框
        area: ['600px', '400px'], //宽高
        title: intl('222839', '企业标签'),
        resize: false,
        content: tagsArr.join("")
    });

})
$(document).on("click", "#moreNewTagsCompany", function() {
    //点击更多，显示弹出框体验新标签
    var tagsArr = [];
    tagsArr.push('<div class="dialog-tags">')
    for (var i = 0; i < Company.companyNewLabel.length; i++) {
        tagsArr.push('<span class="each-tags-company">' + Company.companyNewLabel[i] + '</span>');
    }
    tagsArr.push('</div>')
    layer.open({
        type: 1,
        skin: 'layui-layer-rim', //加上边框
        area: ['600px', '400px'], //宽高
        title: "体验新标签",
        resize: false,
        content: tagsArr.join("")
    });

})
$(document).on("click", "#moreLabelsCompany", function() {
    //点击更多，显示弹出框企业标签
    var tagsArr = [];
    tagsArr.push('<div class="dialog-tags">')
    for (var i = 0; i < Company.companyLabel.length; i++) {
        tagsArr.push('<span class="each-tags-company">' + Company.companyLabel[i] + '</span>');
    }
    tagsArr.push('</div>')
    layer.open({
        type: 1,
        skin: 'layui-layer-rim', //加上边框
        area: ['400px', '240px'], //宽高
        title: "企业标签",
        content: tagsArr.join("")
    });

});


$(document).on("click", ".text-2-show", function() {
    var read = $(this).attr('title');
    if (read == '点击展开') {
        $(this).removeClass('view-cont-control');
        $(this).attr('title', '点击收起');
    } else {
        $(this).addClass('view-cont-control');
        $(this).attr('title', '点击展开');
    }
})

var Company = {
    isVip: 0, // 0 表示暂无权限 1 表示Vip用户
    vipTips: '<span class="export-vip-tips" title="您正在使用付费高级功能"></span>',
    companyCode01: "",
    isNoToolbar: true, //默认没有toolbar
    companyId: Common.getUrlSearch('companyid'),
    companyCode: Common.getUrlSearch('companycode'),
    category_code: Common.getUrlSearch('categoryCode'),
    isHongkong: false,
    creditcode: "",
    country: "",
    isTw: false,
    isGovernment: false, //是否是医药行业
    isMedicine: false, //是否是医药行业
    dynaMoudle: [], //动态展示的模块
    fundCode: "", //私募基金需要的code
    isSociology: false,
    isCause: false,
    isLawOffice: false,
    companyIndustry: null,
    companyBasicData: null, //基本信息数据
    companyIntellectualData: null, //知识产权数据
    companyBusinessRiskData: null, //经营风险数据
    companyRiskInfoData: null, //法律诉讼数据
    companyFinancingInfoData: null, //金融行为数据
    companyCompareType: null, //竞争对手的类型
    companyBussinessInfoData: null, //经营状况数据
    companyHistoryData: null, //历史数据
    companyTags: [],
    companyLabel: [],
    companyRegDate: '',
    companyNewLabel: [],
    eachPageNum: 10, //每一页加载的数量
    companyName: "",
    peveData: null,
    container: null, //画图用,容器
    zoom: null, //画图用,放大缩小
    rootData: null, //画图用,数据源
    currentInterface: "", //画图用,传入几个画图的当前接口地址，主要用于画图完成后点击节点进行不同的操作.
    WTSectorId: "", //wind主题行业板块id
    WTIndexCode: "", //wind主题行业windcode
    windcode: "",
    WTSectorName: "", //wind主题行业名称
    baseCode: "", //四级行业
    base2Code: "", //二级行业
    basicNum: null, //各个模块的条目数\
    industryName: "",
    pageLen: 15,
    investLevel: 1, //投资结构一次展开几层
    investInt: false, //投资结构默认展开二层第二层是减号的初始化
    _historySearchList: [], // 历史搜索记录
    companyDetail: "",
    serachtimer: null,
    _fromMoreLink: false, // 来自于 “更多” 
    judgeinfostatistics: "", //存放裁判文书图表数据，如果加载过一次，就不再重新加载了，因为数据不会根据筛选而变化
    brandinfostatistics: "", //商标图表数据，如果加载过一次，就不再重新加载了，因为数据不会根据筛选而变化
    patentinfostatistics: "", //专利图表数据，如果加载过一次，就不再重新加载了，因为数据不会根据筛选而变化
    lang: {
        "sProcessing": "加载中...",
        "sZeroRecords": "暂无数据", //intl('132725' /* 暂无数据 */ ),
        "paginate": {
            "next": "&gt;",
            "previous": "&lt;"
        }
    },
    FinancalArr: [0, 0, 0, 0, 0], //用于指标对比里的数据切换。
    isFromLink: function() {
        var isExternal = Common.getUrlSearch("from");
        if (isExternal && isExternal.substring(0, 4) == "link") {
            return true;
        } else {
            return false;
        }
    },
    showToolbar: function() {
        /**
         * 显示toolbar
         */
        isShowToolBar = 50;
        $('.toolbar').css('display', 'block');
    },
    sideSlide: function() {
        var sideHeight1 = 640;
        var contentHeight = $('#workspace').outerHeight();
        var sideHeight = $('div .wi-primary-bg').next('ul').children().length * 32 + sideHeight1;
        if (sideHeight > contentHeight) {
            $('.content').height(sideHeight);
        } else {
            $('.content').height(contentHeight);
        }
    },
    init: function() {
        //函数入口,开始
        $('#inputToolbarSearch').attr('placeholder', intl('138441' /* 请输入公司、人名、品牌、企业特征等关键词 */ ));
        $('#inputNavSearch').attr('placeholder', intl('222764', '搜索菜单'));
        if (!is_terminal) {
            $(".risk-overview").hide();
        }
        //判断url是不是外部iframe嵌入，是的话就去掉导航和左侧菜单，调整右侧内容区
        var isExtend = Company.isFromLink(); //是不是从外部iframe进来的.
        // 获取历史搜索记录
        Common.getIsVip(function(info) {
            if (info.isVip) {
                Company.isVip = 1;
            }

            if (isExtend) {
                Company.companyId = Common.getUrlSearch("companyid");
                Company.companyCode = Common.getUrlSearch("companycode");
                Company.windCode = Common.getUrlSearch("windCode");
                Company.showToolbar();
                Company.isNoToolbar = false;
            } else {
                if (!Common.isNoToolbar()) {
                    Company.showToolbar();
                    Company.isNoToolbar = false;
                }
                Company.allOrSingle(); //是单个模块还是全部                       
            }
        });

    },
    allOrSingle: function() {
        var bodyHeight = $(window).height();
        $("#boxLeft").height(bodyHeight)
        $("#boxLeft").show();
        $(".menu-title").eq(0).addClass("wi-primary-bg");
        Company.createModule();
        Company.showCardAndBasic(); //显示头部卡片和基本信息，这个在2019.11.25从大接口分离出来。
        Company.newsHomeList(); //首页新闻模块    
    },
    createModule: function() {
        //把所有的模块的最外框div显示出来。
        var moduleArr = [];
        moduleArr = [
            ["showOverview", "IpoBusinessData", "financingInfo", "BussinessInfo", "RiskInfo", "BusinessRiskInfo", "IntellectualProperty", "HistoryData"],
            [intl('138663' /* 基础信息 */ ), intl('64824', '业务数据'), intl('138296' /* 金融行为 */ ), intl('138418' /* 经营状况 */ ), intl('138368' /* 法律诉讼 */ ), intl('138415' /* 经营风险 */ ), intl('120665' /* 知识产权 */ ), intl('33638' /* 历史数据 */ )]
        ]
        dynaDiv = ["IpoBusinessData"];
        var htmlArr = [];
        for (var i = 0; i < moduleArr[0].length; i++) {
            var dynaClassCss = ''
            if (dynaDiv.indexOf(moduleArr[0][i]) != -1) {
                dynaClassCss = 'module-dyna-hidden';
            }
            var tmpHtml = '<div id="' + moduleArr[0][i] + '" class="module ' + dynaClassCss + '"><h3 class="title-module"><span class="title-module-text ">' + moduleArr[1][i] + '</span><div class="title-module-underline wi-secondary-bg"></div></h3></div>';
            htmlArr.push(tmpHtml)
        }
        $("#workspace").html(htmlArr.join(""));
    },
    dynaRanderM: function() {
        // 动态渲染组件
        var parameter = { "companycode": Company.companyCode };
        myWfcAjax("apigetallcorpcategory", parameter, function(data) {
            var res = JSON.parse(data).Data;
            // 这里会有多个类型：医药-medical，上市-ipo，基金（公募基金-publicfund，私募基金-privatefund）,不是互斥出现
            //先判断是否有分类，没有则不显示动态菜单
            if (res && res.category) {
                var dynaCate = res.category ? res.category : [];
                Company.fundCode = res.fundCode ? res.fundCode : "";
                if (dynaCate.length != 0) {
                    dynaCate.forEach(function(dynaItem) {
                        switch (dynaItem) {
                            case 'medical': //医药企业动态菜单
                                Company.isMedicine = true;
                                try {
                                    SearchNavInit.navDic['产品信息']['产品信息'][2] = 1; //2
                                    SearchNavInit.navDic['市场销售']['市场销售'][2] = 1; //2
                                } catch (e) {}
                                $("#typeMedicine").show();
                                Company.MedicineData();
                                break;
                            case 'isListed': //上市公司业务数据动态菜单
                                try {
                                    SearchNavInit.navDic['产量'] = { '产量': ['showIpoYield', 1, 0] };
                                    SearchNavInit.navDic['销量'] = { '销量': ['showIpoSales', 1, 0] };
                                    SearchNavInit.navDic['业务量'] = { '业务量': ['showIpoBusiness', 1, 0] };
                                    SearchNavInit.navDic['库存'] = { '库存': ['showIpoStock', 1, 0] };
                                } catch (e) {}
                                $("#typeIpoBusiness").show();
                                Company.IpoBusinessData();
                                break;
                            case 'publicfund': //公募基金
                                try {
                                    SearchNavInit.navDic['基金规模'] = { '基金规模': ['showFundSize', 1, 0] };
                                    SearchNavInit.navDic['旗下基金'] = { '旗下基金': ['showItsFunds', 1, 0] };
                                } catch (e) {}
                                $("#typePublishFund").show();
                                Company.PublishFundData();
                                break;
                            case 'privatefund': //私募基金
                                try {
                                    SearchNavInit.navDic['基本信息'] = { '基本信息': ['showPrivateFundInfo', 1, 0] };
                                    SearchNavInit.navDic['产品结构'] = { '产品结构': ['showFundStruct', 1, 0] };
                                    SearchNavInit.navDic['代表基金'] = { '代表基金': ['showRepreseFund', 1, 0] };
                                    SearchNavInit.navDic['核心基金经理'] = { '核心基金经理': ['showFundManager', 1, 0] };
                                } catch (e) {}
                                $("#typePrivateFund").show();
                                Company.PrivateFundData();
                                break;
                            default:
                                break;
                        }
                    })
                }
            }
        })
    },
    getBasicNum: function(hash) {
        //获取基本的basicNum。
        var parameter = { "Companycode": this.companyCode };
        myWfcAjax("getentbasicnum", parameter, function(data) {
            var data = JSON.parse(data);
            if (data && data.ErrorCode == 0 && data.Data && !$.isEmptyObject(data.Data)) {
                var res = data.Data;
                Company.basicNum = res; //各个模块的条数
                Company.basicNum.gqcttNum = Company.basicNum.foreign_invest_num - 0 + Company.basicNum.shareholder_num - 0 || 0; // 股权穿透图
                for (var k in Company.basicNum) {
                    var val = Company.basicNum[k];
                    if (!val) {
                        Company.basicNum[k] = 0;
                    }
                }
                if (!hash) {
                    Company.showOverview();
                }
                // TODO 亿利资源集团有限公司 屏蔽 失信信息、被执行人 2019.05.29
                if (Company.companyCode === '1096707029') {
                    Company.basicNum.breakpromise_num = 0;
                    Company.basicNum.cur_debetor_num = 0;
                }

                // TODO 北京链家房地产经纪有限公司、失信信息数据错误、前端屏蔽 2018.07.25
                if (Company.companyCode === '1014373326') {
                    Company.basicNum.breakpromise_num = 0;
                }

                // TODO 山东省金融资产管理股份有限公司、被执行人数据错误、前端屏蔽 2018.08.29
                if (Company.companyCode === '1077967537') {
                    Company.basicNum.cur_debetor_num = 0;
                }
                Company.getCloudNum(hash);
                if (!hash) {
                    Company.dynaRanderM();
                    Company.RiskInfo();
                    Company.BusinessRiskInfo();
                    Company.IntellectualProperty();
                    Company.HistoryData();
                    Company.bindPopupEvent();

                }
            } else if (data.ErrorCode == -8) {
                //读取企业数据20次后的超限提醒，输入用户名密码后可再查
                layer.open({
                    type: 2,
                    title: '验证手机号后查看企业详细信息',
                    shadeClose: true,
                    shade: 0.5,
                    area: ['400px', '300px'],
                    content: ['checkphone.html?companycode=' + Company.companyCode, 'no'] //iframe的url
                });
            } else if (data.ErrorCode == -9) {
                //读取企业数据60次后的超限提醒，不可再查
                layer.msg('今日查看次数已超限，请明日再查');
            } else {
                console.log("error!");
            }
        });
    },
    getCloudNum: function(hash) {
        //获取cloud的basicNum。
        var parameter = { "Companycode": this.companyCode, "companyid": Company.companyId };
        myWfcAjax("getcloudbasicnum", parameter, function(data) {
            var data = JSON.parse(data);
            Company.showTagsNew(); //标签
            if (data && data.ErrorCode == 0 && data.Data && !$.isEmptyObject(data.Data)) {
                var res = data.Data;
                var tmpArr = ["sharedstock_num", "cbrcreditratingreport_num", "pevcquit_num", "merge_num", "guarantee_num", "banktrust_num", "declarcompany_num", "chatteimortgageitem_num", "equitypledgelist_num", "governmentgrants_num", "companyabs_num", "invest_orgs_num", "invest_events_num", "intellectual_pledgeds_num", "landmortgage_num", "stock_pledge_num", "financial_num", "financial_num", "mainbusinessstruct_num", "governmentproj_num", "product_num", "bid_new_num", "taxcredit_num", "ranked_num", "recruitt_num", "permission_num", "exist_profession", "exist_remain", "deptSchema_num", "report_num", 'license_abolish_num', 'company_certificate_num', 'telelic_num', "impexp_num", "fundpe_num", "landinfo_num", "corp_biz_num", "customer_supplier_num"];
                for (var i = 0; i < tmpArr.length; i++) {
                    //合并两个basicnum
                    var val = res[tmpArr[i]];
                    if (!val) {
                        Company.basicNum[tmpArr[i]] = 0;
                    } else {
                        Company.basicNum[tmpArr[i]] = val;
                    }
                }
                if (!hash) {
                    Company.showNumOnNav(Company.basicNum);
                    Company.financingInfo();
                    Company.BussinessInfo();

                } else {
                    Company[hash]();
                }

            } else {
                console.log("error!");
            }
        });
    },
    showCardAndBasic: function(hash) {
        //详情页卡片和基本信息,hash有值代表只读一个模块，现在用于f9
        Company.country = decodeURIComponent(Common.getUrlSearch('country'));
        var parameter = { "Companycode": this.companyCode };
        myWfcAjax("getcorpbasicinfo", parameter, function(data) {
            $(".module").show();
            var data = JSON.parse(data);
            if (data && data.ErrorCode == 0 && data.Data && !$.isEmptyObject(data.Data)) {
                var res = data.Data;
                Company.creditcode = res.corp.credit_code;
                Company.companyRegDate = res.corp.reg_date ? res.corp.reg_date.substring(0, 4) : "";
                Company.isOrNotPartnership = res.corp.isPartnership ? (res.corp.isPartnership == "true" ? true : false) : false;
                if (res.corp.corp_type_id && res.corp.corp_type_id == '298060000') {
                    Company.isHongkong = true;
                    $("#linkshowCompanyChange").find("span").html("变更记录")
                } else {
                    Company.isHongkong = false;
                }

                if (Company.country == "hkg") {
                    Company.isHongkong = true;
                }
                if (Company.country == "twn") {
                    Company.isTw = true;
                }
                var ZFlist = ['党', '军', '政府机构', '人大', '政协', '法院', '检察院', '共青团', '主席', '民主党派', '人民团体'];
                if (res.corp.corp_type_id && ZFlist.indexOf(Common.corpFroms[res.corp.corp_type_id]) > -1) {
                    Company.isGovernment = true;
                    $("#governmentOffice").find('span').text(Common.corpFroms[res.corp.corp_type_id]);
                } else {
                    Company.isGovernment = false;
                }
                var SHlist = ['社会组织', '社会团体', '民办非企业单位', '基金会', '境外基金会代表机构', '国际性社团', '外国商会', '涉外基金会', '社会团体', '民办非企业单位', '基金会', '境外基金会代表机构', '国际性社团', '外国商会', '涉外基金会']
                if (res.corp.corp_type_id && SHlist.indexOf(Common.corpFroms[res.corp.corp_type_id]) > -1) {
                    Company.isSociology = true;
                    $("#governmentOffice").find('span').text(Common.corpFroms[res.corp.corp_type_id]);
                    $("#governmentOffice").find('span').addClass('state-sh')
                } else {
                    Company.isSociology = false;
                }
                if (res.corp.corp_type_id && (Common.corpFroms[res.corp.corp_type_id] === '事业单位')) {
                    Company.isCause = true;
                    $("#governmentOffice").find('span').text(Common.corpFroms[res.corp.corp_type_id]);
                    $("#governmentOffice").find('span').addClass('state-sy')
                } else {
                    Company.isCause = false;
                }
                if (res.corp.corp_type_id && res.corp.corp_type_id == '912034101') {
                    Company.isLawOffice = true;
                    $("#lawOffice").find('span').text(Common.corpFroms[res.corp.corp_type_id]);
                } else {
                    Company.isLawOffice = false;
                }
                if (res.corp && res.corp.ent_log_v) {
                    $("#companyLogo").attr("src", Common.getlogoAccess(res.corp.ent_log_v, 'title')); //企业logo
                }
                var used_num = res.usednames;
                if (used_num && used_num.length > 0) {
                    $("#usedName").show();
                    $("#userNameNum").html(used_num.length);
                    var usedNameArr = res.usednames ? res.usednames : [];
                    var tmpArr = [];
                    for (var i = 0; i < usedNameArr.length; i++) {
                        tmpArr.push("<li>" + usedNameArr[i].used_name + "</li>")
                    }
                    $("#usedNameList").html(tmpArr.join(""));
                } else {
                    $("#usedName").hide()
                }
                Company.companyIndustry = (res.industryRelation && res.industryRelation.thematic_sectorid) ? res.industryRelation.thematic_sectorid : "";
                Company.companyBasicData = res;
                if (!hash) {
                    Company.showHeader(res.corp); //显示头部数据                    
                    // Company.showCompanyInfo($("#showOverview")); //显示工商信息
                    Company.showSHBDGbaseInfo($("#showOverview")); // 法人库-登记基本信息
                    Company.showSHBDGgjjzhInfo($("#showOverview")); // 法人库-公积金账户
                    Company.showSHBDGbcgjjzhInfo($("#showOverview")); // 法人库-补充公积金账户
                    Company.showSHBDGsbzhInfo($("#showOverview")); // 法人库-社保信息
                }
                Company.getBasicNum(hash); //获取basicnumm
            } else if (data.ErrorCode == -8) {
                //读取企业数据20次后的超限提醒，输入用户名密码后可再查
                layer.open({
                    type: 2,
                    title: '验证手机号后查看企业详细信息',
                    shadeClose: true,
                    shade: 0.5,
                    area: ['400px', '300px'],
                    content: ['checkphone.html?companycode=' + Company.companyCode, 'no'] //iframe的url
                });
            } else if (data.ErrorCode == -9) {
                //读取企业数据60次后的超限提醒，不可再查
                layer.msg('今日查看次数已超限，请明日再查');
            } else {
                console.log("error!");
            }
        });
    },
    showTag: function(tagArr) {
        //显示公司的标签
        var tmpHtml = [];
        if (tagArr && tagArr.length > 0) {
            for (var i = 0; i < tagArr.length; i++) {
                var tmpArr = tagArr[i].split("_");
                var type = tmpArr[0];
                var content = tmpArr[1];
                switch (type) {
                    case '股票':
                        {
                            if (content && content.split("|")[1]) {
                                var str = "";
                                if (is_terminal) {
                                    str = '!Page[Minute,' + content.split("|")[1] + ']';
                                }
                                tmpHtml.push('<a class="item-tag-list item-tag-stock" >' + content + '</a>')
                            }
                        }
                        break;
                    case '集团系':
                        {
                            var groupTmpArr = content.split("|");
                            if (content && groupTmpArr[0]) {
                                var str = "Group.html?groupId=" + groupTmpArr[1];
                                tmpHtml.push('<a class="item-tag-list item-tag-group" target="_blank" >' + groupTmpArr[0] + '</a>')
                            }
                        }
                        break;
                    default:
                        if (type && content) {
                            tmpHtml.push('<a class="item-tag-list item-tag-feture" data-val="' + content + '" data-type="' + type + '">' + content + '</a>')
                        }
                        break;
                }
            }
            return tmpHtml.join("")
        } else {
            return false;
        }
    },
    showTagsNew: function(res) {
        //显示头部标签
        var param = { "companycode": Company.companyCode, "pageNo": 0, "pageSize": 100 };

        myWfcAjax("getcompanytagsmerge", param, function(data) {
            var resData = JSON.parse(data);
            var htmlArr = [];
            var item = '';
            var labels = [];
            if (resData.ErrorCode == 0 && resData.Data && resData.Data.length && resData.Data.length > 0) {
                var res = resData.Data;
                $("#tagsCompany").append(Company.showTag(resData.Data));
                myWfcAjax("getcompanytags", param, function(data) {
                    var resData = JSON.parse(data);
                    var htmlArr = [];
                    var item = '';
                    var labels = [];
                    if (resData.ErrorCode == 0 && resData.Data && resData.Data.length && resData.Data.length > 0) {
                        var res = resData.Data;
                        var itemLen = res.length;
                        for (var j = 0; j < itemLen; j++) {
                            labels.push(res[j]);
                        }
                        Company.companyLabel = labels;
                        $("#tagsCompany").append('<span class="more-tags-company" id="moreTagsCompany">' + intl('138737' /* 查看更多 */ ) + '</span>');
                    }
                });
            }
        });
    },
    showHeader: function(res) {
        //显示头部数据
        Company.companyId = res.corp_old_id ? res.corp_old_id : "";
        companyName = res.corp_name || decodeURIComponent(Common.getUrlSearch('companyname'));
        Company.companyName = companyName;
        Company.windcode = res.windcode;
        $("#updateTime").text(res.corp_update_time ? Common.formatTime(res.corp_update_time) : ""); //数据更新时间
        $('#telCompany').text(res.tel || '--'); //公司电话
        var stremail = "";
        if (res.email_add && res.email_add.indexOf("@") > 0) {
            //防止出现“无”这类的数据
            stremail = "<a class='wi-secondary-color wi-link-color' href='mailto:" + res.email_add + "'>" + res.email_add + "</a>";
        } else {
            stremail = "--"
        }
        var strhttp = res.official_web ? Common.formatWebsite(res.official_web) : "--";
        $('#emailCompany').html(stremail); //公司email
        $('#wwwCompany').html(strhttp); //公司网址
        $('#addrCompany').text(res.reg_address || '--').attr("title", res.reg_address || '--'); //公司地址
        $('#companyNameText').html(companyName || '--'); //公司名称
        if (Company.strlen($('#companyNameText').html()) >= 44) {
            $('#companyNameText').css("fontSize", "22px")
        }
        if (Company.strlen($('#companyNameText').html()) >= 60) {
            $('#companyNameText').css("fontSize", "16px")
        }
        if (Company.strlen($('#companyNameText').html()) >= 75) {
            $('#companyNameText').css("fontSize", "14px")
        }
        var stateClass = ""; //公司状态
        switch (res.state) {
            case '撤销':
            case '吊销':
            case '迁出':
            case '停业':
            case '吊销,未注销':
            case '吊销,已注销':
            case '注销':
            case '非正常户':
            case '已告解散':
            case '解散':
            case '廢止':
            case '已废止':
            case '歇業':
            case '破產':
            case '破產程序終結(終止)':
            case '合併解散':
            case '撤銷':
            case '已终止':
            case '解散已清算完結':
            case '该单位已注销':
            case '核准設立，但已命令解散':
                stateClass = 'state-error';
                break;
            case '成立':
            case '存续':
            case '在业':
            case '正常':
            case '其他':
                stateClass = 'state-normal';
                break;
            default:
                stateClass = 'state-normal';
                break;
        }
        if (res.state) {
            $('#stateCompany').addClass(stateClass).text(res.state); //公司名称
        } else {
            $('#stateCompany').hide();
        }
        // ycye.cecil modify start 2020-10-23 
        // 增加空壳公司标签--暂时屏蔽
        // if (res.corp_tags.indexOf("shell_company") !== -1) {
        //     $('#stateCompany').parent().append(`<span class="state-error" id="shellCompany">疑似空壳公司</span>`)
        // }
        // ycye.cecil modify end 2020-10-23
        if (Company.isHongkong) {
            $('#hongkongCompany').show();
            //香港头部显示的字段和别的不一样
            var itemArr = [intl('138276' /* 公司英文名 */ ), intl('138679' /* 公司编号 */ ), intl('138860' /* 成立日期 */ ), intl('6233' /* 企业地址 */ )];
            var valArr = ["eng_name<br>", "biz_reg_no", "reg_date", "reg_address<br>"]
            var arr = [];
            for (var i = 0; i < valArr.length; i++) {
                if (valArr[i].indexOf("<br>") > 0) {
                    valArr[i] = valArr[i].replace("<br>", "");
                    arr.push('<span class="each-text-survey each-text-long">' + itemArr[i] + '：');
                } else {
                    arr.push('<span class="each-text-survey">' + itemArr[i] + '：');
                }

                switch (valArr[i]) {
                    case "date_established":
                        arr.push(Common.formatTime(res[valArr[i]]));
                        break;
                    case "reg_date":
                        arr.push(Common.formatTime(res[valArr[i]]));
                        break;
                    case "reg_capital":
                        arr.push(Common.formatMoney(res[valArr[i]]));
                        break;
                    default:
                        arr.push(Common.formatCont(res[valArr[i]]));
                        break;
                }

                arr.push("</span>")
            }
            $(".text-company-survey").attr("id", "textSurveyGlobal").empty().html(arr.join(""));
        }
        if (Company.isTw) {
            $('#TwCompany').show();
            //台湾头部显示的字段和别的不一样
            var itemArr = [intl('138679' /* 公司编号 */ ), intl('35779' /* 注册资本 */ ), intl('5529' /* 法定代表人 */ ), intl('138860' /* 成立日期 */ ), intl('6233' /* 企业地址 */ )];
            var valArr = ["biz_reg_no", "reg_capital", "legal_person_name", "date_established", "reg_address<br>"]
            var arr = [];
            for (var i = 0; i < valArr.length; i++) {
                if (valArr[i].indexOf("<br>") > 0) {
                    valArr[i] = valArr[i].replace("<br>", "");
                    arr.push('<span class="each-text-survey each-text-long">' + itemArr[i] + '：');
                } else {
                    arr.push('<span class="each-text-survey">' + itemArr[i] + '：');
                }

                switch (valArr[i]) {
                    case "date_established":
                        arr.push(Common.formatTime(res[valArr[i]]));
                        break;
                    case "reg_date":
                        arr.push(Common.formatTime(res[valArr[i]]));
                        break;
                    case "reg_capital":
                        arr.push(Common.formatMoney(res[valArr[i]]));
                        break;
                    default:
                        arr.push(Common.formatCont(res[valArr[i]]));
                        break;
                }

                arr.push("</span>")
            }
            $(".text-company-survey").attr("id", "textSurveyGlobal").empty().html(arr.join(""));
        }
        if (Company.isGovernment || Company.isSociology || Company.isCause) {
            $('#governmentOffice').show();
        }
        if (Company.isLawOffice) {
            $('#lawOffice').show();
        }
        document.title = companyName || '企业详情';
        Company.industryName = res.industry_name ? res.industry_name : "";
    },
    showNumOnNav: function(data) {
        //导航上，没有数量的要变灰
        setTimeout(() => {
            SearchNavInit.init(data);
        }, 50)
        var navNum = {};
        navNum.linkgetcourtdecision = data.judgeinfo_num ? data.judgeinfo_num : 0; //法院判决数量
        navNum.linkshowShareholder = data.shareholder_num ? data.shareholder_num : 0; //股东数量
        navNum.linkshowFinalBeneficiary = data.beneficiary_num ? data.beneficiary_num : 0; //最终受益人
        // navNum.linkshowControllerCompany = data.shareholder_num ? data.shareholder_num : 0; //疑似实际控股企业

        navNum.linkstockStructure = data.shareholder_num ? data.shareholder_num : 0; //股权结构
        // if (Company.isHongkong) {
        //     navNum.linkshowCompanyChange = data.orgnamechange_num ? data.orgnamechange_num : 0; //变更记录数量
        // } else {
        //     navNum.linkshowCompanyChange = data.change_record_num ? data.change_record_num : 0; //变更记录数量
        // }

        navNum.linkrequestSuspectedControl = data.act_controller_num ? data.act_controller_num : 0; //实际控制人数量
        navNum.linkgetcourtannouncement = data.coutnotice_num ? data.coutnotice_num : 0; //法院公告数量
        navNum.linkgetcourtopenannouncement = data.trialnotice_num ? data.trialnotice_num : 0; //开庭公告数量
        navNum.linkgetjudicialsale = data.judical_auction_num ? data.judical_auction_num : 0; //司法拍卖数量
        navNum.linkgetadministrativepenalty = data.punishment_num ? (data.business_punishment_num ? (parseInt(data.business_punishment_num) + parseInt(data.punishment_num)).toString() : data.punishment_num) : (data.business_punishment_num ? business_punishment_num : 0); //行政处罚数量
        navNum.linkgetoperationexception = data.bizexception_num ? data.bizexception_num : 0; //经营异常数量
        navNum.linkgetowingtax = data.owingtax_num ? data.owingtax_num : 0; //欠税信息数量
        navNum.linkshowChattelmortgage = data.chatteimortgageitem_num ? data.chatteimortgageitem_num : 0; //动产抵押数量
        navNum.linkshowPledgedstock = data.equitypledgelist_num ? data.equitypledgelist_num : 0; //股权质押数量

        // TODO 北京链家房地产经纪有限公司、失信信息数据错误、前端屏蔽 2018.07.25
        if (Company.companyCode === '1014373326') {
            navNum.linkgetdishonesty = 0;
        } else {
            navNum.linkgetdishonesty = data.breakpromise_num ? data.breakpromise_num : 0; //失信记录数量
        }

        // TODO 山东省金融资产管理股份有限公司、被执行人数据错误、前端屏蔽 2018.08.29
        if (Company.companyCode === '1077967537') {
            navNum.linkgetpersonenforced = 0;
        } else {
            navNum.linkgetpersonenforced = data.cur_debetor_num ? data.cur_debetor_num : 0; //被执行人数量
        }

        navNum.linkgetjudicialhelp = data.judicail_assist_num ? (data.judicail_assist_num - 0) : 0; // 司法协助
        navNum.linkgetsimplecancel = data.simplecancel_notice_num ? (data.simplecancel_notice_num - 0) : 0; // 简易注销
        navNum.linkgettaxillegal = data.illegaltax_num ? data.illegaltax_num : 0; //重大税收违法数量
        var taxNum = (data.tax_payer_num ? parseInt(data.tax_payer_num) : 0) + (data.taxcredit_num ? parseInt(data.taxcredit_num) : 0);
        Company.basicNum['taxNum'] = taxNum;
        navNum.linkgettaxcredit = taxNum //纳税人信息数量
        navNum.linkgetinspection = data.inspection_num ? data.inspection_num : 0; //抽查检查数量

        navNum.linkgetenvpenalties = data.envpenalty_num ? data.envpenalty_num : 0; //环保处罚数量
        navNum.linkgetillegal = data.illegal_num ? data.illegal_num : 0; //严重违法数量
        navNum.linkgetbrand = data.trademark_num ? data.trademark_num : 0; //商标数量
        navNum.linkgetpatent = data.patent_num ? data.patent_num : 0; //专利数量
        navNum.linkgetsoftwarecopyright = data.softwarecopyright_num ? data.softwarecopyright_num : 0; //软件著作权数量
        navNum.linkgetproductioncopyright = data.workcopyr_num ? data.workcopyr_num : 0; //作品著作权数量
        var permissionNum = (data.permission_num ? parseInt(data.permission_num) : 0) + (data.admin_licence_num ? parseInt(data.admin_licence_num) : 0)
            //Company.basicNum['permissionNum'] = permissionNum;
        navNum.linkgetpermission = permissionNum; //资质认证（许可）数量
        navNum.linkgetauthentication = data.certification_merge_num ? data.certification_merge_num : 0; //资质认证（认证）数量
        navNum.linkgetdomainname = data.domain_num ? data.domain_num : 0; //域名数量
        navNum.linkjobs = data.recruitt_num ? data.recruitt_num : 0; //招聘职位数量
        //navNum.linkproducts = data.product_num ? data.product_num : 0; //商品数量,产品信息数量
        navNum.linkbiddingInfo = data.bid_new_num ? data.bid_new_num : 0; //招投标（中标）数量
        navNum.linkinvitationBid = data.tender_num ? data.tender_num : 0; //招投标（招标）数量
        navNum.linkshowDirectInvestment = data.foreign_invest_num ? data.foreign_invest_num : 0; //对外投资数量
        navNum.linkshowControllerCompany = data.foreign_ctrl_num ? data.foreign_ctrl_num : 0; //控股企业数量
        navNum.linkshowAllInvestment = data.foreign_invest_num ? data.foreign_invest_num : 0; //全部投资投资数量
        navNum.linkinvestChart = data.foreign_invest_num ? data.foreign_invest_num : 0; //对外投资图谱
        navNum.linknewsList = data.advice_num ? data.advice_num : 0; //舆情监控
        navNum.linkemployeeSituation = data.exist_profession ? data.exist_profession : 0 //专业构成-员工情况
        navNum.linktalents = data.exist_remain ? data.exist_remain : 0 //人才指数
        navNum.linknewDepartment = data.deptSchema_num ? data.deptSchema_num : 0; //新增部门
        navNum.linkstructure = data.deptSchema_num ? data.deptSchema_num : 0; //组织机构
        navNum.linkshowguarantee = data.guarantee_num ? data.guarantee_num : 0; //担保数量
        navNum.linkshowMerge = data.merge_num ? data.merge_num : 0; //并购数量
        navNum.linkbusinessScope = data.mainbusinessstruct_num ? data.mainbusinessstruct_num : 0; //经营范围数量
        navNum.linkshowShares = data.sharedstock_num ? data.sharedstock_num : 0; //发行股票数量
        var sharedStockCount = (data.sharedbonds_num ? parseInt(data.sharedbonds_num) : 0) + (data.cbrcreditratingreport_num ? parseInt(data.cbrcreditratingreport_num) : 0)
        Company.basicNum['sharedStockCount'] = sharedStockCount;
        navNum.linkshowBond = sharedStockCount; //债券信息数量
        navNum.linkshowPVEC = data.pevc_num_new ? data.pevc_num_new : 0; //pevc数量
        navNum.linkgovernmentSupport01 = data.governmentgrants_num ? data.governmentgrants_num : 0; //政府补贴
        navNum.linkgovernmentSupport02 = data.governmentproj_num ? data.governmentproj_num : 0; //政府项目
        navNum.linkresearchReport02 = data.cbrcreditratingreport_num ? data.cbrcreditratingreport_num : 0; //发债公司评级报告
        navNum.linkresearchReport01 = data.report_num ? data.report_num : 0; //研报评级-研究报告
        navNum.linkshowCompanyBranchInfo = data.new_branch_num ? data.new_branch_num : 0; //分支机构数量
        navNum.linkshowMainMemberInfo = data.member_num ? data.member_num : 0; //主要成员数量
        navNum.linkshowGrantcredit = data.banktrust_num ? data.banktrust_num : 0; //授信信息数量
        navNum.linkshowDeclarcompany = data.declarcompany_num ? data.declarcompany_num : 0; //待上市数量
        navNum.linkfinancingMap = data.financingevent_num ? data.financingevent_num : 0; //融资图谱
        navNum.linkpvecOut = data.pevcquit_num ? data.pevcquit_num : 0; //pvec退出
        navNum.linkabsinfo = data.companyabs_num ? data.companyabs_num : 0; //abs        
        navNum.linkFinanceanalysisInfo = data.financial_num ? data.financial_num : 0; //财务数据数量
        navNum.linkgetcomparable = data.companylist_num ? data.companylist_num : 0; //竞争对手                   
        navNum.linkFinancialData = data.financial_num ? data.financial_num : 0; //财务数据
        navNum.linkFinanceanalysis = data.financial_num ? data.financial_num : 0; //财务数据
        navNum.linkshowYearReport = data.annual_num ? data.annual_num : 0; //企业年报
        navNum.linkgetweixin = data.webchat_public_num ? data.webchat_public_num : 0; //微信公众号
        navNum.linkgettoutiao = data.today_headline_num ? data.today_headline_num : 0; //头条号
        navNum.linkgetweibo = data.micro_blog_num ? data.micro_blog_num : 0; //微博账号

        navNum.linkhistorycompany = data.his_business_info_num == "true" ? data.his_business_info_num : 0; //历史工商信息
        navNum.linkhistorylegalperson = data.his_manager_num ? data.his_manager_num : 0; //历史法人和高管
        navNum.linkhistoryshareholder = data.his_shareholder_num ? data.his_shareholder_num : 0; //历史股东信息
        navNum.linkhistoryinvest = data.his_invest_num ? data.his_invest_num : 0; //历史对外投资

        navNum.linkgetdoublerandom = data.spot_check_num ? data.spot_check_num : 0; // 双随机抽查
        navNum.linkgetvoidagestatement = data.license_abolish_num ? data.license_abolish_num : 0; // 企业营业执照作废
        navNum.linkgetmultiplecertificate = data.company_certificate_num ? data.company_certificate_num : 0; // 企业多证合一
        navNum.linkgetteleLics = data.telelic_num ? data.telelic_num : 0; //电信许可数量
        navNum.linkgetclearinfo = data.liquidation_num ? data.liquidation_num : 0; // 企业清算
        navNum.linkhistorypersonenforced = data.his_debetor_num ? data.his_debetor_num : 0; // 历史被执行人
        navNum.linkgetpublicnotice = data.public_notice_num ? data.public_notice_num : 0; //公示催告数量
        navNum.linkgetfilinginfo = data.filing_info_num ? data.filing_info_num : 0; //立案信息数量
        navNum.linkgetlandmortgage = data.landmortgage_num ? data.landmortgage_num : 0; //土地抵押数量
        navNum.linkgetimpexp = data.impexp_num ? data.impexp_num : 0; //进出口信用数量
        navNum.linkgetfundpe = data.fundpe_num ? data.fundpe_num : 0; //私募基金数量
        navNum.linkshowLandInfo = data.landinfo_num ? data.landinfo_num : 0; //土地信息数量
        navNum.linkshowComBuInfo = data.corp_biz_num ? data.corp_biz_num : 0; //企业业务数量
        navNum.linkshowStockMortgage = data.stock_pledge_num ? data.stock_pledge_num : 0; //股票质押数量
        navNum.linkshowCustomersSup = data.customer_supplier_num ? data.customer_supplier_num : 0; //客户和供应商数量
        navNum.linkhistorypermission = data.his_permission_num ? data.his_permission_num : 0; // 历史行政许可
        navNum.linkhistorydomainname = data.his_domain_num ? data.his_domain_num : 0; // 历史网站备案
        navNum.linkhistoryoperationexception = data.his_bizexception_num ? data.his_bizexception_num : 0; // 历史经营异常
        navNum.linkhistorydishonesty = data.his_breakpromise_num ? data.his_breakpromise_num : 0; // 历史失信信息
        navNum.linkhistorycourtannouncement = data.his_coutnotice_num ? data.his_coutnotice_num : 0; // 历史法院公告
        navNum.linkhistorycourtdecision = data.his_judgeinfo_num ? data.his_judgeinfo_num : 0; // 历史裁判文书
        navNum.linkhistorycourtopenannouncement = data.his_trialnotice_num ? data.his_trialnotice_num : 0; // 历史开庭公告
        navNum.linkhistoryadministrativepenaltyBu = data.his_punishment_num ? (data.his_business_punishment_num ? (parseInt(data.his_business_punishment_num) + parseInt(data.his_punishment_num)).toString() : data.his_punishment_num) : (data.his_business_punishment_num ? his_business_punishment_num : 0); //历史行政处罚
        navNum.linkhistoryshowPledgedstock = data.his_stock_pledge_num ? data.his_stock_pledge_num : 0; // 历史股权出质
        navNum.linkhistoryshowChattelmortgage = data.his_chatteimortgageitem_num ? data.his_chatteimortgageitem_num : 0; // 历史动产抵押
        navNum.linkshowInvestmentAgency = data.invest_orgs_num ? data.invest_orgs_num : 0; // 投资机构
        navNum.linkshowInvestmentEvent = data.invest_events_num ? data.invest_events_num : 0; // 投资事件
        navNum.linkshowDeliveryAnnouncement = data.delivery_anns_num ? data.delivery_anns_num : 0; // 送达公告
        navNum.linkshowIntellectualPropertyRights = data.intellectual_pledgeds_num ? data.intellectual_pledgeds_num : 0; // 知识产权出质
        navNum.linkshowHeadOffice = data.headerquarters_num ? data.headerquarters_num : 0; // 总公司
        navNum.linkshowCoreTeam = data.coreteam_num ? data.coreteam_num : 0; //核心团队数量
        navNum.linkshowBuildOrder = data.build_qualification_num ? data.build_qualification_num : 0; //建筑资质数量
        navNum.linkshowGroupSystem = data.group_membercorp_num != "0" ? data.group_membercorp_num : (data.group_main_num ? data.group_main_num : 0); //集团系数量//getmaincorpnum+getmembercorpnum
        navNum.linkshowCompanyNotice = data.share_change_num ? data.share_change_num : 0; //企业公示,目前只显示变更
        navNum.linkgetcorpconsumption = data.corp_consumption_num ? data.corp_consumption_num : 0; //限制高消费数量
        navNum.linkgetendcase = data.end_case_num ? data.end_case_num : 0; //终本案件数量
        navNum.linkmarketdiscredited = data.sf_market_discredited_info_num ? data.sf_market_discredited_info_num : 0; //企业-证券期货市场失信信息
        navNum.linkgetevaluation = data.evaluation_num ? data.evaluation_num : 0; //询价评估数量
        navNum.linkshowfranchise = data.commercial_franchise_info_num ? data.commercial_franchise_info_num : 0; //商业特许经营数量
        navNum.linkshowBankruptcy = data.bankruptcy_num ? data.bankruptcy_num : 0; //破产重整数量
        navNum.linksupervisorypunishment = data.corp_regulatory_num ? data.corp_regulatory_num : 0; //监管处罚数量
        navNum.linkgetgovsupport = data.gov_support_num ? data.gov_support_num : 0; // 政府扶持
        navNum.linkgetrelatedparty = data.relate_dparty_num ? data.relate_dparty_num : 0; //业务关联方
        navNum.linkgetfinanciallicence = data.financial_licence_num ? data.financial_licence_num : 0; //金融许可
        if (!Company.basicNum.gqcttNum) {
            navNum.linkShareAndInvest = 0;
        }

        // if(Company.companyCode==1002502502||Company.companyCode==1058060339){
        //     //如果是万得和南京万得，财务数据不可点
        //     navNum.linkFinancialData=0;
        // }
        navNum.linklistInformation = data.ranked_num ? data.ranked_num : 0; //上榜信息数量
        for (var item in navNum) {
            if (navNum[item] == "0" || !navNum[item]) {
                $("#" + item).addClass("forbiddenJump");
            } else {
                var onNumArr = ["linkemployeeSituation", "linknewDepartment", "linkgetcomparable", "linktalents", "linkFinanceanalysisInfo", "linkFinancialData", "linkFinanceanalysis", "linkhistorycompany", "linkgetsimplecancel"]; //如果是新增部门，员工情况及竞争对手和人才指数无数据条数显示。
                if (onNumArr.indexOf(item) < 0) {
                    var num = navNum[item] > 99 ? "99+" : navNum[item];
                    $("#" + item).find("i").text(num);
                }
            }
        }
    },
    showOverview: function() {
        //基础信息
        var showListArr = ['showShareholder', 'getShareAndInvest', 'showFinalBeneficiary', 'showControllerCompany', 'showDirectInvestment', 'showMainMemberInfo', 'showCoreTeam', 'showGroupSystem', 'showHeadOffice', 'showCompanyBranchInfo', 'showCompanyChange', 'showCompanyNotice'];
        var showNameArr = [intl('138506' /* 股东信息 */ ), intl('138279' /* 股权穿透图 */ ), intl('138180' /* 最终受益人 */ ), intl('138589' /* 控股企业 */ ), intl('138724' /* 对外投资 */ ), intl('138503' /* 主要人员 */ ), intl('204942' /* 核心团队*/ ), intl('148622' /* 集团系 */ ), intl('204942' /* 总公司 */ ), intl('138183' /* 分支机构 */ ), intl('138206' /* 工商变更 */ ), intl('222474', '企业公示')];
        // var companyChange = "";
        var companyChange = true;
        // if (Company.isHongkong) {
        //     companyChange = "orgnamechange_num"; //变更记录数量
        // } else {
        //     companyChange = "change_record_num"; //变更记录数量
        // }

        var numArr = ['shareholder_num', 'gqcttNum', 'beneficiary_num', 'foreign_ctrl_num', 'foreign_invest_num', 'member_num', 'coreteam_num', 'group_membercorp_num|group_main_num', 'headerquarters_num', 'new_branch_num', companyChange, 'share_change_num']; //集团系,需要在下面进行处理
        var htmlArr = [];

        for (var i = 0; i < showListArr.length; i++) {
            if (numArr[i] == true || (Company.basicNum[numArr[i]] && Company.basicNum[numArr[i]] != 0)) {
                var moduleStr = '<div class="each-module" id="' + showListArr[i] + '"></div>'
                htmlArr.push(moduleStr);
            } else if (numArr[i] == 'group_membercorp_num|group_main_num' && ((Company.basicNum['group_membercorp_num'] && Company.basicNum['group_membercorp_num'] != 0) || (Company.basicNum['group_main_num'] && Company.basicNum['group_main_num'] != 0))) {
                var moduleStr = '<div class="each-module" id="' + showListArr[i] + '"></div>'
                htmlArr.push(moduleStr);
            }
        }
        $('#showOverview').append(htmlArr.join(""));
        //渲染基本信息模块
        for (var i = 0; i < showListArr.length; i++) {
            if (numArr[i] == true || (Company.basicNum[numArr[i]] && Company.basicNum[numArr[i]] != 0)) {
                if (typeof Company[showListArr[i]] == 'function') {
                    Company[showListArr[i]]($("#" + showListArr[i]));
                }
            } else if (numArr[i] == 'group_membercorp_num|group_main_num' && ((Company.basicNum['group_membercorp_num'] && Company.basicNum['group_membercorp_num'] != 0) || (Company.basicNum['group_main_num'] && Company.basicNum['group_main_num'] != 0))) {
                if (typeof Company[showListArr[i]] == 'function') {
                    Company[showListArr[i]]($("#" + showListArr[i]));
                }
            }
        }
    },
    financingInfo: function() {
        //金融行为
        var showNameArr = ["待上市信息", "债券信息"];
        var numArr = ['declarcompany_num', 'sharedStockCount', ];
        var fnArr = ['showDeclarcompany', 'showBond', ];

        // var showNameArr = ["竞争对手", "发行股票", "待上市信息", "债券信息", "PEVC", "PEVC退出", "投资机构", "投资事件", "并购信息", "担保信息", "银行授信", "政府补贴", "政府扶持", "ABS信息", intl('138281' /* 股权出质 */ ), "股票质押", "知识产权出质", intl('138207' /* 动产抵押 */ ), "土地抵押"];
        // var numArr = ['companylist_num', 'sharedstock_num', 'declarcompany_num', 'sharedStockCount', 'pevc_num_new', 'pevcquit_num', 'invest_orgs_num', 'invest_events_num', 'merge_num', 'guarantee_num', 'banktrust_num', 'governmentgrants_num', 'gov_support_num', 'companyabs_num', 'equitypledgelist_num', 'stock_pledge_num', 'intellectual_pledgeds_num', 'chatteimortgageitem_num', 'landmortgage_num'];
        // var fnArr = ['getcomparable', 'showShares', 'showDeclarcompany', 'showBond', 'showPVEC', 'pvecOut', 'showInvestmentAgency', 'showInvestmentEvent', 'showMerge', 'showguarantee', 'showGrantcredit', 'governmentSupport01', 'getgovsupport', 'absinfo', 'showPledgedstock', 'showStockMortgage', 'showIntellectualPropertyRights', 'showChattelmortgage', 'getlandmortgage'];        
        //竞争对手为第一个模块，为了让首页加载快速，放在第二模块里，可视觉上要放在第一模块，所以要和别的区分开。
        var parameter = { "companyCode": Company.companyCode, "companyId": Company.companyId, "companyName": Company.companyName };
        // if ($("#showCompanyChange").length > 0) {
        //     $('#showCompanyChange').before(htmlArrcComparable.join(""));
        // } else {
        //     $('#showOverview').append(htmlArrcComparable.join(""));
        // }
        var htmlArr = [];
        var showFlag = false; //默认不显示，如果有一个模块的basicnum大于0的时候，就显示此模块
        for (var i = 0; i < fnArr.length; i++) {
            if (numArr[i] == true || (Company.basicNum[numArr[i]] && Company.basicNum[numArr[i]] != 0)) {
                var moduleStr = '<div class="each-module" id="' + fnArr[i] + '"></div>';
                showFlag = true;
                htmlArr.push(moduleStr);
            }
        }
        $('#financingInfo').append(htmlArr.join(""));
        if (showFlag) {
            myWfcAjax("financial", parameter, function(data) {
                //请求金融行为数据
                var data = JSON.parse(data);
                if (Company.ModelHasData) {
                    Company.companyFinancingInfoData = data.Data;
                    if (!showFlag) {
                        Company.getcomparable($('#getcomparable'));
                        Company.moduleHaveNoData("#financingInfo", intl('142030' /* 暂无金融行为数据 */ ));
                    }
                    myWfcAjax("getcomparabletypes", parameter, function(data) {
                        var data = JSON.parse(data);
                        if ((data.ErrorCode == '0' || data.ErrorCode == 0) && data.Data) {
                            Company.companyCompareType = data.Data;
                        }
                        if (numArr[0] == true || Company.basicNum[numArr[0]]) {
                            if (typeof Company[fnArr[0]] == 'function') {
                                Company[fnArr[0]]($("#" + fnArr[0]));
                            }
                        }
                    });
                    for (var i = 1; i < fnArr.length; i++) {
                        if (numArr[i] == true || (Company.basicNum[numArr[i]] && Company.basicNum[numArr[i]] != 0)) {
                            if (typeof Company[fnArr[i]] == 'function') {
                                Company[fnArr[i]]($("#" + fnArr[i]));
                            }
                        }
                    }
                } else {
                    Company.moduleHaveNoData("#financingInfo", intl('142030' /* 暂无金融行为数据 */ ));
                }
            }, function(data) {
                Company.moduleHaveNoData("#financingInfo", intl('142030' /* 暂无金融行为数据 */ ));
            });
        } else {
            Company.moduleHaveNoData("#financingInfo", intl('142030' /* 暂无金融行为数据 */ ));
        }

    },
    returnSecondNav: function(numArr, fnArr, showNameArr, id) {
        var htmlArr = [];
        var firstHaveData = true; //找到数组里第一个有数据的，和选种状态有关
        var idName = id ? id : "secondNavList";
        htmlArr.push('<ul class="second-nav-list" id=' + idName + '>');
        var noListNumArr = ["deptSchema_num", "exist_profession", "exist_remain", "financial_num"];
        for (var i = 0; i < numArr.length; i++) {
            if (numArr[i] == true) {
                if (firstHaveData) {
                    var moduleStr = '<li class="current"><a href="#' + fnArr[i] + '">' + showNameArr[i] + '</a></li>';
                    htmlArr.push(moduleStr);
                    firstHaveData = false;
                } else {
                    var moduleStr = '<li ><a href="#' + fnArr[i] + '">' + showNameArr[i] + '</a></li>';
                    htmlArr.push(moduleStr);
                }
            } else if (Company.basicNum[numArr[i]] && Company.basicNum[numArr[i]] != 0) {
                if (noListNumArr.indexOf(numArr[i]) >= 0) {
                    if (firstHaveData) {
                        var moduleStr = '<li class="current"><a href="#' + fnArr[i] + '">' + showNameArr[i] + '</a></li>';
                        htmlArr.push(moduleStr);
                        firstHaveData = false;
                    } else {
                        var moduleStr = '<li ><a href="#' + fnArr[i] + '">' + showNameArr[i] + '</a></li>';
                        htmlArr.push(moduleStr);
                    }
                } else {
                    var num = Company.basicNum[numArr[i]] > 99 ? "99+" : Company.basicNum[numArr[i]]
                    if (firstHaveData) {
                        var moduleStr = '<li class="current"><a href="#' + fnArr[i] + '">' + showNameArr[i] + '(' + num + ')</a></li>';
                        htmlArr.push(moduleStr);
                        firstHaveData = false;
                    } else {
                        var moduleStr = '<li ><a href="#' + fnArr[i] + '">' + showNameArr[i] + '(' + num + ')</a></li>';
                        htmlArr.push(moduleStr);
                    }
                }
            } else {
                var moduleStr = '<li class="no-data-jump"><a>' + showNameArr[i] + '(0)</a></li>';
                htmlArr.push(moduleStr);
            }
        }
        htmlArr.push('</ul>');
        return ""
    },
    FinanceanalysisInfo: function($dom) {
        //财务信息
        var showListArr = ["FinancialData", "Financeanalysis"];
        var showNameArr = [intl('2295' /* 财务报表 */ ), intl('138709' /* 财务指标 */ )];
        var numArr = ["financial_num", "financial_num"];
        var fnArr = ["FinancialData", "Financeanalysis"]
        var htmlArr = [];
        for (var i = 0; i < showListArr.length; i++) {
            if (numArr[i] == true || (Company.basicNum[numArr[i]] && Company.basicNum[numArr[i]] != 0)) {
                var moduleStr = '<div class="each-module" id="' + showListArr[i] + '"></div>';
                htmlArr.push(moduleStr);
            }
        }
        var $container = $dom ? $dom : $('#workspace');
        $container.empty().html(htmlArr.join(""));
        Company.FinancialData(null, null, $("#FinancialData"));
        Company.Financeanalysis(null, $("#Financeanalysis"));
    },
    BussinessInfo: function() {
        ///经营状况
        var showNameArr = ["主营构成", "企业业务", "员工情况", "新增部门", "公司研报", "上榜信息", "政府项目", "招标", "招聘", "税务信息", "土地信息", "进出口信用", "资质信息", "行政许可[工商局]", "行政许可[信用中国]", "金融许可", "电信许可", "商业特许经营", "建筑资质", "私募基金", "客户和供应商", "业务关联方", "多证合一", "作废声明"];
        var numArr = ['mainbusinessstruct_num', 'corp_biz_num', 'exist_profession', 'deptSchema_num', 'report_num', 'ranked_num', 'governmentproj_num', 'bid_new_num', 'recruitt_num', 'taxNum', 'landinfo_num', 'impexp_num', true, 'permission_num', 'admin_licence_num', 'financial_licence_num', 'telelic_num', 'commercial_franchise_info_num', 'build_qualification_num', 'fundpe_num', 'customer_supplier_num', 'relate_dparty_num', 'company_certificate_num', 'license_abolish_num'];
        var fnArr = ['businessScope', 'showComBuInfo', 'employeeSituationData', 'newDepartment', 'researchReport01', 'listInformation', 'governmentSupport02', 'biddingInfo', 'jobs', 'gettaxcredit', 'showLandInfo', 'getimpexp', 'getshbdgpermission', 'getpermission', 'getpermission02', 'getfinanciallicence', 'getteleLics', 'showfranchise', 'showBuildOrder', 'getfundpe', 'showCustomersSup', 'getrelatedparty', 'getmultiplecertificate', 'getvoidagestatement'];
        var htmlArr = [];
        var showFlag = false; //默认不显示，如果有一个模块的basicnum大于0的时候，就显示此模块
        if (!Company.basicNum["permission_num"] || Company.basicNum["permission_num"] == 0) {
            $("#linkgetpermission").attr("href", "#getpermission02");
        }
        for (var i = 0; i < fnArr.length; i++) {
            if (numArr[i] == true || (Company.basicNum[numArr[i]] && Company.basicNum[numArr[i]] != 0)) {
                var moduleStr = '<div class="each-module" id="' + fnArr[i] + '"></div>';
                showFlag = true;
                htmlArr.push(moduleStr);
            }
        }
        $('#BussinessInfo').append(htmlArr.join(""));
        var parameter = { "companyCode": Company.companyCode, "companyId": Company.companyId, "industrycode": Company.companyIndustry };
        if (showFlag) {
            myWfcAjax("operation", parameter, function(data) {
                //请求经营信息数据
                var data = JSON.parse(data);
                if (Company.ModelHasData) {
                    Company.companyBussinessInfoData = data.Data;
                    for (var i = 0; i < fnArr.length; i++) {
                        if (numArr[i] == true || (Company.basicNum[numArr[i]] && Company.basicNum[numArr[i]] != 0)) {
                            if (typeof Company[fnArr[i]] == 'function') {
                                // if (fnArr[i] == "FinancialData" || fnArr[i] == "Financeanalysis") {
                                //     Company[fnArr[i]]();
                                // } else {
                                //     Company[fnArr[i]]($("#" + fnArr[i]));                                
                                // }
                                Company[fnArr[i]]($("#" + fnArr[i]));
                            }
                        }
                    }
                } else {
                    Company.moduleHaveNoData("#BussinessInfo", intl('142031' /* 暂无经营状况数据 */ ));
                }
            }, function(data) {
                Company.moduleHaveNoData("#BussinessInfo", intl('142031' /* 暂无经营状况数据 */ ));
            });
        } else {
            Company.moduleHaveNoData("#BussinessInfo", intl('142031' /* 暂无经营状况数据 */ ));
        }
    },
    RiskInfo: function() {
        ///法律诉讼
        var showNameArr = ["裁判文书", "失信信息", "被执行人", "限制高消费", "终本案件", "司法协助", "立案信息", "开庭公告", "法院公告", "送达公告", "公示催告"];
        var numArr = ['judgeinfo_num', 'breakpromise_num', 'cur_debetor_num', 'corp_consumption_num', 'end_case_num', 'judicail_assist_num', 'filing_info_num', 'trialnotice_num', 'coutnotice_num', 'delivery_anns_num', 'public_notice_num'];
        var showListArr = ['getcourtdecision', 'getdishonesty', 'getpersonenforced', 'getcorpconsumption', 'getendcase', 'getjudicialhelp', 'getfilinginfo', 'getcourtopenannouncement', 'getcourtannouncement', 'showDeliveryAnnouncement', 'getpublicnotice'];
        var fnArr = ['getcourtdecision', 'getdishonesty', 'getpersonenforced', 'getcorpconsumption', 'getendcase', 'getjudicialhelp', 'getfilinginfo', 'getcourtopenannouncement', 'getcourtannouncement', 'showDeliveryAnnouncement', 'getpublicnotice'];
        var htmlArr = [];
        var showFlag = false; //默认不显示，如果有一个模块的basicnum大于0的时候，就显示此模块
        for (var i = 0; i < showListArr.length; i++) {
            if (numArr[i] == true || (Company.basicNum[numArr[i]] && Company.basicNum[numArr[i]] != 0)) {
                var moduleStr = ""
                if (showListArr[i] == "getcourtdecision") {
                    moduleStr = Company.drawCourt();
                }
                moduleStr += '<div class="each-module" id="' + showListArr[i] + '"></div>';
                showFlag = true;
                htmlArr.push(moduleStr);
            }
        }
        $('#RiskInfo').append(htmlArr.join(""));
        var parameter = { "companyCode": Company.companyCode, "companyId": Company.companyId, "year": Company.companyRegDate };
        if (showFlag) {
            $('#RiskInfo .title-module').after('<div class="each-module" id="chartRisk"><div class="widget-model"><div class="widget-header"><span class="fl">统计分析</span></div></div><div id="chartRiskCon"></div></div>');
            myWfcAjax("getlawsuityearstatistics", parameter, function(data) {
                //请求法律诉讼统计图
                var res = JSON.parse(data);
                if (res.Data && !Company.isEmptyObjForLaw(res)) {
                    Company.drawRiskStatistics(res.Data); //画图
                } else {
                    $("#chartRisk").hide();
                }
            }, function() {
                $("#chartRisk").hide();
            });
            myWfcAjax("litigation", parameter, function(data) {
                //请求知识产权数据
                var data = JSON.parse(data);
                if (Company.ModelHasData) {
                    Company.companyRiskInfoData = data.Data;
                    for (var i = 0; i < fnArr.length; i++) {
                        if (numArr[i] == true || (Company.basicNum[numArr[i]] && Company.basicNum[numArr[i]] != 0)) {
                            if (typeof Company[fnArr[i]] == 'function') {
                                Company[fnArr[i]]($("#" + fnArr[i]));
                            }
                        }
                    }
                } else {
                    Company.moduleHaveNoData("#RiskInfo", intl('142032' /* 暂无法律诉讼数据 */ ));
                }
            }, function(data) {
                Company.moduleHaveNoData("#RiskInfo", intl('142032' /* 暂无法律诉讼数据 */ ));
            });
        } else {
            Company.moduleHaveNoData("#RiskInfo", intl('142032' /* 暂无法律诉讼数据 */ ));
        }
    },
    drawRiskStatistics: function(data) {
        var res = Company.resetRiskStatisticsData(data);
        Highcharts.setOptions({
            lang: {
                downloadJPEG: intl('222618') /* 下载JPEG图片 */ ,
                downloadPNG: intl('222621') /* 下载PNG图片 */ ,
            }
        })
        $("#chartRiskCon").highcharts({
            credits: {
                enabled: false // 禁用版权信息
            },
            // ycye.cecil modify UI颜色 2020-10-26 start
            colors: ['#2277a2', '#f68717', '#5fbebf', '#e05d5d', '#4a588e', '#e4c557', '#63a074', '#906f54', '#9da9b4', '#8862ac'],
            // ycye.cecil modify UI颜色 2020-10-26 end
            chart: {
                type: 'column'
            },
            plotOptions: {
                column: {
                    borderWidth: 0,
                    pointPadding: 0,
                    maxPointWidth: 20,
                    PointWidth: 20
                },
                series: {
                    // ycye.cecil modify UI颜色 2020-10-28 start
                    borderWidth: 0,
                    // ycye.cecil modify UI颜色 2020-10-28 end
                    dataLabels: {
                        enabled: true,
                        allowOverlap: true, //相邻两个数字太长的时允许重叠
                        align: 'center',
                        crop: false, //让数字一直显示在顶部，而不根据需要自动调整到内部。
                        overflow: "none", //让数字一直显示在顶部，而不根据需要自动调整到内部。
                        // ycye.cecil modify UI颜色 2020-10-28 start
                        useHTML: true,
                        formatter: function() {
                                return `<span style="color:` + this.point.color + `">` + this.point.y + `</span>`
                            }
                            // ycye.cecil modify UI颜色 2020-10-28 end
                    },
                },
                column: {
                    pointWidth: 20,
                }
            },
            tooltip: {
                formatter: function() {
                    return this.series.name + ":" + this.y
                }
            },
            title: {
                text: '法律诉讼年份分布',
                align: 'left',
                style: {
                    "color": "#333333",
                    "fontSize": "12px",
                },
                margin: 30
            },
            noData: {
                style: {
                    fontWeight: 'bold',
                    fontSize: '16px',
                    color: '#666666'
                }
            },
            navigation: {
                buttonOption: {
                    align: 'right',
                    y: 10
                }
            },
            exporting: {
                buttons: {
                    contextButton: {
                        // ycye.cecil modify UI颜色 2020-10-28 start
                        symbol: 'url(../resource/images/Company/export_download.png)',
                        // ycye.cecil modify UI颜色 2020-10-28 end
                        symbolSize: 20,
                        symbolX: 23,
                        symbolY: 22,
                        menuItems: [
                            null, null, defaultMenuItem[3], defaultMenuItem[4]
                        ]
                    }
                }
            },
            xAxis: [{
                categories: res['type'],
                crosshair: true,
                type: 'category',
                labels: {
                    style: { color: '#333333' }
                },
                tickWidth: 0,
                lineColor: '#333333'
            }],
            yAxis: [{
                title: {
                    text: '',
                },
                labels: {
                    style: { color: '#333333' }
                },
                lineWidth: 1,
                lineColor: '#333333',
                //     labels: {
                //         enabled: false
                //     },
                gridLineWidth: 0,
                //     visible: false
            }],
            legend: {
                borderWidth: 0,
                // ycye.cecil modify UI颜色 2020-10-28 start
                symbolPadding: 5,
                symbolRadius: 2,
                itemStyle: {
                    "fontSize": "12px"
                }
                // ycye.cecil modify UI颜色 2020-10-28 end
            },
            series: res['data']
        });
        // ycye.cecil modify UI颜色 2020-10-28 start
        $('.highcharts-point').attr("width", "16px")
        $('.highcharts-button-symbol').attr("width", "19.6px")
        $('.highcharts-button-symbol').attr("height", "18px")
            // ycye.cecil modify UI颜色 2020-10-28 end
    },
    resetRiskStatisticsData: function(data) {
        //把法律诉讼的数据格式化成需要的
        var resObj = {}
        var res = [];
        var categoryArr = [];
        for (var i = 0; i < data.length; i++) {
            categoryArr.push(Object.keys(data[i])[0])
        }
        categoryArr = categoryArr.sort();
        var typeArr = ["失信人", "法院公告", "裁判文书", "开庭公告", "被执行人"];
        var typeArr02 = ["discredited_person", "court_announcement", "judgeinfo", "court_session_announcement", "concerned_person"];
        resObj['type'] = categoryArr;
        for (i = 0; i < typeArr.length; i++) {
            var tmpArr = [];
            for (var k = 0; k < data.length; k++) {
                var eachData = data[k][categoryArr[k]][typeArr02[i]]
                tmpArr.push(eachData != "0" ? eachData : "");
            }
            if (tmpArr.reduce(function(prev, cur) { return prev + parseInt(cur ? cur : 0) }, 0) != 0) {
                var tmpObj = {};
                tmpObj['name'] = typeArr[i];
                tmpObj["data"] = tmpArr;
                res.push(tmpObj);
            }
        }
        resObj['data'] = res;
        return resObj
    },
    BusinessRiskInfo: function() {
        //经营风险
        var showNameArr = ["工商行政处罚", "行政处罚[信用中国]", "监管处罚", "环保处罚", "税收违法", "欠税信息", "证券市场失信", "经营异常", "严重违法", "司法拍卖", "询价评估", "破产重整", "清算信息", "简易注销", "工商年检", "抽查检查", "双随机抽查"];
        var showListArr = ['getshbdgpunishment', 'getadministrativepenalty', 'showSupervisorypunishment', 'getenvpenalties', 'gettaxillegal', 'getowingtax', 'getmarketdiscredited', 'getoperationexception', 'getillegal', 'getjudicialsale', 'getevaluation', 'showBankruptcy', 'getclearinfo', 'getsimplecancel', 'getshbdgGSNJ', 'getinspection', 'getdoublerandom'];
        var numArr = [true, 'punishment_num', 'corp_regulatory_num', 'envpenalty_num', 'illegaltax_num', 'owingtax_num', 'sf_market_discredited_info_num', 'bizexception_num', 'illegal_num', 'judical_auction_num', 'evaluation_num', 'bankruptcy_num', 'liquidation_num', 'simplecancel_notice_num', true, 'inspection_num', 'spot_check_num'];
        var fnArr = ['getshbdgpunishment', 'getadministrativepenalty', 'showSupervisorypunishment', 'getenvpenalties', 'gettaxillegal', 'getowingtax', 'getmarketdiscredited', 'getoperationexception', 'getillegal', 'getjudicialsale', 'getevaluation', 'showBankruptcy', 'getclearinfo', 'getsimplecancel', 'getshbdgGSNJ', 'getinspection', 'getdoublerandom'];
        var htmlArr = [];
        var showFlag = false; //默认不显示，如果有一个模块的basicnum大于0的时候，就显示此模块
        for (var i = 0; i < showListArr.length; i++) {
            if (numArr[i] == true || (Company.basicNum[numArr[i]] && Company.basicNum[numArr[i]] != 0)) {
                var moduleStr = '<div class="each-module" id="' + showListArr[i] + '"></div>';
                showFlag = true;
                htmlArr.push(moduleStr);
            }
        }
        $('#BusinessRiskInfo').append(htmlArr.join(""));
        var parameter = { "companyCode": Company.companyCode, "companyId": Company.companyId };
        if (showFlag) {
            myWfcAjax("bussinessrisks", parameter, function(data) {
                //请求知识产权数据
                var data = JSON.parse(data);
                if (Company.ModelHasData) {
                    Company.companyBusinessRiskData = data.Data;
                    for (var i = 0; i < fnArr.length; i++) {
                        if (numArr[i] == true || (Company.basicNum[numArr[i]] && Company.basicNum[numArr[i]] != 0)) {
                            if (typeof Company[fnArr[i]] == 'function') {
                                Company[fnArr[i]]($("#" + fnArr[i]));
                            }
                            if (numArr[i] == 'business_punishment_num' && Company.basicNum[numArr[i]] != 0) {
                                $("#linkgetadministrativepenalty").attr("href", "#getadministrativepenaltyBu");
                            }
                        }
                    }
                } else {
                    Company.moduleHaveNoData("#BusinessRiskInfo", intl('142029' /* 暂无经营风险数据 */ ));
                }
            }, function(data) {
                Company.moduleHaveNoData("#BusinessRiskInfo", intl('142029' /* 暂无经营风险数据 */ ));
            });
        } else {
            Company.moduleHaveNoData("#BusinessRiskInfo", intl('142029' /* 暂无经营风险数据 */ ));
        }
    },
    ModelHasData: function(numArr) {
        //通过判断每个模块的basic相加的总数判断大模块有没有数据。
        var flag = 0;
        for (var i = 0; i < numArr.length; i++) {
            var tmpNum = Company.basicNum[numArr[i]] ? parseInt(Company.basicNum[numArr[i]]) : 0;
            flag = tmpNum + flag;
        }
        if (flag > 0) {
            return true;
        } else {
            return false;
        }
    },
    MedicineData: function() {
        //医药数据
        var params = { "companyId": Company.companyId, "companycode": Company.companyId }
        $('#MedicineData').removeClass('module-dyna-hidden'); //展示医药数据
        var showNameArr = ["产品信息", "市场销售", "采招中标"];
        var numArr = [true, true, true];
        var fnArr = ["showmedicineinfo", "showmedicinemarket", "showmedicinebid"];
        var htmlArr = [];
        var showFlag = false; //默认不显示，如果有一个模块的basicnum大于0的时候，就显示此模块
        for (var i = 0; i < fnArr.length; i++) {
            if (numArr[i] == true || (Company.basicNum[numArr[i]] && Company.basicNum[numArr[i]] != 0)) {
                var moduleStr = ""
                moduleStr = '<div class="each-module" id="' + fnArr[i] + '"></div>';
                showFlag = true;
                htmlArr.push(moduleStr);
            }
        }
        $('#MedicineData').append(htmlArr.join(""));
        if (showFlag) {
            //请求医药权数据
            for (var i = 0; i < fnArr.length; i++) {
                if (numArr[i] == true || (Company.basicNum[numArr[i]] && Company.basicNum[numArr[i]] != 0)) {
                    if (typeof Company[fnArr[i]] == 'function') {
                        Company[fnArr[i]]($("#" + fnArr[i]));
                    }
                }
            }
        } else {
            Company.moduleHaveNoData("#MedicineData", intl('', '暂无医药数据'));
        }
    },
    productType: "化学药品",
    productTypeArr: ['化学药品', '中药', '生物制品', '器械'],
    medicineInfoTab: "临床申请记录",
    showmedicineinfo: function($dom, index, index02) {
        //医药-产品信息
        var params = { "companyId": Company.companyId, "companycode": Company.companyId }
        myWfcAjax("getproductstatics", params, function(secondData) {
            var resSecondData = JSON.parse(secondData).Data;
            if (resSecondData && !$.isEmptyObject(resSecondData)) {
                var chemicalDrugObj = resSecondData.chemicalDrug && !$.isEmptyObject(resSecondData.chemicalDrug);
                var chineseMedicineObj = resSecondData.chineseMedicine && !$.isEmptyObject(resSecondData.chineseMedicine);
                var biologicalProductObj = resSecondData.biologicalProduct && !$.isEmptyObject(resSecondData.biologicalProduct);
                var instrumentObj = resSecondData.instrument && !$.isEmptyObject(resSecondData.instrument);
                Company.basicNum.num01 = chemicalDrugObj ? (Number(resSecondData.chemicalDrug.clinicalApplication) + Number(resSecondData.chemicalDrug.clinicalTest) + Number(resSecondData.chemicalDrug.listingApplication) + Number(resSecondData.chemicalDrug.listedApproved)) : 0
                Company.basicNum.num02 = chineseMedicineObj ? (Number(resSecondData.chineseMedicine.clinicalApplication) + Number(resSecondData.chineseMedicine.clinicalTest) + Number(resSecondData.chineseMedicine.listingApplication) + Number(resSecondData.chineseMedicine.listedApproved)) : 0
                Company.basicNum.num03 = biologicalProductObj ? (Number(resSecondData.biologicalProduct.clinicalApplication) + Number(resSecondData.biologicalProduct.clinicalTest) + Number(resSecondData.biologicalProduct.listingApplication) + Number(resSecondData.biologicalProduct.listedApproved)) : 0
                Company.basicNum.num04 = instrumentObj ? (Number(resSecondData.instrument.listingApplication) + Number(resSecondData.instrument.listedApproved)) : 0

                Company.basicNum.num01_clinicalApplication = chemicalDrugObj ? Number(resSecondData.chemicalDrug.clinicalApplication) : 0;
                Company.basicNum.num01_clinicalTest = chemicalDrugObj ? Number(resSecondData.chemicalDrug.clinicalTest) : 0;
                Company.basicNum.num01_listingApplication = chemicalDrugObj ? Number(resSecondData.chemicalDrug.listingApplication) : 0;
                Company.basicNum.num01_listedApproved = chemicalDrugObj ? Number(resSecondData.chemicalDrug.listedApproved) : 0;

                Company.basicNum.num02_clinicalApplication = chineseMedicineObj ? Number(resSecondData.chineseMedicine.clinicalApplication) : 0;
                Company.basicNum.num02_clinicalTest = chineseMedicineObj ? Number(resSecondData.chineseMedicine.clinicalTest) : 0;
                Company.basicNum.num02_listingApplication = chineseMedicineObj ? Number(resSecondData.chineseMedicine.listingApplication) : 0;
                Company.basicNum.num02_listedApproved = chineseMedicineObj ? Number(resSecondData.chineseMedicine.listedApproved) : 0;

                Company.basicNum.num03_clinicalApplication = biologicalProductObj ? Number(resSecondData.biologicalProduct.clinicalApplication) : 0;
                Company.basicNum.num03_clinicalTest = biologicalProductObj ? Number(resSecondData.biologicalProduct.clinicalTest) : 0;
                Company.basicNum.num03_listingApplication = biologicalProductObj ? Number(resSecondData.biologicalProduct.listingApplication) : 0;
                Company.basicNum.num03_listedApproved = biologicalProductObj ? Number(resSecondData.biologicalProduct.listedApproved) : 0;

                Company.basicNum.num04_listingApplication = instrumentObj ? Number(resSecondData.instrument.listingApplication) : 0;
                Company.basicNum.num04_listedApproved = instrumentObj ? Number(resSecondData.instrument.listedApproved) : 0;

                var thName = [intl('138741' /* 序号 */ ), '受理号', '药品名称', '药品类型', '申请人', 'CDE受理日期', '审评状态'];
                var fields = ["NO.", "acceptanceNumber", "drugName", "drugType", "cdeApplicant", "cdeUndertakingDate", "registrationReviewStatus"];
                if (index && !(/\d/.test(index))) {
                    index = Company.productTypeArr.indexOf(index);
                }
                var initIndex = index ? index : "0";
                var numArr = ["num01", "num02", "num03", "num04"]
                if (initIndex == 0) {
                    for (var i = 0; i < numArr.length; i++) {
                        if (Company.basicNum[numArr[i]] && Company.basicNum[numArr[i]] != 0) {
                            break;
                        } else {
                            initIndex++;
                            if (initIndex >= numArr.length) {
                                initIndex = 0;
                            }
                            Company.productType = Company.productTypeArr[initIndex]
                        }
                    }
                }
                if (!index02) {
                    if (initIndex == 3) {
                        index02 = "上市申请记录"
                        Company.medicineInfoTab = "上市申请记录"
                    } else {
                        Company.medicineInfoTab = "临床申请记录"
                    }
                }
                switch (parseInt(initIndex)) {
                    case 0:
                        Company.productType = '化学药品'
                        break;
                    case 1:
                        Company.productType = '中药'
                        break;
                    case 2:
                        Company.productType = '生物制品'
                        break;
                    case 3:
                        Company.productType = '器械'
                        break;
                    default:
                        Company.productType = '化学药品'
                        break;
                }
                var interfaceTab = "getclinicalapplicationrecord";
                if (Company.productType != '器械') {
                    switch (index02) {
                        case "临床申请记录":
                            {
                                interfaceTab = 'getclinicalapplicationrecord';
                                thName = [intl('138741' /* 序号 */ ), '受理号', '药品名称', '药品类型', '申请人', 'CDE受理日期', '审评状态'];
                                fields = ["NO.", "acceptanceNumber", "drugName", "drugType", "cdeApplicant", "cdeUndertakingDate", "registrationReviewStatus"];
                            }
                            break;
                        case "临床试验记录":
                            {
                                interfaceTab = 'getclinicalexperimentrecord';
                                thName = [intl('138741' /* 序号 */ ), '登记号', '药品名称', '试验阶段', '试验类型', '最新状态日期', '试验状态'];
                                fields = ["NO.", "registNo", "drugName", "testStage", "testType", "noticeDate", "testState"];
                            }
                            break;
                        case "上市申请记录":
                            {
                                interfaceTab = 'getlistapplicationrecord';
                                thName = [intl('138741' /* 序号 */ ), '受理号', '药品名称', '药品类型', '申请人', 'CDE受理日期', '审评状态'];
                                fields = ["NO.", "acceptanceNumber", "drugName", "drugType", "cdeApplicant", "cdeUndertakingDate", "registrationReviewStatus"];
                            }
                            break;
                        case "获批上市记录":
                            {
                                interfaceTab = 'getapprovedlistedrecord';
                                thName = [intl('138741' /* 序号 */ ), '药品各称', '剂型', '规格', '批准文号', '批准日期', '上市许可持有人'];
                                fields = ["NO.", "drugName", "doestype", "specifications", "approvalNo", "approvalDate", "licensePerson"];
                            }
                            break;
                        default:
                            {
                                interfaceTab = 'getclinicalapplicationrecord';
                                thName = [intl('138741' /* 序号 */ ), '受理号', '药品名称', '药品类型', '申请人', 'CDE受理日期', '审评状态'];
                                fields = ["NO.", "acceptanceNumber", "drugName", "drugType", "cdeApplicant", "cdeUndertakingDate", "registrationReviewStatus"];
                            }
                            break;
                    }
                } else {
                    switch (index02) {
                        case "上市申请记录":
                            thName = [intl('138741' /* 序号 */ ), '受理号', '器械名称', '申请类型', '办理状态', '状态开始日期', '批件发布日期'];
                            fields = ["NO.", "registerNum", "instrumentName", "reviewStatus", "processStatus", "startTime", "pubTime"];
                            interfaceTab = 'getinstrumentlistapplicationrecord'
                            break;
                        case "获批上市记录":
                            thName = [intl('138741' /* 序号 */ ), '器械名称', '型号规格', '注册证编号', '批准日期', '有效期至', '管理类型'];
                            fields = ["NO.", "toolName", "type", "regiestNumber", "approveDate", "effectiveDate", "mType"];
                            interfaceTab = 'getinstrumentapprovedlistedrecord'
                            break;
                        default:
                            interfaceTab = 'getinstrumentlistapplicationrecord';
                            thName = [intl('138741' /* 序号 */ ), '受理号', '器械名称', '申请类型', '办理状态', '状态开始日期', '批件发布日期'];
                            fields = ["NO.", "registerNum", "instrumentName", "reviewStatus", "processStatus", "startTime", "pubTime"];
                            break;
                    }
                }
                var tableSetting = [{
                        fn: "showmedicineinfo",
                        interface: interfaceTab,
                        moduleName: '产品信息',
                        tabChange: {
                            type: ['化学药品', '中药', '生物制品', '器械'],
                            typeCnName: ['化学药品', '中药', '生物制品', '器械'],
                            typeName: "type",
                            typeBasicNum: ["num01", "num02", "num03", "num04"]
                        },
                        modelNum: "num01",
                        moreLink: "showmedicineinfo",
                        thWidthRadio: ["5%", "20%", "15%", "15%", "15%", "15%", "15%"],
                        thName: thName,
                        align: [0, 0, 0, 0, 0],
                        fields: fields,
                    },
                    {
                        fn: "showmedicineinfo",
                        interface: interfaceTab,
                        moduleName: '产品信息',
                        modelNum: "num02",
                        moreLink: "showmedicineinfo",
                        thWidthRadio: ["5%", "20%", "15%", "15%", "15%", "15%", "15%"],
                        thName: thName,
                        align: [0, 0, 0, 0, 0],
                        fields: fields,
                    },
                    {
                        fn: "showmedicineinfo",
                        interface: interfaceTab,
                        moduleName: '产品信息',
                        modelNum: "num03",
                        moreLink: "showmedicineinfo",
                        thWidthRadio: ["5%", "20%", "15%", "15%", "15%", "15%", "15%"],
                        thName: thName,
                        align: [0, 0, 0, 0, 0],
                        fields: fields,
                    },
                    {
                        fn: "showmedicineinfo",
                        interface: interfaceTab,
                        moduleName: '产品信息',
                        modelNum: "num04",
                        moreLink: "showmedicineinfo",
                        thWidthRadio: ["5%", "20%", "15%", "15%", "15%", "15%", "15%"],
                        thName: thName,
                        align: [0, 0, 0, 0, 0],
                        fields: fields,
                    }
                ]

                var $container = $dom ? $dom : $('#workspace');
                $container.empty().html(Company.drawTab(tableSetting, "tabMedicineinfo", "tbodyMedicineinfo", null, $dom, initIndex));
                $("#changemedicineinfo .each-change-tag[data-val=" + Company.medicineInfoTab + "]").addClass("sel");
                var drawArr = Company.productType == "器械" ? ['上市申请', '获批上市'] : ['临床申请', '临床试验', '上市申请', '获批上市']
                Company.drawMedicineInfoDetail("#drawMedicineInfo", Company.productType, drawArr, resSecondData);
                var columnDefsSet = [
                    [],
                    [],
                    [],
                    []
                ]
                var params = { "companycode": Company.companyId, "productType": Company.productType };
                Company.pageSetting("#tabMedicineinfo", tableSetting, columnDefsSet[initIndex], params, $dom, initIndex);
            }
        })
    },
    drawMedicineInfoDetail: function(dom, type, arr, resSecondData) {
        var params = { "companyId": Company.companyId, "companycode": Company.companyId }
        var dataArr = [];
        if (resSecondData && !$.isEmptyObject(resSecondData)) {
            switch (type) {
                case "化学药品":
                    {
                        if (Company.basicNum.num01) {
                            dataArr.push(resSecondData.chemicalDrug.clinicalApplication);
                            dataArr.push(resSecondData.chemicalDrug.clinicalTest);
                            dataArr.push(resSecondData.chemicalDrug.listingApplication);
                            dataArr.push(resSecondData.chemicalDrug.listedApproved);
                        } else {
                            $("#drawMedicineInfo").hide()
                            $("#changemedicineinfo").before('<div class="chart-nodata">暂无数据</div>')
                        }
                    }
                    break;
                case "中药":
                    {
                        if (Company.basicNum.num02) {
                            dataArr.push(resSecondData.chineseMedicine.clinicalApplication);
                            dataArr.push(resSecondData.chineseMedicine.clinicalTest);
                            dataArr.push(resSecondData.chineseMedicine.listingApplication);
                            dataArr.push(resSecondData.chineseMedicine.listedApproved);
                        } else {
                            $("#drawMedicineInfo").hide()
                            $("#changemedicineinfo").before('<div class="chart-nodata">暂无数据</div>')
                        }

                    }
                    break;
                case "生物制品":
                    {
                        if (Company.basicNum.num03) {
                            dataArr.push(resSecondData.biologicalProduct.clinicalApplication);
                            dataArr.push(resSecondData.biologicalProduct.clinicalTest);
                            dataArr.push(resSecondData.biologicalProduct.listingApplication);
                            dataArr.push(resSecondData.biologicalProduct.listedApproved);
                        } else {
                            $("#drawMedicineInfo").hide()
                            $("#changemedicineinfo").before('<div class="chart-nodata">暂无数据</div>')
                        }
                    }
                    break;
                case "器械":
                    {
                        if (Company.basicNum.num04) {
                            dataArr.push(resSecondData.instrument.listingApplication);
                            dataArr.push(resSecondData.instrument.listedApproved);
                        } else {
                            $("#drawMedicineInfo").hide()
                            $("#changemedicineinfo").before('<div class="chart-nodata">暂无数据</div>')
                        }
                    }
                    break;
                default:
                    {
                        if (Company.basicNum.num01) {
                            dataArr.push(resSecondData.chemicalDrug.clinicalApplication);
                            dataArr.push(resSecondData.chemicalDrug.clinicalTest);
                            dataArr.push(resSecondData.chemicalDrug.listingApplication);
                            dataArr.push(resSecondData.chemicalDrug.listedApproved);
                        } else {
                            dataArr = null
                        }
                    }
                    break;
            }
        }

        if (resSecondData && !$.isEmptyObject(resSecondData)) {
            var data = resSecondData
            var nameArr = [];
            var tmpArr = [];
            Highcharts.setOptions({
                lang: {
                    downloadJPEG: intl('222618') /* 下载JPEG图片 */ ,
                    downloadPNG: intl('222621') /* 下载PNG图片 */ ,
                }
            })
            $(dom).highcharts({
                credits: {
                    enabled: false // 禁用版权信息
                },
                plotOptions: {
                    bar: {
                        dataLabels: {
                            enabled: true,
                        }
                    }
                },
                // ycye.cecil modify UI颜色 2020-10-26 start
                colors: ['#2277a2'],
                // ycye.cecil modify UI颜色 2020-10-26 end
                chart: {
                    type: 'bar'
                },
                title: {
                    text: '',
                },
                noData: {
                    style: {
                        fontWeight: 'bold',
                        fontSize: '16px',
                        color: '#666666'
                    }
                },
                tooltip: {
                    style: {
                        fontSize: '14px',
                    },
                    formatter: function() {
                        return this.x + ":" + this.y
                    }
                },
                exporting: {
                    buttons: {
                        contextButton: {
                            // ycye.cecil modify UI颜色 2020-10-28 start
                            symbol: 'url(../resource/images/Company/export_download.png)',
                            // ycye.cecil modify UI颜色 2020-10-28 end
                            symbolSize: 20,
                            symbolX: 23,
                            symbolY: 22,
                            menuItems: [
                                null, null, defaultMenuItem[3], defaultMenuItem[4]
                            ]
                        }
                    }
                },
                legend: {
                    enabled: false
                },
                xAxis: [{
                    type: 'value',
                    label: {
                        text: ''
                    },
                    lineColor: '#333333',
                    labels: {
                        style: {
                            "color": "#333333",
                            "fontSize": "14px"
                        }
                    },
                    lineWidth: 1,
                    categories: arr
                }],
                yAxis: [{
                    title: '',
                    lineColor: '#333333',
                    lineWidth: 1,
                    gridLineDashStyle: 'longdash',
                }],
                legend: {
                    enabled: false
                },
                series: [{
                    name: '',
                    data: dataArr
                }]
            });
            // ycye.cecil modify UI颜色 2020-10-28 start
        } else {
            $("#drawMedicineInfo").hide();
        }
    },
    drawMedicineBidDetail: function(dom, type, arr) {
        var params = { "companyId": Company.companyId, "companycode": Company.companyId }
        myWfcAjax("getyeardrugbidvalue", params, function(secondData) {
            var resSecondData = JSON.parse(secondData).Data;
            var dataArr = [];
            var sortProperty = ['year'];
            resSecondData.sort(Company.sortDetail(sortProperty));
            if (resSecondData && resSecondData.length > 0) {
                var categoriesArr = [];
                var valArr = [];
                for (var i = 0; i < resSecondData.length; i++) {
                    categoriesArr.push(resSecondData[i].year);
                    valArr.push(resSecondData[i].value ? Number(parseFloat(resSecondData[i].value).toFixed(2)) : 0);
                }
                Highcharts.setOptions({
                    lang: {
                        downloadJPEG: intl('222618') /* 下载JPEG图片 */ ,
                        downloadPNG: intl('222621') /* 下载PNG图片 */ ,
                    }
                })
                $(dom).highcharts({
                    credits: {
                        enabled: false // 禁用版权信息
                    },
                    plotOptions: {
                        column: {
                            dataLabels: {
                                enabled: true,
                            }
                        }
                    },
                    // ycye.cecil modify UI颜色 2020-10-26 start
                    colors: ['#2277a2'],
                    // ycye.cecil modify UI颜色 2020-10-26 end
                    chart: {
                        type: 'column'
                    },
                    title: {
                        text: '',
                    },
                    noData: {
                        style: {
                            fontWeight: 'bold',
                            fontSize: '16px',
                            color: '#666666'
                        }
                    },
                    tooltip: {
                        style: {
                            fontSize: '14px',
                        },
                        formatter: function() {
                            return this.x + "年:中标" + this.y + "次"
                        }
                    },
                    exporting: {
                        buttons: {
                            contextButton: {
                                // ycye.cecil modify UI颜色 2020-10-28 start
                                symbol: 'url(../resource/images/Company/export_download.png)',
                                // ycye.cecil modify UI颜色 2020-10-28 end
                                symbolSize: 20,
                                symbolX: 23,
                                symbolY: 22,
                                menuItems: [
                                    null, null, defaultMenuItem[3], defaultMenuItem[4]
                                ]
                            }
                        }
                    },
                    legend: {
                        enabled: false
                    },
                    xAxis: [{

                        label: {
                            text: ''
                        },
                        lineColor: '#333333',
                        labels: {
                            style: {
                                "color": "#333333",
                                "fontSize": "14px"
                            }
                        },
                        lineWidth: 1,
                        categories: categoriesArr
                    }],
                    yAxis: [{
                        title: '',
                        lineColor: '#333333',
                        lineWidth: 1,
                        gridLineDashStyle: 'longdash',
                    }],
                    legend: {
                        enabled: false
                    },
                    series: [{
                        name: '',
                        data: valArr
                    }]
                });
                // ycye.cecil modify UI颜色 2020-10-28 start
            } else {
                $(dom).hide();
            }
        }, function() {
            $(dom).hide();
        })
    },
    drawMedicineBidHitDetail: function(dom) {
        //采招中标热力图
        var params = { "companyId": Company.companyId, "companycode": Company.companyId, "year": "2020" }
        myWfcAjax("gettoptendrugbidareavalue", params, function(secondData) {
            var resSecondData = JSON.parse(secondData).Data;
            if (resSecondData && resSecondData.length > 0) {
                var winningBidArea = [];
                var drugName = [];
                var drugId = [];
                for (var i = 0; i < resSecondData.length; i++) {
                    if (winningBidArea.indexOf(resSecondData[i].winningBidArea) == -1) {
                        winningBidArea.push(resSecondData[i].winningBidArea)
                    }
                    if (drugId.indexOf(resSecondData[i].drugId) == -1) {
                        drugId.push(resSecondData[i].drugId)
                        drugName.push(resSecondData[i].drugName)
                    }
                }
                var xLen = winningBidArea.length;
                var yLen = drugId.length;
                var defaultData = [];
                for (i = 0; i < yLen; i++) {
                    //生成一个形如[[0,0,0],[0,0,1]]的默认二维数组
                    for (k = 0; k < xLen; k++) {
                        defaultData.push([i, k, 0])
                    }
                }
                for (var i = 0; i < resSecondData.length; i++) {
                    var x = winningBidArea.indexOf(resSecondData[i].winningBidArea);
                    var y = drugId.indexOf(resSecondData[i].drugId);
                    var index = xLen * y + x;
                    defaultData[index][2] = parseInt(resSecondData[i].value);
                }
                Highcharts.setOptions({
                    lang: {
                        downloadJPEG: intl('222618') /* 下载JPEG图片 */ ,
                        downloadPNG: intl('222621') /* 下载PNG图片 */ ,
                    }
                })
                $(dom).highcharts({
                    chart: {
                        type: 'heatmap',
                        marginTop: 40,
                        marginBottom: 80,
                        plotBorderWidth: 1
                    },
                    title: {
                        text: Company.companyName + '：企业Top10品种区域分布',
                        align: 'left',
                        style: {
                            "color": "#333333",
                            "fontSize": "14px",
                        },
                        margin: 30
                    },
                    xAxis: {
                        categories: drugName
                    },
                    yAxis: {
                        categories: winningBidArea,
                        title: null
                    },
                    colorAxis: {
                        min: 0,
                        minColor: '#FFFFFF',
                        maxColor: Highcharts.getOptions().colors[0]
                    },
                    credits: {
                        enabled: false // 禁用版权信息
                    },
                    legend: {
                        align: 'left',
                        layout: 'vertical',
                        margin: 20,
                        verticalAlign: 'bottom',
                        y: 0,
                        symbolHeight: 180,
                        title: {
                            text: '中标次数',
                            style: {
                                'fontWeight': 'normal',
                                'color': '#333333',
                            }
                        }
                    },
                    exporting: {
                        buttons: {
                            contextButton: {
                                // ycye.cecil modify UI颜色 2020-10-28 start
                                symbol: 'url(../resource/images/Company/export_download.png)',
                                // ycye.cecil modify UI颜色 2020-10-28 end
                                symbolSize: 20,
                                symbolX: 23,
                                symbolY: 22,
                                menuItems: [
                                    null, null, defaultMenuItem[3], defaultMenuItem[4]
                                ]
                            }
                        }
                    },
                    tooltip: {
                        formatter: function() {
                            return this.series.yAxis.categories[this.point.y] + '中标 <br>' +
                                this.series.xAxis.categories[this.point.x] + '<br>' + this.point.value + '次';
                        }
                    },
                    series: [{
                        name: '',
                        borderWidth: 1,
                        data: defaultData,
                        dataLabels: {
                            enabled: true,
                            color: '#000000'
                        }
                    }]
                });
                // ycye.cecil modify UI颜色 2020-10-28 start
            } else {
                $(dom).hide();
            }
        }, function() {
            $(dom).hide();
        })
    },
    sortDetail: function(propertyArray) {
        var levelCount = propertyArray.length,
            checkLetter = /^[A-Z]{1}$/; //检验是否是整数，字符1和数字1是不同的

        return function(item1, item2) {
            var level = 0;
            var sorting = function() {
                var propertyName = propertyArray[level];
                level++;

                var itemCell1 = item1[propertyName],
                    itemCell2 = item2[propertyName];

                //to check type
                if (!checkLetter.test(itemCell1)) {
                    itemCell1 = parseInt(itemCell1, 10);
                    itemCell2 = parseInt(itemCell2, 10);
                }

                if (itemCell1 < itemCell2) {
                    return -1; //从小到大排序
                } else if (itemCell1 > itemCell2) {
                    return 1;
                } else if (itemCell1 === itemCell2) {
                    if (level === levelCount) {
                        return 0;
                    } else {
                        return sorting();
                    }
                }

            };
            return sorting();
        };
    },
    showmedicinemarket: function($dom, index) {
        //医药-市场销售
        var $container = $dom ? $dom : $('#workspace');
        if (index == 0 || !index) {
            $container.empty().html('<div class="widget-header"><span class="fl">市场销售</span><div class="fl tab-style" data-index="0" data-fn="showmedicinemarket"><a class="tab-second-style wi-secondary-color" data-fn="showmedicinemarket" data-index="0">企业季度销售趋势</a><a class="tab-second-style" data-fn="showmedicinemarket" data-index="1">企业年度销售趋势</a></div></div><div id="medicineMarketMap"><div id="eachMarket01"></div><div id="eachMarket02"></div></div>');
        } else {
            $container.empty().html('<div class="widget-header"><span class="fl">市场销售</span><div class="fl tab-style" data-index="1" data-fn="showmedicinemarket"><a class="tab-second-style" data-fn="showmedicinemarket" data-index="0">企业季度销售趋势</a><a class="tab-second-style  wi-secondary-color" data-fn="showmedicinemarket" data-index="1">企业年度销售趋势</a></div></div><div id="medicineMarketMap"><div id="eachMarket01"></div><div id="eachMarket02"></div></div>');
        }
        Company.showMarket01Map('eachMarket01', index);
        Company.showMarket02Map('eachMarket02', index);
    },
    showMarket01Map: function(dom, index) {
        var params = { "companycode": Company.companyId, "companyid": Company.companyId }
        var interface = index == 1 ? "getmedicalyearsale" : "getmedicalquartersale";
        if (interface == "getmedicalquartersale") {
            params.startyear = 2017;
            params.endyear = 2020;
        }
        myWfcAjax(interface, params, function(secondData) {
            var sortInstance = JSON.parse(secondData).Data;
            if (sortInstance && sortInstance.length > 0) {
                var sortProperty = ['year', 'quarter'];
                sortInstance.sort(Company.sortDetail(sortProperty));
                var radioArr = [];
                var dataArr = [];
                var moneyArr = [];
                var lockArr = []; //需要锁的数组
                var min = 0;
                var max = 0;
                sortInstance.forEach(function(item, oIndex) {
                    if (index == 1) {
                        dataArr.push(item.year);
                    } else {
                        dataArr.push(item.year + "Q" + item.quarter);
                    }
                    if (item.value == "false") {
                        lockArr.push(10000)
                    } else {
                        lockArr.push(null)
                    }
                    if (parseFloat(item.value) > max) {
                        max = parseFloat(item.value);
                    } else if (parseFloat(item.value) < min) {
                        min = parseFloat(item.value);
                    }
                    moneyArr.push(parseFloat(item.value));
                    if (oIndex == 0) {
                        radioArr.push(0)
                    } else {
                        if (interface == "getmedicalyearsale") {
                            var lastVal = sortInstance[oIndex - 1].value;
                            if (sortInstance[oIndex - 1].value == 0 || !lastVal) {
                                radioArr.push(0)
                            } else {
                                radioArr.push((parseFloat(((item.value - lastVal) / lastVal).toFixed(2))) * 100)
                            }
                        } else {
                            var thisyear = item.year;
                            var thisquarter = item.quarter;
                            var lastyear = parseInt(item.year) - 1;
                            var flag = true;
                            for (var k = 0; k < sortInstance.length; k++) {
                                if (sortInstance[k].year == lastyear && sortInstance[k].quarter == thisquarter && sortInstance[k].value != 0) {
                                    flag = false;
                                    radioArr.push((parseFloat(((item.value - sortInstance[k].value) / sortInstance[k].value).toFixed(2))) * 100);
                                    break;
                                }
                            }
                            if (flag) {
                                radioArr.push(0);
                            }
                        }
                    }
                    //console.log(item.year + '---' + item.quarter + '---' + item.value);
                });
                var lockNum = parseInt(min + max) / 2
                lockArr.forEach(function(item, oIndex) {
                    if (item == 10000) {
                        lockArr[oIndex] = lockNum;
                    }
                })
                var chartTit = (interface == "getmedicalyearsale") ? Company.companyName + ':企业年度销售趋势' : Company.companyName + ':企业季度销售趋势';
                var chart = Highcharts.chart(dom, {
                    credits: {
                        enabled: false // 禁用版权信息
                    },
                    // ycye.cecil modify UI颜色 2020-10-26 start
                    colors: ['#2277a2', '#f68717'],
                    // ycye.cecil modify UI颜色 2020-10-26 end
                    chart: {
                        zoomType: 'xy'
                    },
                    title: {
                        text: chartTit,
                        align: 'left',
                        style: {
                            "color": "#333333",
                            "fontSize": "12px",
                        },
                        margin: 30
                    },
                    noData: {
                        style: {
                            fontWeight: 'bold',
                            fontSize: '16px',
                            color: '#666666'
                        }
                    },
                    exporting: {
                        buttons: {
                            contextButton: {
                                // ycye.cecil modify UI颜色 2020-10-28 start
                                symbol: 'url(../resource/images/Company/export_download.png)',
                                // ycye.cecil modify UI颜色 2020-10-28 end
                                symbolSize: 20,
                                symbolX: 23,
                                symbolY: 22,
                                menuItems: [
                                    null, null, defaultMenuItem[3], defaultMenuItem[4]
                                ]
                            }
                        }
                    },
                    xAxis: [{
                        categories: dataArr,
                        lineColor: '#333333',
                        lineWidth: 1,

                    }],
                    yAxis: [{
                        title: {
                            text: '万元'
                        },
                        labels: {
                            formatter: function() {
                                return parseInt(this.value / 10000) + "万"
                            }
                        },
                        lineColor: '#333333',
                        lineWidth: 1,
                        tickAmount: 4,
                        gridLineDashStyle: 'longdash'
                    }, {
                        title: {
                            text: '同比(%)'
                        },
                        labels: {
                            format: '{value}%'
                        },
                        opposite: true,
                        tickAmount: 4,
                        gridLineDashStyle: 'longdash'

                    }],
                    legend: {
                        symbolRadius: 2,
                        borderWidth: 0,
                        itemStyle: {
                            "fontSize": "12px",
                            "font-weight": "normal"
                        }
                    },
                    tooltip: {
                        style: {
                            fontSize: '14px',
                        },
                        shared: true
                    },
                    plotOptions: {
                        column: {
                            dataLabels: {
                                enabled: true,
                                formatter: function() {
                                    return parseFloat(this.y).toFixed(2) + "万"
                                }
                            },
                            events: {
                                click: function(event) {
                                    var category = event.point.category;
                                    var index = 1;
                                    var year = "";
                                    var quarter = "";
                                    var categoryArr = category.split("Q");
                                    if (categoryArr && categoryArr.length > 1) {
                                        index = 0;
                                        year = categoryArr[0];
                                        quarter = categoryArr[1];
                                    } else {
                                        index = 1;
                                        year = categoryArr[0];
                                    }
                                    Company.showMarket02Map('eachMarket02', index, year, quarter);
                                }
                            }
                        },
                        scatter: {
                            events: {
                                click: function(event) {
                                    if (is_terminal) {
                                        window.open("//news.windin.com/medicine/newversion/medicallibrary/dist/index.html#/")
                                    } else {
                                        window.open("http://med.wind.com.cn")
                                    }
                                }
                            }
                        }
                    },
                    series: [{
                        name: '销售额',
                        data: moneyArr,
                        type: 'column',
                        tooltip: {
                            valueSuffix: '万'
                        }
                    }, {
                        name: '增长率',
                        data: radioArr,
                        type: 'spline',
                        tooltip: {
                            valueSuffix: '%'
                        },
                        yAxis: 1
                    }, {
                        name: '',
                        data: lockArr,
                        type: 'scatter',
                        marker: {
                            symbol: 'url(../resource/images/Company/lock.png)'
                        },
                        tooltip: {
                            headerFormat: '暂无权限,点击了解更多',
                            pointFormat: ''
                        },
                    }]
                });
                // ycye.cecil modify UI颜色 2020-10-28 start
            } else {
                $("#eachMarket01").hide();
                $("#eachMarket02").hide();
            }
        }, function() {
            $("#eachMarket01").hide();
            $("#eachMarket02").hide();
        })
    },
    showMarket02Map: function(dom, index, year, quarter) {

        var params = { "companycode": Company.companyId, "companyid": Company.companyId }
        var interface = index == 1 ? "getmedicalyearproductsale" : "getmedicalquarterproductsale";
        if (interface == "getmedicalquarterproductsale") {
            params.year = year ? year : 2019;
            params.quarter = quarter ? quarter : 3;
        } else {
            params.year = year ? year : 2019;
        }
        myWfcAjax(interface, params, function(secondData) {
            var resSecondData = JSON.parse(secondData).Data;
            var sortProperty = ['value'];
            resSecondData.sort(Company.sortDetail(sortProperty)).reverse();
            var title = index == "1" ? Company.companyName + ":产品" + params.year + "年度销售额占比" : Company.companyName + ":产品" + params.year + "年" + params.quarter + "季度销售额占比";
            if (resSecondData && resSecondData.length > 0) {
                var dataArr = [];
                var data10 = 0
                for (var i = 0; i < resSecondData.length; i++) {
                    if (i >= 9) {
                        dataArr[9] = {};
                        dataArr[9].name = '其它';
                        data10 = data10 + parseFloat(resSecondData[i].value)
                        dataArr[9].y = data10
                    } else {
                        dataArr.push({ name: resSecondData[i].medicineName, y: parseFloat(resSecondData[i].value) });
                    }
                }
                Company.drawPie($("#eachMarket02"), dataArr, title, true)
            } else {
                $("#medicineMarketMap").append('<div class="chart-nodata">暂无数据</div>')
                $("#eachMarket02").hide();
            }
        }, function() {
            $("#medicineMarketMap").append('<div class="chart-nodata">暂无数据</div>')
            $("#eachMarket02").hide();
        })
    },
    bidType: "企业年度中标药品品种数量趋势",
    bidTypeArr: ['企业年度中标药品品种数量趋势', '企业Top10品种区域分布'],
    bidInfoTab: "药品",
    showmedicinebid: function($dom, index, index02) {
        //医药-采招中标
        var params = { "companyId": Company.companyId, "companycode": Company.companyId }
        myWfcAjax("getmedicalbasicnum", params, function(secondData) {
            var resSecondData = JSON.parse(secondData).Data;
            if (resSecondData && !$.isEmptyObject(resSecondData)) {
                Company.basicNum.drug_bid_num = resSecondData.drug_bid_num;
                Company.basicNum.instrument_bid_num = resSecondData.instrument_bid_num;
                var numArr = ["drug_bid_num", "instrument_bid_num"]
                var tableIndex = 0;
                if (!index02) {
                    if (Company.basicNum.drug_bid_num == 0 && Company.basicNum.instrument_bid_num != 0) {
                        Company.bidInfoTab = "器械"
                        index02 = "器械"
                    } else {
                        Company.bidInfoTab = "药品"
                        index02 = "药品"
                    }
                }
                var thName = [];
                var fields = [];
                if (index && !(/^\d+$/.test(index))) {
                    index = Company.bidTypeArr.indexOf(index);
                }
                switch (parseInt(index)) {
                    case 0:
                        Company.bidType = '企业年度中标药品品种数量趋势'
                        break;
                    case 1:
                        Company.bidType = '企业Top10品种区域分布'
                        break;
                    default:
                        Company.bidType = '企业年度中标药品品种数量趋势'
                        break;
                }
                var interfaceTab = "getclinicalapplicationrecord";
                switch (index02) {
                    case "药品":
                        tableIndex = 0;
                        thName = [intl('138741' /* 序号 */ ), '药品名称', '剂型', '规格', '中标价格', '报价单位', '转换系数', '中标日期', '中标区域'];
                        fields = ["NO.", "drugName", "dosageForm", "specifications", "bidPrice", "priceQuote", "transUnit", "bidDate", "winningBidArea"];
                        interfaceTab = 'getdrugwinningbidrecord'
                        break;
                    case "器械":
                        tableIndex = 1;
                        thName = [intl('138741' /* 序号 */ ), '产品名称', '型号', '规格', '中标价格', '中标日期', '中标区域', '投标企业'];
                        fields = ["NO.", "productName", "model", "spec", "price", "publishDate", "bidProvince", "bidCompanyName"];
                        interfaceTab = 'getinstrumentwinningbidrecord'
                        break;
                    default:
                        tableIndex = 0;
                        thName = [intl('138741' /* 序号 */ ), '药品名称', '剂型', '规格', '中标价格', '报价单位', '转换系数', '中标日期', '中标区域'];
                        fields = ["NO.", "drugName", "dosageForm", "specifications", "bidPrice", "priceQuote", "transUnit", "bidDate", "winningBidArea"];
                        interfaceTab = 'getdrugwinningbidrecord'
                        break;
                }
                var tableSetting = [{
                        fn: "showmedicinebid",
                        interface: 'getdrugwinningbidrecord',
                        moduleName: '采招中标',
                        tabChange: {
                            type: ['企业年度中标药品品种数量趋势', '企业Top10品种区域分布'],
                            typeCnName: ['企业年度中标药品品种数量趋势', '企业Top10品种区域分布'],
                            typeName: "type",
                            typeBasicNum: [true, true]
                        },
                        modelNum: true,
                        moreLink: "showmedicinebid",
                        thWidthRadio: ["5%", "15%", "10%", "15%", "15%", "10%", "10%", "10%", "10%"],
                        thName: thName,
                        align: [0, 0, 0, 0, 0],
                        fields: fields,
                    },
                    {
                        fn: "showmedicinebid",
                        interface: 'getinstrumentwinningbidrecord',
                        moduleName: '采招中标',
                        modelNum: true,
                        moreLink: "showmedicinebid",
                        thWidthRadio: ["5%", "20%", "10%", "15%", "15%", "10%", "10%", "15%"],
                        thName: thName,
                        align: [0, 0, 0, 0, 0],
                        fields: fields,
                    }
                ]
                var initIndex = tableIndex ? tableIndex : "0";
                if (initIndex == 0) {
                    for (var i = 0; i < numArr.length; i++) {
                        if (Company.basicNum[numArr[i]] && Company.basicNum[numArr[i]] != 0) {
                            break;
                        } else {
                            initIndex++;
                            if (initIndex >= numArr.length) {
                                initIndex = 0;
                            }
                        }
                    }
                }
                var $container = $dom ? $dom : $('#workspace');
                var oIndex = index ? index : 0
                $container.empty().html(Company.drawTab(tableSetting, "tabMedicinebid", "tbodyMedicinebid", null, $dom, initIndex));
                $("#changemedicineBid .each-change-tag[data-val=" + Company.bidInfoTab + "]").addClass("sel");
                var drawArr = ['药品', '器械']
                switch (parseInt(index)) {
                    case 0:
                        $("#drawMedicineBid").height("300px")
                        Company.drawMedicineBidDetail("#drawMedicineBid");
                        break;
                    case 1:
                        $("#drawMedicineBid").height("800px")
                        Company.drawMedicineBidHitDetail("#drawMedicineBid"); //热力图
                        break;
                    default:
                        Company.drawMedicineBidDetail("#drawMedicineBid");
                        break;
                }

                var columnDefsSet = [
                    [],
                    [],
                    [],
                    []
                ]
                var params = { "companycode": Company.companyId };
                Company.pageSetting("#tabMedicinebid", tableSetting, columnDefsSet[initIndex], params, $dom, initIndex);
            } else {
                $("#showmedicinebid").empty().html('<div class="chart-nodata">暂无数据</div>')
            }
        }, function() {
            $("#showmedicinebid").empty().html('<div class="chart-nodata">暂无数据</div>')
        })
    },
    PublishFundData: function() {
        //公募基金
        try {
            $('#PublishFundData').removeClass('module-dyna-hidden');
            var showNameArr = [intl('37109', '基金规模'), intl('11546', '旗下基金')];
            var numArr = [true, true];
            var fnArr = ["showFundSize", "showItsFunds"];
            var htmlArr = [];
            var showFlag = false; //默认不显示，如果有一个模块的basicnum大于0的时候，就显示此模块
            for (var i = 0; i < fnArr.length; i++) {
                if (numArr[i] == true || (Company.basicNum[numArr[i]] && Company.basicNum[numArr[i]] != 0)) {
                    var moduleStr = ""
                    moduleStr = '<div class="each-module" id="' + fnArr[i] + '"></div>';
                    showFlag = true;
                    htmlArr.push(moduleStr);
                }
            }
            $('#PublishFundData').append(htmlArr.join(""));
            if (showFlag) {
                //请求基金数据
                for (var i = 0; i < fnArr.length; i++) {
                    if (numArr[i] == true || (Company.basicNum[numArr[i]] && Company.basicNum[numArr[i]] != 0)) {
                        if (typeof Company[fnArr[i]] == 'function') {
                            Company[fnArr[i]]($("#" + fnArr[i]));
                        }
                    }
                }
            } else {
                Company.moduleHaveNoData("#PublishFundData", intl('', '暂无基金数据'));
            }
        } catch (error) {}

    },
    showFundSize: function($dom) {
        // 基金规模
        var htmlArr = [];
        htmlArr.push('<div class="widget-model"><div class="widget-header"><span class="fl">' + intl('37109', '基金规模') + '</span>');
        htmlArr.push('<div class="fl tab-style" data-fn="showFundSize"></div></div>');
        htmlArr.push('<div class="moreModuleBorder">');
        htmlArr.push('<div class="manage-module" id="fundSizeModule"><div class="manage-main"><div class="main-wrap">');
        htmlArr.push('<table id="tabFundSize" class="table-company more-module-table" style="width: 464px !important;"><tbody><tr><td class="manage-loading"><img src="../resource/images/Company/loading.gif" />' + intl('139612' /* 数据加载中... */ ) + '</td></tr></tbody></table>');
        htmlArr.push('<div class="more-module-left" id="picFundSize"><div class="manage-loading"><img src="../resource/images/Company/loading.gif" />' + intl('139612' /* 数据加载中... */ ) + '</div></div></div></div></div>')
        htmlArr.push('<div id="fundValueChart" style="width:934px;height:400px;display:none;"></div>'); //基金净值图
        htmlArr.push('</div></div>');
        var $container = $dom ? $dom : $('#workspace');
        $container.empty().html(htmlArr.join(""));
        try {
            // TODO 需要包装为一个函数--包含画饼图和表格的（表格数据分为动态列和固定列，画图使用WCB）
            var params = { 'companyId': Company.companyId };
            myWfcAjax('getpublicfundscale', params, function(data) { //基金规模
                var resData = JSON.parse(data);
                if (resData.ErrorCode == 0 && resData.Data && resData.Data.length > 0) {
                    try {
                        SearchNavInit.navDic['基金规模']['基金规模'][2] = 1;
                    } catch (error) {}
                    var itemData = resData.Data;
                    var dataSetting = {
                        thName: [intl('138741', '序号'), intl('33222', '基金类型'), intl('18827', '资产净值合计(亿元)'), intl('138762', '占比')],
                        fields: ['No.', 'fundTypeName', 'assets|money', 'assetsPercentage|percent'],
                        tdWidths: ['15%', '30%', '34%', '21%'],
                        aligns: [0, 0, 2, 2],
                        dynaOrNot: false, //列是否是动态的
                        tabId: '#tabFundSize',
                        picType: 'pie', //绘制图类型，为null则不绘制
                        picFields: ['fundTypeName', 'assets|number'], //图的数据
                        drawId: '#picFundSize', //图id
                        moduleId: '#fundSizeModule', //模块id
                        errmsg: '没有基金规模信息',
                        modelTitle: intl('228608', '基金类型分布'), //图展示title
                    };
                    Company.showChartTable(itemData, dataSetting);
                } else {
                    $container.empty();
                    Company.moduleHaveNoData("#showFundSize", intl('', '暂无基金规模信息'));
                    $("#showFundSize").remove();
                    $('#linkshowFundSize').remove(); //菜单删除
                }
            }, function() {
                $container.empty();
                Company.moduleHaveNoData("#showFundSize", intl('', '暂无基金规模信息'));
                $("#showFundSize").remove();
                $('#linkshowFundSize').remove(); //菜单删除
            });

            var params2 = { 'companyId': Company.companyId };
            myWfcAjax('getfundnetassetvalue', params2, function(data) { //资产净值
                var resData = JSON.parse(data);
                try {
                    if (resData.ErrorCode == 0 && resData.Data && resData.Data.length > 0) {
                        var drawData = [];
                        var labelData = [];
                        var labelValue = [];
                        var labelCount = [];
                        resData.Data.forEach(function(item) {
                            labelData.push(item.date);
                            labelValue.push(Number(item.totalScale));
                            labelCount.push(Number(item.totalNum));
                        })
                        drawData.push(labelData);
                        drawData.push(labelValue);
                        drawData.push(labelCount);
                        drawBarHighChart('fundValueChart', drawData, labelCount);
                        $('#fundValueChart').show();
                    } else {
                        $('#fundValueChart').hide();
                    }
                } catch (error) {}

            }, function() {
                $('#fundValueChart').hide();
            });

            function drawBarHighChart($id, drawData) {
                Highcharts.setOptions({
                    lang: {
                        downloadJPEG: intl('222618') /* 下载JPEG图片 */ ,
                        downloadPNG: intl('222621') /* 下载PNG图片 */ ,
                    }
                })
                $('#' + $id).highcharts({
                    credits: {
                        enabled: false // 禁用版权信息
                    },
                    colors: ['#2277a2', '#f68717'],
                    chart: {
                        type: 'column'
                    },
                    title: {
                        text: '',
                        // align: 'left',
                        style: {
                            "color": "#333333",
                            "fontSize": "14px",
                            "fontWeight": "bold",
                        },
                        margin: 10
                    },
                    noData: {
                        style: {
                            fontWeight: 'bold',
                            fontSize: '16px',
                            color: '#666666'
                        }
                    },
                    xAxis: [{
                        categories: drawData[0],
                        lineColor: '#333333',
                        lineWidth: 1,
                        labels: {
                            step: 2,
                        },
                    }],
                    yAxis: [{
                        title: {
                            text: '资产净值(亿)',
                        },
                        labels: {
                            formatter: function() {
                                return parseInt(this.value)
                            }
                        },
                        gridLineDashStyle: 'ShortDash',
                        lineColor: '#333333',
                        lineWidth: 1,
                        tickAmount: 6,
                    }, {
                        title: {
                            text: '基金数量(只)',
                        },
                        labels: {
                            formatter: function() {
                                return parseInt(this.value)
                            }
                        },
                        gridLineDashStyle: 'ShortDash',
                        lineColor: '#333333',
                        opposite: true,
                        lineWidth: 1,
                        tickAmount: 6

                    }],
                    exporting: {
                        buttons: {
                            contextButton: {
                                symbol: 'url(../resource/images/Company/export_download.png)',
                                symbolSize: 20,
                                symbolX: 23,
                                symbolY: 22,
                                menuItems: [
                                    null, null, defaultMenuItem[3], defaultMenuItem[4]
                                ]
                            }
                        }
                    },
                    legend: {
                        borderWidth: 0,
                        // symbolHeight: 12,
                        symbolPadding: 5,
                        symbolRadius: 2,
                        itemStyle: {
                            // color: 'red',
                            fontWeight: 'normal',
                        }
                    },
                    tooltip: {
                        style: {
                            fontSize: '14px',
                        },
                        shared: true
                    },
                    plotOptions: {

                    },
                    series: [{
                        name: '管理规模',
                        data: drawData[1],
                        type: 'column',
                        tooltip: {
                            valueSuffix: '亿'
                        }
                    }, {
                        name: '基金数量',
                        data: drawData[2],
                        type: 'spline',
                        tooltip: {
                            valueSuffix: '只'
                        },
                        yAxis: 1
                    }]
                });
                $('.highcharts-legend .highcharts-point').attr("width", "16px");
            }
        } catch (error) {}
    },
    showItsFunds: function($dom) {
        // 旗下基金
        var tableSetting = {
            interface: "getallpublicchildfunds",
            moduleName: intl('11546', '旗下基金'),
            moreLink: "showItsFunds",
            modelNum: true,
            thWidthRadio: ["5%", "9%", "14%", "16%", "10%", "14%", "14%", "8%", "10%"],
            thName: [intl('138741', '序号'), intl('29978', '代码'), intl('29979', '名称'), intl('34679', '投资类型'), intl('24411', '截止日期'), intl('19316', '最新资产净值(亿元)'), intl('19254', '最新基金份额(亿份)'), intl('555', '1年'), intl('138860', '成立日期')],
            align: [0, 0, 0, 0, 0, 2, 2, 2, 0],
            fields: ["NO.", "windCode", "name", "fundType", "latestFundNetValueDate", "latestAssetsNetValue", "latestFundShare", "annualGrowthRate", "fundFoundDate"],
        }
        var $container = $dom ? $dom : $('#workspace');
        $container.empty().html(Company.drawTab(tableSetting, "tabshowItsFunds", "tbodyshowItsFunds", false, $dom));
        var columnDefsSet = [{
            "targets": 1,
            "data": 'windCode',
            "render": function(data, type, full, meta) {
                return Common.formatCont(data)
            }
        }, {
            "targets": 2,
            "data": 'name',
            "render": function(data, type, full, meta) {
                return Common.formatCont(data)
            }
        }, {
            "targets": 3,
            "data": 'fundType',
            "render": function(data, type, full, meta) {
                return Common.formatCont(data)
            }
        }, {
            "targets": 4,
            "data": 'latestFundNetValueDate',
            "render": function(data, type, full, meta) {
                return Common.formatCont(data)
            }
        }, {
            "targets": 5,
            "data": 'latestAssetsNetValue',
            "render": function(data, type, full, meta) {
                return data ? Common.formatMoney(data, [4, '&nbsp;']) : '--&nbsp;';
            }
        }, {
            "targets": 6,
            "data": 'latestFundShare',
            "render": function(data, type, full, meta) {
                return data ? Common.formatMoney(data, [4, '&nbsp;']) : '--&nbsp;';
            }
        }, {
            "targets": 7,
            "data": 'annualGrowthRate',
            "render": function(data, type, full, meta) {
                if (data) {
                    var dataCalue = Common.formatMoney(data, [4, '%']);
                    var valSpanCss = '';
                    if (parseFloat(data) > 0) {
                        valSpanCss = 'color: #E50113;';
                    } else if (parseFloat(data) < 0) {
                        valSpanCss = 'color: #16BC50;';
                    }
                    return '<span style="' + valSpanCss + '">' + dataCalue + '</span>';
                } else {
                    return '--'
                }
            }
        }, {
            "targets": 8,
            "data": 'fundFoundDate',
            "render": function(data, type, full, meta) {
                return Common.formatCont(data)
            }
        }, ];
        // var param = {'companyId': Company.companyId};
        Company.pageSetting("#tabshowItsFunds", tableSetting, columnDefsSet, null, $dom);
    },
    PrivateFundData: function() {
        // 私募基金
        try {
            $('#PrivateFundData').removeClass('module-dyna-hidden');
            var showNameArr = [intl('205468', '基本信息'), intl('37254', '产品结构'), intl('134279', '代表基金'), intl('228325', '核心基金经理')];
            var numArr = [true, true, true, true];
            var fnArr = ["showPrivateFundInfo", "showFundStruct", "showRepreseFund", "showFundManager"];
            var htmlArr = [];
            var showFlag = false; //默认不显示，如果有一个模块的basicnum大于0的时候，就显示此模块
            for (var i = 0; i < fnArr.length; i++) {
                if (numArr[i] == true || (Company.basicNum[numArr[i]] && Company.basicNum[numArr[i]] != 0)) {
                    var moduleStr = ""
                    moduleStr = '<div class="each-module" id="' + fnArr[i] + '"></div>';
                    showFlag = true;
                    htmlArr.push(moduleStr);
                }
            }
            $('#PrivateFundData').append(htmlArr.join(""));
            if (showFlag) {
                //请求基金数据，这里要注意先从基本信息中获得windcode
                for (var i = 0; i < fnArr.length; i++) {
                    if (numArr[i] == true || (Company.basicNum[numArr[i]] && Company.basicNum[numArr[i]] != 0)) {
                        if (typeof Company[fnArr[i]] == 'function') {
                            Company[fnArr[i]]($("#" + fnArr[i]));
                        }
                    }
                }
            } else {
                Company.moduleHaveNoData("#PrivateFundData", intl('', '暂无基金数据'));
            }
        } catch (error) {}
    },
    showPrivateFundInfo: function($dom) {
        // 基本信息
        var htmlArr = [];
        htmlArr.push('<div class="widget-model"><div class="widget-header"><span class="fl">' + intl('205468', '基本信息') + '</span>');
        htmlArr.push('<div class="fl tab-style" data-fn="showPrivateFundInfo">');
        htmlArr.push('</div></div>');
        htmlArr.push('<div class="manage-module" id="fundSizeModule"><div class="manage-main"><div class="">');
        htmlArr.push('<table id="tabPrivateFundInfo" width="100%" class=""><tbody><tr><td class="manage-loading"><img src="../resource/images/Company/loading.gif" />' + intl('139612' /* 数据加载中... */ ) + '</td></tr></tbody></table>');
        htmlArr.push('</div></div></div></div>')
        var $container = $dom ? $dom : $('#workspace');
        $container.empty().html(htmlArr.join(""));
        var params = { 'companyId': Company.companyId };
        myWfcAjax('getinformationofund', params, function(data) {
            var resData = JSON.parse(data);
            if (resData.ErrorCode == 0 && resData.Data && resData.Data.length > 0) {
                try {
                    SearchNavInit.navDic['基本信息']['基本信息'][2] = 1;
                } catch (error) {}
                var itemData = resData.Data[0];
                var investmentDirector = itemData.investmentDirector ? Common.formatCont(itemData.investmentDirector) : '--'; //核心人物
                var institutionType = itemData.institutionType ? Common.formatCont(itemData.institutionType) : '--'; //机构类型
                var fundManagerNumber = itemData.fundManagerNumber ? Common.formatCont(itemData.fundManagerNumber) : '--'; //基金经理人数
                var registerNo = itemData.registerNo ? Common.formatCont(itemData.registerNo) : '--'; //登记标号
                var managementScaleInterval = itemData.managementScaleInterval ? Common.formatCont(itemData.managementScaleInterval) : '--'; //机构规模
                var beMember = itemData.beMember ? Common.formatCont(itemData.beMember) : '--'; //是否协会会员
                var tableHtml = [];
                tableHtml.push('<tbody>')
                tableHtml.push('<tr><td width="15%" class="item-basic-title">' + intl('141152', '核心人物') + '</td><td width="18%" class="">' + investmentDirector + '</td><td width="15%" class="item-basic-title">' + intl('145812', '机构类型') + '</td><td width="18%">' + institutionType + '</td><td width="15%" class="item-basic-title">' + intl('145394', '基金经理人数') + '</td><td width="18%">' + fundManagerNumber + '</td></tr>');
                tableHtml.push('<tr><td width="15%" class="item-basic-title">' + intl('138769', '登记编号') + '</td><td width="18%">' + registerNo + '</td><td width="15%" class="item-basic-title">' + intl('141155', '机构规模') + '</td><td width="18%">' + managementScaleInterval + '</td><td width="15%" class="item-basic-title">' + intl('143603', '是否协会会员') + '</td><td width="18%">' + beMember + '</td></tr>');
                tableHtml.push('</tbody>')
                $('#tabPrivateFundInfo').html(tableHtml.join(""));
            } else {
                $container.empty();
                Company.moduleHaveNoData("#showPrivateFundInfo", intl('', '暂无基金基本信息数据'));
                $("#showPrivateFundInfo").remove();
                $('#linkshowPrivateFundInfo').remove();
            }
        }, function() {
            $container.empty();
            Company.moduleHaveNoData("#showPrivateFundInfo", intl('', '暂无基金基本信息数据'));
            $("#showPrivateFundInfo").remove();
            $('#linkshowPrivateFundInfo').remove();
        });
    },
    showFundStruct: function($dom) {
        // 产品结构
        var htmlArr = [];
        htmlArr.push('<div class="widget-model"><div class="widget-header"><span class="fl">' + intl('37254', '产品结构') + '</span>');
        htmlArr.push('<div class="fl tab-style" data-fn="showFundStruct">');
        htmlArr.push('</div></div>');
        htmlArr.push('<div class="moreModuleBorder">');
        htmlArr.push('<div class="manage-module" id="fundStructModule"><div class="manage-main"><div class="main-wrap">');
        htmlArr.push('<table id="tabFundStruct" class="table-company more-module-table" style="width: 464px !important;"><tbody><tr><td class="manage-loading"><img src="../resource/images/Company/loading.gif" />' + intl('139612' /* 数据加载中... */ ) + '</td></tr></tbody></table>');
        htmlArr.push('<div class="more-module-left" id="picFundStruct" style="height:250px !important;"><div class="manage-loading"><img src="../resource/images/Company/loading.gif" />' + intl('139612' /* 数据加载中... */ ) + '</div></div></div></div></div>')
        htmlArr.push('<div class="each-module" id="showFormance"></div>'); // 各区间业绩
        htmlArr.push('</div></div>');
        var $container = $dom ? $dom : $('#workspace');
        $container.empty().html(htmlArr.join(""));
        try {
            var params = { 'companyid': Company.companyId };
            myWfcAjax('getproductstructure', params, function(data) {
                var resData = JSON.parse(data);
                if (resData.ErrorCode == 0 && resData.Data && resData.Data.length > 0) {
                    try {
                        SearchNavInit.navDic['产品结构']['产品结构'][2] = 1;
                    } catch (error) {}
                    var itemData = resData.Data;
                    var dataSetting = {
                        thName: [intl('138741', '序号'), intl('228375', '产品策略'), intl('2491', '产品数量')],
                        fields: ['No.', 'strategyType', 'productNumber|money'],
                        tdWidths: ['15%', '45%', '40%'],
                        aligns: [0, 0, 2],
                        dynaOrNot: false,
                        tabId: '#tabFundStruct',
                        picType: 'pie', //绘制图类型，为null则不绘制
                        picFields: ['strategyType', 'productNumber'], //图的数据
                        drawId: '#picFundStruct',
                        moduleId: '#fundStructModule',
                        errmsg: '没有产品结构信息',
                        modelTitle: intl('228607', '产品策略分布'),
                    };
                    Company.showChartTable(itemData, dataSetting);
                } else {
                    $container.empty();
                    Company.moduleHaveNoData("#showFundStruct", intl('', '暂无产品结构'));
                    $("#showFundStruct").remove();
                    $('#linkshowFundStruct').remove(); //菜单隐藏
                }
            }, function() {
                $container.empty();
                Company.moduleHaveNoData("#showFundStruct", intl('', '暂无产品结构'));
                $("#showFundStruct").remove();;
                $('#linkshowFundStruct').remove(); //菜单隐藏
            });
            Company.showFormance($('#showFormance'));
        } catch (error) {}
    },
    showFormance: function($dom) {
        // 各区间业绩
        var tableSetting = {
            interface: "getownedfundperformance",
            moduleName: intl('', ''), //各区间业绩
            moreLink: "showFormance",
            modelNum: true,
            thWidthRadio: ["5%", "19%", "15%", "10%", "10%", "10%", "10%", "10%", "11%"],
            thName: [intl('138741', '序号'), intl('7996', '基金名称'), intl('14384', '投资策略'), intl('138860', '成立日期'), intl('32198', '3月'), intl('32203', '6月'), intl('32185', '1年'), intl('2828', '成立以来'), intl('33810', '年化回报')],
            align: [0, 0, 0, 0, 2, 2, 2, 2, 2],
            fields: ["NO.", "name", "strategyType", "foundDate", "3MonthsReturn", "6MonthsReturn", "1YearReturn", "totalReturn", "annualReturn"],
        }
        var $container = $dom ? $dom : $('#workspace');
        $container.empty().html(Company.drawTab(tableSetting, "tabshowFormance", "tbodyshowFormance", false, $dom));
        $('#showFormance .widget-header').css('height', 0);
        var columnDefsSet = [{
            "targets": 1,
            "data": 'name',
            "render": function(data, type, full, meta) {
                return Common.formatCont(data)
            }
        }, {
            "targets": 2,
            "data": 'strategyType',
            "render": function(data, type, full, meta) {
                return Common.formatCont(data)
            }
        }, {
            "targets": 3,
            "data": 'foundDate',
            "render": function(data, type, full, meta) {
                return Common.formatCont(data)
            }
        }, {
            "targets": 4,
            "data": '3MonthsReturn',
            "render": function(data, type, full, meta) {
                if (data) {
                    var dataCalue = Common.formatMoney(data, [4, '%']);
                    var valSpanCss = '';
                    if (parseFloat(data) > 0) {
                        valSpanCss = 'color: #E50113;';
                    } else if (parseFloat(data) < 0) {
                        valSpanCss = 'color: #16BC50;';
                    }
                    return '<span style="' + valSpanCss + '">' + dataCalue + '</span>';
                } else {
                    return '--'
                }
            }
        }, {
            "targets": 5,
            "data": '6MonthsReturn',
            "render": function(data, type, full, meta) {
                if (data) {
                    var dataCalue = Common.formatMoney(data, [4, '%']);
                    var valSpanCss = '';
                    if (parseFloat(data) > 0) {
                        valSpanCss = 'color: #E50113;';
                    } else if (parseFloat(data) < 0) {
                        valSpanCss = 'color: #16BC50;';
                    }
                    return '<span style="' + valSpanCss + '">' + dataCalue + '</span>';
                } else {
                    return '--'
                }
            }
        }, {
            "targets": 6,
            "data": '1YearReturn',
            "render": function(data, type, full, meta) {
                if (data) {
                    var dataCalue = Common.formatMoney(data, [4, '%']);
                    var valSpanCss = '';
                    if (parseFloat(data) > 0) {
                        valSpanCss = 'color: #E50113;';
                    } else if (parseFloat(data) < 0) {
                        valSpanCss = 'color: #16BC50;';
                    }
                    return '<span style="' + valSpanCss + '">' + dataCalue + '</span>';
                } else {
                    return '--'
                }
            }
        }, {
            "targets": 7,
            "data": 'totalReturn',
            "render": function(data, type, full, meta) {
                if (data) {
                    var dataCalue = Common.formatMoney(data, [4, '%']);
                    var valSpanCss = '';
                    if (parseFloat(data) > 0) {
                        valSpanCss = 'color: #E50113;';
                    } else if (parseFloat(data) < 0) {
                        valSpanCss = 'color: #16BC50;';
                    }
                    return '<span style="' + valSpanCss + '">' + dataCalue + '</span>';
                } else {
                    return '--'
                }
            }
        }, {
            "targets": 8,
            "data": 'annualReturn',
            "render": function(data, type, full, meta) {
                if (data) {
                    var dataCalue = Common.formatMoney(data, [4, '%']);
                    var valSpanCss = '';
                    if (parseFloat(data) > 0) {
                        valSpanCss = 'color: #E50113;';
                    } else if (parseFloat(data) < 0) {
                        valSpanCss = 'color: #16BC50;';
                    }
                    return '<span style="' + valSpanCss + '">' + dataCalue + '</span>';
                } else {
                    return '--'
                }
            }
        }, ];
        Company.pageSetting("#tabshowFormance", tableSetting, columnDefsSet, null, $dom);
    },
    showRepreseFund: function($dom) {
        // 代表基金
        try {
            var htmlArr = [];
            htmlArr.push('<div class="widget-header"><span class="fl">' + intl('134279', '代表基金') + '</span><span class="fl modle-num"></span></div>');
            htmlArr.push('<div class="moreModuleBorder">');
            htmlArr.push('<div id="represeFundInfo"></div>');
            htmlArr.push('<div id="represeFundChart"></div>');
            htmlArr.push('</div>');
            var $container = $dom ? $dom : $('#workspace');
            $container.empty().html(htmlArr.join(""));

            var params = { 'fundCode': Company.fundCode };
            myWfcAjax('getprivatefundbasicinfo', params, function(data) {
                var resData = JSON.parse(data);
                if (resData.ErrorCode == 0 && resData.Data && resData.Data.length > 0) {
                    try {
                        SearchNavInit.navDic['代表基金']['代表基金'][2] = 1;
                    } catch (error) {}
                    var infoHtml = [];
                    var name = resData.Data[0].name ? Common.formatCont(resData.Data[0].name) : '--'; //基金名称
                    var code = resData.Data[0].code ? Common.formatCont(resData.Data[0].code) : '--'; //基金代码
                    var strategyType = resData.Data[0].strategyType ? Common.formatCont(resData.Data[0].strategyType) : '--'; //基金类型
                    var fundNet = resData.Data[0].fundNet ? Common.formatCont(resData.Data[0].fundNet) : '--'; //基金单位净值
                    var fundNetDate = resData.Data[0].fundNetDate ? Common.formatTime(resData.Data[0].fundNetDate) : '--'; //日期
                    infoHtml.push('<div class="represeFundleft">');
                    infoHtml.push(' <span class="represeFundTit">' + name + '</span>&nbsp;&nbsp;<span class="represeFundTit">' + code + '</span><br/>');
                    infoHtml.push(' <span class="represeFundTag">' + strategyType + '</span>');
                    infoHtml.push('</div>');
                    infoHtml.push('<div class="represeFundRight">');
                    infoHtml.push(' <span class="represeFundRightTit tit-bootom"><span class="fund-span-tit">' + intl('32653', '单位净值') + '：</span><span>' + fundNet + '</span></span>');
                    infoHtml.push(' <span class="represeFundRightTit"><span class="fund-span-tit">' + intl('149586', '日期') + '：</span><span>' + fundNetDate + '</span></span>');
                    infoHtml.push('</div>');
                    $('#represeFundInfo').html(infoHtml.join(''));
                } else {
                    $container.empty();
                    Company.moduleHaveNoData("#showRepreseFund", intl('', '暂无代表基金'));
                    $("#showRepreseFund").remove();
                    $('#linkshowRepreseFund').remove(); //菜单隐藏
                }
            }, function() {
                $container.empty();
                Company.moduleHaveNoData("#showRepreseFund", intl('', '暂无代表基金'));
                $("#showRepreseFund").remove();
                $('#linkshowRepreseFund').remove(); //菜单隐藏
            });

            var params2 = { 'fundCode': Company.fundCode };
            myWfcAjax('getfundperformance', params2, function(data) { //业绩表现
                var resData = JSON.parse(data);
                if (resData.ErrorCode == 0 && resData.Data && resData.Data.length > 0) {
                    try {
                        SearchNavInit.navDic['代表基金']['代表基金'][2] = 1;
                    } catch (error) {}
                    var chartHtml = [];
                    // chartHtml.push('<div class="represeFundChartTit">业绩表现(%)</div>');
                    chartHtml.push('<div id="represeFundChartBar" style="width:934px;height:400px;padding-top: 10px;display:none;"></div>');
                    $('#represeFundChart').html(chartHtml.join(''));
                    var dataLabel01 = [];
                    var line01 = [];
                    var dataLabel02 = [];
                    var line02 = [];
                    var dataLabel03 = [];
                    var line03 = [];
                    var labelArr = ['同类基金', '沪深300'];
                    var drawData = []
                    var highest6 = {};
                    var lowest6 = {};
                    resData.Data.forEach(function(item) {
                        // 先进行时间排序
                        if (item.name == '最高连续6月回报' || item.name == '最差连续6月回报') {
                            switch (item.name) {
                                case '最高连续6月回报':
                                    highest6['startDate'] = item.date;
                                    var endDate = new Date(item.date);
                                    endDate.setMonth(endDate.getMonth() + 6);
                                    endDate = endDate.format('yyyy-MM-dd');
                                    highest6['endDate'] = endDate;
                                    highest6['value'] = item.achievement;
                                    // $('.highest6Value').text(item.achievement);
                                    break;
                                case '最差连续6月回报':
                                    lowest6['startDate'] = item.date;
                                    var endDate = new Date(item.date);
                                    endDate.setMonth(endDate.getMonth() + 6);
                                    endDate = endDate.format('yyyy-MM-dd');
                                    lowest6['endDate'] = endDate;
                                    lowest6['value'] = item.achievement;
                                    // $('.lowest6Value').text(item.achievement);
                                    break;
                            }
                            return true;
                        }
                        if (item.date) {
                            switch (item.name) {
                                case '同类基金':
                                    line01.push(Number(item.achievement));
                                    dataLabel01.push(item.date);
                                    break;
                                case '沪深300':
                                    line02.push(Number(item.achievement));
                                    dataLabel02.push(item.date);
                                    break;
                                default:
                                    if (params2['fundCode'] == item.windCode) {
                                        line03.push(Number(item.achievement));
                                        dataLabel03.push(item.date);
                                        if (labelArr.length < 3) {
                                            labelArr.push(item.name);
                                        }
                                        break;
                                    }
                                    break;
                            }
                        }
                    });

                    var dataXAxis = [];
                    if (labelArr.length == 3) { //将本基金的时间线作为x轴
                        dataXAxis = dataLabel03;
                    }
                    drawData.push(dataXAxis); //添加坐标轴

                    if (dataLabel01.length == 0) { //将同类基金删除
                        var labelIdx = labelArr.indexOf('同类基金');
                        if (labelIdx > -1) {
                            labelArr.splice(labelIdx, 1);
                        }
                    } else {
                        drawData.push(line01)
                    }

                    if (dataLabel02.length == 0) { //将沪深300删除
                        var labelIdx = labelArr.indexOf('沪深300');
                        if (labelIdx > -1) {
                            labelArr.splice(labelIdx, 1);
                        }
                    } else {
                        drawData.push(line02);
                    }

                    drawData.push(line03)

                    // if(dataLabel01.length == dataLabel02.length && dataLabel02.length == dataLabel03.length){
                    if (dataXAxis.length > 0 && labelArr.length > 0 && (drawData.length == labelArr.length + 1)) {
                        var getAll = 0;
                        for (var i = 0; i < drawData[0].length; i++) { //计算最好、最差连续6月回报的起始坐标
                            if (getAll >= 4) {
                                break;
                            }
                            if (highest6['startDate'] <= drawData[0][i] && !highest6['from']) {
                                highest6['from'] = i;
                                getAll += 1;
                            }
                            if (highest6['endDate'] <= drawData[0][i] && !highest6['to']) {
                                highest6['to'] = i;
                                getAll += 1;
                            }
                            if (lowest6['startDate'] <= drawData[0][i] && !lowest6['from']) {
                                lowest6['from'] = i;
                                getAll += 1;
                            }
                            if (lowest6['endDate'] <= drawData[0][i] && !lowest6['to']) {
                                lowest6['to'] = i;
                                getAll += 1;
                            }
                        }
                        drawBarHighChart2('represeFundChartBar', drawData, labelArr, highest6, lowest6);
                        $('#represeFundChartBar').show();
                    }
                }
            });

            function drawBarHighChart2($id, drawData, labelArr, highest6, lowest6) {
                try {
                    var dynaSeriesValue = [];
                    for (var serIdx = 0; serIdx < drawData.length - 1; serIdx++) {
                        var itemDic = {}
                        itemDic['name'] = labelArr[serIdx];
                        itemDic['data'] = drawData[serIdx + 1];
                        dynaSeriesValue.push(itemDic)
                    }
                    Highcharts.setOptions({
                        lang: {
                            downloadJPEG: intl('222618') /* 下载JPEG图片 */ ,
                            downloadPNG: intl('222621') /* 下载PNG图片 */ ,
                        }
                    })
                    $('#' + $id).highcharts({
                        credits: {
                            enabled: false // 禁用版权信息
                        },
                        colors: ['#2277a2', '#f68717', '#5fbebf'],
                        title: {
                            text: '<span class="represeFundChartTit">' + intl('28752', '业绩表现') + '(%)</span>',
                            align: 'left',
                            style: {
                                "color": "#333333",
                                "fontSize": "14px",
                                "width": "914px",
                            },
                            x: -10,
                        },
                        subtitle: {
                            text: '<div style="width:924px;"><span style="display: block;float: left;font-size: 12px;color: #E50113;" class="test1">' + intl('144662', '最高连续6月回报') + '(%):' + highest6['value'] + '  </span><span style="display: block;float: right;font-size: 12px;color: #008000;" class="test2"  dx=700 x=700 x="700" dx="700">' + intl('144663', '最差连续6月回报') + '(%):' + lowest6['value'] + '</span></div>',
                            align: 'left',
                            x: -10,
                            useHTML: true,
                        },
                        noData: {
                            style: {
                                fontWeight: 'bold',
                                fontSize: '16px',
                                color: '#666666'
                            }
                        },
                        xAxis: [{
                            categories: drawData[0],
                            lineColor: '#333333',
                            lineWidth: 1,
                            labels: {
                                step: 50,
                            },
                            plotBands: [{
                                from: highest6['from'],
                                to: highest6['to'],
                                color: 'rgba(185, 24, 24, 0.4)'
                            }, {
                                from: lowest6['from'],
                                to: lowest6['to'],
                                color: 'rgba(0, 128, 0, 0.4)'
                            }]
                        }],
                        yAxis: [{
                            title: {
                                text: ''
                            },
                            labels: {
                                formatter: function() {
                                    return parseInt(this.value) + '%'
                                }
                            },
                            gridLineDashStyle: 'ShortDash',
                            lineColor: '#333333',
                            lineWidth: 1,
                            tickAmount: 6,
                        }],
                        exporting: {
                            // allowHTML: true,
                            buttons: {
                                contextButton: {
                                    symbol: 'url(../resource/images/Company/export_download.png)',
                                    symbolSize: 20,
                                    symbolX: 23,
                                    symbolY: 22,
                                    menuItems: [
                                        null, null, defaultMenuItem[3], defaultMenuItem[4]
                                    ],
                                    y: -6,
                                }
                            }
                        },
                        legend: {
                            // enabled: false,
                            itemStyle: {
                                // color: 'red',
                                fontWeight: 'normal',
                            }
                        },
                        tooltip: {
                            style: {
                                fontSize: '14px',
                            },
                            shared: true
                        },
                        plotOptions: {
                            column: {
                                dataLabels: {
                                    enabled: true,
                                    formatter: function() {
                                        return parseFloat(this.y).toFixed(2)
                                    }
                                }
                            }
                        },
                        series: dynaSeriesValue,
                    });
                } catch (error) {}
            }
        } catch (error) {}
    },
    showFundManager: function($dom) {
        // 核心基金经理
        try {
            var htmlArr = [];
            htmlArr.push('<div class="widget-model"><div class="widget-header"><span class="fl">' + intl('228325', '核心基金经理') + '</span><span class="fl modle-num"></span></div>');
            htmlArr.push('<table class="" id="tabShowFundManager"><thead><tr><th></th></tr></thead><tbody id="fundManagerBody"><tr><td class="tab-loading" id="load_data_manager"></td></tr></tbody></table>');
            htmlArr.push('</div>');
            var $container = $dom ? $dom : $('#workspace');
            $container.empty().html(htmlArr.join(""));
            var tableSetting = {
                interface: "getownedfundmanagers",
                moreLink: 'showFundManager',
                moduleName: intl('228325', '核心基金经理'),
                modelNum: true,
                thWidthRadio: ["100%"],
                align: [1],
                fields: ["managerName"],
            };
            var columnDefsSet = [{
                "targets": 0,
                "data": null,
                "render": function(data, type, full, meta) {
                    var managerName = full && full.managerName ? full.managerName : '--'; //姓名
                    var position = full && full.position ? full.position : '--'; //职位
                    var resume = full && full.resume ? full.resume : '--'; //简介
                    var default_str_img = "../resource/images/Company/fund-manager.png";
                    var imgUrl = full && full.managerurl ? full.managerurl : ''; //人物图片
                    var contentHtml = [];
                    contentHtml.push('<div class="fund-manager-div">');
                    contentHtml.push('  <div class="fund-manager-img"><img class="big-logo" width="120" src="' + imgUrl + '" onerror="this.src=\'' + default_str_img + '\'"></div>');
                    contentHtml.push('  <div class="fund-manager-info">');
                    contentHtml.push('      <div class="fund-tit-div"><span class="fund-manager-content-name">' + managerName + '</span><span class="fund-manager-content-title">' + position + '</span></div>');
                    contentHtml.push('      <div class="fund-cont-div"><span class="fund-manager-content-title">' + intl('138847', '简介') + '：</span><span class="fund-manager-content">' + resume + '</span></div>');
                    contentHtml.push('  </div>');
                    contentHtml.push('</div>');
                    return contentHtml.join("");
                }
            }];
            var param = { 'companyid': Company.companyId, 'pageSize': 5 };
            Company.pageSetting("#tabShowFundManager", tableSetting, columnDefsSet, param, $dom);
        } catch (error) {}
    },
    showChartTable: function(data, dataSetting) {
        /*
        用来进行画图
        data为ajax请求回来的数据，interface接口名字,firstColumn第一列的标签,isBottom是否有底部列，比如总计。tabId,表格id。moduleId，模块id。drawId画图id
        */
        try {
            function formatChartTable(formatData, type) {
                try {
                    switch (type) {
                        case 'percent':
                            formatData = (Number(formatData) * 100).toFixed(2) + '%';
                            break;
                        case 'number':
                            formatData = Number(formatData);
                            break;
                        case 'money':
                            formatData = formatData ? Common.formatMoney(formatData, [4, '&nbsp;']) : '--';
                            break;
                    }
                    return formatData;
                } catch (error) {
                    return '--';
                }

            }

            function formatTbAlign(data) {
                alignStr = 'left';
                switch (data) {
                    case 0:
                        alignStr = 'left';
                        break;
                    case 1:
                        alignStr = 'center';
                        break;
                    case 2:
                        alignStr = 'right';
                        break;
                    default:
                        alignStr = 'left';
                        break;
                }
                return alignStr
            }
            if (data && data.length > 0) {
                res = data;
                var theadHtml = []; // 表展示
                var tbobyHtml = [];
                // 注意分为动态列和固定列
                if (!dataSetting.dynaOrNot) {
                    // 表列数固定, 动态列后面在else中开发
                    // 表头绘制
                    theadHtml.push('<thead><tr>');
                    dataSetting.thName.forEach(function(nameItem, index) {
                        theadHtml.push('<th width=" ' + dataSetting.tdWidths[index] + '" align="' + formatTbAlign(dataSetting.aligns[index]) + '">' + nameItem + '</th>');
                    })
                    theadHtml.push('</tr></thead>');
                    // 表内容绘制
                    tbobyHtml.push('<tbody>');
                    data.forEach(function(dataItem, itemIndex) {
                        tbobyHtml.push('<tr>');
                        dataSetting.fields.forEach(function(fieldItem, index) {
                            var fieldItemData = '--'
                            if (fieldItem.split('|').length > 1) {
                                fieldItemData = formatChartTable(dataItem[fieldItem.split('|')[0]], fieldItem.split('|')[1]);
                            } else {
                                fieldItemData = fieldItem == 'No.' ? itemIndex + 1 : dataItem[fieldItem];
                            }
                            tbobyHtml.push('<td width=" ' + dataSetting.tdWidths[index] + '" align="' + formatTbAlign(dataSetting.aligns[index]) + '">' + fieldItemData + '</td>');
                        })
                        tbobyHtml.push('</tr>');
                    })
                    tbobyHtml.push('</tbody>');
                    $(dataSetting.tabId).html(theadHtml.join("") + tbobyHtml.join(""));
                }
                if (dataSetting.picType) {
                    // 绘制图形
                    // 数据准备
                    var picData = null;
                    switch (dataSetting.picType) {
                        case 'pie': //绘制饼图
                            // data = [['aasa', 0.1], ['bbbb', 0.6], ['sdga', 0.3]]
                            picData = [];
                            // 数据整理
                            data.forEach(function(dataItem) {
                                var itemPicData = [];
                                dataSetting.picFields.forEach(function(picFieldItem) {
                                    var fieldItemData = 0;
                                    if (picFieldItem.split('|').length > 1) {
                                        fieldItemData = formatChartTable(dataItem[picFieldItem.split('|')[0]], picFieldItem.split('|')[1]);
                                    } else {
                                        fieldItemData = dataItem[picFieldItem];
                                    }
                                    itemPicData.push(fieldItemData);
                                });
                                picData.push(itemPicData);
                            });
                            console.log(picData)
                                // 绘图
                            if (picData.length != 0) {
                                Company.drawChartPie(dataSetting.drawId, picData, dataSetting.modelTitle);
                            }
                            break;
                    }
                }
            } else {
                // 没有数据，显示提示信息
                Company.talentTableError(dataSetting.tabId, dataSetting.drawId, dataSetting.errmsg);
            }
        } catch (error) {
            Company.talentTableError(dataSetting.tabId, dataSetting.drawId, dataSetting.errmsg);
        }
    },
    IpoBusinessData: function() {
        // 业务数据
        $('#IpoBusinessData').removeClass('module-dyna-hidden');
        var showNameArr = ["产量", "销量", "业务量", "库存"];
        var numArr = [true, true, true, true];
        var fnArr = ["showIpoYield", "showIpoSales", "showIpoBusiness", "showIpoStock"];
        var htmlArr = [];
        var showFlag = false; //默认不显示，如果有一个模块的basicnum大于0的时候，就显示此模块
        for (var i = 0; i < fnArr.length; i++) {
            if (numArr[i] == true || (Company.basicNum[numArr[i]] && Company.basicNum[numArr[i]] != 0)) {
                var moduleStr = ""
                moduleStr = '<div class="each-module" id="' + fnArr[i] + '"></div>';
                showFlag = true;
                htmlArr.push(moduleStr);
            }
        }
        $('#IpoBusinessData').append(htmlArr.join(""));
        if (showFlag) {
            // 请求业务数据
            for (var i = 0; i < fnArr.length; i++) {
                if (numArr[i] == true || (Company.basicNum[numArr[i]] && Company.basicNum[num[i]] != 0)) {
                    if (typeof Company[fnArr[i]] == 'function') {
                        Company[fnArr[i]]($("#", fnArr[i]));
                    }
                }
            }
        } else {
            Company.moduleHaveNoData('#IpoBusinessData', intl('', '暂无业务数据'))
        }
    },
    ipoChartinit: function(result, moduleName, param) {
        var name = param.businesstype
        if (result.Data && result.Data.length > 0) {
            SearchNavInit.navDic[name][name][2] = 1;
            let singleResult = result.Data[0]
            var dataObj = {
                companycode: String(Company.companyId),
                isnow: param.isnow,
                businesstype: param.businesstype,
                businessIndex: singleResult.businessIndex,
                frequency: singleResult.frequency
            }
            switch (param.businesstype) {
                case '产量':
                    $('#IpoYieldBar').attr('data-isnow', param.isnow)
                    $('#IpoYieldBar').attr('data-businesstype', param.businesstype)
                    $('#IpoYieldBar').attr('data-businessindex', singleResult.businessIndex)
                    $('#IpoYieldBar').attr('data-frequency', singleResult.frequency)
                    break
                case '销量':
                    $('#IpoSalesBar').attr('data-isnow', param.isnow)
                    $('#IpoSalesBar').attr('data-businesstype', param.businesstype)
                    $('#IpoSalesBar').attr('data-businessindex', singleResult.businessIndex)
                    $('#IpoSalesBar').attr('data-frequency', singleResult.frequency)
                    break
                case '业务量':
                    $('#IpoBusinessBar').attr('data-isnow', param.isnow)
                    $('#IpoBusinessBar').attr('data-businesstype', param.businesstype)
                    $('#IpoBusinessBar').attr('data-businessindex', singleResult.businessIndex)
                    $('#IpoBusinessBar').attr('data-frequency', singleResult.frequency)
                    break
                case '库存':
                    $('#IpoStockBar').attr('data-isnow', param.isnow)
                    $('#IpoStockBar').attr('data-businesstype', param.businesstype)
                    $('#IpoStockBar').attr('data-businessindex', singleResult.businessIndex)
                    $('#IpoStockBar').attr('data-frequency', singleResult.frequency)
                    break
                default:
                    break;
            }
            Company.getIpoChartData(dataObj, moduleName.replace('#tab', '').replace('info', ''))
        } else {
            // $("#" + moduleName.replace('#tab', '').replace('info', '') + 'Bar').append('<div class="chart-nodata">暂无数据</div>')
            if (param.isnow === "now") {
                var confirmParam = {
                    "companycode": String(Company.companyId),
                    "isnow": "sum",
                    "businesstype": param.businesstype,
                    "pageNo": 0,
                    "pageSize": 10
                }
                myWfcAjax("getcompbussinessdata", confirmParam, function(res) {
                    var result = JSON.parse(res)
                    if (!result.Data || !result.Data.length) {
                        $('#show' + moduleName.replace('#tab', '').replace('info', '')).remove()
                        $('#linkshow' + moduleName.replace('#tab', '').replace('info', '')).remove()
                        if (!($('#showIpoYield').length || $('#showIpoSales').length || $('#showIpoBusiness').length || $('#showIpoStock').length)) {
                            Company.moduleHaveNoData("#IpoBusinessData", '暂无业务数据');
                        }
                    } else {
                        var $dom = $('#show' + moduleName.replace('#tab', ''))
                        Company.showIpoBusinessModule(moduleName.replace('#tab', '').replace('info', ''), param.businesstype, $dom, 1, true)
                        SearchNavInit.navDic[name][name][2] = 1;
                    }
                })
            }
        }
    },
    showIpoBusinessModule: function(moduleName, moduleNameText, $dom, initIndex, single) {
        var nowText = initIndex === '0' ? "now" : "sum"
        var thName = [intl('138741' /* 序号 */ ), intl('38956') /* 业务指标 */ , intl('31688') /* 频率 */ , intl('138868') /* 更新时间 */ , intl('38413') /* 最新值 */ , intl('228322') /* 上年同比变化 */ , intl('228222') /* 上年同比增速 */ , intl('228323') /* 上期环比变化 */ , intl('228324') /* 上期环比增速 */ ]
        var fields = ["NO.", "businessIndex", "frequency", "latestDate", "latestValue", "yoYGrowth", "yoYGrowthRatio", "moMGrowth", "moMGrowthRatio"]
        var tableSetting = [{
                fn: 'show' + moduleName,
                interface: 'getcompbussinessdata',
                moduleName: '',
                tabChange: {
                    type: [intl('95229' /* 当期值 */ ), intl('9860' /* 累计值 */ )],
                    typeCnName: [intl('95229' /* 当期值 */ ), intl('9860' /* 累计值 */ )],
                    typeName: "type",
                    typeBasicNum: [single ? false : true, true]
                },
                modelNum: true,
                moreLink: 'show' + moduleName,
                thWidthRadio: ["5.31%", "23.35%", "5.1%", "10.62%", "8.92%", "11.67%", "11.67%", "11.67%", "11.67%"],
                thName: thName,
                align: [0, 0, 0, 0, 2, 2, 2, 2, 2],
                fields: fields,
            },
            {
                fn: 'show' + moduleName,
                interface: 'getcompbussinessdata',
                moduleName: '',
                tabChange: {
                    type: [intl('95229' /* 当期值 */ ), intl('9860' /* 累计值 */ )],
                    typeCnName: [intl('95229' /* 当期值 */ ), intl('9860' /* 累计值 */ )],
                    typeName: "type",
                    typeBasicNum: [single ? false : true, true]
                },
                modelNum: true,
                moreLink: 'show' + moduleName,
                thWidthRadio: ["5.31%", "23.35%", "5.1%", "10.62%", "8.92%", "11.67%", "11.67%", "11.67%", "11.67%"],
                thName: thName,
                align: [0, 0, 0, 0, 2, 2, 2, 2, 2],
                fields: fields,
            }
        ]
        var moduleNameTextId = null
        switch (moduleNameText) {
            case '产量':
                moduleNameTextId = '49513'
                break;
            case '销量':
                moduleNameTextId = '46834'
                break;
            case '业务量':
                moduleNameTextId = '46883'
                break;
            case '库存':
                moduleNameTextId = '44662'
                break;
        }
        var $container = $('#show' + moduleName);
        $container.empty()
        $container.append('<div class="widget-model"><div class="widget-header"><span class="fl">' + intl(moduleNameTextId) + '</span><span class="edit-chart" id="' + moduleName + 'Btn">' + intl('122740') /* 编辑图表 */ + '</span></div></div><div class="module-medicineinfo"></div>')
        var $content = $container.find('.module-medicineinfo')
        $content.append(Company.drawTab(tableSetting, "tab" + moduleName + "info", "tbody" + moduleName + "info", null, $dom, initIndex));
        $content.find('.widget-model').before('<div id="' + moduleName + 'Bar"></div>')
        var params = { "companycode": String(Company.companyId), "isnow": nowText, businesstype: moduleNameText };
        var columnDefsSet = [
            [{
                "targets": 1,
                "data": 'businessIndex',
                "render": function(data, type, full, meta) {
                    return ('<span>' + data + '</span><img style="margin-left: 6px;vertical-align: middle;cursor:pointer;" src="../resource/images/Company/ipoBtn.png" class="ipo-bar-icon" data-isnow=' +
                        nowText + ' data-businesstype=' + moduleNameText + ' data-businessindex=' + full.businessIndex + ' data-frequency=' + full.frequency + ' />')
                }
            }],
            [{
                "targets": 1,
                "data": 'businessIndex',
                "render": function(data, type, full, meta) {
                    return ('<span>' + data + '</span><img style="margin-left: 6px;vertical-align: middle;cursor:pointer;" src="../resource/images/Company/ipoBtn.png" class="ipo-bar-icon" data-isnow=' +
                        nowText + ' data-businesstype=' + moduleNameText + ' data-businessindex=' + full.businessIndex + ' data-frequency=' + full.frequency + ' />')
                }
            }]
        ]
        Company.pageSetting("#tab" + moduleName + "info", tableSetting, columnDefsSet, params, $dom, initIndex)

        var $title = $('#' + moduleName + 'Bar').next().find('.tab-style')
        $title.css('margin-left', '0px')
        $content.css('padding-bottom', '12px')
        var $tabHead = $('#tab' + moduleName + 'info').find('.sorting_disabled')
        $tabHead.css('word-break', 'break-all')
    },
    getIpoChartData: function(param, moduleName) {
        myWfcAjax('getcompbussinessgraph', param, function(data) {
            var res = JSON.parse(data)
            if (res.Data && (Number(res.ErrorCode) === 0)) {
                let dataList = res.Data
                let xLabel = []
                let yData = []
                if (res.Data.length) {
                    var tickIntervalNum = parseInt(res.Data.length / 10)
                    dataList.map((item) => {
                        yData.push(item.value)
                        xLabel.push(item.time)
                    })
                    var businesstype = param.businesstype
                    var isnow = param.isnow === 'now' ? true : false
                    var ipoTitleText = null
                    switch (businesstype) {
                        case '产量':
                            ipoTitleText = isnow ? intl('228695') /* 当期产量图 */ : intl('228696') /* 累计产量图 */
                            break;
                        case '销量':
                            ipoTitleText = isnow ? intl('228699') /* 当期销量图 */ : intl('228700') /* 累计销量图 */
                            break;
                        case '业务量':
                            ipoTitleText = isnow ? intl('228697') /* 当期业务量图 */ : intl('228698') /* 累计业务量图 */
                            break;
                        case '库存':
                            ipoTitleText = isnow ? intl('228701') /* 当期库存图 */ : intl('228702') /* 累计库存图 */
                            break;
                    }
                    yData = yData.reverse()
                    xLabel = xLabel.reverse()
                    var legendTitle = param.businessIndex
                    Highcharts.setOptions({
                        lang: {
                            downloadJPEG: intl('222618') /* 下载JPEG图片 */ ,
                            downloadPNG: intl('222621') /* 下载PNG图片 */ ,
                        }
                    })
                    $("#" + moduleName + 'Bar').highcharts({
                        credits: {
                            enabled: false
                        },
                        colors: ['#2277a2'],
                        chart: {
                            type: 'column',
                            spacingRight: 45,
                            width: 970
                        },
                        plotOptions: {
                            column: {
                                pointPadding: 0,
                                groupPadding: 0
                            },
                        },
                        title: {
                            text: ipoTitleText,
                            align: 'left',
                            style: {
                                "color": "#333333",
                                "fontSize": "12px",
                            },
                        },
                        noData: {
                            style: {
                                fontWeight: 'bold',
                                fontSize: '16px',
                                color: '#666666'
                            }
                        },
                        exporting: {
                            buttons: {
                                contextButton: {
                                    symbol: 'url(../resource/images/Company/export_download.png)',
                                    symbolSize: 20,
                                    symbolX: 23,
                                    symbolY: 22,
                                    x: 18,
                                    y: -5,
                                    menuItems: [
                                        null, null, defaultMenuItem[3], defaultMenuItem[4]
                                    ]
                                }
                            }
                        },
                        xAxis: [{
                            categories: xLabel,
                            crosshair: true,
                            type: 'category',
                            align: 'left',
                            labels: {
                                style: { color: '#333333' }
                            },
                            tickInterval: tickIntervalNum,
                            tickWidth: 1,
                            tickLength: 5,
                            tickColor: '#333333',
                            lineColor: '#333333'
                        }],
                        yAxis: {
                            title: {
                                text: '',
                            },
                            tickWidth: 1,
                            tickLength: 5,
                            tickColor: '#333333',
                            lineColor: '#333333',
                            lineWidth: 1,
                            gridLineDashStyle: 'longdash'
                        },
                        legend: {
                            symbolWidth: 25,
                            symbolHeight: 10,
                            symbolRadius: 2,
                            borderWidth: 0,
                            itemStyle: {
                                "fontSize": "12px",
                                "margin-left": "-10px",
                                "font-weight": "normal"
                            },
                            labelFormatter: function() {
                                return legendTitle
                            }
                        },
                        series: [{
                            name: '',
                            data: yData
                        }]
                    })
                    $("#" + moduleName + 'Bar').find('.highcharts-legend').find('.highcharts-point').attr("width", "16px")
                    $("#" + moduleName + 'Bar').find('.highcharts-legend').find('.highcharts-point').attr("height", "11px")
                    $("#" + moduleName + 'Bar').find('.highcharts-legend').find('.highcharts-point').attr("border-radius", "2px")
                } else {
                    $("#" + moduleName + 'Bar').empty()
                    $("#" + moduleName + 'Bar').append('<div class="chart-nodata">暂无数据</div>')
                }
            }
        })
    },
    chartClick: function(idSelector) {
        var param = {
            companycode: String(Company.companyId),
            isnow: $(idSelector).attr('data-isnow'),
            businesstype: $(idSelector).attr('data-businesstype'),
            businessIndex: $(idSelector).attr('data-businessindex'),
            frequency: $(idSelector).attr('data-frequency'),
        }
        myWfcAjax('getcompbussinessgraph', param, function(data) {
            var res = JSON.parse(data)
            if (res.Data && res.ErrorCode) {
                let dataArr = []
                let dataList = res.Data
                if (res.Data.length) {
                    dataList.map((item) => {
                        let obj = {}
                        obj['"' + item.time + '"'] = Number(item.value)
                        dataArr.push(obj)
                    })
                    let updateData = {
                        "config": {
                            "title": {
                                "text": ""
                            }
                        },
                        "indicators": [{
                            "meta": {
                                "type": "bar",
                                "name": param.businessIndex
                            },
                            "data": dataArr
                        }]
                    }
                    let cmd = {
                        func: 'newCloudUploadString',
                        isGlobal: 1,
                        category: 'Config:WCB', // 云盘根目录为 /Config/WCB
                        folder: '/',
                        filename: 'TemporaryFile.json',
                        content: encodeURI(JSON.stringify(updateData)),
                    }
                    wind.client.doFunc(cmd)
                    window.open('http://WCB/wcb/sites/wcb/?api=standard&chart=21000111')
                }
            }
        })
    },
    showIpoYield: function($dom, index) {
        // 业务-产量
        if (index && !(/\d/.test(index))) {
            index = Company.productTypeArr.indexOf(index)
        }
        var initIndex = index ? index : "0";
        Company.showIpoBusinessModule('IpoYield', '产量', $dom, initIndex)
    },
    showIpoSales: function($dom, index) {
        // 业务-销量
        if (index && !(/\d/.test(index))) {
            index = Company.productTypeArr.indexOf(index)
        }
        var initIndex = index ? index : "0"
        Company.showIpoBusinessModule('IpoSales', '销量', $dom, initIndex)
    },
    showIpoBusiness: function($dom, index) {
        // 业务-业务量
        if (index && !(/\d/.test(index))) {
            index = Company.productTypeArr.indexOf(index)
        }
        var initIndex = index ? index : "0"
        Company.showIpoBusinessModule('IpoBusiness', '业务量', $dom, initIndex)
    },
    showIpoStock: function($dom, index) {
        // 业务-库存
        if (index && !(/\d/.test(index))) {
            index = Company.productTypeArr.indexOf(index)
        }
        var initIndex = index ? index : "0"
        Company.showIpoBusinessModule('IpoStock', '库存', $dom, initIndex)
    },
    IntellectualProperty: function() {
        //知识产权
        var showNameArr = ["商标", "专利", "作品著作权", "软件著作权", "资质认证", "网站备案", "微信公众号", "微博账号", "头条号"];
        var numArr = ["trademark_num", "patent_num", "workcopyr_num", "softwarecopyright_num", "certification_merge_num", "domain_num", "webchat_public_num", "micro_blog_num", "today_headline_num"];
        var fnArr = ["getbrand", "getpatent", "getproductioncopyright", "getsoftwarecopyright", "getauthentication", "getdomainname", "getweixin", "getweibo", "gettoutiao"];
        var htmlArr = [];
        var showFlag = false; //默认不显示，如果有一个模块的basicnum大于0的时候，就显示此模块
        for (var i = 0; i < fnArr.length; i++) {
            if (numArr[i] == true || (Company.basicNum[numArr[i]] && Company.basicNum[numArr[i]] != 0)) {
                var moduleStr = ""
                if (fnArr[i] == "getbrand") {
                    moduleStr = Company.drawBrand();
                }
                if (fnArr[i] == "getpatent") {
                    moduleStr = Company.drawPatent();
                }
                moduleStr += '<div class="each-module" id="' + fnArr[i] + '"></div>';
                showFlag = true;
                htmlArr.push(moduleStr);
            }
        }
        $('#IntellectualProperty').append(htmlArr.join(""));
        var parameter = { "companyCode": Company.companyCode, "companyId": Company.companyId };
        if (showFlag) {
            myWfcAjax("intellectualproperty", parameter, function(data) {
                //请求知识产权数据
                var data = JSON.parse(data);
                if (Company.ModelHasData) {
                    Company.companyIntellectualData = data.Data;
                    for (var i = 0; i < fnArr.length; i++) {
                        if (numArr[i] == true || (Company.basicNum[numArr[i]] && Company.basicNum[numArr[i]] != 0)) {
                            if (typeof Company[fnArr[i]] == 'function') {
                                Company[fnArr[i]]($("#" + fnArr[i]));
                            }
                        }
                    }
                } else {
                    Company.moduleHaveNoData("#IntellectualProperty", intl('142033' /* 暂无知识产权数据 */ ));
                }
            }, function(data) {
                Company.moduleHaveNoData("#IntellectualProperty", intl('142033' /* 暂无知识产权数据 */ ));
            });
        } else {
            Company.moduleHaveNoData("#IntellectualProperty", intl('142033' /* 暂无知识产权数据 */ ));
        }
    },
    HistoryData: function() {
        //历史数据
        var showNameArr = ["工商信息", "法人和高管", "股东信息", "对外投资", "历史股权出质", "历史动产抵押", "历史行政许可[工商局]", "历史行政许可[信用中国]", "历史裁判文书", "历史失信信息", "历史被执行人", "历史开庭公告", "历史法院公告", "历史工商行政处罚", "历史行政处罚[信用中国]", "历史经营异常", "历史网站备案"];
        var numArr = ['his_business_info_num', 'his_manager_num', 'his_shareholder_num', 'his_invest_num', 'his_stock_pledge_num', 'his_chatteimortgageitem_num', 'his_permission_num', 'his_admin_licence_num', 'his_judgeinfo_num', 'his_breakpromise_num', 'his_debetor_num', 'his_trialnotice_num', 'his_coutnotice_num', true, 'his_punishment_num', 'his_bizexception_num', 'his_domain_num']
        var fnArr = ['historycompany', 'historylegalperson', 'historyshareholder', 'historyinvest', 'historyshowPledgedstock', 'historyshowChattelmortgage', 'historypermission', 'historypermission02', 'historycourtdecision', 'historydishonesty', 'historypersonenforced', 'historycourtopenannouncement', 'historycourtannouncement', 'shbdgHistoryPunishment', 'historyadministrativepenalty', 'historyoperationexception', 'historydomainname'];
        var htmlArr = [];
        var showFlag = false; //默认不显示，如果有一个模块的basicnum大于0的时候，就显示此模块
        for (var i = 0; i < fnArr.length; i++) {
            if (numArr[i] == true || (Company.basicNum[numArr[i]] && Company.basicNum[numArr[i]] != 0)) {
                var moduleStr = '<div class="each-module" id="' + fnArr[i] + '"></div>';
                showFlag = true;
                htmlArr.push(moduleStr);
            }
        }
        $('<i class="module-vip-tips" title="您正在使用付费高级功能" >' + intl('209302' /* 高级功能 */ ) + '</i>').insertAfter('#HistoryData .title-module .title-module-text');
        $('#HistoryData').append(htmlArr.join(""));
        var parameter = { "companyCode": Company.companyCode, "companyId": Company.companyId };
        var tips = intl('208262');
        if (!Company.isVip) {
            // 暂无权限
            Common.notVipModule("#HistoryData", intl('33638' /* 历史数据 */ ), tips ? tips.replace(/企业套餐/g, 'VIP/SVIP套餐') : '购买VIP/SVIP，即可查看具体信息');
            return;
        }
        if (showFlag) {
            myWfcAjax("historyinfo", parameter, function(data) {
                //请求知识产权数据
                var data = JSON.parse(data);
                if (data.ErrorCode == '-10') {
                    // 暂无权限     
                    Common.notVipModule("#HistoryData", intl('33638' /* 历史数据 */ ), tips ? tips.replace(/企业套餐/g, 'VIP/SVIP套餐') : '购买VIP/SVIP，即可查看具体信息');
                    return;
                }
                if (Company.ModelHasData) {
                    Company.companyHistoryData = data.Data;
                    for (var i = 0; i < fnArr.length; i++) {
                        if (numArr[i] == true || (Company.basicNum[numArr[i]] && Company.basicNum[numArr[i]] != 0)) {
                            if (typeof Company[fnArr[i]] == 'function') {
                                Company[fnArr[i]]($("#" + fnArr[i]));
                            }
                        }
                    }
                } else {
                    Company.moduleHaveNoData("#HistoryData", intl('142034' /* 暂无历史数据数据 */ ));
                }
            }, function(data) {
                Company.moduleHaveNoData("#HistoryData", intl('142034' /* 暂无历史数据数据 */ ));
            });
        } else {
            Company.moduleHaveNoData("#HistoryData", intl('142034' /* 暂无历史数据数据 */ ));
        }
    },
    historycompany: function($dom) {
        var htmlArr = [];
        htmlArr.push('<div class="widget-model"><div class="widget-header"><span class="fl">' + intl('138603' /* 历史工商信息 */ ) + '</span></div>');
        htmlArr.push('<div class="table-container"><table class="table-company" id="tableHistoryCompany"><tbody>');
        htmlArr.push('<thead><tr><th align="left"width="30%" >' + intl('138848' /* 类别 */ ) + '</th><th align="left" width="20%">' + intl('138688' /* 截止时间 */ ) + '</th><th align="left"width="50%">' + intl('19500' /* 内容 */ ) + '</th></tr></thead><tbody>')
        if (Company.companyHistoryData && Company.companyHistoryData.hisregistercaptical && Company.companyHistoryData.hisregistercaptical.length > 0) {
            var hisregistercaptical = Company.companyHistoryData.hisregistercaptical;
            var len = hisregistercaptical.length;
            htmlArr.push('<tr><td rowspan="' + len + '">' + intl('138325' /* 历史注册资本 */ ) + '</td><td>' + Common.formatTime(hisregistercaptical[0].deadline) + '</td><td>' + Common.formatMoney(hisregistercaptical[0].content, [4, '万元']) + '</td></tr>');
            for (var i = 1; i < len; i++) {
                htmlArr.push('<tr><td>' + Common.formatTime(hisregistercaptical[i].deadline) + '</td><td>' + Common.formatMoney(hisregistercaptical[i].content, [4, '万元']) + '</td></tr>');
            }
        }
        if (Company.companyHistoryData && Company.companyHistoryData.hisbusinessscope && Company.companyHistoryData.hisbusinessscope.length > 0) {
            var hisbusinessscope = Company.companyHistoryData.hisbusinessscope;
            var len = hisbusinessscope.length;
            htmlArr.push('<tr><td rowspan="' + len + '">' + intl('138321' /* 历史经营范围 */ ) + '</td><td>' + Common.formatTime(hisbusinessscope[0].deadline) + '</td><td>' + '<span class="text-2-show view-cont-control" title="点击展开">' + Common.formatCont(hisbusinessscope[0].content) + '</span>' + '</td></tr>');
            for (var i = 1; i < len; i++) {
                htmlArr.push('<tr><td>' + Common.formatTime(hisbusinessscope[i].deadline) + '</td><td>' + '<span class="text-2-show view-cont-control" title="点击展开">' + Common.formatCont(hisbusinessscope[i].content) + '</span>' + '</td></tr>');
            }
        }
        if (Company.companyHistoryData && Company.companyHistoryData.histel && Company.companyHistoryData.histel.length > 0) {
            var histel = Company.companyHistoryData.histel;
            var len = histel.length;
            htmlArr.push('<tr><td rowspan="' + len + '">历史联系电话</td><td>' + Common.formatTime(histel[0].deadline) + '</td><td>' + histel[0].content + '</td></tr>');
            for (var i = 1; i < len; i++) {
                htmlArr.push('<tr><td>' + Common.formatTime(histel[i].deadline) + '</td><td>' + histel[0].content + '</td></tr>');
            }
        }
        if (Company.companyHistoryData && Company.companyHistoryData.hisaddress && Company.companyHistoryData.hisaddress.length > 0) {
            var hisaddress = Company.companyHistoryData.hisaddress;
            var len = hisaddress.length;
            htmlArr.push('<tr><td rowspan="' + len + '">' + intl('138324' /* 历史联系地址 */ ) + '</td><td>' + Common.formatTime(hisaddress[0].deadline) + '</td><td>' + '<span class="text-2-show view-cont-control" title="点击展开">' + Common.formatCont(hisaddress[0].content) + '</span>' + '</td></tr>');
            for (var i = 1; i < len; i++) {
                htmlArr.push('<tr><td>' + Common.formatTime(hisaddress[i].deadline) + '</td><td>' + hisaddress[i].content + '</td></tr>');
            }
        }
        if (Company.companyHistoryData && Company.companyHistoryData.hisemail && Company.companyHistoryData.hisemail.length > 0) {
            var hisemail = Company.companyHistoryData.hisemail;
            var len = hisemail.length;
            htmlArr.push('<tr><td rowspan="' + len + '">历史电子邮件</td><td>' + Common.formatTime(hisemail[0].deadline) + '</td><td>' + hisemail[0].content + '</td></tr>');
            for (var i = 1; i < len; i++) {
                htmlArr.push('<tr><td>' + Common.formatTime(hisemail[i].deadline) + '</td><td>' + hisemail[i].content + '</td></tr>');
            }
        }
        htmlArr.push('</tbody></table></div></div>');
        var $container = $dom ? $dom : $('#workspace');
        $container.empty().html(htmlArr.join(""));
    },
    historylegalperson: function($dom) {
        //历史高管和法人
        var tableSetting = [];
        if (Company.isHongkong || Company.isTw) {
            tableSetting = {
                interface: "gethismanager",
                moduleName: intl('138323' /* 历史高管和法人 */ ),
                moreLink: "historylegalperson",
                modelNum: "his_manager_num",
                thWidthRadio: ["5%", "15%", "10%", "20%", "20%", "30%"],
                thName: [intl('138741' /* 序号 */ ), intl('34979' /* 姓名 */ ), intl('138728' /* 职务 */ ), intl('138691' /* 任职日期 */ ), intl('138689' /* 离职日期 */ ), intl('222767', '所代表法人')],
                align: [0, 0, 0, 0, 0],
                fields: ["NO.", "person_name", "person_position", "employment_date", "departure_date", "represented_legal_person"]
            }
        } else {
            tableSetting = {
                interface: "gethismanager",
                moduleName: intl('138323' /* 历史高管和法人 */ ),
                moreLink: "historylegalperson",
                modelNum: "his_manager_num",
                thWidthRadio: ["5%", "23%", "24%", "24%", "24%"],
                thName: [intl('138741' /* 序号 */ ), intl('34979' /* 姓名 */ ), intl('138728' /* 职务 */ ), intl('138691' /* 任职日期 */ ), intl('138689' /* 离职日期 */ )],
                align: [0, 0, 0, 0, 0],
                fields: ["NO.", "person_name", "person_position", "employment_date", "departure_date"]
            }
        }

        var $container = $dom ? $dom : $('#workspace');
        $container.empty().html(Company.drawTab(tableSetting, "tabHismanager", "tbodyHismanager", false, $dom));
        var columnDefsSet = [{
                "targets": 1,
                "data": 'person_name',
                "render": function(data, type, full, meta) {
                    // if (data && full['person_id']) {
                    //     var personId = full.person_id;
                    //     //bury-person
                    //     var pingParam = '&fromModule=historylegalperson&fromField=姓名&opId=' + personId;
                    //     return '<a class="underline wi-secondary-color wi-link-color" target="_blank" href="Person.html?id=' + personId + '&name=' + data + Common.isNoToolbar() + pingParam + '" data-pingParam="' + pingParam + '">' + Common.formatCont(data) + '</a>';
                    // } else {
                    //     return Common.formatCont(data)
                    // }
                    return Common.formatCont(data)
                }
            },
            {
                "targets": 3,
                "data": 'employment_date',
                "render": function(data) {
                    return Common.formatTime(data, [4, '&nbsp;'])
                }
            },
            {
                "targets": 4,
                "data": 'departure_date',
                "render": function(data) {
                    return Common.formatTime(data, [4, '&nbsp;'])
                }
            }
        ]
        if ($dom) {
            var eachModuleData = Company.companyHistoryData.hismanager ? Company.companyHistoryData.hismanager : null;
            Company.pageSetting_new("#tabHismanager", tableSetting, eachModuleData, columnDefsSet, null, $dom);
        } else {
            Company.pageSetting("#tabHismanager", tableSetting, columnDefsSet, null, $dom);
        }
    },
    historyshareholder: function($dom) {
        //历史股东
        var tableSetting = {
            interface: "gethisshareholder",
            moduleName: intl('138326' /* 历史股东 */ ),
            moreLink: "historyshareholder",
            modelNum: "his_shareholder_num",
            thWidthRadio: ["5%", "25%", "15%", "15%", "10%", "15%", "15%"],
            thName: [intl('138741' /* 序号 */ ), intl('32959' /* 股东 */ ), intl('138871' /* 持股比例 */ ), intl('138652' /* 出资额(万元)  */ ), intl('2045' /* 币种 */ ), intl('142028', '参股日期'), intl('63486' /* 退出日期 */ )],
            align: [0, 0, 0, 2, 0, 0, 0],
            fields: ["NO.", "sharehold_name", "shareholding_radio", "subscribe_money", "currency_type", "start_date", "exit_date"]
        }
        var $container = $dom ? $dom : $('#workspace');
        $container.empty().html(Company.drawTab(tableSetting, "tabHisShareHold", "tbodyHisShareHold", false, $dom));
        var columnDefsSet = [{
                "targets": 1,
                "data": 'sharehold_name',
                "render": function(data, type, full, meta) {
                    if (data && full['sharehold_id']) {
                        var personId = full.sharehold_id;
                        var pingParam = '&fromModule=historyshareholder&fromField=股东&opId=' + personId; //bury
                        if (personId.length < 16) {
                            return '<a class="underline wi-secondary-color wi-link-color" data-code="' + personId + '" data-name="' + data + '" target="_blank" href="Company.html?companycode=' + personId + '&name=' + data + Common.isNoToolbar() + '" data-pingParam="' + pingParam + '">' + Common.formatCont(data) + '</a>';
                        } else {
                            //bury-person
                            // return '<a class="underline wi-secondary-color wi-link-color" data-code="' + personId + '" data-name="' + data + '" target="_blank" href="Person.html?id=' + personId + '&name=' + data + Common.isNoToolbar() + pingParam + '" data-pingParam="' + pingParam + '">' + Common.formatCont(data) + '</a>';
                            return Common.formatCont(data)
                        }
                    } else {
                        return Common.formatCont(data)
                    }
                }
            },
            {
                "targets": 2,
                "data": 'shareholding_radio',
                "render": function(data, type, full, meta) {
                    if (data) {
                        return Common.formatPercent(data)
                    } else {
                        return "--"
                    }
                }
            },
            {
                "targets": 3,
                "data": 'subscribe_money',
                "render": function(data) {
                    return Common.formatMoney(data, [2, '&nbsp;'])
                }
            },
            {
                "targets": 4,
                "data": 'currency_type',
                "render": function(data, type, full, meta) {
                    return Common.formatCont(data, full)
                }
            },
            {
                "targets": 5,
                "data": 'start_date',
                "render": function(data) {
                    return Common.formatTime(data)
                }
            },
            {
                "targets": 6,
                "data": 'exit_date',
                "render": function(data) {
                    return Common.formatTime(data)
                }
            }
        ]
        if ($dom) {
            var eachModuleData = Company.companyHistoryData.historyShareHold ? Company.companyHistoryData.historyShareHold : null;
            Company.pageSetting_new("#tabHisShareHold", tableSetting, eachModuleData, columnDefsSet, null, $dom);
        } else {
            Company.pageSetting("#tabHisShareHold", tableSetting, columnDefsSet, null, $dom);
        }
        $('#tabHisShareHold').off('click').on('click', '.underline', Company.linkWithCodeEventHandler);
    },
    historyinvest: function($dom) {
        //历史对外投资
        var tableSetting = {
            interface: "gethisinvest",
            moduleName: intl('142472' /* 历史对外投资 */ ),
            moreLink: "historyinvest",
            modelNum: "his_invest_num",
            thWidthRadio: ["5%", "20%", "15%", "10%", "15%", "10%", "10%", "10%"],
            thName: [intl('138741' /* 序号 */ ), intl('40672' /* 被投资企业名称 */ ), intl('142027' /* 被投资企业法人 */ ), intl('138871' /* 持股比例 */ ), intl('138652' /* 出资额(万元)  */ ), intl('2045' /* 币种 */ ), intl('142028' /* 参股日期 */ ), intl('63486' /* 退出日期 */ )],
            align: [0, 0, 0, 0, 2, 0, 0, 0],
            fields: ["NO.", "investcompany_name", "legal_name", "invest_radio", "subscribe_money", "currency_type", "start_date", "exit_date"]
        }
        var $container = $dom ? $dom : $('#workspace');
        $container.empty().html(Company.drawTab(tableSetting, "tabHisInvest", "tbodyHisInvest", false, $dom));
        var columnDefsSet = [{
                "targets": 1,
                "data": 'investcompany_name',
                "render": function(data, type, full, meta) {
                    if (data && full['investcompany_id']) {
                        var personId = full.investcompany_id;
                        var pingParam = '&fromModule=historyinvest&fromField=被投资企业&opId=' + personId; //bury
                        if (personId.length < 16) {
                            return '<a class="underline wi-secondary-color wi-link-color" data-code="' + personId + '" data-name="' + data + '" target="_blank" href="Company.html?companycode=' + personId + '&name=' + data + Common.isNoToolbar() + '" data-pingParam="' + pingParam + '">' + Common.formatCont(data) + '</a>';
                        } else {
                            //bury-person
                            // return '<a class="underline wi-secondary-color wi-link-color" data-code="' + personId + '" data-name="' + data + '" target="_blank" href="Person.html?id=' + personId + '&name=' + data + Common.isNoToolbar() + '" data-pingParam="' + pingParam + '">' + Common.formatCont(data) + '</a>';
                            return Common.formatCont(data)
                        }
                    } else {
                        return Common.formatCont(data)
                    }
                }
            }, {
                "targets": 2,
                "data": 'legal_name',
                "render": function(data, type, full, meta) {
                    if (data && full['legal_id']) {
                        var personId = full.legal_id;
                        var pingParam = '&fromModule=historyinvest&fromField=被投资企业法人&opId=' + personId; //bury
                        if (personId.length < 16) {
                            return '<a class="underline wi-secondary-color wi-link-color" data-code="' + personId + '" data-name="' + data + '" target="_blank" href="Company.html?companycode=' + personId + '&name=' + data + Common.isNoToolbar() + '" data-pingParam="' + pingParam + '">' + Common.formatCont(data) + '</a>';
                        } else {
                            // return '<a class="underline wi-secondary-color wi-link-color" data-code="' + personId + '" data-name="' + data + '" target="_blank" href="Person.html?id=' + personId + '&name=' + data + Common.isNoToolbar() + '" data-pingParam="' + pingParam + '">' + Common.formatCont(data) + '</a>';
                            return Common.formatCont(data)
                        }
                    } else {
                        return Common.formatCont(data)
                    }
                }
            },
            {
                "targets": 3,
                "data": 'invest_radio',
                "render": function(data, type, full, meta) {
                    if (data) {
                        return Common.formatPercent(data);
                    } else {
                        return "--"
                    }

                }
            },
            {
                "targets": 4,
                "data": 'subscribe_money',
                "render": function(data) {
                    return Common.formatMoney(data, [2, '&nbsp;'])
                }
            },
            {
                "targets": 5,
                "data": 'currency_type',
                "render": function(data, type, full, meta) {
                    return Common.formatCont(data, full)
                }
            },
            {
                "targets": 6,
                "data": 'start_date',
                "render": function(data) {
                    return Common.formatTime(data)
                }
            },
            {
                "targets": 7,
                "data": 'exit_date',
                "render": function(data) {
                    return Common.formatTime(data)
                }
            }
        ]
        if ($dom) {
            var eachModuleData = Company.companyHistoryData && Company.companyHistoryData.historyInvest ? Company.companyHistoryData.historyInvest : null;
            Company.pageSetting_new("#tabHisInvest", tableSetting, eachModuleData, columnDefsSet, null, $dom);
        } else {
            Company.pageSetting("#tabHisInvest", tableSetting, columnDefsSet, null, $dom);
        }
        $('#tabHisInvest').off('click').on('click', '.underline', Company.linkWithCodeEventHandler);
    },
    historypersonenforced: function($dom) {
        //历史被执行人
        var tableSetting = {
            interface: "gethisdebetor",
            moduleName: intl('149492' /* 被执行人 */ ),
            moreLink: "gethisdebetor",
            modelNum: "his_debetor_num",
            thWidthRadio: ["5%", "30%", "20%", "30%", "15%"],
            thName: [intl('138741' /* 序号 */ ), intl('138190' /* 案号 */ ), intl('138288' /* 执行标的 */ ), intl('138228' /* 执行法院 */ ), intl('138294' /* 立案时间 */ )],
            align: [0, 0, 0, 0, 0],
            fields: ["NO.", "case_no|formatCont", "exe_target|formatCont", "exe_court|formatCont", "case_time|formatTime"],
        }
        var $container = $dom ? $dom : $('#workspace');
        $container.empty().html(Company.drawTab(tableSetting, "tabHisPersonenforced", "tbodyHisPersonenforced", false, $dom));
        var columnDefsSet = [{
                "targets": 1,
                "data": 'case_no',
                "render": function(data) {
                    return Common.formatCont(data)
                }
            },
            {
                "targets": 2,
                "data": 'exe_target',
                "render": function(data) {
                    return Common.formatCont(data)
                }
            },
            {
                "targets": 3,
                "data": 'exe_court',
                "render": function(data, type, full, meta) {
                    return Common.formatCont(data)
                }
            },
            {
                "targets": 4,
                "data": 'case_time',
                "render": function(data) {
                    return Common.formatTime(data)
                }
            }
        ]
        if ($dom) {
            var eachModuleData = Company.companyHistoryData && Company.companyHistoryData.hisdebetor ? Company.companyHistoryData.hisdebetor : null;
            Company.pageSetting_new("#tabHisPersonenforced", tableSetting, eachModuleData, columnDefsSet, null, $dom);
        } else {
            Company.pageSetting("#tabHisPersonenforced", tableSetting, columnDefsSet, null, $dom);
        }
    },
    historypermission: function($dom) {
        //历史行政许可 - 工商局
        var tableSetting = {
            interface: "gethispermission",
            moreLink: "historypermission",
            moduleName: intl('222486', '历史行政许可[工商局]'),
            modelNum: "his_permission_num",
            /* 后续更改 */
            thWidthRadio: ["6%", "28%", "15%", "12%", "12%", "15%", "32%"],
            thName: [intl('138741' /* 序号 */ ), intl('138376' /* 许可文件编号 */ ), intl('138375' /* 许可文件名称 */ ), intl('138571' /* 有效期自 */ ), intl('138802' /* 有效期至 */ ), intl('138377' /* 许可机关 */ ), intl('138378' /* 许可内容 */ )],
            align: [0, 0, 0, 0, 0, 0],
            fields: ["NO.", "permission_file_number|formatCont", "permission_file_name|formatCont", "effective_start_date|formatTime", "effective_expiration_date|formatTime", "license_department", "license_content"],
        }
        var $container = $dom ? $dom : $('#workspace');
        $container.empty().html(Company.drawTab(tableSetting, "tabHisPermission", "tbodyHisPermission", false, $dom));
        var columnDefsSet = [{
                    "targets": 1,
                    "data": 'permission_file_number',
                    "render": function(data) {
                        return Common.formatCont(data)
                    }
                },
                {
                    "targets": 2,
                    "data": 'permission_file_name',
                    "render": function(data) {
                        return Common.formatCont(data)
                    }
                },
                {
                    "targets": 3,
                    "data": 'effective_start_date',
                    "render": function(data, type, full, meta) {
                        return Common.formatTime(data)
                    }
                },
                {
                    "targets": 4,
                    "data": 'effective_expiration_date',
                    "render": function(data, type, full, meta) {
                        return Common.formatTime(data)
                    }
                },
                {
                    "targets": 5,
                    "data": 'license_department',
                    "render": function(data, type, full, meta) {
                        return Common.formatCont(data)
                    }
                },
                {
                    "targets": 6,
                    "data": 'license_content',
                    "render": function(data, type, full, meta) {
                        var result = '<span class="text-2-show view-cont-control" title="点击展开">' + Common.formatCont(data) + '</span>';
                        return result;
                    }
                }
            ]
            // 小接口 - 因为大接口没数据会报错 - null， 影响下面模块加载
            // var params = { "companycode": Company.companyCode, "pageSize": 10 };
            // Company.pageSetting("#tabHisPermission", tableSetting, columnDefsSet, params, $dom);
            // 大接口   
        if ($dom) {
            var eachModuleData = Company.companyHistoryData && Company.companyHistoryData.hispermission ? Company.companyHistoryData.hispermission : null;
            Company.pageSetting_new("#tabHisPermission", tableSetting, eachModuleData, columnDefsSet, null, $dom);
        } else {
            Company.pageSetting("#tabHisPermission", tableSetting, columnDefsSet, null, $dom);
        }
    },
    historypermission02: function($dom) {
        //历史行政许可 - 信用中国
        var tableSetting = {
            interface: "gethisadminlicense",
            moreLink: "historypermission02",
            moduleName: intl('222834', '历史行政许可[信用中国]'),
            modelNum: "his_admin_licence_num",
            thWidthRadio: ["5%", "30%", "15%", "25%", "25%"],
            thName: [intl('138741' /* 序号 */ ), intl('222773', '行政许可决定文书号'), intl('222771', '许可决定日期'), intl('222768', '有效期起止日期'), intl('138377' /* 许可机关 */ )],
            align: [0, 0, 0, 0, 0, 0],
            fields: ["NO.", "docId", "licenceDate", "startDate", "orgName"],
        }
        var $container = $dom ? $dom : $('#workspace');
        $container.empty().html(Company.drawTab(tableSetting, "tabHisPermission02", "tbodyHisPermission02", false, $dom));
        var columnDefsSet = [{
                "targets": 1,
                "data": 'docName',
                "render": function(data, type, full, meta) {
                    if (full.ob_object_id) {
                        return '<a target="_blank" class="drop-up underline wi-secondary-color wi-link-color" data-interface="' + 'gethisadminlicensedetail' + '" data-key="' + 'detailId' + '" data-tdlen="' + '5' + '" data-value="' + full.detailId + '">' + (data ? data : '--') + '</a>'
                    } else {
                        return Common.formatCont(data)
                    }
                }
            },
            {
                "targets": 2,
                "data": 'licenceDate',
                "render": function(data) {
                    return Common.formatTime(data)
                }
            },
            {
                "targets": 3,
                "data": 'startDate',
                "render": function(data, type, full, meta) {
                    if (data || full['endDate']) {
                        var starDate = Common.formatTime(data);
                        var endDate = Common.formatTime(full['endDate']);
                        return starDate + "至" + endDate;
                    } else {
                        return "--";
                    }
                }
            },
            {
                "targets": 4,
                "data": 'orgName',
                "render": function(data, type, full, meta) {
                    var code = full['orgId'];
                    return Common.addLinkForCompanyOrPerson(data, code)
                }
            }
        ]
        Company.pageSetting("#tabHisPermission02", tableSetting, columnDefsSet, null, $dom);
        $('#tabHisPermission02').off('click').on('click', '.drop-up', function() {
            var Band = false;
            if ($(this).parent().parent().parent().attr('id') == 'tbodyBand') {
                Band = true;
            }
            Company.showContentDetail(this, $(this).attr("data-tdlen"), Band)
            return false;
        });
        $('#tabHisPermission02').off('click').on('click', '.underline', Company.linkWithCodeEventHandler);
    },
    historydomainname: function($dom) {
        // 历史网站备案 - 大接口
        var tableSetting = {
            interface: "gethisdomain",
            moduleName: intl('205871' /* 历史网站备案 */ ),
            moreLink: "historydomainname",
            modelNum: "his_domain_num",
            /* 后续更改 */
            thWidthRadio: ["5%", "20%", "25%", "15%", "20%", "15%"],
            thName: [intl('138741' /* 序号 */ ), intl('138578' /* 网站名称 */ ), intl('138805' /* 网址 */ ), intl('138266' /* 域名 */ ), intl('138328' /* 网站备案/许可证号 */ ), intl('138159' /* 审核通过时间 */ )],
            align: [0, 0, 0, 0, 0, 0],
            fields: ["NO.", "web_name|formatCont", "web_home_page", "domain_name|formatCont", "web_number|formatCont", "audit_transit_time|formatTime"],
        }
        var $container = $dom ? $dom : $('#workspace');
        $container.empty().html(Company.drawTab(tableSetting, "tabHisDomainname", "tbodyHisDomainname", false, $dom));
        var columnDefsSet = [{
                    "targets": 1,
                    "data": 'web_name',
                    "render": function(data, type, full, meta) {
                        return Common.formatCont(data)
                    }
                },
                {
                    "targets": 2,
                    "data": 'web_home_page',
                    "render": function(data, type, full, meta) {
                        return Common.formatWebsite(data ? data : 'www.' + full['domain_name'])
                    }
                },
                {
                    "targets": 3,
                    "data": 'domain_name',
                    "render": function(data) {
                        return Common.formatCont(data)
                    }
                },
                {
                    "targets": 4,
                    "data": 'web_number',
                    "render": function(data) {
                        return Common.formatCont(data)
                    }
                },
                {
                    "targets": 5,
                    "data": 'audit_transit_time',
                    "render": function(data, type, full, meta) {
                        return Common.formatTime(data)
                    }
                }
            ]
            // 小接口
            // var params = { "companycode": Company.companyCode, "pageSize": 10 };
            // Company.pageSetting("#tabHisDomainname", tableSetting, columnDefsSet, params, $dom);
            // 大接口
        if ($dom) {
            var eachModuleData = Company.companyHistoryData && Company.companyHistoryData.hisdomain ? Company.companyHistoryData.hisdomain : null;
            Company.pageSetting_new("#tabHisDomainname", tableSetting, eachModuleData, columnDefsSet, null, $dom);
        } else {
            Company.pageSetting("#tabHisDomainname", tableSetting, columnDefsSet, null, $dom);
        }
    },
    historyoperationexception: function($dom) {
        //历史经营异常
        var tableSetting = {
            interface: "gethisbizexception",
            moduleName: intl('205866' /* 历史经营异常 */ ),
            moreLink: "historyoperationexception",
            modelNum: "his_bizexception_num",
            thWidthRadio: ["5%", "10%", "25%", "10%", "10%", "25%", "15%"],
            thName: [intl('138741' /* 序号 */ ), intl('138241' /* 列入日期 */ ), intl('138470' /* 列入经营异常名录原因 */ ), intl('138419' /* 列入决定机关 */ ), intl('138246' /* 移出日期 */ ), intl('138471' /* 移出经营异常名录原因 */ ), intl('138420' /* 移出决定机关 */ )],
            align: [0, 0, 0, 0, 0, 0, 0],
            fields: ["NO.", "exc_record_date|formatTime", "exc_record_reason|formatCont", "exc_decision_organ|formatCont", "exc_remove_date|formatTime", "exc_remove_reason|formatCont", "exc_decision_organ_out|formatCont"],
        }
        var $container = $dom ? $dom : $('#workspace');
        $container.empty().html(Company.drawTab(tableSetting, "tabHisOperationexception", "tbodyHisOperationexception", false, $dom));
        var columnDefsSet = [{
                    "targets": 1,
                    "data": 'exc_record_date',
                    "render": function(data, type, full, meta) {
                        return Common.formatTime(data)
                    }
                },
                {
                    "targets": 2,
                    "data": 'exc_record_reason',
                    "render": function(data) {
                        return Common.formatCont(data)
                    }
                },
                {
                    "targets": 3,
                    "data": 'exc_decision_organ',
                    "render": function(data, type, full, meta) {
                        return Common.formatCont(data)
                    }
                },
                {
                    "targets": 4,
                    "data": 'exc_remove_date',
                    "render": function(data, type, full, meta) {
                        if (!full['exc_remove_reason'] && !full['exc_remove_date'] && !full['exc_decision_organ_out']) {
                            return '<span class="text-red wi-secondary-color">未移出</span>';
                        } else {
                            return Common.formatTime(data)
                        }
                    }
                },
                {
                    "targets": 5,
                    "data": 'exc_remove_reason',
                    "render": function(data, type, full, meta) {
                        if (!full['exc_remove_reason'] && !full['exc_remove_date'] && !full['exc_decision_organ_out']) {
                            return '<span class="text-red wi-secondary-color">未移出</span>';
                        } else {
                            return Common.formatCont(data)
                        }
                    }
                },
                {
                    "targets": 6,
                    "data": 'exc_decision_organ_out',
                    "render": function(data, type, full, meta) {
                        if (!full['exc_remove_reason'] && !full['exc_remove_date'] && !full['exc_decision_organ_out']) {
                            return '<span class="text-red wi-secondary-color">未移出</span>';
                        } else {
                            return Common.formatCont(data)
                        }
                    }
                }
            ]
            // 小接口
            // var params = { "companycode": Company.companyCode, "cause": Company.hisCourtannouncementSelVal, "pageSize": 10 };
            // Company.pageSetting("#tabHisOperationexception", tableSetting, columnDefsSet, params, $dom);
            // 大接口
        if ($dom) {
            var eachModuleData = Company.companyHistoryData.hisbizexception ? Company.companyHistoryData.hisbizexception : null;
            Company.pageSetting_new("#tabHisOperationexception", tableSetting, eachModuleData, columnDefsSet, null, $dom);
        } else {
            Company.pageSetting("#tabHisOperationexception", tableSetting, columnDefsSet, null, $dom);
        }
    },
    historydishonesty: function($dom) {
        //历史失信信息
        var tableSetting = {
            interface: "gethisbreakpromise",
            moduleName: intl('205862' /* 历史失信信息 */ ),
            moreLink: "historydishonesty",
            modelNum: "his_breakpromise_num",
            /* 还没出 */
            thWidthRadio: ["5%", "22%", "10%", "26%", "14%", "13%", "10%"],
            thName: [intl('138741' /* 序号 */ ), intl('138190' /* 案号 */ ), intl('138435' /* 被执行人的履行情况 */ ), intl('138512' /* 行为具体情形 */ ), intl('138228' /* 执行法院 */ ), intl('138294' /* 立案时间 */ ), intl('132647' /* 操作 */ )],
            align: [0, 0, 0, 0, 0, 0, 0],
            fields: ["NO.", "case_no|formatCont", "debetor_fulfil|formatCont", "debetor_action|formatCont", "exe_court|formatCont", "case_time|formatTime", "ob_object_id|showDetailLink:getbreakpromisedetail,detailId,7"],
        }
        var $container = $dom ? $dom : $('#workspace');
        $container.empty().html(Company.drawTab(tableSetting, "tabHisDishonesty", "tbodyHisDishonesty", true, $dom));
        var columnDefsSet = [{
                "targets": 1,
                "data": 'case_no',
                "render": function(data) {
                    return Common.formatCont(data)
                }
            },
            {
                "targets": 2,
                "data": 'debetor_fulfil',
                "render": function(data) {
                    return Common.formatCont(data)
                }
            },
            {
                "targets": 3,
                "data": 'debetor_action',
                "render": function(data) {
                    return Common.formatCont(data)
                }
            },
            {
                "targets": 4,
                "data": 'exe_court',
                "render": function(data) {
                    return Common.formatCont(data)
                }
            },
            {
                "targets": 5,
                "data": 'case_time',
                "render": function(data, type, full, meta) {
                    return Common.formatTime(data)
                }
            },
            {
                "targets": 6,
                "data": 'ob_object_id',
                "render": function(data, type, full, meta) {
                    //bury-ping 参数以及点击触发class,然后触发埋点
                    //需要获取-操作项id-实体
                    var buryData = 'data-buryId="' + data + '" data-buryEntity="historydishonesty"'; //bury
                    return Common.showDetailLink(data, ["gethisbreakpromisedetail", "detailId", 7], buryData);
                }
            }
        ]
        var params = { "companycode": Company.companyCode, "pageSize": 10 };
        Company.pageSetting("#tabHisDishonesty", tableSetting, columnDefsSet, params, $dom);
    },
    hisCourtannouncementSelVal: "",
    historycourtannouncement: function($dom, oIndex, oVal, oCount) {
        //历史法院公告
        var tableSetting = {
            moreLink: "historycourtannouncement",
            interface: "gethiscourtannounce",
            moduleName: intl('205863' /* 历史法院公告 */ ),
            modelNum: "his_coutnotice_num",
            selName: ["hisCourtannouncementSelVal"], //聚合的名字
            aggName: ["aggs_cause"], //聚合类下的名字,有可能有多个，比如裁判文书
            thWidthRadio: ["8%", "12%", "20%", "23%", "15%", "12%", "10%"],
            thName: [intl('138741' /* 序号 */ ), intl('138147' /* 公示类型 */ ), intl('138196' /* 案由 */ ), intl('138427' /* 当事人 */ ), intl('138148' /* 公告人 */ ), intl('138144' /* 公示时间 */ ), intl('40513' /* 详情 */ )],
            align: [0, 0, 0, 0, 0, 0],
            fields: ["NO.", "announcement_type", "announcement_cause", 'announcement_party', "announcer", "announcement_time", "announcement_id"],
        }
        var $container = $dom ? $dom : $('#workspace');
        $container.empty().html(Company.drawTab(tableSetting, "tabHisCourtannouncement", "tbodyHisCourtannouncement", false, $dom));
        var columnDefsSet = [{
                "targets": 1,
                "data": 'announcement_type',
                "render": function(data) {
                    return Common.formatCont(data)
                }
            },
            {
                "targets": 2,
                "data": 'announcement_cause',
                "render": function(data) {
                    return Common.formatCont(data)
                }
            },
            {
                "targets": 3,
                "data": 'announcement_party',
                "render": function(data) {
                    return Company.getPartyStr(data)
                }
            }, {
                "targets": 4,
                "data": 'announcer',
                "render": function(data, type, full, meta) {
                    return Common.formatCont(data)
                }
            },
            {
                "targets": 5,
                "data": 'announcement_time',
                "render": function(data, type, full, meta) {
                    return Common.formatTime(data)
                }
            },
            {
                "targets": 6,
                "data": 'announcement_id',
                "render": function(data, type, full, meta) {
                    var buryData = 'data-buryId="' + data + '" data-buryEntity="historycourtannouncement"'; //bury
                    return Common.showDetailLink(data, ["getcourtannouncementdetail2", "announcementno", 7], buryData);
                }
            }
        ]
        var params = { "companycode": Company.companyCode, "cause": Company.hisCourtannouncementSelVal, "pageSize": 10 };
        Company.pageSetting("#tabHisCourtannouncement", tableSetting, columnDefsSet, params, $dom);
    },
    hisCourtdecisionCauseVal: "",
    hisCourtdecisionResultVal: "",
    historycourtdecision: function($dom, oIndexResult, oValResult, oIndexCause, oValCause, oCount) {
        //历史裁判文书
        var tableSetting = {
            interface: "gethisjudge",
            moduleName: intl('205864' /* 历史裁判文书 */ ),
            moreLink: "historycourtdecision",
            modelNum: "his_judgeinfo_num",
            selName: ["hisCourtdecisionResultVal", "hisCourtdecisionCauseVal"],
            aggName: ["aggs_result", "aggs_cause"],
            thWidthRadio: ["8%", "20%", "15%", "15%", "20%", "10%", "12%"],
            thName: [intl('138741' /* 序号 */ ), intl('138191' /* 案件标题 */ ), intl('138190' /* 案号 */ ), intl('138196' /* 案由 */ ), intl('138427' /* 当事人 */ ), intl('145344' /* 判决结果 */ ), intl('138357' /* 判决时间 */ )],
            align: [0, 0, 0, 0, 0, 0, 0, 0],
            fields: ["NO.", "case_title", "case_no", "case_type_detail", "prosecutor", "judge_result", "judge_time"]
        }
        var $container = $dom ? $dom : $('#workspace');
        $container.empty().html(Company.drawTab(tableSetting, "tabHisJudgeinfo", "tbodyHisJudgeinfo", false, $dom));
        var columnDefsSet = [{
                "targets": 1,
                "data": 'case_title',
                "render": function(data, type, full, meta) {
                    if (data) {
                        var paramVal = full.case_id;
                        return '<a target="_blank" class="wi-secondary-color wi-link-color  buryClickCenter" href="showItemDetail.html?type=judgment&detailid=' + paramVal + '">' + (data ? data : '--') + '</a>'
                            // return Common.showJudgeDetail(full["case_id"], data);
                    } else {
                        return "--"
                    }
                }
            },
            {
                "targets": 2,
                "data": 'case_no',
                "render": function(data, type, full, meta) {
                    if (data) {
                        var paramVal = full.case_id;
                        return '<a target="_blank" class="wi-secondary-color wi-link-color" href="showItemDetail.html?type=judgment&detailid=' + paramVal + '">' + (data ? data : '--') + '</a>'
                            // return Common.showJudgeDetail(full["case_id"], data);
                    } else {
                        return "--"
                    }
                }
            },
            {
                "targets": 3,
                "data": 'case_type_detail',
                "render": function(data) {
                    return Common.formatCont(data)
                }
            },
            {
                "targets": 4,
                "data": 'case_appellee',
                "render": function(data, type, full, meta) {
                    var prosecutor = full.prosecutor ? full.prosecutor : "";
                    var defendant = full.defendant ? full.defendant : "";
                    var third_party = full.third_party ? full.third_party : "";
                    var str = "";
                    if (prosecutor.length > 0) {
                        str += (prosecutor[0].split("-")[0] + " - ");
                        var strArr = [];
                        for (var i = 0; i < prosecutor.length; i++) {
                            var tmpArr = prosecutor[i].split("|");
                            if (tmpArr[1]) {
                                var tmpArr02 = tmpArr[0].split("-");
                                if (tmpArr02[1]) {
                                    strArr.push(Common.jumpPersonOrCompany(tmpArr02[1], tmpArr[1]));
                                } else {
                                    strArr.push("");
                                }
                            } else {
                                var tmpArr02 = tmpArr[0].split("-");
                                if (tmpArr02[1]) {
                                    strArr.push(tmpArr02[1]);
                                } else {
                                    strArr.push("");
                                }
                            }
                        }
                        str += strArr.join(",") + "<br/>"
                    }
                    if (defendant.length > 0) {
                        str += (defendant[0].split("-")[0] + " - ");
                        var strArr = [];
                        for (var i = 0; i < defendant.length; i++) {
                            var tmpArr = defendant[i].split("|");
                            if (tmpArr[1]) {
                                var tmpArr02 = tmpArr[0].split("-");
                                if (tmpArr02[1]) {
                                    strArr.push(Common.jumpPersonOrCompany(tmpArr02[1], tmpArr[1]));
                                } else {
                                    strArr.push("");
                                }
                            } else {
                                var tmpArr02 = tmpArr[0].split("-");
                                if (tmpArr02[1]) {
                                    strArr.push(tmpArr02[1]);
                                } else {
                                    strArr.push("");
                                }
                            }
                        }
                        str += strArr.join(",") + "<br/>"
                    }
                    if (third_party.length > 0) {
                        str += (third_party[0].split("-")[0] + " - ");
                        var strArr = [];
                        for (var i = 0; i < third_party.length; i++) {
                            var tmpArr = third_party[i].split("|");
                            if (tmpArr[1]) {
                                var tmpArr02 = tmpArr[0].split("-");
                                if (tmpArr02[1]) {
                                    strArr.push(Common.jumpPersonOrCompany(tmpArr02[1], tmpArr[1]));
                                } else {
                                    strArr.push("");
                                }
                            } else {
                                var tmpArr02 = tmpArr[0].split("-");
                                if (tmpArr02[1]) {
                                    strArr.push(tmpArr02[1]);
                                } else {
                                    strArr.push("");
                                }
                            }
                        }
                        str += strArr.join(",") + "<br/>"
                    }
                    return str ? str : '--';
                }
            },
            {
                "targets": 5,
                "data": 'judge_result',
                "render": function(data) {
                    return Common.formatCont(data)
                }
            },
            {
                "targets": 6,
                "data": 'judge_time',
                "render": function(data, type, full, meta) {
                    return Common.formatTime(data)
                }
            }
        ]
        var params = { "companycode": Company.companyCode, "cause": Company.hisCourtdecisionCauseVal, "result": Company.hisCourtdecisionResultVal, "pageSize": 10 };
        Company.pageSetting("#tabHisJudgeinfo", tableSetting, columnDefsSet, params, $dom);
    },
    hisCourtopenannouncementSelVal: "",
    historycourtopenannouncement: function($dom, oIndex, oVal, oCount) {
        //历史开庭公告
        var tableSetting = {
            interface: "gethiscourtsession",
            moreLink: "historycourtopenannouncement",
            moduleName: intl('205865' /* 历史开庭公告 */ ),
            modelNum: "his_trialnotice_num",
            selName: ["hisCourtopenannouncementSelVal"],
            aggName: ["aggs_cause"],
            thWidthRadio: ["8%", "15%", "27%", "30%", "15%", "10%"],
            thName: [intl('138741' /* 序号 */ ), intl('138190', '案号'), intl('138196' /* 案由 */ ), intl('138427' /* 当事人 */ ), intl('138229' /* 开庭时间 */ ), intl('40513' /* 详情 */ )],
            align: [0, 0, 0, 0, 0],
            fields: ["NO.", "announcement_no", "announcement_cause", "announcement_party", "court_time", "announcement_id"],
        }
        var $container = $dom ? $dom : $('#workspace');
        $container.empty().html(Company.drawTab(tableSetting, "tabHisCourtopenannouncement", "tbodyHisCourtopenannouncement", false, $dom));
        var columnDefsSet = [{
                "targets": 1,
                "data": 'announcement_no',
                "render": function(data) {
                    return Common.formatCont(data)
                }
            },
            {
                "targets": 2,
                "data": 'announcement_cause',
                "render": function(data) {
                    return Common.formatCont(data)
                }
            },
            {
                "targets": 3,
                "data": 'announcement_party',
                "render": function(data, type, full, meta) {
                    return Company.getPartyStr(data)
                }
            },
            {
                "targets": 4,
                "data": 'court_time',
                "render": function(data, type, full, meta) {
                    return Common.formatTime(data)
                }
            },
            {
                "targets": 5,
                "data": 'announcement_id',
                "render": function(data, type, full, meta) {
                    var buryData = 'data-buryId="' + data + '" data-buryEntity="historycourtopenannouncement"'; //bury
                    return Common.showDetailLink(data, ["gettrialnoticedetail2", "detailid", 6], buryData);
                }
            }
        ]
        var params = { "companycode": Company.companyCode, "cause": Company.hisCourtopenannouncementSelVal, "pageSize": 10 };
        Company.pageSetting("#tabHisCourtopenannouncement", tableSetting, columnDefsSet, params, $dom);
    },
    shbdgHistoryPunishment: function($dom) {
        //行政处罚
        var tableSetting = {
            interface: "shbdgHistoryPunishment",
            moduleName: '历史工商行政处罚',
            moreLink: "shbdgHistoryPunishment",
            modelNum: "shbdgHistoryPunishment_num",
            thWidthRadio: ["10%", "30%", "20%", "20%", "20%"],
            thName: [intl('138741' /* 序号 */ ), '处罚通知书号', '处罚决定日期', '履罚期限', '处罚机关'],
            align: [0, 0, 0, 0, 0],
            fields: ["NO.", "punish_code", "punish_date", "punish_limit", "punish_unit", ],
        }
        var $container = $dom ? $dom : $('#workspace');
        $container.empty().html(Company.drawTab(tableSetting, "tabSHBDGHistoryPunishment", "tbodySHBDGHistoryPunishment", false, $dom));
        var columnDefsSet = [{
                "targets": 1,
                "data": 'punish_code',
                "render": function(data) {
                    return Common.formatCont(data)
                }
            },
            {
                "targets": 2,
                "data": 'punish_date',
                "render": function(data) {
                    return Common.formatTime(data)
                }
            },
            {
                "targets": 3,
                "data": 'punish_limit',
                "render": function(data) {
                    return Common.formatCont(data)
                }
            },
            {
                "targets": 4,
                "data": 'punish_unit',
                "render": function(data, type, full, meta) {
                    return Common.formatCont(data)
                }
            }
        ]
        Company.shbdgPageSetting("#tabSHBDGHistoryPunishment", tableSetting, columnDefsSet, null, $dom);
    },
    historyadministrativepenaltyBu: function($dom) {
        //历史行政处罚
        var tableSetting = {
            interface: "gethisbusinesspunishment",
            moduleName: intl('205873' /* 历史行政处罚[工商局] */ ),
            moreLink: "historyadministrativepenaltyBu",
            modelNum: "his_business_punishment_num",
            thWidthRadio: ["5%", "20%", "15%", "30%", "15%", "15%"],
            thName: [intl('138741' /* 序号 */ ), intl('153358' /* 决定文书号 */ ), intl('153360' /* 违法行为类型 */ ), intl('153361' /* 行政处罚内容 */ ), intl('153362' /* 决定机关 */ ), intl('153359' /* 决定日期*/ )],
            align: [0, 0, 0, 0, 0, 0],
            fields: ["NO.", "doc_no|formatCont", "punish_type|formatCont", "punish_content|formatCont", "punish_organ|formatCont", "punish_time|formatTime"],
        }
        var $container = $dom ? $dom : $('#workspace');
        $container.empty().html(Company.drawTab(tableSetting, "tabHisAdministrativepenaltyBu", "tbodyHisAdministrativepenaltyBu", false, $dom));
        var columnDefsSet = [{
                    "targets": 1,
                    "data": 'doc_no',
                    "render": function(data) {
                        return Common.formatCont(data)
                    }
                },
                {
                    "targets": 2,
                    "data": 'punish_type',
                    "render": function(data) {
                        return Common.formatCont(data)
                    }
                },
                {
                    "targets": 3,
                    "data": 'punish_content',
                    "render": function(data) {
                        return Common.formatCont(data)
                    }
                },
                {
                    "targets": 4,
                    "data": 'punish_organ',
                    "render": function(data) {
                        return Common.formatCont(data)
                    }
                },
                {
                    "targets": 5,
                    "data": 'punish_time',
                    "render": function(data, type, full, meta) {
                        return Common.formatTime(data)
                    }
                }
            ]
            // var params = { "companycode": Company.companyCode, "pageSize": 10 };
            // Company.pageSetting("#tabHisAdministrativepenaltyBu", tableSetting, columnDefsSet, params, $dom);

        if ($dom) { //to do 
            var eachModuleData = Company.companyHistoryData && Company.companyHistoryData.hisbusinesspunishment ? Company.companyHistoryData.hisbusinesspunishment : null;
            Company.pageSetting_new("#tabHisAdministrativepenaltyBu", tableSetting, eachModuleData, columnDefsSet, null, $dom);
        } else {
            Company.pageSetting("#tabHisAdministrativepenaltyBu", tableSetting, columnDefsSet, null, $dom);
        }
    },
    historyadministrativepenalty: function($dom) {
        //历史行政处罚[信用中国]
        var tableSetting = {
            interface: "gethisadminipunishment",
            moduleName: intl('205872' /* 历史行政处罚[信用中国] */ ),
            moreLink: "historyadministrativepenalty",
            modelNum: "his_adminipunishment_num",
            thWidthRadio: ["5%", "35%", "45%", "15%"],
            thName: [intl('138741' /* 序号 */ ), intl('153358' /* 决定文书号 */ ), intl('153357' /* 处罚名称 */ ), intl('153359' /* 决定日期 */ )],
            align: [0, 0, 0, 0],
            fields: ["NO.", "docId", "title", "time"],
        }
        var $container = $dom ? $dom : $('#workspace');
        $container.empty().html(Company.drawTab(tableSetting, "tabHisAdministrativepenalty", "tbodyHisAdministrativepenalty", false, $dom));
        var columnDefsSet = [{
                "targets": 1,
                "data": 'docId',
                "render": function(data, type, full, meta) {
                    if (full.detailId) {
                        return '<a target="_blank" class="underline wi-secondary-color wi-link-color" data-interface="gethisadminipunishmentdetail" data-key="' + 'detailId' + '" data-tdlen="' + '4' + '" data-value="' + full.detailId + '">' + (data ? data : '--') + '</a>'
                    } else {
                        return Common.formatCont(data)
                    }
                }
            },
            {
                "targets": 2,
                "data": 'title',
                "render": function(data, type, full, meta) {
                    if (full.detailId) {
                        return '<a target="_blank" class="underline wi-secondary-color wi-link-color" data-interface="gethisadminipunishmentdetail" data-key="' + 'detailId' + '" data-tdlen="' + '4' + '" data-value="' + full.detailId + '">' + (data ? data : '--') + '</a>'
                    } else {
                        return Common.formatCont(data)
                    }
                }
            },
            {
                "targets": 3,
                "data": 'time',
                "render": function(data, type, full, meta) {
                    return Common.formatTime(data)
                }
            }
        ]
        var params = { 'corpId': Company.companyCode }
        Company.pageSetting("#tabHisAdministrativepenalty", tableSetting, columnDefsSet, params, $dom);

        $('#tabHisAdministrativepenalty').off('click').on('click', '.underline', function() {
            var Band = false;
            if ($(this).parent().parent().parent().attr('id') == 'tbodyBand') {
                Band = true;
            }
            Company.showContentDetail(this, $(this).attr("data-tdlen"), Band)
            return false;
        });
    },
    historyshowPledgedstock: function($dom, index) {
        //历史股权出质 
        var tableSetting = [{
                fn: "historyshowPledgedstock",
                interface: "gethisequitypledgelist",
                moduleName: intl('205868' /* 历史股权出质 */ ),
                tabChange: {
                    type: [intl('138447' /* 出质人 */ ), intl('138446' /* 质权人 */ ), intl('138527' /* 出质标的 */ )],
                    typeCnName: ["出质人", "质权人", "出质标的"],
                    typeName: "type",
                    typeBasicNum: ["his_pledgor_num", "his_pawnee_num", "his_pcorp_num"]
                },
                modelNum: "his_pledgor_num",
                moreLink: "historyshowPledgedstock",
                // modelNum:"equitypledgelist_num",
                thWidthRadio: ["5%", "10%", "15%", "15%", "15%", "17%", "10%", "8%"],
                thName: [intl('138741' /* 序号 */ ), intl('138769' /* 登记编号 */ ), intl('138447' /* 出质人 */ ), intl('138446' /* 质权人 */ ), intl('138528' /* 出质股权标的企业 */ ), intl('138283' /* 出质股权数额（万元） */ ), intl('138248' /* 出质登记日期 */ ), intl('32098' /* 状态 */ )],
                align: [0, 0, 0, 0, 0, 0, 0, 0, 0],
                fields: ["NO.", "ep_reg_no", "ep_pledgor_name", "ep_pawnee_name", "ep_plex", "ep_equity_amount", "ep_reg_date", "ep_reg_state"],

            },
            {
                fn: "historyshowPledgedstock",
                interface: "gethisequitypledgelist",
                moduleName: intl('205868' /* 历史股权出质 */ ),
                modelNum: "his_pawnee_num",
                moreLink: "historyshowPledgedstock",
                // modelNum:"equitypledgelist_num",
                thWidthRadio: ["5%", "10%", "15%", "15%", "15%", "17%", "10%", "8%"],
                thName: [intl('138741' /* 序号 */ ), intl('138769' /* 登记编号 */ ), intl('138447' /* 出质人 */ ), intl('138446' /* 质权人 */ ), intl('138528' /* 出质股权标的企业 */ ), intl('138283' /* 出质股权数额（万元） */ ), intl('138248' /* 出质登记日期 */ ), intl('32098' /* 状态 */ )],
                align: [0, 0, 0, 0, 0, 0, 0, 0, 0],
                fields: ["NO.", "ep_reg_no", "ep_pledgor_name", "ep_pawnee_name", "ep_plex", "ep_equity_amount", "ep_reg_date", "ep_reg_state"],

            },
            {
                fn: "historyshowPledgedstock",
                interface: "gethisequitypledgelist",
                moduleName: intl('205868' /* 历史股权出质 */ ),
                modelNum: "his_pcorp_num",
                moreLink: "historyshowPledgedstock",
                // modelNum:"equitypledgelist_num",
                thWidthRadio: ["5%", "10%", "15%", "15%", "15%", "17%", "10%", "8%"],
                thName: [intl('138741' /* 序号 */ ), intl('138769' /* 登记编号 */ ), intl('138447' /* 出质人 */ ), intl('138446' /* 质权人 */ ), intl('138528' /* 出质股权标的企业 */ ), intl('138283' /* 出质股权数额（万元） */ ), intl('138248' /* 出质登记日期 */ ), intl('32098' /* 状态 */ )],
                align: [0, 0, 0, 0, 0, 0, 0, 0, 0],
                fields: ["NO.", "ep_reg_no", "ep_pledgor_name", "ep_pawnee_name", "ep_plex", "ep_equity_amount", "ep_reg_date", "ep_reg_state"],

            }
        ]
        var initIndex = index ? index : "0";
        if (initIndex == 0) {
            for (var i = 0; i < tableSetting.length; i++) {
                var thisBasicNum = tableSetting[0].tabChange.typeBasicNum[i];
                if (thisBasicNum && Company.basicNum[thisBasicNum] && Company.basicNum[thisBasicNum] != 0) {
                    break;
                } else {
                    initIndex++;
                    if (initIndex >= tableSetting.length) {
                        initIndex = 0;
                    }
                }
            }
        }
        var $container = $dom ? $dom : $('#workspace');
        if (index) {
            // 多个页签切换时，移除之前已绑定的统计图表事件监听
            $container.find('.widget-header').off('click', '.icon-chart', tableSetting.drawChart)
        }
        $container.empty().html(Company.drawTab(tableSetting, "tabHisequitypledgelist", "tbodyHisequitypledgelist", null, $dom, initIndex));
        var columnDefsSet = [
                [{
                        "targets": 1,
                        "data": 'ep_reg_no',
                        "render": function(data, type, full, meta) {
                            return Common.formatCont(data)
                        }
                    },
                    {
                        "targets": 2,
                        "data": 'ep_pledgor_name',
                        "render": function(data, type, full, meta) {
                            if (data && full['ep_pledgor_id']) {
                                var personId = full.ep_pledgor_id;
                                var pingParam = '&fromModule=historyshowPledgedstock&entityAttribute=getstockpledgers&fromField=出质人&opId=' + personId; //bury
                                if (personId.length < 16) {
                                    return '<a class="underline wi-secondary-color wi-link-color" data-code="' + personId + '" data-name="' + data + '" target="_blank" href="Company.html?companycode=' + personId + '&name=' + data + Common.isNoToolbar() + '" data-pingParam="' + pingParam + '">' + Common.formatCont(data) + '</a>';
                                } else {
                                    //bury-person
                                    // return '<a class="underline wi-secondary-color wi-link-color" data-code="' + personId + '" data-name="' + data + '" target="_blank" href="Person.html?id=' + personId + '&name=' + data + Common.isNoToolbar() + '" data-pingParam="' + pingParam + '">' + Common.formatCont(data) + '</a>';
                                    return Common.formatCont(data)
                                }
                            }
                            return Common.formatCont(data)
                        }
                    },
                    {
                        "targets": 3,
                        "data": 'ep_pawnee_name',
                        "render": function(data, type, full, meta) {
                            if (data && full['ep_pawnee_id']) {
                                var personId = full.ep_pawnee_id;
                                var pingParam = '&fromModule=historyshowPledgedstock&entityAttribute=getstockpledgers&fromField=质权人&opId=' + personId; //bury
                                if (personId.length < 16) {
                                    return '<a class="underline wi-secondary-color wi-link-color" data-code="' + personId + '" data-name="' + data + '" target="_blank" href="Company.html?companycode=' + personId + '&name=' + data + Common.isNoToolbar() + '" data-pingParam="' + pingParam + '">' + Common.formatCont(data) + '</a>';
                                } else {
                                    // return '<a class="underline wi-secondary-color wi-link-color" data-code="' + personId + '" data-name="' + data + '" target="_blank" href="Person.html?id=' + personId + '&name=' + data + Common.isNoToolbar() + '" data-pingParam="' + pingParam + '">' + Common.formatCont(data) + '</a>';
                                    return Common.formatCont(data)
                                }
                            }
                            return Common.formatCont(data)
                        }
                    },
                    {
                        "targets": 4,
                        "data": 'ep_plex',
                        "render": function(data, type, full, meta) {
                            if (data && full['ep_plex_id']) {
                                var personId = full.ep_plex_id;
                                var pingParam = '&fromModule=historyshowPledgedstock&entityAttribute=getstockpledgers&fromField=出质股权标的企业&opId=' + personId; //bury
                                if (personId.length < 16) {
                                    return '<a class="underline wi-secondary-color wi-link-color" data-code="' + personId + '" data-name="' + data + '" target="_blank" href="Company.html?companycode=' + personId + '&name=' + data + Common.isNoToolbar() + '" data-pingParam="' + pingParam + '">' + Common.formatCont(data) + '</a>';
                                } else {
                                    // return '<a class="underline wi-secondary-color wi-link-color" data-code="' + personId + '" data-name="' + data + '" target="_blank" href="Person.html?id=' + personId + '&name=' + data + Common.isNoToolbar() + '" data-pingParam="' + pingParam + '">' + Common.formatCont(data) + '</a>';
                                    return Common.formatCont(data)
                                }
                            }
                            return Common.formatCont(data)
                        }
                    },
                    {
                        "targets": 5,
                        "data": 'ep_equity_amount',
                        "render": function(data, type, full, meta) {
                            return Common.formatMoney(data, [4, '&nbsp;'])
                        }
                    },
                    {
                        "targets": 6,
                        "data": 'ep_reg_date',
                        "render": function(data, type, full, meta) {
                            return Common.formatTime(data)
                        }
                    },
                    {
                        "targets": 7,
                        "data": 'ep_reg_state',
                        "render": function(data) {
                            if (data) {
                                if (data == "有效") {
                                    return "<span class='text-green'>有效</span>"
                                } else if (data == "无效") {
                                    return "<span class='text-red'>无效</span>"
                                } else {
                                    return data;
                                }
                            } else {
                                return "--"
                            }
                        }
                    }
                ],
                [{
                        "targets": 1,
                        "data": 'ep_reg_no',
                        "render": function(data, type, full, meta) {
                            return Common.formatCont(data)
                        }
                    },
                    {
                        "targets": 2,
                        "data": 'ep_pledgor_name',
                        "render": function(data, type, full, meta) {
                            if (data && full['ep_pledgor_id']) {
                                var personId = full.ep_pledgor_id;
                                var pingParam = '&fromModule=historyshowPledgedstock&entityAttribute=getstockpledgees&fromField=出质人&opId=' + personId; //bury
                                if (personId.length < 16) {
                                    return '<a class="underline wi-secondary-color wi-link-color" data-code="' + personId + '" data-name="' + data + '" target="_blank" href="Company.html?companycode=' + personId + '&name=' + data + Common.isNoToolbar() + '" data-pingParam="' + pingParam + '">' + Common.formatCont(data) + '</a>';
                                } else {
                                    // return '<a class="underline wi-secondary-color wi-link-color" data-code="' + personId + '" data-name="' + data + '" target="_blank" href="Person.html?id=' + personId + '&name=' + data + Common.isNoToolbar() + '" data-pingParam="' + pingParam + '">' + Common.formatCont(data) + '</a>';
                                    return Common.formatCont(data)
                                }
                            }
                            return Common.formatCont(data)
                        }
                    },
                    {
                        "targets": 3,
                        "data": 'ep_pawnee_name',
                        "render": function(data, type, full, meta) {
                            if (data && full['ep_pawnee_id']) {
                                var personId = full.ep_pawnee_id;
                                var pingParam = '&fromModule=historyshowPledgedstock&entityAttribute=getstockpledgees&fromField=质权人&opId=' + personId; //bury
                                if (personId.length < 16) {
                                    return '<a class="underline wi-secondary-color wi-link-color" data-code="' + personId + '" data-name="' + data + '" target="_blank" href="Company.html?companycode=' + personId + '&name=' + data + Common.isNoToolbar() + '" data-pingParam="' + pingParam + '">' + Common.formatCont(data) + '</a>';
                                } else {
                                    // return '<a class="underline wi-secondary-color wi-link-color" data-code="' + personId + '" data-name="' + data + '" target="_blank" href="Person.html?id=' + personId + '&name=' + data + Common.isNoToolbar() + '" data-pingParam="' + pingParam + '">' + Common.formatCont(data) + '</a>';
                                    return Common.formatCont(data)
                                }
                            }
                            return Common.formatCont(data)
                        }
                    },
                    {
                        "targets": 4,
                        "data": 'ep_plex',
                        "render": function(data, type, full, meta) {
                            if (data && full['ep_plex_id']) {
                                var personId = full.ep_plex_id;
                                var pingParam = '&fromModule=historyshowPledgedstock&entityAttribute=getstockpledgees&fromField=出质股权标的企业&opId=' + personId; //bury
                                if (personId.length < 16) {
                                    return '<a class="underline wi-secondary-color wi-link-color" data-code="' + personId + '" data-name="' + data + '" target="_blank" href="Company.html?companycode=' + personId + '&name=' + data + Common.isNoToolbar() + '" data-pingParam="' + pingParam + '">' + Common.formatCont(data) + '</a>';
                                } else {
                                    // return '<a class="underline wi-secondary-color wi-link-color" data-code="' + personId + '" data-name="' + data + '" target="_blank" href="Person.html?id=' + personId + '&name=' + data + Common.isNoToolbar() + '" data-pingParam="' + pingParam + '">' + Common.formatCont(data) + '</a>';
                                    return Common.formatCont(data)
                                }
                            }
                            return Common.formatCont(data)
                        }
                    },
                    {
                        "targets": 5,
                        "data": 'ep_equity_amount',
                        "render": function(data, type, full, meta) {
                            return Common.formatMoney(data, [4, '&nbsp;'])
                        }
                    },
                    {
                        "targets": 6,
                        "data": 'ep_reg_date',
                        "render": function(data, type, full, meta) {
                            return Common.formatTime(data)
                        }
                    },
                    {
                        "targets": 7,
                        "data": 'ep_reg_state',
                        "render": function(data) {
                            if (data) {
                                if (data == "有效") {
                                    return "<span class='text-green'>有效</span>"
                                } else if (data == "无效") {
                                    return "<span class='text-red'>无效</span>"
                                } else {
                                    return data;
                                }
                            } else {
                                return "--"
                            }
                        }
                    }
                ],
                [{
                        "targets": 1,
                        "data": 'ep_reg_no',
                        "render": function(data, type, full, meta) {
                            return Common.formatCont(data)
                        }
                    },
                    {
                        "targets": 2,
                        "data": 'ep_pledgor_name',
                        "render": function(data, type, full, meta) {
                            if (data && full['ep_pledgor_id']) {
                                var personId = full.ep_pledgor_id;
                                var pingParam = '&fromModule=historyshowPledgedstock&entityAttribute=getstockplexes&fromField=出质人&opId=' + personId; //bury
                                if (personId.length < 16) {
                                    return '<a class="underline wi-secondary-color wi-link-color" data-code="' + personId + '" data-name="' + data + '" target="_blank" href="Company.html?companycode=' + personId + '&name=' + data + Common.isNoToolbar() + '" data-pingParam="' + pingParam + '">' + Common.formatCont(data) + '</a>';
                                } else {
                                    // return '<a class="underline wi-secondary-color wi-link-color" data-code="' + personId + '" data-name="' + data + '" target="_blank" href="Person.html?id=' + personId + '&name=' + data + Common.isNoToolbar() + '" data-pingParam="' + pingParam + '">' + Common.formatCont(data) + '</a>';
                                    return Common.formatCont(data)
                                }
                            }
                            return Common.formatCont(data)
                        }
                    },
                    {
                        "targets": 3,
                        "data": 'ep_pawnee_name',
                        "render": function(data, type, full, meta) {
                            if (data && full['ep_pawnee_id']) {
                                var personId = full.ep_pawnee_id;
                                var pingParam = '&fromModule=historyshowPledgedstock&entityAttribute=getstockplexes&fromField=质权人&opId=' + personId; //bury
                                if (personId.length < 16) {
                                    return '<a class="underline wi-secondary-color wi-link-color" data-code="' + personId + '" data-name="' + data + '" target="_blank" href="Company.html?companycode=' + personId + '&name=' + data + Common.isNoToolbar() + '" data-pingParam="' + pingParam + '">' + Common.formatCont(data) + '</a>';
                                } else {
                                    // return '<a class="underline wi-secondary-color wi-link-color" data-code="' + personId + '" data-name="' + data + '" target="_blank" href="Person.html?id=' + personId + '&name=' + data + Common.isNoToolbar() + '" data-pingParam="' + pingParam + '">' + Common.formatCont(data) + '</a>';
                                    return Common.formatCont(data)
                                }
                            }
                            return Common.formatCont(data)
                        }
                    },
                    {
                        "targets": 4,
                        "data": 'ep_plex',
                        "render": function(data, type, full, meta) {
                            if (data && full['ep_plex_id']) {
                                var personId = full.ep_plex_id;
                                var pingParam = '&fromModule=historyshowPledgedstock&entityAttribute=getstockplexes&fromField=出质标的&opId=' + personId; //bury
                                if (personId.length < 16) {
                                    return '<a class="underline wi-secondary-color wi-link-color" data-code="' + personId + '" data-name="' + data + '" target="_blank" href="Company.html?companycode=' + personId + '&name=' + data + Common.isNoToolbar() + '" data-pingParam="' + pingParam + '">' + Common.formatCont(data) + '</a>';
                                } else {
                                    // return '<a class="underline wi-secondary-color wi-link-color" data-code="' + personId + '" data-name="' + data + '" target="_blank" href="Person.html?id=' + personId + '&name=' + data + Common.isNoToolbar() + '" data-pingParam="' + pingParam + '">' + Common.formatCont(data) + '</a>';
                                    return Common.formatCont(data)
                                }
                            }
                            return Common.formatCont(data)
                        }
                    },
                    {
                        "targets": 5,
                        "data": 'ep_equity_amount',
                        "render": function(data, type, full, meta) {
                            return Common.formatMoney(data, [4, '&nbsp;'])
                        }
                    },
                    {
                        "targets": 6,
                        "data": 'ep_reg_date',
                        "render": function(data, type, full, meta) {
                            return Common.formatTime(data)
                        }
                    },
                    {
                        "targets": 7,
                        "data": 'ep_reg_state',
                        "render": function(data) {
                            if (data) {
                                if (data == "有效") {
                                    return "<span class='text-green'>有效</span>"
                                } else if (data == "无效") {
                                    return "<span class='text-red'>无效</span>"
                                } else {
                                    return data;
                                }
                            } else {
                                return "--"
                            }
                        }
                    }
                ]
            ]
            // 小接口
            // var params = { "companycode": Company.companyCode, "pageSize": 10 };
            // Company.pageSetting("#tabHisequitypledgelist", tableSetting, columnDefsSet, params, $dom, initIndex);
            // 大接口
        if (initIndex == 0 && $dom) {
            var param = { "type": tableSetting[0].tabChange.typeCnName[initIndex] };
            var eachModuleData = Company.companyHistoryData && Company.companyHistoryData.hisequitypledgelist ? Company.companyHistoryData.hisequitypledgelist : null;
            Company.pageSetting_new("#tabHisequitypledgelist", tableSetting[0], eachModuleData, columnDefsSet[0], param, $dom);
        } else {
            var param = { "type": tableSetting[0].tabChange.typeCnName[initIndex] };
            Company.pageSetting("#tabHisequitypledgelist", tableSetting, columnDefsSet, param, $dom, initIndex);
        }
        $('#tabHisequitypledgelist').off('click').on('click', '.underline', Company.linkWithCodeEventHandler);
    },
    historyshowChattelmortgage: function($dom, index) {
        //历史动产抵押
        var tableSetting = [{
                fn: "historyshowChattelmortgage",
                tabChange: {
                    type: [intl('138392' /* 抵押人 */ ), intl('138391' /* 抵押权人 */ )],
                    typeName: "type",
                    typeBasicNum: ["his_chatteimortgage_num", "his_chatteimortgage1_num"]
                },
                modelNum: "his_chatteimortgage_num",
                interface: "gethischattelmortgagelist",
                moduleName: intl('205869' /* 历史动产抵押 */ ),
                moreLink: "historyshowChattelmortgage",
                thWidthRadio: ["5%", "10%", "14%", "14%", "14%", "18%", "8%", "10%", "6%"],
                thName: [intl('138741' /* 序号 */ ), intl('138769' /* 登记编号 */ ), intl('138392' /* 抵押人 */ ), intl('138391' /* 抵押权人 */ ), intl('138618' /* 被担保债权种类 */ ), intl('138830' /* 抵押债权数额（万元）  */ ), intl('138772' /* 登记状态 */ ), intl('138690' /* 登记日期 */ ), intl('132647' /* 操作 */ )],
                align: [0, 0, 0, 0, 0, 2, 0, 0, 0],
                fields: ["NO.", "cm_reg_no", "cm_mortgage_person_name1", "cm_mortgage_person_name", "cm_zq_type", "cm_zq_amount", "cm_reg_status", "cm_reg_date", "ob_object_id"],

            },
            {
                fn: "historyshowChattelmortgage",
                interface: "gethischattelmortgagelist",
                moduleName: intl('205869' /* 历史动产抵押 */ ),
                modelNum: "his_chatteimortgage1_num",
                moreLink: "historyshowChattelmortgage",
                thWidthRadio: ["5%", "10%", "14%", "14%", "14%", "18%", "8%", "10%", "6%"],
                thName: [intl('138741' /* 序号 */ ), intl('138769' /* 登记编号 */ ), intl('138392' /* 抵押人 */ ), intl('138391' /* 抵押权人 */ ), intl('138618' /* 被担保债权种类 */ ), intl('138830' /* 抵押债权数额（万元）  */ ), intl('138772' /* 登记状态 */ ), intl('138690' /* 登记日期 */ ), intl('132647' /* 操作 */ )],
                align: [0, 0, 0, 0, 0, 2, 0, 0, 0],
                fields: ["NO.", "cm_reg_no", "cm_mortgage_person_name1", "cm_mortgage_person_name", "cm_zq_type", "cm_zq_amount", "cm_reg_status", "cm_reg_date", "ob_object_id"],

            }
        ]
        var $container = $dom ? $dom : $('#workspace');
        var initIndex = index ? index : "0";
        if (initIndex == 0) {
            for (var i = 0; i < tableSetting.length; i++) {
                var thisBasicNum = tableSetting[0].tabChange.typeBasicNum[i];
                if (thisBasicNum && Company.basicNum[thisBasicNum] && Company.basicNum[thisBasicNum] != 0) {
                    break;
                } else {
                    initIndex++;
                    if (initIndex >= tableSetting.length) {
                        initIndex = 0;
                    }
                }
            }
        }
        if (index) {
            // 多个页签切换时，移除之前已绑定的统计图表事件监听
            $container.find('.widget-header').off('click', '.icon-chart', tableSetting.drawChart)
        }
        $container.empty().html(Company.drawTab(tableSetting, "tabHischattelmortgagelist", "tbodyHischattelmortgagelist", false, $dom, initIndex));
        var columnDefsSet = [
                [{
                        "targets": 1,
                        "data": 'cm_reg_no',
                        "render": function(data) {
                            return Common.formatCont(data)
                        }
                    },
                    {
                        "targets": 2,
                        "data": 'cm_mortgage_person_name1',
                        "render": function(data, type, full, meta) {
                            return Common.JumpOtherCompany(data, full, ["", "cm_mortgage_person_id1"])
                        }
                    },
                    {
                        "targets": 3,
                        "data": 'cm_mortgage_person_name',
                        "render": function(data, type, full, meta) {
                            return Common.JumpOtherCompany(data, full, ["", "cm_mortgage_person_id"])
                        }
                    },
                    {
                        "targets": 4,
                        "data": 'cm_zq_type',
                        "render": function(data) {
                            return Common.formatCont(data)
                        }
                    },
                    {
                        "targets": 5,
                        "data": 'cm_zq_amount',
                        "render": function(data, type, full, meta) {
                            return Common.formatMoney(data, [4, '&nbsp;'])
                        }
                    },
                    {
                        "targets": 6,
                        "data": 'cm_reg_status',
                        "render": function(data, type, full, meta) {
                            return Common.formatCont(data)
                        }
                    },
                    {
                        "targets": 7,
                        "data": 'cm_reg_date',
                        "render": function(data, type, full, meta) {
                            return Common.formatTime(data)
                        }
                    },
                    {
                        "targets": 8,
                        "data": 'OB_OBJECT_ID',
                        "render": function(data, type, full, meta) {
                            var val = '';
                            if (full['OB_OBJECT_ID']) {
                                val = full['OB_OBJECT_ID'];
                            }
                            if (full['ob_object_id']) {
                                val = full['ob_object_id'];
                            }
                            var buryData = 'data-buryId="' + val + '" data-buryEntity="historyshowChattelmortgage" data-buryEntity="抵押人"'; //bury
                            return Common.showDetailLink(val, ["getchatteimortgageitem", "detailid", 9], buryData);
                        }
                    }
                ],
                [{
                        "targets": 1,
                        "data": 'cm_reg_no',
                        "render": function(data) {
                            return Common.formatCont(data)
                        }
                    },
                    {
                        "targets": 2,
                        "data": 'cm_mortgage_person_name1',
                        "render": function(data, type, full, meta) {
                            return Common.JumpOtherCompany(data, full, ["", "cm_mortgage_person_id1"])
                        }
                    },
                    {
                        "targets": 3,
                        "data": 'cm_mortgage_person_name',
                        "render": function(data, type, full, meta) {
                            return Common.JumpOtherCompany(data, full, ["", "cm_mortgage_person_id"])
                        }
                    },
                    {
                        "targets": 4,
                        "data": 'cm_zq_type',
                        "render": function(data) {
                            return Common.formatCont(data)
                        }
                    },
                    {
                        "targets": 5,
                        "data": 'cm_zq_amount',
                        "render": function(data, type, full, meta) {
                            return Common.formatMoney(data, [4, '&nbsp;'])
                        }
                    },
                    {
                        "targets": 6,
                        "data": 'cm_reg_status',
                        "render": function(data, type, full, meta) {
                            return Common.formatCont(data)
                        }
                    },
                    {
                        "targets": 7,
                        "data": 'cm_reg_date',
                        "render": function(data, type, full, meta) {
                            return Common.formatTime(data)
                        }
                    },
                    {
                        "targets": 8,
                        "data": 'OB_OBJECT_ID',
                        "render": function(data, type, full, meta) {
                            var val = '';
                            if (full['OB_OBJECT_ID']) {
                                val = full['OB_OBJECT_ID'];
                            }
                            if (full['ob_object_id']) {
                                val = full['ob_object_id'];
                            }
                            var buryData = 'data-buryId="' + val + '" data-buryEntity="historyshowChattelmortgage" data-buryEntity="抵押权人"'; //bury
                            return Common.showDetailLink(val, ["getchatteimortgageitem", "detailid", 9], buryData);
                        }
                    }
                ]
            ]
            // 小接口 - 因为大接口没数据会报错 - null， 影响下面模块加载
            // var params = { "companycode": Company.companyCode, "pageSize": 10 };
            // Company.pageSetting("#tabHischattelmortgagelist", tableSetting, columnDefsSet, params, $dom, initIndex);
            // 大接口
        if (initIndex == 0 && $dom) {
            var eachModuleData = Company.companyHistoryData.hischattelmortgagelist ? Company.companyHistoryData.hischattelmortgagelist : null;
            var param = { "type": tableSetting[0].tabChange.type[initIndex] };
            Company.pageSetting_new("#tabHischattelmortgagelist", tableSetting[0], eachModuleData, columnDefsSet[0], param, $dom);
        } else {
            var param = { "type": tableSetting[0].tabChange.type[initIndex] };
            Company.pageSetting("#tabHischattelmortgagelist", tableSetting, columnDefsSet, param, $dom, initIndex);
        }
    },
    // 知识产权出质
    showIntellectualPropertyRights: function($dom) {
        var tableSetting = {
            interface: "getintellectualpledgeds",
            moduleName: intl('204944' /* 知识产权出质 */ ),
            moreLink: "showIntellectualPropertyRights",
            modelNum: "intellectual_pledgeds_num",
            thWidthRadio: ["5%", "15%", "14%", "7%", "14%", "14%", "14%", "12%", "5%"],
            thName: [intl('138741' /* 序号 */ ), intl('204945' /* 知识产权登记证号 */ ), intl('29979' /* 名称  */ ), intl('204949' /* 种类 */ ), intl('138447' /* 出质人 */ ), intl('138446' /* 质权人 */ ), intl('204946' /* 质权登记期限 */ ), intl('138143' /* 公示日期 */ ), intl('32098' /* 状态 */ )],
            align: [0, 0, 0, 0, 0, 0, 0, 0, 0],
            fields: ["NO.", "regNo", "intel_name", "intel_category", "pledger", "pledgee", "regLimit", "regDate", "status"],
        }
        var $container = $dom ? $dom : $('#workspace');
        $container.empty().html(Company.drawTab(tableSetting, "tabIntellectualPropertyRights", "tbodyIntellectualPropertyRights", false, $dom));
        var columnDefsSet = [{
                    "targets": 1,
                    "data": 'regNo',
                    "render": function(data) {
                        return Common.formatCont(data)
                    }
                },
                {
                    "targets": 2,
                    "data": 'intel_name',
                    "render": function(data) {
                        return Common.formatCont(data)
                    }
                },
                {
                    "targets": 3,
                    "data": 'intel_category',
                    "render": function(data) {
                        return Common.formatCont(data)
                    }
                },
                {
                    "targets": 4,
                    "data": 'pledger',
                    "render": function(data, type, full, meta) {
                        if (data && full['pledgerId']) {
                            var personId = full.pledgerId;
                            var pingParam = '&fromModule=showIntellectualPropertyRights&fromField=出质人&opId=' + personId; //bury  
                            if (personId.length < 16) {
                                return '<a class="underline wi-secondary-color wi-link-color" data-code="' + personId + '" data-name="' + data + '" target="_blank" href="Company.html?companycode=' + personId + '&name=' + data + Common.isNoToolbar() + '" data-pingParam="' + pingParam + '">' + Common.formatCont(data) + '</a>';
                            } else {
                                // return '<a class="underline wi-secondary-color wi-link-color" data-code="' + personId + '" data-name="' + data + '" target="_blank" href="Person.html?id=' + personId + '&name=' + data + Common.isNoToolbar() + '" data-pingParam="' + pingParam + '">' + Common.formatCont(data) + '</a>';
                                return Common.formatCont(data)
                            }
                        }
                        return Common.formatCont(data)
                    }
                },
                {
                    "targets": 5,
                    "data": 'pledgee',
                    "render": function(data, type, full, meta) {
                        if (data && full['pledgeeId']) {
                            var personId = full.pledgeeId;
                            var pingParam = '&fromModule=showIntellectualPropertyRights&fromField=质权人&opId=' + personId; //bury                                
                            if (personId.length < 16) {
                                return '<a class="underline wi-secondary-color wi-link-color" data-code="' + personId + '" data-name="' + data + '" target="_blank" href="Company.html?companycode=' + personId + '&name=' + data + Common.isNoToolbar() + '" data-pingParam="' + pingParam + '">' + Common.formatCont(data) + '</a>';
                            } else {
                                // return '<a class="underline wi-secondary-color wi-link-color" data-code="' + personId + '" data-name="' + data + '" target="_blank" href="Person.html?id=' + personId + '&name=' + data + Common.isNoToolbar() + '" data-pingParam="' + pingParam + '">' + Common.formatCont(data) + '</a>';
                                return Common.formatCont(data)
                            }
                        }
                        return Common.formatCont(data)
                    }
                },
                {
                    "targets": 6,
                    "data": 'regLimit',
                    "render": function(data, type, full, meta) {
                        return Common.formatTime(data)
                    }
                },
                {
                    "targets": 7,
                    "data": 'regDate',
                    "render": function(data, type, full, meta) {
                        return Common.formatTime(data)
                    }
                },
                {
                    "targets": 8,
                    "data": 'status',
                    "render": function(data) {
                        return Common.formatCont(data)
                    }
                },
            ]
            // var params = { "companycode": Company.companyCode,  "pageSize": 10 };
            // Company.pageSetting("#tabIntellectualPropertyRights", tableSetting, columnDefsSet, params, $dom);
        if ($dom) {
            var eachModuleData = Company.companyFinancingInfoData.intellectualPledgeds ? Company.companyFinancingInfoData.intellectualPledgeds : null;
            Company.pageSetting_new("#tabIntellectualPropertyRights", tableSetting, eachModuleData, columnDefsSet, null, $dom);
        } else {
            Company.pageSetting("#tabIntellectualPropertyRights", tableSetting, columnDefsSet, null, $dom);
        }
        $('#tabIntellectualPropertyRights').off('click').on('click', '.underline', Company.linkWithCodeEventHandler);
    },
    // 总公司
    showHeadOffice: function($dom) {
        var tableSetting = {
            interface: "getheaderquarters",
            moduleName: intl('204942' /* 总公司 */ ),
            moreLink: "showHeadOffice",
            modelNum: "headerquarters_num",
            thWidthRadio: ["36%", "23%", "17%", "12%", "12%"],
            thName: [intl('138677' /* 企业名称 */ ), intl('5529' /* 法定代表人 */ ), intl('138768' /* 注册资本(万元)  */ ), intl('138772' /* 登记状态 */ ), intl('138860' /* 成立日期 */ )],
            align: [0, 0, 0, 0, 0],
            fields: ["corp_name", "legal_name", "reg_capital", "reg_status", "reg_date"],
        }
        var $container = $dom ? $dom : $('#workspace');
        $container.empty().html(Company.drawTab(tableSetting, "tabHeadOffice", "tbodyHeadOffice", false, $dom));
        var columnDefsSet = [{
                    "targets": 0,
                    "data": 'corp_name',
                    "render": function(data, type, full, meta) {
                        var shortname = full.corp_name;
                        var type = 2;
                        var id = full.corp_id;
                        //                      var img = full.logo;
                        var img = full.corp_image_id_v ? full.corp_image_id_v : '';
                        var pingParam = '&fromModule=' + buryItemMapping.mappingEntity["showHeadOffice"] + '&fromField=企业名称&opId=' + id; //bury
                        return (Common.showCompanyName(type, data, id, img, shortname, null, null, null, null, pingParam)); //企业logo
                    }
                },
                {
                    "targets": 1,
                    "data": 'legal_name',
                    "render": function(data, type, full, meta) {
                        var type = 1;
                        if (full.legal_id && full.legal_id.length == 10) {
                            type = 2;
                            var count = full.enter_total_num; // 控制几家企业
                            var id = full.legal_id;
                            var img = full.legal_image_id ? full.legal_image_id : ""; // 头像字段名称
                            var shortname = full.corp_name ? full.corp_name.substring(0, 4) : ""; //
                            var pingParam = '&fromModule=' + buryItemMapping.mappingEntity["showHeadOffice"] + '&fromField=法定代表人&opId=' + id; //bury
                            return ('<div class="invest-legal-person">' + Common.showCompanyName(type, data, id, img, shortname, null, null, null, null, pingParam) + '</div>')
                        } else {
                            var count = full.enter_total_num; // 控制几家企业
                            var id = full.legal_id;
                            var img = full.legal_image_id ? full.legal_image_id : ""; // 头像字段名称
                            return (Common.showCompanyName(type, data, id, img, "", count, "", "", true))
                        }

                    }
                },
                {
                    "targets": 2,
                    "data": 'reg_capital',
                    "render": function(data) {
                        return Common.formatMoney(data, [2, '&nbsp;'])
                    }
                },
                {
                    "targets": 3,
                    "data": 'reg_status',
                    "render": function(data) {
                        return Common.formatCont(data)
                    }
                },
                {
                    "targets": 4,
                    "data": 'reg_date',
                    "render": function(data, type, full, meta) {
                        return Common.formatTime(data)
                    }
                },
            ]
            // var params = { "companycode": Company.companyCode,  "pageSize": 10 };
            // Company.pageSetting("#tabHeadOffice", tableSetting, columnDefsSet, params, $dom);
        if ($dom) {
            var eachModuleData = Company.companyBasicData.headerquarter ? Company.companyBasicData.headerquarter : null;
            // var eachModuleData=[{corp_id: "1014263450", corp_name: "中国电信股份有限公司", legal_id: "10ACCE1C44E84AFAAAE26AB586A77EBD", legal_name: "刘延峰", reg_capital: "2000", reg_unit: "币种", reg_status: "登记状态", reg_date: "成立日期", enter_total_num: 5}];
            Company.pageSetting_new("#tabHeadOffice", tableSetting, eachModuleData, columnDefsSet, null, $dom);
        } else {
            Company.pageSetting("#tabHeadOffice", tableSetting, columnDefsSet, null, $dom);
        }
        $('#showHeadOffice').off('click').on('click', '.underline', Company.linkWithCodeEventHandler);
    },
    showCoreTeam: function($dom) {
        // 核心团队
        var tableSetting = {
            interface: "getcoreteam", //getnewcompanymainmemberinfo
            moduleName: intl('204943' /* 核心团队 */ ),
            moreLink: "showCoreTeam",
            modelNum: "coreteam_num",
            thWidthRadio: ["5%", '25%', '20%', '50%'],
            thName: [intl('138741' /* 序号 */ ), intl('34979' /* 姓名 */ ), intl('138729' /* 职位 */ ), intl('138847' /* 简介 */ )],
            align: [0, 0, 0],
            fields: ["NO.", "personName", "jobTitle", "remark"],
        }
        var $container = $dom ? $dom : $('#workspace');
        $container.empty().html(Company.drawTab(tableSetting, "tabCoreTeam", "tbodyCoreTeam", false, $dom));
        var columnDefsSet = [{
                "targets": 1,
                "data": 'personName',
                "render": function(data, type, full, meta) {
                    var id = full.personId;
                    var pingParam = '&fromModule=showCoreTeam&fromField=姓名&opId=' + id; //bury
                    if (id) {
                        if (full.personImage) {
                            let imgSrc = '';
                            if (full.personImage.indexOf('http') > -1) {
                                imgSrc = full.personImage
                            } else {
                                imgSrc = 'http://180.96.8.44/imageWeb/ImgHandler.aspx?imageID=' + full.personImage;
                            }
                            return ('<img class="person_txt_img big-logo" id="companyLogo" height="32" width="32" src=' +
                                imgSrc + ' onerror="src=\"../resource/images/Company/company_logo.png\"">' +
                                '<a class="" >' + Common.formatCont(data) + '</a>')
                        } else {
                            return ('<span class="person_txt_img">' +
                                full.personName[0] + '</span><a class="" data-code="' +
                                id + '" data-name="' + data + '" >' + Common.formatCont(data) + '</a>');
                        }
                    } else {
                        return ('<span class="person_txt_img">' +
                            full.personName[0] + '</span><span >' + Common.formatCont(data) + '</span>');
                    }
                }

            },
            {
                "targets": 2,
                "data": 'jobTitle',
                "render": function(data, type, full, meta) {
                    return Common.formatCont(data)
                }
            },
            {
                "targets": 3,
                "data": 'remark',
                "render": function(data, type, full, meta) {
                    var result = '<span class="text-2-show view-cont-control" title="点击展开">' + Common.formatCont(data) + '</span>';
                    return result
                }
            }
        ]
        var params = { "windCode": Company.companyCode, "pageSize": 10 };
        Company.pageSetting("#tabCoreTeam", tableSetting, columnDefsSet, params, $dom);
    },
    showGroupSystem: function($dom) {
        //集团系
        if (Company.basicNum.group_main_num && Company.basicNum.group_main_num > 0) {
            var tableSetting = {
                interface: "getmaincorp",
                moduleName: intl('148622' /* 集团系 */ , '集团系'),
                moreLink: "showGroupSystem",
                modelNum: "group_main_num",
                thWidthRadio: ["5%", "35%", "30%", "30%"],
                thName: [intl('138741' /* 序号 */ ), intl('149312' /* 集团系名称 */ , '集团系名称'), intl('216387' /* 集团系类型 */ , '集团系类型'), intl('216386' /* 主体公司级别 */ , intl('216386', '主体公司级别'))],
                align: [0, 0, 0, 0],
                fields: ["NO.", "groupSystemName", "groupSystemType", "mainCompanyLevel"],
            }
            var $container = $dom ? $dom : $('#workspace');
            $container.empty().html(Company.drawTab(tableSetting, "tabshowGroupSystem", "tbodyshowGroupSystem", false, $dom));
            var columnDefsSet = [{
                    "targets": 1,
                    "data": 'groupSystemName',
                    "render": function(data, type, full, meta) {
                        var img = full.groupSystemLogoUrl ? full.groupSystemLogoUrl : "--";
                        var imgStr = '<span class="person_img"><img class="big-logo" width="40" src="' + img + '" onerror="src=\'../resource/images/Company/default_group.png\'"></span>';
                        // var nameStr = full.groupSystemId ? ('<span class="name-isctrl"><a class="short-img-name long-name wi-secondary-color wi-link-color buryClickCenter" target="_blank" href="Group.html?groupId=' + full.groupSystemId + '">' + Common.formatCont(data) + '</a></span>') : ('<span class="name-isctrl">' + Common.formatCont(data) + '</span>');
                        var nameStr = ('<span class="name-isctrl">' + Common.formatCont(data) + '</span>');
                        return imgStr + nameStr;
                    }
                },
                {
                    "targets": 2,
                    "data": 'groupSystemType',
                    "render": function(data) {
                        return Common.formatCont(data)
                    }
                },
                {
                    "targets": 3,
                    "data": 'mainCompanyLevel',
                    "render": function(data, type, full, meta) {
                        return Common.formatCont(data)
                    }
                },
            ]
            var params = { "windCode": Company.companyCode, "pageSize": 10 };
            Company.pageSetting("#tabshowGroupSystem", tableSetting, columnDefsSet, params, $dom);
        } else {
            var tableSetting = {
                interface: "getmembercorp",
                moduleName: intl('148622' /* 集团系 */ , '集团系'),
                moreLink: "showGroupSystem",
                modelNum: "group_membercorp_num",
                thWidthRadio: ["5%", "23%", "9%", "13%", "20%", "12%", "10%", "8%"],
                thName: [intl('138741' /* 序号 */ ), intl('216389' /* 归属集团系 */ , '归属集团系'), intl('216387' /* 集团系类型 */ , '集团系类型'), intl('216388' /* 成员公司级别 */ , '成员公司级别'), intl('216390' /* 归属主体公司 */ , '归属主体公司'), intl('138412' /* 实际持股比例 */ , '实际持股比例'), intl('216391' /* 控制类型 */ , '控制类型'), intl('2949' /* 持股类型 */ , '持股类型')],
                align: [0, 0, 0, 0, 0, 0, 0, 0],
                fields: ["NO.", "groupSystemName", "groupSystemType", "memberCompanyLevelName", "mianCompanyName", "shareholdingRatio", "controlTypeName", "shareholdingTypeName"],
            }
            var $container = $dom ? $dom : $('#workspace');
            $container.empty().html(Company.drawTab(tableSetting, "tabshowGroupSystem", "tbodyshowGroupSystem", false, $dom));
            var columnDefsSet = [{
                    "targets": 1,
                    "data": 'groupSystemName',
                    "render": function(data, type, full, meta) {
                        var img = full.groupSystemLogoUrl ? full.groupSystemLogoUrl : '';
                        var imgStr = '<span class="person_img"><img class="big-logo" width="40" src="' + img + '" onerror="src=\'../resource/images/Company/default_group.png\'"></span>';
                        // var nameStr = full.groupSystemId ? ('<span class="name-isctrl"><a class="short-img-name wi-secondary-color wi-link-color" target="_blank" href="Group.html?groupId=' + full.groupSystemId + '">' + Common.formatCont(data) + '</a></span>') : ('<span class="name-isctrl">' + Common.formatCont(data) + '</span>');
                        var nameStr = ('<span class="name-isctrl">' + Common.formatCont(data) + '</span>');
                        return imgStr + nameStr;
                    }
                },
                {
                    "targets": 2,
                    "data": 'groupSystemType',
                    "render": function(data) {
                        return Common.formatCont(data)
                    }
                },
                {
                    "targets": 3,
                    "data": 'memberCompanyLevelName',
                    "render": function(data, type, full, meta) {
                        return Common.formatCont(data)
                    }
                },
                {
                    "targets": 4,
                    "data": 'mianCompanyName',
                    "render": function(data, type, full, meta) {
                        var labelSpan = '';
                        //	                	full.enterpriseLabelName='上市企业,发债企业';
                        if (full.enterpriseLabelName && full.enterpriseLabelName != '') {
                            labelSpan = "<br />";
                            var labelCodeArr = full.enterpriseLabelName.split(',');
                            for (var i = 0; i < labelCodeArr.length; i++) {
                                var colorSel = '';
                                switch (labelCodeArr[i]) {
                                    case '上市公司':
                                        colorSel = 'group-ipo-label';
                                        break;
                                    case '发债企业':
                                        colorSel = 'group-bond-label';
                                        break;
                                    case '科创版':
                                        colorSel = 'group-sinc-label';
                                        break;
                                    case '新三板':
                                        colorSel = 'group-sinc-label';
                                        break;
                                    default:
                                        colorSel = 'group-ipo-label';
                                        break;

                                }
                                labelSpan += '<span class="group-item ' + colorSel + '">' + labelCodeArr[i] + '</span>';
                            }
                        }
                        var pingParam = '&fromModule=showGroupSystem&fromField=归属主体企业&opId=' + full.mainCompanyWindCode; //bury
                        var companySpan = Common.jumpPersonOrCompany(data, full.mainCompanyWindCode, pingParam);
                        return companySpan + labelSpan
                    }
                },
                {
                    "targets": 5,
                    "data": 'shareholdingRatio',
                    "render": function(data, type, full, meta) {
                        return Common.formatPercent(data);
                    }
                },
                {
                    "targets": 6,
                    "data": 'controlTypeName',
                    "render": function(data, type, full, meta) {
                        return Common.formatCont(data)
                    }
                },
                {
                    "targets": 7,
                    "data": 'shareholdingTypeName',
                    "render": function(data, type, full, meta) {
                        return Common.formatCont(data)
                    }
                },
            ]
        }
        var params = { "windCode": Company.companyCode, "pageSize": 10 };
        Company.pageSetting("#tabshowGroupSystem", tableSetting, columnDefsSet, params, $dom);
        $('#tabshowGroupSystem').off('click').on('click', '.underline', Company.linkWithCodeEventHandler);
    },
    showCompanyNotice: function($dom, index) {
        //企业公示
        var tableSetting = [{
                fn: "showCompanyNotice",
                interface: "getshareholderfunds",
                moduleName: intl('222474', '企业公示'),
                tabChange: {
                    type: [intl('138508', '股东及出资信息'), intl('142482', '股权变更信息')],
                    typeCnName: ["股东及出资信息", '股权变更信息'],
                    typeName: "type",
                    typeBasicNum: ["share_change_num01", "share_change_num"]
                },
                modelNum: "share_change_num01",
                moreLink: "showCompanyNotice",
                thWidthRadio: ["5%", "40%", "20%", "20%", "15%"],
                thName: [intl('138741' /* 序号 */ ), intl('138783' /* 股东名称 */ ), intl('222770', '认缴额（万元）'), intl('222769', '实缴额（万元）'), intl('222775', '出资明细')],
                align: [0, 0, 0, 0, 0],
                fields: ["NO.", "shareholdingName", "regionCode", "relAgency", "relDate"],

            },
            {
                fn: "showCompanyNotice",
                interface: "getsharechange",
                moduleName: intl('222474', '企业公示'),
                modelNum: "share_change_num",
                moreLink: "showCompanyNotice",
                thWidthRadio: ["5%", "35%", "15%", "15%", "15%", "15%"],
                thName: [intl('138741' /* 序号 */ ), intl('138783' /* 股东名称 */ ), intl('142479', '变更前股权比例'), intl('142480', '变更后股权比例'), intl('142481', '股权变更日期'), intl('138143', '公示日期')],
                align: [0, 0, 0, 0, 0, 0, 0],
                fields: ["NO.", "shareholdingName", "equityRatioBefore", "equityRatioAfter", "equityChangeDate", "publicDate"],

            }
        ]
        var initIndex = index ? index : "0";
        if (initIndex == 0) {
            for (var i = 0; i < tableSetting.length; i++) {
                var thisBasicNum = tableSetting[0].tabChange.typeBasicNum[i];
                if (thisBasicNum && Company.basicNum[thisBasicNum] && Company.basicNum[thisBasicNum] != 0) {
                    break;
                } else {
                    initIndex++;
                    if (initIndex >= tableSetting.length) {
                        initIndex = 0;
                    }
                }
            }
        }
        var $container = $dom ? $dom : $('#workspace');
        $container.empty().html(Company.drawTab(tableSetting, "tabCompanyNotice", "tbodyCompanyNotice", null, $dom, initIndex));
        var columnDefsSet = [
            [{
                    "targets": 1,
                    "data": 'landLoc',
                    "render": function(data, type, full, meta) {
                        return Company.addDropLink(data, ["getlandannsdetail", "detailId", 5, full.referenceId])
                    }
                },
                {
                    "targets": 2,
                    "data": 'regionCode',
                    "render": function(data, type, full, meta) {
                        return Common.formatCont(data)
                    }
                },
                {
                    "targets": 3,
                    "data": 'relAgency',
                    "render": function(data, type, full, meta) {
                        return Common.formatCont(data)
                    }
                },
                {
                    "targets": 4,
                    "data": 'relDate',
                    "render": function(data, type, full, meta) {
                        return Common.formatTime(data)
                    }
                }
            ],
            [{
                    "targets": 1,
                    "data": 'shareholdingName',
                    "render": function(data, type, full, meta) {
                        if (data && full['shareholdingId']) {
                            var personId = full.shareholdingId;
                            if (personId.length < 16) {
                                return '<a class="underline wi-secondary-color wi-link-color" data-code="' + personId + '" data-name="' + data + '" target="_blank" href="Company.html?companycode=' + personId + '&name=' + data + Common.isNoToolbar() + '">' + Common.formatCont(data) + '</a>';
                            } else {
                                // return '<a class="underline wi-secondary-color wi-link-color" data-code="' + personId + '" data-name="' + data + '" target="_blank" href="Person.html?id=' + personId + '&name=' + data + Common.isNoToolbar() + '" >' + Common.formatCont(data) + '</a>';
                                return Common.formatCont(data)
                            }
                        }
                        return Common.formatCont(data)
                    }
                },
                {
                    "targets": 2,
                    "data": 'equityRatioBefore',
                    "render": function(data, type, full, meta) {
                        return Common.formatPercent(data)
                    }
                },
                {
                    "targets": 3,
                    "data": 'equityRatioAfter',
                    "render": function(data, type, full, meta) {
                        return Common.formatPercent(data)
                    }
                },
                {
                    "targets": 4,
                    "data": 'equityChangeDate',
                    "render": function(data, type, full, meta) {
                        return Common.formatTime(data)
                    }
                },
                {
                    "targets": 5,
                    "data": 'publicDate',
                    "render": function(data, type, full, meta) {
                        return Common.formatTime(data)
                    }
                }
            ]
        ]
        Company.pageSetting("#tabCompanyNotice", tableSetting[initIndex], columnDefsSet[initIndex], null, $dom);
        $('#tabCompanyNotice').off('click').on('click', '.underline', Company.linkWithCodeEventHandler);
    },
    showBuildOrder: function($dom) {
        //建筑资质
        var tableSetting = {
            interface: "getbuildqualification",
            moduleName: intl('216392' /* 建筑资质 */ , '建筑资质 '),
            moreLink: "showBuildOrder",
            modelNum: "build_qualification_num",
            thWidthRadio: ["5%", "14%", "17%", "26%", "12%", "12%", "14%"],
            thName: [intl('138741' /* 序号 */ ), intl('216396' /* 资质分类 */ , '资质分类'), intl('138197' /* 证书编号 */ ), intl('216393' /* 资质名称 */ , '资质名称'), intl('138245' /* 发证日期 */ ), intl('216394' /* 证书截止日期 */ , '证书截止日期'), intl('216395' /* 发证机关 */ , '发证机关 ')],
            align: [0, 0, 0, 0, 0, 0, 0],
            fields: ["NO.", "qualificationClassify", "certificateNumber", "qualificationName", "issuseDate", "certificateDueDate", "issuingAuthority"],
        }
        var $container = $dom ? $dom : $('#workspace');
        $container.empty().html(Company.drawTab(tableSetting, "tabshowBuildOrder", "tbodyshowBuildOrder", false, $dom));
        var columnDefsSet = [{
                "targets": 1,
                "data": 'qualificationClassify',
                "render": function(data) {
                    return Common.formatCont(data)
                }
            },
            {
                "targets": 2,
                "data": 'certificateNumber',
                "render": function(data) {
                    return Common.formatCont(data)
                }
            },
            {
                "targets": 3,
                "data": 'qualificationName',
                "render": function(data, type, full, meta) {
                    return Common.formatCont(data)
                }
            },
            {
                "targets": 4,
                "data": 'issuseDate',
                "render": function(data, type, full, meta) {
                    return Common.formatTime(data)
                }
            },
            {
                "targets": 5,
                "data": 'certificateDueDate',
                "render": function(data, type, full, meta) {
                    return Common.formatTime(data)
                }
            },
            {
                "targets": 6,
                "data": 'issuingAuthority',
                "render": function(data, type, full, meta) {
                    if (data && full['issuingAuthorityId']) {
                        var personId = full.issuingAuthorityId;
                        var pingParam = '&fromModule=showBuildOrder&fromField=名称&opId=' + personId; //bury
                        if (personId.length < 16) {
                            return '<a class="underline wi-secondary-color wi-link-color" data-code="' + personId + '" data-name="' + data + '" target="_blank" href="Company.html?companycode=' + personId + '&name=' + data + Common.isNoToolbar() + '" data-pingParam="' + pingParam + '">' + Common.formatCont(data) + '</a>';
                        } else {
                            // return '<a class="underline wi-secondary-color wi-link-color" data-code="' + personId + '" data-name="' + data + '" target="_blank" href="Person.html?id=' + personId + '&name=' + data + Common.isNoToolbar() + '" data-pingParam="' + pingParam + '">' + Common.formatCont(data) + '</a>';
                            return Common.formatCont(data)
                        }
                    }
                    return Common.formatCont(data)
                }
            }
        ]
        var params = { "certifiedWindCode": Company.companyCode, "pageSize": 10 };
        Company.pageSetting("#tabshowBuildOrder", tableSetting, columnDefsSet, params, $dom);
        $('#tabshowBuildOrder').off('click').on('click', '.underline', Company.linkWithCodeEventHandler);
    },
    getcorpconsumption: function($dom) {
        //限制高消费
        var tableSetting = {
            interface: "getcorpconsumption",
            moduleName: intl('209064' /* 限制高消费 */ ),
            moreLink: "getcorpconsumption",
            modelNum: "corp_consumption_num",
            thWidthRadio: ["5%", "20%", "20%", "25%", "15%", "15%"],
            thName: [intl('138741' /* 序号 */ ), intl('138190' /* 案号 */ ), intl('209065' /* 限制消费人员姓名 */ ), intl('209066' /* 限制消费人员所属企业 */ ), intl('209067' /* 颁布法院 */ ), intl('138294' /* 立案时间 */ )],
            align: [0, 0, 0, 0, 0, 0],
            fields: ["NO.", "caseNumber", "limitConsumerName", "limitConsumerEnterprise", "issuingCourt", "filingTime"],
        }
        var $container = $dom ? $dom : $('#workspace');
        $container.empty().html(Company.drawTab(tableSetting, "tabgetcorpconsumption", "tbodygetcorpconsumption", false, $dom));
        var columnDefsSet = [{
                "targets": 1,
                "data": 'caseNumber',
                "render": function(data, type, full, meta) {
                    if (full.hbaseLocation && data) {
                        var preStr = "http://news.windin.com/ns/imagebase/6767/"
                        return '<a class="wi-secondary-color wi-link-color" target="_blank" href="' + preStr + full.hbaseLocation + '">' + data + '</a>'
                    } else {
                        return Common.formatCont(data)
                    }
                }
            },
            {
                "targets": 2,
                "data": 'limitConsumerName',
                "render": function(data, type, full, meta) {
                    if (data && full['limitConsumerId']) {
                        var personId = full.limitConsumerId;
                        var pingParam = '&fromModule=getcorpconsumption&fromField=限制消费人员姓名&opId=' + personId; //bury
                        if (personId.length < 16) {
                            return '<a class="underline wi-secondary-color wi-link-color" data-code="' + personId + '" data-name="' + data + '" target="_blank" href="Company.html?companycode=' + personId + '&name=' + data + Common.isNoToolbar() + '" data-pingParam="' + pingParam + '">' + Common.formatCont(data) + '</a>';
                        } else {
                            // return '<a class="underline wi-secondary-color wi-link-color" data-code="' + personId + '" data-name="' + data + '" target="_blank" href="Person.html?id=' + personId + '&name=' + data + Common.isNoToolbar() + '" data-pingParam="' + pingParam + '">' + Common.formatCont(data) + '</a>';
                            return Common.formatCont(data)
                        }
                    }
                    return Common.formatCont(data)
                }
            },
            {
                "targets": 3,
                "data": 'limitConsumerEnterprise',
                "render": function(data, type, full, meta) {
                    if (data && full['limitConsumerEnterpriseId']) {
                        var personId = full.limitConsumerEnterpriseId;
                        var pingParam = '&fromModule=getcorpconsumption&fromField=限制消费人员所属企业&opId=' + personId; //bury
                        if (personId.length < 16) {
                            return '<a class="underline wi-secondary-color wi-link-color" data-code="' + personId + '" data-name="' + data + '" target="_blank" href="Company.html?companycode=' + personId + '&name=' + data + Common.isNoToolbar() + '" data-pingParam="' + pingParam + '">' + Common.formatCont(data) + '</a>';
                        } else {
                            // return '<a class="underline wi-secondary-color wi-link-color" data-code="' + personId + '" data-name="' + data + '" target="_blank" href="Person.html?id=' + personId + '&name=' + data + Common.isNoToolbar() + '" data-pingParam="' + pingParam + '">' + Common.formatCont(data) + '</a>';
                            return Common.formatCont(data)
                        }
                    }
                    return Common.formatCont(data)
                }
            },
            {
                "targets": 4,
                "data": 'issuingCourt',
                "render": function(data, type, full, meta) {
                    if (data && full['issuingCourtId']) {
                        var personId = full.issuingCourtId;
                        var pingParam = '&fromModule=getcorpconsumption&fromField=颁布法院&opId=' + personId; //bury
                        if (personId.length < 16) {
                            return '<a class="underline wi-secondary-color wi-link-color" data-code="' + personId + '" data-name="' + data + '" target="_blank" href="Company.html?companycode=' + personId + '&name=' + data + Common.isNoToolbar() + '" data-pingParam="' + pingParam + '">' + Common.formatCont(data) + '</a>';
                        } else {
                            // return '<a class="underline wi-secondary-color wi-link-color" data-code="' + personId + '" data-name="' + data + '" target="_blank" href="Person.html?id=' + personId + '&name=' + data + Common.isNoToolbar() + '" data-pingParam="' + pingParam + '">' + Common.formatCont(data) + '</a>';
                            return Common.formatCont(data)
                        }
                    }
                    return Common.formatCont(data)
                }
            },
            {
                "targets": 5,
                "data": 'filingTime',
                "render": function(data, type, full, meta) {
                    return Common.formatTime(data)
                }
            },
        ]
        var params = { "limitConsumerEnterpriseId": Company.companyCode, "pageSize": 10 };
        Company.pageSetting("#tabgetcorpconsumption", tableSetting, columnDefsSet, params, $dom);
        $('#tabgetcorpconsumption').off('click').on('click', '.underline', Company.linkWithCodeEventHandler);
    },
    getevaluation: function($dom) {
        //询价评估
        var tableSetting = {
            interface: "getevaluation",
            moduleName: intl('216400' /* 询价评估 */ , '询价评估'),
            moreLink: "getevaluation",
            modelNum: "evaluation_num",
            thWidthRadio: ["5%", "10%", "10%", "18%", "17%", "10%", "10%", "20%"],
            thName: [intl('138741' /* 序号 */ , '序号'), intl('216402' /* 摇号日期 */ , '摇号日期'), intl('138190' /* 案号 */ , '案号'), intl('216403' /* 法院 */ , '法院'), intl('138427' /* 当事人 */ , '当事人'), intl('216404' /* 财产类型 */ , '财产类型'), intl('38785' /* 标的物 */ , '标的物'), intl('11253' /* 评估机构 */ , '评估机构')],
            align: [0, 0, 0, 0, 0, 0, 0, 0],
            fields: ["NO.", "numberLotDate", "caseNumber", "court", "partyName", "financialType", "subjectMatter", "evaluationInstitution"],
        }
        var $container = $dom ? $dom : $('#workspace');
        $container.empty().html(Company.drawTab(tableSetting, "tabgetevaluation", "tbodygetevaluation", false, $dom));
        var columnDefsSet = [{
                "targets": 1,
                "data": 'numberLotDate',
                "render": function(data) {
                    return Common.formatTime(data)
                }
            },
            {
                "targets": 2,
                "data": 'caseNumber',
                "render": function(data) {
                    return Common.formatCont(data)
                }
            },
            {
                "targets": 3,
                "data": 'court',
                "render": function(data, type, full, meta) {
                    if (data && full['courtId']) {
                        var personId = full.courtId;
                        var pingParam = '&fromModule=getevaluation&fromField=法院&opId=' + personId; //bury
                        if (personId.length < 16) {
                            return '<a class="underline wi-secondary-color wi-link-color" data-code="' + personId + '" data-name="' + data + '" target="_blank" href="Company.html?companycode=' + personId + '&name=' + data + Common.isNoToolbar() + '" data-pingParam="' + pingParam + '">' + Common.formatCont(data) + '</a>';
                        } else {
                            // return '<a class="underline wi-secondary-color wi-link-color" data-code="' + personId + '" data-name="' + data + '" target="_blank" href="Person.html?id=' + personId + '&name=' + data + Common.isNoToolbar() + '" data-pingParam="' + pingParam + '">' + Common.formatCont(data) + '</a>';
                            return Common.formatCont(data)
                        }
                    }
                    return Common.formatCont(data)
                }
            },
            {
                "targets": 4,
                "data": 'partyName',
                "render": function(data, type, full, meta) {
                    if (data && full['partyId']) {
                        var personId = full['partyId'];
                        var pingParam = '&fromModule=getevaluation&fromField=当事人&opId=' + personId; //bury
                        if (personId.length < 16) {
                            return '<a class="underline wi-secondary-color wi-link-color" data-code="' + personId + '" data-name="' + data + '" target="_blank" href="Company.html?companycode=' + personId + '&name=' + data + Common.isNoToolbar() + '" data-pingParam="' + pingParam + '">' + Common.formatCont(data) + '</a>';
                        } else {
                            // return '<a class="underline wi-secondary-color wi-link-color" data-code="' + personId + '" data-name="' + data + '" target="_blank" href="Person.html?id=' + personId + '&name=' + data + Common.isNoToolbar() + '" data-pingParam="' + pingParam + '">' + Common.formatCont(data) + '</a>';
                            return Common.formatCont(data)
                        }
                    }
                    return Common.formatCont(data)
                }
            },
            {
                "targets": 5,
                "data": 'financialType',
                "render": function(data, type, full, meta) {
                    return Common.formatCont(data)
                }
            },
            {
                "targets": 6,
                "data": 'subjectMatter',
                "render": function(data, type, full, meta) {
                    return Common.formatCont(data)
                }
            },
            {
                "targets": 7,
                "data": 'evaluationInstitution',
                "render": function(data, type, full, meta) { //重点关注
                    if (data && (data instanceof Array)) { //多值 array(obj)返回
                        //处理多值情况
                        var dataLength = data.length;
                        var result = [];
                        for (var i = 0; i < dataLength; i++) {
                            var dataItem = data[i];
                            if (Common.isEmptyObject(dataItem)) {
                                continue;
                            } else {
                                var dataId = dataItem['id'];
                                var dataValue = dataItem['name'];
                                if (dataId) {
                                    var personId = dataId;
                                    var pingParam = '&fromModule=getevaluation&fromField=评估机构&opId=' + personId; //bury
                                    if (personId.length < 16) {
                                        result.push('<a class="underline wi-secondary-color wi-link-color" data-code="' + personId + '" data-name="' + dataValue + '" target="_blank" href="Company.html?companycode=' + personId + '&name=' + dataValue + Common.isNoToolbar() + '" data-pingParam="' + pingParam + '">' + Common.formatCont(dataValue) + '</a>');
                                    } else {
                                        // result.push('<a class="underline wi-secondary-color wi-link-color" data-code="' + personId + '" data-name="' + dataValue + '" target="_blank" href="Person.html?id=' + personId + '&name=' + dataValue + Common.isNoToolbar() + '" data-pingParam="' + pingParam + '">' + Common.formatCont(dataValue) + '</a>');
                                        result.push(dataValue);
                                    }
                                } else {
                                    result.push(dataValue);
                                }
                            }
                        }
                        var finalRes = '';
                        finalRes = (result ? result.join(';<br/> ') : '--');
                        return (finalRes ? finalRes : '--');
                    } else if (data && !Common.isEmptyObject(data)) { //单值 obj返回
                        var dataId = data['id'];
                        data = data['name'];
                        if (dataId) {
                            var personId = dataId;
                            var pingParam = '&fromModule=getevaluation&fromField=评估机构&opId=' + personId; //bury
                            if (personId.length < 16) {
                                return '<a class="underline wi-secondary-color wi-link-color" data-code="' + personId + '" data-name="' + data + '" target="_blank" href="Company.html?companycode=' + personId + '&name=' + data + Common.isNoToolbar() + '" data-pingParam="' + pingParam + '">' + Common.formatCont(data) + '</a>';
                            } else {
                                // return '<a class="underline wi-secondary-color wi-link-color" data-code="' + personId + '" data-name="' + data + '" target="_blank" href="Person.html?id=' + personId + '&name=' + data + Common.isNoToolbar() + '" data-pingParam="' + pingParam + '">' + Common.formatCont(data) + '</a>';
                                return Common.formatCont(data);
                            }
                        }
                        return Common.formatCont(data);
                    } else {
                        return '--';
                    }
                }
            },
        ]
        var params = { "partyId": Company.companyCode, "pageSize": 10 };
        Company.pageSetting("#tabgetevaluation", tableSetting, columnDefsSet, params, $dom);
        $('#tabgetevaluation').off('click').on('click', '.underline', Company.linkWithCodeEventHandler);
    },
    getendcase: function($dom) {
        //终本案件
        var tableSetting = {
            interface: "getendcase",
            moduleName: intl('216398' /* 终本案件 */ , '终本案件'),
            moreLink: "getendcase",
            modelNum: "end_case_num",
            thWidthRadio: ["6%", "28%", "27%", "13%", "13%", "13%"],
            thName: [intl('138741' /* 序号 */ ), intl('138190' /* 案号 */ ), intl('138228' /* 执行法院 */ ), intl('216399' /* 终本日期 */ , '终本日期'), intl('216397' /* 执行标的(元) */ , '执行标的(元)'), intl('216401' /* 未履行金额(元) */ , '未履行金额(元)')],
            align: [0, 0, 0, 0, 0, 0],
            fields: ["NO.", "caseNumber", "courtOfExecution", "endDate", "executiveStandard", "outstandingMoney"],
        }
        var $container = $dom ? $dom : $('#workspace');
        $container.empty().html(Company.drawTab(tableSetting, "tabgetendcase", "tbodygetendcase", false, $dom));
        var columnDefsSet = [{
                "targets": 1,
                "data": 'caseNumber',
                "render": function(data, type, full, meta) {
                    if (full.caseId) {
                        var paramVal = full.caseId;
                        return '<a target="_blank" class="wi-secondary-color wi-link-color" href="showItemDetail.html?type=finalcase&detailid=' + paramVal + '">' + (data ? data : '--') + '</a>'
                    } else {
                        return Common.formatCont(data)
                    }
                }
            },
            {
                "targets": 2,
                "data": 'courtOfExecution',
                "render": function(data, type, full, meta) {
                    if (data && full['courtOfExecutionId']) {
                        var personId = full.courtOfExecutionId;
                        var pingParam = '&fromModule=finalcase&fromField=执行法院&opId=' + personId; //bury
                        if (personId.length < 16) {
                            return '<a class="finalcase-company underline wi-secondary-color wi-link-color" data-code="' + personId + '" data-name="' + data + '" target="_blank" href="Company.html?companycode=' + personId + '&name=' + data + Common.isNoToolbar() + '" data-pingParam="' + pingParam + '">' + Common.formatCont(data) + '</a>';
                        } else {
                            // return '<a class="finalcase-company underline wi-secondary-color wi-link-color" data-code="' + personId + '" data-name="' + data + '" target="_blank" href="Person.html?id=' + personId + '&name=' + data + Common.isNoToolbar() + '" data-pingParam="' + pingParam + '">' + Common.formatCont(data) + '</a>';
                            return Common.formatCont(data)
                        }
                    }
                    return Common.formatCont(data)
                }
            },
            {
                "targets": 3,
                "data": 'endDate',
                "render": function(data) {
                    return Common.formatTime(data)
                }
            },
            {
                "targets": 4,
                "data": 'executiveStandard',
                "render": function(data) {
                    return Common.formatMoney(data, [4, '&nbsp;'])
                }
            },
            {
                "targets": 5,
                "data": 'outstandingMoney',
                "render": function(data, type, full, meta) {
                    return Common.formatMoney(data, [4, '&nbsp;'])
                }
            }
        ]
        var params = { "executorId": Company.companyCode, "pageSize": 10 };
        Company.pageSetting("#tabgetendcase", tableSetting, columnDefsSet, params, $dom);
        $('#tabgetendcase').off('click').on('click', '.underline', Company.linkWithCodeEventHandler);
    },
    getmarketdiscredited: function($dom) {
        //证券期货市场失信信息
        var tableSetting = {
            interface: "getsfmarketdiscreditedinfo",
            moduleName: intl('222484', '证券期货市场失信信息'),
            moreLink: "getmarketdiscredited",
            modelNum: "sf_market_discredited_info_num",
            thWidthRadio: ["6%", "44%", "15%", "10%", "25%"],
            thName: [intl('138741' /* 序号 */ ), intl('222774', '处罚标题'), intl('138462', '处罚类别'), intl('138466', '处罚时间'), intl('138464', '处罚机关')],
            align: [0, 0, 0, 0, 0, 0],
            fields: ["NO.", "title", "type", "time", "orgName"],
        }
        var $container = $dom ? $dom : $('#workspace');
        $container.empty().html(Company.drawTab(tableSetting, "tabmarketdiscredited", "tbodymarketdiscredited", false, $dom));
        var columnDefsSet = [{
                "targets": 1,
                "data": 'title',
                "render": function(data, type, full, meta) {
                    if (full.detailId) {
                        var paramVal = full.detailId;
                        return '<a target="_blank" class="wi-secondary-color wi-link-color" href="showItemDetail.html?type=securitiesDishonest&detailId=' + paramVal + '">' + (data ? data : '--') + '</a>'
                    } else {
                        return Common.formatCont(data)
                    }
                }
            },
            {
                "targets": 2,
                "data": 'type',
                "render": function(data, type, full, meta) {
                    return Common.formatCont(data)
                }
            },
            {
                "targets": 3,
                "data": 'time',
                "render": function(data) {
                    return Common.formatTime(data)
                }
            },
            {
                "targets": 4,
                "data": 'orgName',
                "render": function(data, type, full, meta) {
                    var code = full["orgId"];
                    return Common.addLinkForCompanyOrPerson(data, code);
                }
            }
        ]
        Company.pageSetting("#tabmarketdiscredited", tableSetting, columnDefsSet, null, $dom);
        $('#tabmarketdiscredited').off('click').on('click', '.underline', Company.linkWithCodeEventHandler);
    },
    showfranchise: function($dom) {
        //商业特许经营
        var tableSetting = {
            interface: "getcommercialfranchiselist",
            moduleName: intl('216405' /* 商业特许经营 */ , '商业特许经营'),
            moreLink: "showfranchise",
            modelNum: "commercial_franchise_info_num",
            thWidthRadio: ["5%", "35%", "30%", "30%"],
            thName: [intl('138741' /* 序号 */ ), intl('216408' /* 备案号 */ , '备案号'), intl('216406' /* 特许人名称 */ , '特许人名称'), intl('216407' /* 备案公告日期 */ , '备案公告日期')],
            align: [0, 0, 0, 0],
            fields: ["NO.", "recordNumber", "franchisorName", "filingAnnouncementDate"],
        }
        var $container = $dom ? $dom : $('#workspace');
        $container.empty().html(Company.drawTab(tableSetting, "tabshowfranchise", "tbodyshowfranchise", false, $dom));
        var columnDefsSet = [{
                "targets": 1,
                "data": 'recordNumber',
                "render": function(data, type, full, meta) {
                    if (full.franchiseInformationId) {
                        var paramVal = full.franchiseInformationId;
                        return '<a target="_blank" class="wi-secondary-color wi-link-color" href="showItemDetail.html?type=franchise&detailid=' + paramVal + '">' + (data ? data : '--') + '</a>'
                    } else {
                        return Common.formatCont(data)
                    }
                }
            },
            {
                "targets": 2,
                "data": 'franchisorName',
                "render": function(data, type, full, meta) {
                    return Common.formatCont(data)
                }
            },
            {
                "targets": 3,
                "data": 'filingAnnouncementDate',
                "render": function(data) {
                    return Common.formatTime(data)
                }
            },
        ]
        var params = { "windCode": Company.companyCode, "pageSize": 10 };
        Company.pageSetting("#tabshowfranchise", tableSetting, columnDefsSet, params, $dom);
        $('#tabshowfranchise').off('click').on('click', '.underline', Company.linkWithCodeEventHandler);
    },
    showBankruptcy: function($dom, index) {
        //破产重整
        var tableSetting = [{
                fn: "showBankruptcy",
                interface: "getbankruptcy",
                moduleName: intl('216410' /* 破产重整 */ , '破产重整'),
                tabChange: {
                    type: [intl('58656' /* 申请人 */ , '申请人'), intl('216409' /* 被申请人 */ , '被申请人 ')],
                    typeCnName: ["申请人", "被申请人"],
                    typeName: "type",
                    typeBasicNum: ["bankruptcy_applicant_num", "bankruptcy_respondent_num"]
                },
                modelNum: "bankruptcy_applicant_num",
                moreLink: "showBankruptcy",
                thWidthRadio: ["5%", "25%", "25%", "25%", "20%"],
                thName: [intl('138741' /* 序号 */ ), intl('138190' /* 案号 */ ), intl('216409' /* 被申请人 */ , '被申请人'), intl('58656' /* 申请人 */ ), intl('149335' /* 公开日期 */ , '公开日期')],
                align: [0, 0, 0, 0, 0],
                fields: ["NO.", "caseNumber", "respondent", "applicant", "publicDate"],
            },
            {
                fn: "showBankruptcy",
                interface: "getbankruptcy",
                moduleName: intl('216410' /* 破产重整 */ , '破产重整'),
                modelNum: "bankruptcy_respondent_num",
                moreLink: "showBankruptcy",
                thWidthRadio: ["5%", "25%", "25%", "25%", "20%"],
                thName: [intl('138741' /* 序号 */ ), intl('138190' /* 案号 */ ), intl('216409' /* 被申请人 */ , '被申请人'), intl('58656' /* 申请人 */ ), intl('149335' /* 公开日期 */ , '公开日期')],
                align: [0, 0, 0, 0, 0],
                fields: ["NO.", "caseNumber", "respondent", "applicant", "publicDate"],
            },
        ]
        var initIndex = index ? index : "0";
        if (initIndex == 0) {
            for (var i = 0; i < tableSetting.length; i++) {
                var thisBasicNum = tableSetting[0].tabChange.typeBasicNum[i];
                if (thisBasicNum && Company.basicNum[thisBasicNum] && Company.basicNum[thisBasicNum] != 0) {
                    break;
                } else {
                    initIndex++;
                    if (initIndex >= tableSetting.length) {
                        initIndex = 0;
                    }
                }
            }
        }
        var $container = $dom ? $dom : $('#workspace');
        if (index) {
            // 多个页签切换时，移除之前已绑定的统计图表事件监听
            $container.find('.widget-header').off('click', '.icon-chart', tableSetting.drawChart)
        }
        $container.empty().html(Company.drawTab(tableSetting, "tabShowBankruptcy", "tbodyShowBankruptcy", null, $dom, initIndex));
        var columnDefsSet = [
            [{
                    "targets": 1,
                    "data": 'caseNumber',
                    "render": function(data, type, full, meta) {
                        if (full && full['bankruptcyReformId']) {
                            var paramVal = full['bankruptcyReformId'];
                            return '<a target="_blank" class="wi-secondary-color wi-link-color" href="showItemDetail.html?type=bankruptcy&detailid=' + paramVal + '">' + (data ? data : '--') + '</a>'
                        }
                        return Common.formatCont(data)
                    }
                },
                {
                    "targets": 2,
                    "data": 'respondent',
                    "render": function(data, type, full, meta) {
                        if (data && (data instanceof Array)) { //多值 array(obj)返回
                            //处理多值情况
                            var dataLength = data.length;
                            var result = [];
                            for (var i = 0; i < dataLength; i++) {
                                var dataItem = data[i];
                                if (Common.isEmptyObject(dataItem)) {
                                    continue;
                                } else {
                                    var dataId = dataItem['id'];
                                    var dataValue = dataItem['name'];
                                    if (dataId) {
                                        var personId = dataId;
                                        var pingParam = '&fromModule=showBankruptcy&entityAttribute=getstockpledgees&fromField=被申请人&opId=' + personId; //bury
                                        if (personId.length < 16) {
                                            result.push('<a class="underline wi-secondary-color wi-link-color" data-code="' + personId + '" data-name="' + dataValue + '" target="_blank" href="Company.html?companycode=' + personId + '&name=' + dataValue + Common.isNoToolbar() + '" data-pingParam="' + pingParam + '">' + Common.formatCont(dataValue) + '</a>');
                                        } else {
                                            // result.push('<a class="underline wi-secondary-color wi-link-color" data-code="' + personId + '" data-name="' + dataValue + '" target="_blank" href="Person.html?id=' + personId + '&name=' + dataValue + Common.isNoToolbar() + '" data-pingParam="' + pingParam + '">' + Common.formatCont(dataValue) + '</a>');
                                            result.push(dataValue);
                                        }
                                    } else {
                                        result.push(dataValue);
                                    }
                                }
                            }
                            var finalRes = '';
                            finalRes = (result ? result.join(', ') : '--');
                            return (finalRes ? finalRes : '--');
                        } else if (data && !Common.isEmptyObject(data)) { //单值 obj返回
                            var dataId = data['id'];
                            data = data['name'];
                            if (dataId) {
                                var personId = dataId;
                                var pingParam = '&fromModule=showBankruptcy&entityAttribute=getstockpledgees&fromField=被申请人&opId=' + personId; //bury
                                if (personId.length < 16) {
                                    return '<a class="underline wi-secondary-color wi-link-color" data-code="' + personId + '" data-name="' + data + '" target="_blank" href="Company.html?companycode=' + personId + '&name=' + data + Common.isNoToolbar() + '" data-pingParam="' + pingParam + '">' + Common.formatCont(data) + '</a>';
                                } else {
                                    // return '<a class="underline wi-secondary-color wi-link-color" data-code="' + personId + '" data-name="' + data + '" target="_blank" href="Person.html?id=' + personId + '&name=' + data + Common.isNoToolbar() + '" data-pingParam="' + pingParam + '">' + Common.formatCont(data) + '</a>';
                                    return Common.formatCont(data);
                                }
                            }
                            return Common.formatCont(data);
                        } else {
                            return '--';
                        }

                    }
                },
                {
                    "targets": 3,
                    "data": 'applicant',
                    "render": function(data, type, full, meta) {
                        if (data && (data instanceof Array)) { //多值 array(obj)返回
                            //处理多值情况
                            var dataLength = data.length;
                            var result = [];
                            for (var i = 0; i < dataLength; i++) {
                                var dataItem = data[i];
                                if (Common.isEmptyObject(dataItem)) {
                                    continue;
                                } else {
                                    var dataId = dataItem['id'];
                                    var dataValue = dataItem['name'];
                                    if (dataId) {
                                        var personId = dataId;
                                        var pingParam = '&fromModule=showBankruptcy&entityAttribute=getstockpledgees&fromField=申请人&opId=' + personId; //bury
                                        if (personId.length < 16) {
                                            result.push('<a class="underline wi-secondary-color wi-link-color" data-code="' + personId + '" data-name="' + dataValue + '" target="_blank" href="Company.html?companycode=' + personId + '&name=' + dataValue + Common.isNoToolbar() + '" data-pingParam="' + pingParam + '">' + Common.formatCont(dataValue) + '</a>');
                                        } else {
                                            // result.push('<a class="underline wi-secondary-color wi-link-color" data-code="' + personId + '" data-name="' + dataValue + '" target="_blank" href="Person.html?id=' + personId + '&name=' + dataValue + Common.isNoToolbar() + '" data-pingParam="' + pingParam + '">' + Common.formatCont(dataValue) + '</a>');
                                            result.push(dataValue);
                                        }
                                    } else {
                                        result.push(dataValue);
                                    }
                                }
                            }
                            var finalRes = '';
                            finalRes = (result ? result.join(', ') : '--');
                            return (finalRes ? finalRes : '--');
                        } else if (data && !Common.isEmptyObject(data)) { //单值 obj返回
                            var dataId = data['id'];
                            data = data['name'];
                            if (dataId) {
                                var personId = dataId;
                                var pingParam = '&fromModule=showBankruptcy&entityAttribute=getstockpledgees&fromField=申请人&opId=' + personId; //bury
                                if (personId.length < 16) {
                                    return '<a class="underline wi-secondary-color wi-link-color" data-code="' + personId + '" data-name="' + data + '" target="_blank" href="Company.html?companycode=' + personId + '&name=' + data + Common.isNoToolbar() + '" data-pingParam="' + pingParam + '">' + Common.formatCont(data) + '</a>';
                                } else {
                                    // return '<a class="underline wi-secondary-color wi-link-color" data-code="' + personId + '" data-name="' + data + '" target="_blank" href="Person.html?id=' + personId + '&name=' + data + Common.isNoToolbar() + '" data-pingParam="' + pingParam + '">' + Common.formatCont(data) + '</a>';
                                    return Common.formatCont(data);
                                }
                            }
                            return Common.formatCont(data);
                        } else {
                            return '--';
                        }
                    }
                },
                {
                    "targets": 4,
                    "data": 'publicDate',
                    "render": function(data, type, full, meta) {
                        return Common.formatTime(data)
                    }
                },
            ],
            [{
                    "targets": 1,
                    "data": 'caseNumber',
                    "render": function(data, type, full, meta) {
                        if (full && full['bankruptcyReformId']) {
                            var paramVal = full['bankruptcyReformId'];
                            return '<a target="_blank" class="wi-secondary-color wi-link-color" href="showItemDetail.html?type=bankruptcy&detailid=' + paramVal + '">' + (data ? data : '--') + '</a>'
                        }
                        return Common.formatCont(data)
                    }
                },
                {
                    "targets": 2,
                    "data": 'respondent',
                    "render": function(data, type, full, meta) {
                        if (data && (data instanceof Array)) { //多值 array(obj)返回
                            //处理多值情况
                            var dataLength = data.length;
                            var result = [];
                            for (var i = 0; i < dataLength; i++) {
                                var dataItem = data[i];
                                if (Common.isEmptyObject(dataItem)) {
                                    continue;
                                } else {
                                    var dataId = dataItem['id'];
                                    var dataValue = dataItem['name'];
                                    if (dataId) {
                                        var personId = dataId;
                                        var pingParam = '&fromModule=showBankruptcy&entityAttribute=getstockpledgees&fromField=被申请人&opId=' + personId; //bury
                                        if (personId.length < 16) {
                                            result.push('<a class="underline wi-secondary-color wi-link-color" data-code="' + personId + '" data-name="' + dataValue + '" target="_blank" href="Company.html?companycode=' + personId + '&name=' + dataValue + Common.isNoToolbar() + '" data-pingParam="' + pingParam + '">' + Common.formatCont(dataValue) + '</a>');
                                        } else {
                                            // result.push('<a class="underline wi-secondary-color wi-link-color" data-code="' + personId + '" data-name="' + dataValue + '" target="_blank" href="Person.html?id=' + personId + '&name=' + dataValue + Common.isNoToolbar() + '" data-pingParam="' + pingParam + '">' + Common.formatCont(dataValue) + '</a>');
                                            result.push(dataValue);
                                        }
                                    } else {
                                        result.push(dataValue);
                                    }
                                }
                            }
                            var finalRes = '';
                            finalRes = (result ? result.join(', ') : '--');
                            return (finalRes ? finalRes : '--');
                        } else if (data && !Common.isEmptyObject(data)) { //单值 obj返回
                            var dataId = data['id'];
                            data = data['name'];
                            if (dataId) {
                                var personId = dataId;
                                var pingParam = '&fromModule=showBankruptcy&entityAttribute=getstockpledgees&fromField=被申请人&opId=' + personId; //bury
                                if (personId.length < 16) {
                                    return '<a class="underline wi-secondary-color wi-link-color" data-code="' + personId + '" data-name="' + data + '" target="_blank" href="Company.html?companycode=' + personId + '&name=' + data + Common.isNoToolbar() + '" data-pingParam="' + pingParam + '">' + Common.formatCont(data) + '</a>';
                                } else {
                                    // return '<a class="underline wi-secondary-color wi-link-color" data-code="' + personId + '" data-name="' + data + '" target="_blank" href="Person.html?id=' + personId + '&name=' + data + Common.isNoToolbar() + '" data-pingParam="' + pingParam + '">' + Common.formatCont(data) + '</a>';
                                    return Common.formatCont(data);
                                }
                            }
                            return Common.formatCont(data);
                        } else {
                            return '--';
                        }

                    }
                },
                {
                    "targets": 3,
                    "data": 'applicant',
                    "render": function(data, type, full, meta) {
                        if (data && (data instanceof Array)) { //多值 array(obj)返回
                            //处理多值情况
                            var dataLength = data.length;
                            var result = [];
                            for (var i = 0; i < dataLength; i++) {
                                var dataItem = data[i];
                                if (Common.isEmptyObject(dataItem)) {
                                    continue;
                                } else {
                                    var dataId = dataItem['id'];
                                    var dataValue = dataItem['name'];
                                    if (dataId) {
                                        var personId = dataId;
                                        var pingParam = '&fromModule=showBankruptcy&entityAttribute=getstockpledgees&fromField=申请人&opId=' + personId; //bury
                                        if (personId.length < 16) {
                                            result.push('<a class="underline wi-secondary-color wi-link-color" data-code="' + personId + '" data-name="' + dataValue + '" target="_blank" href="Company.html?companycode=' + personId + '&name=' + dataValue + Common.isNoToolbar() + '" data-pingParam="' + pingParam + '">' + Common.formatCont(dataValue) + '</a>');
                                        } else {
                                            // result.push('<a class="underline wi-secondary-color wi-link-color" data-code="' + personId + '" data-name="' + dataValue + '" target="_blank" href="Person.html?id=' + personId + '&name=' + dataValue + Common.isNoToolbar() + '" data-pingParam="' + pingParam + '">' + Common.formatCont(dataValue) + '</a>');
                                            result.push(dataValue);
                                        }
                                    } else {
                                        result.push(dataValue);
                                    }
                                }
                            }
                            var finalRes = '';
                            finalRes = (result ? result.join(', ') : '--');
                            return (finalRes ? finalRes : '--');
                        } else if (data && !Common.isEmptyObject(data)) { //单值 obj返回
                            var dataId = data['id'];
                            data = data['name'];
                            if (dataId) {
                                var personId = dataId;
                                var pingParam = '&fromModule=showBankruptcy&entityAttribute=getstockpledgees&fromField=申请人&opId=' + personId; //bury
                                if (personId.length < 16) {
                                    return '<a class="underline wi-secondary-color wi-link-color" data-code="' + personId + '" data-name="' + data + '" target="_blank" href="Company.html?companycode=' + personId + '&name=' + data + Common.isNoToolbar() + '" data-pingParam="' + pingParam + '">' + Common.formatCont(data) + '</a>';
                                } else {
                                    // return '<a class="underline wi-secondary-color wi-link-color" data-code="' + personId + '" data-name="' + data + '" target="_blank" href="Person.html?id=' + personId + '&name=' + data + Common.isNoToolbar() + '" data-pingParam="' + pingParam + '">' + Common.formatCont(data) + '</a>';
                                    return Common.formatCont(data);
                                }
                            }
                            return Common.formatCont(data);
                        } else {
                            return '--';
                        }
                    }
                },
                {
                    "targets": 4,
                    "data": 'publicDate',
                    "render": function(data, type, full, meta) {
                        return Common.formatTime(data)
                    }
                },
            ],
        ]

        var param = { applicantId: Company.companyCode };
        if (initIndex == 0) {
            param = { applicantId: Company.companyCode };
        } else {
            param = { respondentId: Company.companyCode };
        }
        Company.pageSetting("#tabShowBankruptcy", tableSetting[initIndex], columnDefsSet[initIndex], param, $dom);
        $('#tabShowBankruptcy').off('click').on('click', '.underline', Company.linkWithCodeEventHandler);
    },
    showSupervisorypunishment: function($dom, index) {
        //监管处罚
        var tableSetting = [{
                fn: "showSupervisorypunishment",
                interface: "getfinancepunishment",
                moduleName: intl('222835', '监管处罚'),
                tabChange: {
                    type: [intl('143319', '金融监管处罚'), intl('222836', '市场监管处罚'), intl('143396', '食药监处罚')],
                    typeCnName: ["金融监管处罚", "市场监管处罚", "食药监处罚"],
                    typeName: "type",
                    typeBasicNum: ["finance_punishment_num", "market_punishment_num", "foodanddrug_punishment_num"]
                },
                modelNum: "bankruptcy_applicant_num",
                moreLink: "showSupervisorypunishment",
                thWidthRadio: ["5%", "30%", "15%", "15%", "15%", "20%"],
                thName: [intl('138741' /* 序号 */ ), intl('222774', '处罚标题'), intl('222772', '处罚决定书文号'), intl('153359', '决定日期'), intl('138143', '公示日期'), intl('138464', '处罚机关')],
                align: [0, 0, 0, 0, 0],
                fields: ["NO.", "title", "docId", "decisionDate", "announcementDate", "orgName"],
            },
            {
                fn: "showSupervisorypunishment",
                interface: "getmarketpunishment",
                moduleName: intl('222835', '监管处罚'),
                modelNum: "market_punishment_num",
                moreLink: "showSupervisorypunishment",
                thWidthRadio: ["5%", "30%", "15%", "15%", "15%", "20%"],
                thName: [intl('138741' /* 序号 */ ), intl('222774', '处罚标题'), intl('222772', '处罚决定书文号'), intl('153359', '决定日期'), intl('138143', '公示日期'), intl('138464', '处罚机关')],
                align: [0, 0, 0, 0, 0],
                fields: ["NO.", "title", "docId", "decisionDate", "announcementDate", "orgName"],
            },
            {
                fn: "showSupervisorypunishment",
                interface: "getfoodanddrugpunishment",
                moduleName: intl('222835', '监管处罚'),
                modelNum: "foodanddrug_punishment_num",
                moreLink: "showSupervisorypunishment",
                thWidthRadio: ["5%", "30%", "15%", "15%", "15%", "20%"],
                thName: [intl('138741' /* 序号 */ ), intl('222774', '处罚标题'), intl('222772', '处罚决定书文号'), intl('153359', '决定日期'), intl('138143', '公示日期'), intl('138464', '处罚机关')],
                align: [0, 0, 0, 0, 0],
                fields: ["NO.", "title", "docId", "decisionDate", "announcementDate", "orgName"],
            },
        ]
        var initIndex = index ? index : "0";
        if (initIndex == 0) {
            for (var i = 0; i < tableSetting.length; i++) {
                var thisBasicNum = tableSetting[0].tabChange.typeBasicNum[i];
                if (thisBasicNum && Company.basicNum[thisBasicNum] && Company.basicNum[thisBasicNum] != 0) {
                    break;
                } else {
                    initIndex++;
                    if (initIndex >= tableSetting.length) {
                        initIndex = 0;
                    }
                }
            }
        }
        var $container = $dom ? $dom : $('#workspace');
        $container.empty().html(Company.drawTab(tableSetting, "tabSupervisorypunishment", "tbodySupervisorypunishment", null, $dom, initIndex));
        var columnDefsSet = [
            [{
                    "targets": 1,
                    "data": 'title',
                    "render": function(data, type, full, meta) {
                        if (full.detailId) {
                            return '<a target="_blank" class="underline wi-secondary-color wi-link-color" data-interface="' + 'getfinancepunishmentdetail' + '" data-key="' + 'detailId' + '" data-tdlen="' + '6' + '" data-value="' + full.detailId + '">' + (data ? data : '--') + '</a>'
                        } else {
                            return Common.formatCont(data)
                        }
                    }
                },
                {
                    "targets": 2,
                    "data": 'docId',
                    "render": function(data, type, full, meta) {
                        if (full.detailId) {
                            return '<a target="_blank" class="underline wi-secondary-color wi-link-color" data-interface="' + 'getfinancepunishmentdetail' + '" data-key="' + 'detailId' + '" data-tdlen="' + '6' + '" data-value="' + full.detailId + '">' + (data ? data : '--') + '</a>'
                        } else {
                            return Common.formatCont(data)
                        }
                    }
                },
                {
                    "targets": 3,
                    "data": 'decisionDate',
                    "render": function(data, type, full, meta) {
                        return Common.formatTime(data)
                    }
                },
                {
                    "targets": 4,
                    "data": 'announcementDate',
                    "render": function(data, type, full, meta) {
                        return Common.formatTime(data)
                    }
                },
                {
                    "targets": 5,
                    "data": 'orgName',
                    "render": function(data, type, full, meta) {
                        var code = full['orgId'];
                        return Common.addLinkForCompanyOrPerson(data, code)
                    }
                }
            ],
            [{
                    "targets": 1,
                    "data": 'title',
                    "render": function(data, type, full, meta) {
                        if (full.detailId) {
                            return '<a target="_blank" class="underline wi-secondary-color wi-link-color" data-interface="' + 'getmarketpunishmentdetail' + '" data-key="' + 'detailId' + '" data-tdlen="' + '6' + '" data-value="' + full.detailId + '">' + (data ? data : '--') + '</a>'
                        } else {
                            return Common.formatCont(data)
                        }
                    }
                },
                {
                    "targets": 2,
                    "data": 'docId',
                    "render": function(data, type, full, meta) {
                        if (full.detailId) {
                            return '<a target="_blank" class="underline wi-secondary-color wi-link-color" data-interface="' + 'getfinancepunishmentdetail' + '" data-key="' + 'detailId' + '" data-tdlen="' + '6' + '" data-value="' + full.detailId + '">' + (data ? data : '--') + '</a>'
                        } else {
                            return Common.formatCont(data)
                        }
                    }
                },
                {
                    "targets": 3,
                    "data": 'decisionDate',
                    "render": function(data, type, full, meta) {
                        return Common.formatTime(data)
                    }
                },
                {
                    "targets": 4,
                    "data": 'announcementDate',
                    "render": function(data, type, full, meta) {
                        return Common.formatTime(data)
                    }
                },
                {
                    "targets": 5,
                    "data": 'orgName',
                    "render": function(data, type, full, meta) {
                        var code = full['orgId'];
                        return Common.addLinkForCompanyOrPerson(data, code)
                    }
                }
            ],
            [{
                    "targets": 1,
                    "data": 'title',
                    "render": function(data, type, full, meta) {
                        if (full.detailId) {
                            return '<a target="_blank" class="underline wi-secondary-color wi-link-color" data-interface="' + 'getfoodanddrugpunishmentdetail' + '" data-key="' + 'detailId' + '" data-tdlen="' + '6' + '" data-value="' + full.detailId + '">' + (data ? data : '--') + '</a>'
                        } else {
                            return Common.formatCont(data)
                        }
                    }
                },
                {
                    "targets": 2,
                    "data": 'docId',
                    "render": function(data, type, full, meta) {
                        if (full.detailId) {
                            return '<a target="_blank" class="underline wi-secondary-color wi-link-color" data-interface="' + 'getfinancepunishmentdetail' + '" data-key="' + 'detailId' + '" data-tdlen="' + '6' + '" data-value="' + full.detailId + '">' + (data ? data : '--') + '</a>'
                        } else {
                            return Common.formatCont(data)
                        }
                    }
                },
                {
                    "targets": 3,
                    "data": 'decisionDate',
                    "render": function(data, type, full, meta) {
                        return Common.formatTime(data)
                    }
                },
                {
                    "targets": 4,
                    "data": 'announcementDate',
                    "render": function(data, type, full, meta) {
                        return Common.formatTime(data)
                    }
                },
                {
                    "targets": 5,
                    "data": 'orgName',
                    "render": function(data, type, full, meta) {
                        var code = full['orgId'];
                        return Common.addLinkForCompanyOrPerson(data, code)
                    }
                }
            ]
        ]

        Company.pageSetting("#tabSupervisorypunishment", tableSetting[initIndex], columnDefsSet[initIndex], null, $dom);
        //$('#tabSupervisorypunishment').off('click').on('click', '.underline', Company.linkWithCodeEventHandler);
        $('#tabSupervisorypunishment').off('click').on('click', '.underline', function() {
            var Band = false;
            if ($(this).parent().parent().parent().attr('id') == 'tbodyBand') {
                Band = true;
            }
            Company.showContentDetail(this, $(this).attr("data-tdlen"), Band)
            return false;
        });
    },
    // 送达公告
    showDeliveryAnnouncement: function($dom) {
        var tableSetting = {
            interface: "getdeliveryannounce",
            moduleName: intl('204947' /* 送达公告 */ ),
            moreLink: "showDeliveryAnnouncement",
            modelNum: "delivery_anns_num",
            thWidthRadio: ["5%", "22%", "30%", "19%", "12%", "12%"],
            thName: [intl('138741' /* 序号 */ ), intl('138190' /* 案号 */ ), intl('138427' /* 当事人  */ ), intl('138148' /* 公告人 */ ), intl('137829' /* 公告时间 */ ), intl('40513' /* 详情 */ )],
            align: [0, 0, 0, 0, 0, 0],
            fields: ["NO.", "announcement_no", "announcement_party", "announcer", "announcement_time", "announcement_id"],
        }
        var $container = $dom ? $dom : $('#workspace');
        $container.empty().html(Company.drawTab(tableSetting, "tabDeliveryAnnouncement", "tbodyDeliveryAnnouncement", false, $dom));
        var columnDefsSet = [{
                "targets": 1,
                "data": 'announcement_no',
                "render": function(data) {
                    return Common.formatCont(data)
                }
            },
            {
                "targets": 2,
                "data": 'announcement_party',
                "render": function(data) {
                    return Company.getPartyStr(data)
                }
            },
            {
                "targets": 3,
                "data": 'announcer',
                "render": function(data, type, full, meta) {
                    return Common.formatCont(data)
                }
            },
            {
                "targets": 4,
                "data": 'announcement_time',
                "render": function(data, type, full, meta) {
                    return Common.formatTime(data)
                }
            },
            {
                "targets": 5,
                "data": 'announcement_id',
                "render": function(data, type, full, meta) {
                    var buryData = 'data-buryId="' + data + '" data-buryEntity="showDeliveryAnnouncement"'; //bury
                    return Common.showDetailLink(data, ["getdeliveryannouncedetail", "detailId", 6], buryData);
                }
            }
        ]
        var params = { "companycode": Company.companyCode, "pageSize": 10 };
        Company.pageSetting("#tabDeliveryAnnouncement", tableSetting, columnDefsSet, params, $dom);
    },
    // 投资事件
    showInvestmentEvent: function($dom) {
        var tableSetting = {
            interface: "getinvestmentevent",
            moduleName: intl('40559' /* 投资事件 */ ),
            moreLink: "showInvestmentEvent",
            modelNum: "invest_events_num",
            thWidthRadio: ["5%", "20%", "10%", "20%", "15%", "10%", "20%"],
            thName: [intl('138741' /* 序号 */ ), intl('222765', '企业简称'), intl('204948' /* 参与轮次  */ ), intl('14391' /* 投资方 */ ), intl('14413' /* 投资金额 */ ), intl('222766', '披露时间'), intl('93005', '新闻来源')],
            align: [0, 0, 0, 0, 0, 0, 0, 0],
            fields: ["NO.", "financeName", "financeRound", "childInvest", "financeAmount", "openTime", "newsTitle"],
        }
        var $container = $dom ? $dom : $('#workspace');
        $container.empty().html(Company.drawTab(tableSetting, "tabInvestmentEvent", "tbodyInvestmentEvent", false, $dom));
        var columnDefsSet = [{
                "targets": 1,
                "data": 'financeName',
                "render": function(data, type, full, meta) {
                    var shortname = full.financeName;
                    var type = 2;
                    var id = full.financeId;
                    var img = full.logo ? full.logo : "";
                    return (Common.showCompanyName(type, data, id, img, shortname))
                }
            },
            {
                "targets": 2,
                "data": 'financeRound',
                "render": function(data) {
                    return Common.formatCont(data)
                }
            },
            {
                "targets": 3,
                "data": 'childInvest',
                "render": function(data, type, full, meta) {
                    return Company.pvecInvestList(data)
                }
            },
            {
                "targets": 4,
                "data": 'financeAmount',
                "render": function(data) {
                    return Common.formatMoney(data, [2, '万'])
                }
            },
            {
                "targets": 5,
                "data": 'openTime',
                "render": function(data, type, full, meta) {
                    return Common.formatTime(data)
                }
            },
            {
                "targets": 6,
                "data": 'newsTitle',
                "render": function(data, type, full, meta) {
                    if (full.newsSourceId) {
                        return '<a class="wi-secondary-color wi-link-color" target="_blank" href="/SmartReaderWeb/SmartReader/?type=4&id=' + full.newsSourceId + '">' + data + '</a>';
                    } else {
                        return Common.formatCont(data)
                    }
                }
            }
        ]
        Company.pageSetting("#tabInvestmentEvent", tableSetting, columnDefsSet, { 'investorId': Company.companyCode }, $dom);

        $('#tabInvestmentEvent').off('click').on('click', '.underline', Company.linkWithCodeEventHandler);
    },
    // 投资机构
    showInvestmentAgency: function($dom) {
        var tableSetting = {
            interface: "getinvestmentagency",
            moduleName: intl('138727' /* 投资机构 */ ),
            moreLink: "showInvestmentAgency",
            modelNum: "invest_orgs_num",
            thWidthRadio: ["5%", "31%", "11%", "8%", "45%"],
            thName: [intl('138741' /* 序号 */ ), intl('138727' /* 投资机构 */ ), intl('138860' /* 成立日期  */ ), intl('204949' /* 所属地 */ ), intl('138847' /* 简介 */ )],
            align: [0, 0, 0, 0, 0],
            fields: ["NO.", "investmentName", "foundDate", "headArea", "introduce"],
        }
        var $container = $dom ? $dom : $('#workspace');
        $container.empty().html(Company.drawTab(tableSetting, "tabInvestmentAgency", "tbodyInvestmentAgency", false, $dom));
        var columnDefsSet = [{
                "targets": 1,
                "data": 'investmentName',
                "render": function(data, type, full, meta) {
                    var type = 2;
                    var shortname = full.investmentName;
                    var id = full.windCode;
                    var img = full.investmentLogo ? full.investmentLogo : "";
                    var pingParam = '&fromModule=' + buryItemMapping.mappingEntity["showInvestmentAgency"] + '&fromField=投资机构&opId=' + id; //bury
                    return (Common.showCompanyName(type, data, id, img, shortname, null, null, null, null, pingParam))
                }
            },
            {
                "targets": 2,
                "data": 'foundDate',
                "render": function(data, type, full, meta) {
                    return Common.formatTime(data)
                }
            },
            {
                "targets": 3,
                "data": 'headArea',
                "render": function(data) {
                    return Common.formatCont(data)
                }
            },
            {
                "targets": 4,
                "data": 'introduce',
                "render": function(data) {
                    var result = '<span class="text-2-show view-cont-control" title="点击展开">' + Common.formatCont(data) + '</span>';
                    return result
                }
            },
        ]
        Company.pageSetting("#tabInvestmentAgency", tableSetting, columnDefsSet, { "windCode": Company.companyCode }, $dom);
        $('#tabInvestmentAgency').off('click').on('click', '.underline', Company.linkWithCodeEventHandler);
    },
    // 政府扶持
    getgovsupport: function($dom) {
        var tableSetting = {
            interface: "getgovsupport",
            moduleName: intl('222475', '政府扶持'),
            moreLink: "getgovsupport",
            modelNum: "gov_support_num",
            thWidthRadio: ["5%", "25%", "10%", "15%", "10%", "35%"],
            thName: [intl('138741', '序号'), intl('222776', '享受扶持政策依据'), intl('222777', '扶持数额'), intl('222778', '实施部门'), intl('222779', '扶持日期'), intl('222780', '扶持内容')],
            align: [0, 0, 0, 0, 0, 0],
            fields: ["NO.", "policy", "amount", "orgName", "date", "content"],
        }
        var $container = $dom ? $dom : $('#workspace');
        $container.empty().html(Company.drawTab(tableSetting, "tabgetgovsupport", "tbodygetgovsupport", false, $dom));
        var columnDefsSet = [{
                "targets": 1,
                "data": 'policy',
                "render": function(data, type, full, meta) {
                    return Common.formatCont(data);
                }
            },
            {
                "targets": 2,
                "data": 'amount',
                "render": function(data, type, full, meta) {
                    return Common.formatMoney(data)
                }
            },
            {
                "targets": 3,
                "data": 'orgName',
                "render": function(data, type, full, meta) {
                    var itemId = full.orgId ? full.orgId : '';
                    var otherCss = '';
                    var pingParam = '&fromModule=zffc&fromField=实施部门&opId=' + itemId; //bury
                    return Common.jumpwithBury(data, itemId, otherCss, pingParam);
                }
            },
            {
                "targets": 4,
                "data": 'date',
                "render": function(data) {
                    return Common.formatTime(data)
                }
            },
            {
                "targets": 5,
                "data": 'content',
                "render": function(data) {
                    //...展开
                    var result = '<span class="text-2-show view-cont-control" title="点击展开">' + Common.formatCont(data) + '</span>';
                    return result;
                }
            },
        ]
        var params = { "companycode": Company.companyCode, "pageSize": 10 };
        Company.pageSetting("#tabgetgovsupport", tableSetting, columnDefsSet, params, $dom);
        $('#tabgetgovsupport').off('click').on('click', '.underline', Company.linkWithCodeEventHandler);
    },
    // 业务关联方
    getrelatedparty: function($dom) {
        var tableSetting = {
            interface: "getrelatedparty",
            moduleName: intl('222763', '业务关联方'),
            moreLink: "getrelatedparty",
            modelNum: "relate_dparty_num",
            thName: [intl('138741', '序号'), intl('222781', '关联方类型'), intl('222782', '关联方名称')],
            thWidthRadio: ["5%", "40%", "55%"],
            align: [0, 0, 0],
            fields: ["NO.", "relatedPartyType", "relatedPartyName"],
        }
        var $container = $dom ? $dom : $('#workspace');
        $container.empty().html(Company.drawTab(tableSetting, "tabgetrelatedparty", "tbodygetrelatedparty", false, $dom));
        var columnDefsSet = [{
                "targets": 1,
                "data": 'relatedPartyType',
                "render": function(data, type, full, meta) {
                    return Common.formatCont(data);
                }
            },
            {
                "targets": 2,
                "data": 'relatedPartyName',
                "render": function(data, type, full, meta) {
                    var itemId = full.relatedPartyId ? full.relatedPartyId : '';
                    var otherCss = '';
                    var pingParam = '&fromModule=getrelatedparty&fromField=关联方名称&opId=' + itemId; //bury
                    return Common.jumpwithBury(data, itemId, otherCss, pingParam);
                }
            },

        ]
        var params = { "companycode": Company.companyCode, "pageSize": 10 };
        Company.pageSetting("#tabgetrelatedparty", tableSetting, columnDefsSet, params, $dom);
        $('#tabgetrelatedparty').off('click').on('click', '.underline', Company.linkWithCodeEventHandler);
    },
    // 金融许可
    getfinanciallicence: function($dom) {
        var tableSetting = {
            interface: "getfinanciallicence",
            moduleName: intl('222483', '金融许可'),
            moreLink: "getfinanciallicence",
            modelNum: "financial_licence_num",
            thName: [intl('138741', '序号'), intl('222773', '行政许可决定文书号'), intl('222783', '许可证名称'), intl('138245', '发证日期'), intl('222768', '有效期起止日期'), intl('138377', '许可机关')],
            thWidthRadio: ["5%", "25%", "20%", "10%", "20%", "20%"],
            align: [0, 0, 0],
            fields: ["NO.", "docId", "licenceName", "issueDate", "startDate", "orgName"],
        }
        var $container = $dom ? $dom : $('#workspace');
        $container.empty().html(Company.drawTab(tableSetting, "tabgetfinanciallicence", "tbodygetfinanciallicence", false, $dom));
        var columnDefsSet = [{
                "targets": 1,
                "data": 'docId',
                "render": function(data, type, full, meta) {
                    if (full.detailId) {
                        return '<a target="_blank" class="detail-underline wi-secondary-color wi-link-color" data-interface="' + 'getfinanciallicencedetail' + '" data-key="' + 'detailId' + '" data-tdlen="' + '6' + '" data-value="' + full.detailId + '">' + (data ? data : '--') + '</a>'
                    } else {
                        return Common.formatCont(data)
                    }
                }
            },
            {
                "targets": 2,
                "data": 'licenceName',
                "render": function(data, type, full, meta) {
                    if (full.detailId) {
                        return '<a target="_blank" class="detail-underline wi-secondary-color wi-link-color" data-interface="' + 'getfinanciallicencedetail' + '" data-key="' + 'detailId' + '" data-tdlen="' + '6' + '" data-value="' + full.detailId + '">' + (data ? data : '--') + '</a>'
                    } else {
                        return Common.formatCont(data)
                    }
                }
            },
            {
                "targets": 3,
                "data": 'issueDate',
                "render": function(data, type, full, meta) {
                    return Common.formatTime(data);
                }
            },
            {
                "targets": 4,
                "data": 'startDate',
                "render": function(data, type, full, meta) {
                    //开始时间
                    var sDate = full.startDate ? Common.formatTime(full.startDate) : '--';
                    //结束时间
                    var eDate = full.endDate ? Common.formatTime(full.endDate) : '--';
                    if (sDate == '--' && eDate == '--') {
                        return '--';
                    }
                    return (sDate + '至' + eDate);
                }
            },
            {
                "targets": 5,
                "data": 'orgName',
                "render": function(data, type, full, meta) {
                    var itemId = full.orgId ? full.orgId : '';
                    var otherCss = 'finan-company';
                    var pingParam = '&fromModule=getfinanciallicence&fromField=许可机关&opId=' + itemId; //bury
                    return Common.jumpwithBury(data, itemId, otherCss, pingParam);
                }
            },

        ]
        var params = { "companycode": Company.companyCode, "pageSize": 10 };
        Company.pageSetting("#tabgetfinanciallicence", tableSetting, columnDefsSet, params, $dom);
        $('#tabgetfinanciallicence').off('click').on('click', '.underline', Company.linkWithCodeEventHandler);
        $('#tabgetfinanciallicence').on('click', '.detail-underline', function() {
            var Band = false;
            if ($(this).parent().parent().parent().attr('id') == 'tbodyBand') {
                Band = true;
            }
            Company.showContentDetail(this, $(this).attr("data-tdlen"), Band)
            return false;
        });
    },
    moduleHaveNoData: function(dom, msg) {
        //一级模块无数据
        var msgStr = msg ? msg : intl('132725' /* 暂无数据 */ );
        $(dom).append("<div class='no-data-module'><i></i>" + msgStr + "</div>");
    },
    showCompanyInfo: function($dom, data) {
        //工商信息
        var htmlArr = [];
        htmlArr.push('<div class="each-module" id="showCompanyInfo">')
        htmlArr.push('<div class="widget-model"><div class="widget-header"><span class="fl">' + intl('138588' /* 工商信息 */ ) + '（' + intl('138510' /* 部分信息根据大数据计算生成 */ ) + '）</span></div>');
        htmlArr.push('<div class="table-container"><table class="tab-basicInfo"><tbody>');
        if (Company.isHongkong) {
            htmlArr.push('<tr><td class="tit-tab-basicInfo" width="16%">' + intl('138679' /* 公司编号 */ ) + '</td><td width="18%" id="RegisterCode" class="content-tab-basicInfo"></td><td class="tit-tab-basicInfo" width="14%">' + intl('138674' /* 公司类别 */ ) + '</td><td width="18%" id="CompanyType" class="content-tab-basicInfo"></td><td class="tit-tab-basicInfo" width="14%">' + intl('138860' /* 成立日期 */ ) + '</td><td id="EstablishDate" class="content-tab-basicInfo"></td></tr>');
            htmlArr.push('<tr><td class="tit-tab-basicInfo">' + intl('138217' /* 公司现状 */ ) + '</td><td id="ManagementState"  class="content-tab-basicInfo"></td><td class="tit-tab-basicInfo">' + intl('138390' /* 抵押登记册 */ ) + '</td><td id="mortgageRegister" class="content-tab-basicInfo"></td><td class="tit-tab-basicInfo">' + intl('138239' /* 已告解散日期/不再是独立实体日期 */ ) + '</td><td id="dateCancelled" class="content-tab-basicInfo"></td></tr>');
            htmlArr.push('<tr><td class="tit-tab-basicInfo">' + intl('138276' /* 公司英文名 */ ) + '</td><td colspan="5" class="content-tab-basicInfo" id="CompanyEnName"></td></tr>')
            htmlArr.push('<tr><td class="tit-tab-basicInfo">' + intl('35776' /* 注册地址 */ ) + '</td><td colspan="5" class="content-tab-basicInfo" id="CompanyAddress"></td></tr>');
            htmlArr.push('<tr><td class="tit-tab-basicInfo">' + intl('138380' /* 清盘模式 */ ) + '</td><td colspan= "5" class="td-scope content-tab-basicInfo" id="windUpMode"></td></tr>');
            htmlArr.push('<tr><td class="tit-tab-basicInfo">' + intl('138718' /* 重要事项 */ ) + '</td><td colspan= "5" class="td-scope content-tab-basicInfo"  id="importantMatter"></td></tr>');
        } else if (Company.isTw) {
            htmlArr.push('<tr><td class="tit-tab-basicInfo" width="16%">' + intl('138679' /* 公司编号 */ ) + '</td><td width="18%" id="RegisterCode" class="content-tab-basicInfo"></td><td class="tit-tab-basicInfo">' + intl('5529' /* 法定代表人 */ ) + '</td><td id="LegalPerson" class="content-tab-basicInfo"></td><td class="tit-tab-basicInfo" width="14%">' + intl('138674' /* 公司类别 */ ) + '</td><td width="18%" id="CompanyType" class="content-tab-basicInfo"></td></tr>');
            htmlArr.push('<tr><td class="tit-tab-basicInfo">' + intl('138473' /* 注册资金 */ ) + '</td><td id="RegisterCapital" class="content-tab-basicInfo"></td><td class="tit-tab-basicInfo">' + intl('145876' /* 实缴资本 */ ) + '</td><td id="CompanyRealSetMoney" class="content-tab-basicInfo"></td><td class="tit-tab-basicInfo">' + intl('138217' /* 公司现状 */ ) + '</td><td id="ManagementState"  class="content-tab-basicInfo"></td></tr>');
            htmlArr.push('<tr><td class="tit-tab-basicInfo">' + intl('222904', '核准设立日期') + '</td><td id="date_established" class="content-tab-basicInfo"></td><td class="tit-tab-basicInfo">' + intl('222901', '最后核准变更日期') + '</td><td id="date_ppproved" class="content-tab-basicInfo"></td><td class="tit-tab-basicInfo">' + intl('222903', '股权状态') + '</td><td id="entity_type" class="content-tab-basicInfo"></td></tr>');
            htmlArr.push('<tr><td class="tit-tab-basicInfo">' + intl('138477' /* 登记机关 */ ) + '</td><td colspan="5" class="content-tab-basicInfo" id="RegisterInstitution"></td></tr>')
            htmlArr.push('<tr><td class="tit-tab-basicInfo">' + intl('222902', '简体中文名称') + '</td><td colspan="5" class="content-tab-basicInfo" id="simplified_chinese"></td></tr>')
            htmlArr.push('<tr><td class="tit-tab-basicInfo">' + intl('138276' /* 公司英文名 */ ) + '</td><td colspan="5" class="content-tab-basicInfo" id="CompanyEnName"></td></tr>')
            htmlArr.push('<tr><td class="tit-tab-basicInfo">' + intl('1588' /* 办公地址 */ ) + '</td><td colspan="5" class="content-tab-basicInfo" id="OfficeAddress"></td></tr>');
            htmlArr.push('<tr><td class="tit-tab-basicInfo">' + intl('9177' /* 经营范围 */ ) + '</td><td colspan= "5" class="td-scope content-tab-basicInfo"  id="BusinessScope"></td></tr>');
        } else if (Company.isGovernment) { //政府机构
            htmlArr.push('<tr><td class="tit-tab-basicInfo">' + intl('138416' /* 经营状态 */ ) + '</td><td colspan="5" class="content-tab-basicInfo" id="ManagementState"></td></tr>');
            htmlArr.push('<tr><td class="tit-tab-basicInfo">' + intl('1588' /* 办公地址 */ ) + '</td><td colspan= "5" class="td-scope content-tab-basicInfo" id="CompanyAddress"></td></tr>');
            htmlArr.push('<tr><td class="tit-tab-basicInfo">' + intl('153354' /* 主要职责 */ ) + '</td><td colspan= "5" class="td-scope content-tab-basicInfo"  id="BusinessScope"></td></tr>');
        } else if (Company.isSociology) { //社会组织
            htmlArr.push('<tr><td class="tit-tab-basicInfo" width="16%">' + intl('35779' /* 注册资本 */ ) + '</td><td width="18%" id="RegisterCapital" class="content-tab-basicInfo"></td><td class="tit-tab-basicInfo">' + intl('138772' /* 登记状态 */ ) + '</td><td id="ManagementState" class="content-tab-basicInfo"></td><td class="tit-tab-basicInfo" width="14%">' + intl('207784' /* 成立登记日期 */ ) + '</td><td width="18%" id="EstablishDate" class="content-tab-basicInfo"></td></tr>');
            htmlArr.push('<tr><td class="tit-tab-basicInfo">' + intl('5529' /* 法定代表人 */ ) + '</td><td id="LegalPerson" class="content-tab-basicInfo"></td><td class="tit-tab-basicInfo">' + intl('207787' /* 社会组织类型 */ ) + '</td><td id="CompanyType" class="content-tab-basicInfo"></td><td class="tit-tab-basicInfo">' + intl('208889' /* 登记管理机关 */ ) + '</td><td id="RegisterInstitution" class="content-tab-basicInfo"></td></tr>');
            htmlArr.push('<tr><td class="tit-tab-basicInfo">' + intl('138808' /* 统一社会信用代码 */ ) + '</td><td id="CreditCode" class="content-tab-basicInfo"></td><td class="tit-tab-basicInfo">' + intl('207788' /* 登记证号 */ ) + '</td><td id="RegisterCode" class="content-tab-basicInfo"></td><td class="tit-tab-basicInfo">' + intl('207789' /* 证书有效期 */ ) + '</td><td id="BusinessTerm" class="content-tab-basicInfo"></td></tr>');
            htmlArr.push('<tr><td class="tit-tab-basicInfo">' + intl('207785' /* 住所 */ ) + '</td><td colspan= "5" class="td-scope content-tab-basicInfo" id="CompanyAddress"></td></tr>');
            htmlArr.push('<tr><td class="tit-tab-basicInfo">' + intl('145358' /* 业务范围 */ ) + '</td><td colspan="5" class="content-tab-basicInfo" id="BusinessScope"></td></tr>');
        } else if (Company.isLawOffice) { //律所
            htmlArr.push('<tr><td class="tit-tab-basicInfo" width="16%">' + intl('35779' /* 注册资本 */ ) + '</td><td width="18%" id="RegisterCapital" class="content-tab-basicInfo"></td><td class="tit-tab-basicInfo">' + intl('138772' /* 登记状态 */ ) + '</td><td id="ManagementState" class="content-tab-basicInfo"></td><td class="tit-tab-basicInfo" width="14%">' + intl('207784' /* 成立登记日期 */ ) + '</td><td width="18%" id="EstablishDate" class="content-tab-basicInfo"></td></tr>');
            htmlArr.push('<tr><td class="tit-tab-basicInfo">' + intl('5529' /* 法定代表人 */ ) + '</td><td id="LegalPerson" class="content-tab-basicInfo"></td><td class="tit-tab-basicInfo">' + '律所类型' + '</td><td id="CompanyType" class="content-tab-basicInfo"></td><td class="tit-tab-basicInfo">' + intl('208889' /* 登记管理机关 */ ) + '</td><td id="RegisterInstitution" class="content-tab-basicInfo"></td></tr>');
            htmlArr.push('<tr><td class="tit-tab-basicInfo">' + intl('138808' /* 统一社会信用代码 */ ) + '</td><td id="CreditCode" class="content-tab-basicInfo"></td><td class="tit-tab-basicInfo">' + '执行证号' + '</td><td id="RegisterCode" class="content-tab-basicInfo"></td><td class="tit-tab-basicInfo"></td><td class="content-tab-basicInfo"></td></tr>');
            htmlArr.push('<tr><td class="tit-tab-basicInfo">' + intl('35776' /* 注册地址 */ ) + '</td><td colspan= "5" class="td-scope content-tab-basicInfo" id="CompanyAddress"></td></tr>');
            htmlArr.push('<tr><td class="tit-tab-basicInfo">' + '律所简介' + '</td><td colspan="5" class="content-tab-basicInfo" id="BusinessScope"></td></tr>');
        } else if (Company.isCause) { //事业单位
            htmlArr.push('<tr><td class="tit-tab-basicInfo" width="16%">' + intl('138808' /* 统一社会信用代码 */ ) + '</td><td width="18%" id="CreditCode" class="content-tab-basicInfo"></td><td class="tit-tab-basicInfo" width="14%">' + intl('207786' /* 开办资金 */ ) + '</td><td width="18%" id="RegisterCapital" class="content-tab-basicInfo"></td><td class="tit-tab-basicInfo" width="14%">' + intl('208890' /* 单位状态 */ ) + '</td><td id="ManagementState" class="content-tab-basicInfo"></td></tr>');
            htmlArr.push('<tr><td class="tit-tab-basicInfo">' + intl('5529' /* 法定代表人 */ ) + '</td><td id="LegalPerson" class="content-tab-basicInfo"></td><td class="tit-tab-basicInfo">' + intl('207790' /* 证书号 */ ) + '</td><td id="RegisterCode" class="content-tab-basicInfo"></td><td class="tit-tab-basicInfo">' + intl('207789' /* 证书有效期 */ ) + '</td><td id="BusinessTerm" class="content-tab-basicInfo"></td></tr>');
            htmlArr.push('<tr><td class="tit-tab-basicInfo">' + intl('208889' /* 登记管理机关 */ ) + '</td><td colspan= "5" class="td-scope content-tab-basicInfo" id="RegisterInstitution"></td></tr>');
            htmlArr.push('<tr><td class="tit-tab-basicInfo">' + intl('207785' /* 住所 */ ) + '</td><td colspan= "5" class="td-scope content-tab-basicInfo" id="CompanyAddress"></td></tr>');
            htmlArr.push('<tr><td class="tit-tab-basicInfo">' + intl('208891' /* 宗旨和业务范围 */ ) + '</td><td colspan="5" class="content-tab-basicInfo" id="BusinessScope"></td></tr>');
        } else {
            htmlArr.push('<tr><td class="tit-tab-basicInfo" width="16%">' + intl('138722' /* 国民经济行业分类  */ ) + '</td><td width="18%" id="IndustryType01" class="content-tab-basicInfo"></td><td class="tit-tab-basicInfo" width="14%">' + intl('138342' /* 万得行业分类 */ ) + '</td><td width="18%" id="IndustryType02" class="content-tab-basicInfo"></td><td class="tit-tab-basicInfo" width="14%">' + intl('138548' /* 万得主题行业分类 */ ) + '</td><td id="IndustryType03" class="content-tab-basicInfo"></td></tr>');
            htmlArr.push('<tr><td class="tit-tab-basicInfo">' + intl('138473' /* 注册资金 */ ) + '</td><td id="RegisterCapital"  class="content-tab-basicInfo"></td><td class="tit-tab-basicInfo">' + intl('138416' /* 经营状态 */ ) + '</td><td id="ManagementState" class="content-tab-basicInfo"></td><td class="tit-tab-basicInfo">' + intl('138860' /* 成立日期 */ ) + '</td><td id="EstablishDate" class="content-tab-basicInfo"></td></tr>');
            htmlArr.push('<tr><td class="tit-tab-basicInfo">' + intl('5529' /* 法定代表人 */ ) + '</td><td id="LegalPerson" class="content-tab-basicInfo"></td><td class="tit-tab-basicInfo">' + intl('138448' /* 疑似实际控制人 */ ) + '</td><td id="ControllerPerson" class="content-tab-basicInfo"></td><td class="tit-tab-basicInfo">' + intl('138157' /* 核准日期 */ ) + '</td><td id="ApprovedDate" class="content-tab-basicInfo"></td></tr>');
            htmlArr.push('<tr><td class="tit-tab-basicInfo" width="16%">' + intl('138808' /* 统一社会信用代码 */ ) + '</td><td width="18%" id="CreditCode" class="content-tab-basicInfo"></td><td class="tit-tab-basicInfo" width="14%">' + intl('100095' /* 组织机构代码 */ ) + '</td><td width="18%" id="OrganizationCode" class="content-tab-basicInfo"></td><td class="tit-tab-basicInfo" width="14%">' + intl('138476' /* 注册号 */ ) + '</td><td id="RegisterCode" class="content-tab-basicInfo"></td></tr>');
            htmlArr.push('<tr><td class="tit-tab-basicInfo">' + intl('138681' /* 公司类型 */ ) + '</td><td id="CompanyType" class="content-tab-basicInfo"></td><td class="tit-tab-basicInfo">' + intl('138185' /* 营业期限 */ ) + '</td><td id="BusinessTerm" class="content-tab-basicInfo"></td><td class="tit-tab-basicInfo">' + intl('138477' /* 登记机关 */ ) + '</td><td id="RegisterInstitution" class="content-tab-basicInfo"></td></tr>');

            htmlArr.push('<tr><td class="tit-tab-basicInfo">' + intl('114702' /* 所属省份  */ ) + '</td><td id="CompanyProvice"  class="content-tab-basicInfo"></td><td class="tit-tab-basicInfo">' + intl('138785' /* 公司简称 */ ) + '</td><td id="CompanyShortName"  class="content-tab-basicInfo"></td><td class="tit-tab-basicInfo">' + intl('138276' /* 公司英文名 */ ) + '</td><td id="CompanyEnName" class="content-tab-basicInfo"></td></tr>');

            htmlArr.push('<tr><td class="tit-tab-basicInfo">' + intl('145876' /* 实缴资本 */ ) + '</td><td id="CompanyRealSetMoney"  class="content-tab-basicInfo"></td><td class="tit-tab-basicInfo">' + intl('145877' /* 人员规模 */ ) + '</td><td id="CompanyPersonCount"  class="content-tab-basicInfo"></td><td class="tit-tab-basicInfo">' + intl('145878' /* 参保人数 */ ) + '</td><td id="CompanySecurityPerson" class="content-tab-basicInfo"></td></tr>');
            htmlArr.push('<tr><td class="tit-tab-basicInfo">' + intl('1588' /* 办公地址 */ ) + '</td><td colspan="5" class="content-tab-basicInfo" id="OfficeAddress"></td></tr>')
            htmlArr.push('<tr><td class="tit-tab-basicInfo">' + intl('35776' /* 注册地址 */ ) + '</td><td colspan="5" class="content-tab-basicInfo" id="CompanyAddress"></td></tr>');
            htmlArr.push('<tr><td class="tit-tab-basicInfo">' + intl('138847' /* 简介 */ ) + '</td><td colspan= "5" class="td-scope content-tab-basicInfo" id="CompanyBrief"></td></tr>');
            htmlArr.push('<tr><td class="tit-tab-basicInfo">' + intl('9177' /* 经营范围 */ ) + '</td><td colspan= "5" class="td-scope content-tab-basicInfo"  id="BusinessScope"></td></tr>');
        }

        htmlArr.push('</tbody></table></div></div></div>');
        var $container = $dom ? $dom : $('#workspace');
        $container.append(htmlArr.join(""));
        this.getCompanyInfo();
    },
    showSHBDGbaseInfo: function($dom, data) {
        // 法人登记信息
        var htmlArr = [];
        htmlArr.push('<div class="each-module" id="showSHBDGbaseInfo">')
        htmlArr.push('<div class="widget-model"><div class="widget-header"><span class="fl">' + '登记基本信息' + '</span></div>');
        htmlArr.push('<div class="table-container"><table class="tab-basicInfo"><tbody>');

        htmlArr.push('<tr><td class="tit-tab-basicInfo" width="20%">' + '法人名称' + '</td><td width="30%" id="SHBDG_corp_name" class="content-tab-basicInfo"></td><td class="tit-tab-basicInfo" width="20%">' + '法人类别' + '</td><td width="30%" id="SHBDG_corp_type" class="content-tab-basicInfo"></td></tr>');
        htmlArr.push('<tr><td class="tit-tab-basicInfo" width="20%">' + '统一社会信用代码' + '</td><td width="30%" id="SHBDG_uni_sc_id" class="content-tab-basicInfo"></td><td class="tit-tab-basicInfo" width="20%">' + '组织机构代码' + '</td><td width="30%" id="SHBDG_organ_code" class="content-tab-basicInfo"></td></tr>');
        htmlArr.push('<tr><td class="tit-tab-basicInfo" width="20%">' + '纳税人识别号' + '</td><td width="30%" id="SHBDG_taxpayers_code" class="content-tab-basicInfo"></td><td class="tit-tab-basicInfo" width="20%">' + '注册号/事业单位证书号' + '</td><td width="30%" id="SHBDG_reg_no" class="content-tab-basicInfo"></td></tr>');
        htmlArr.push('<tr><td class="tit-tab-basicInfo" width="20%">' + '行业类别' + '</td><td width="30%" id="SHBDG_industry_code" class="content-tab-basicInfo"></td><td class="tit-tab-basicInfo" width="20%">' + '行政区划' + '</td><td width="30%" id="SHBDG_area_code" class="content-tab-basicInfo"></td></tr>');
        htmlArr.push('<tr><td class="tit-tab-basicInfo" width="20%">' + '法定代表人' + '</td><td width="30%" id="SHBDG_person_name" class="content-tab-basicInfo"></td><td class="tit-tab-basicInfo" width="20%">' + '经营状态' + '</td><td width="30%" id="SHBDG_corp_status" class="content-tab-basicInfo"></td></tr>');
        htmlArr.push('<tr><td class="tit-tab-basicInfo" width="20%">' + '法定代表人证件类型' + '</td><td width="30%" id="SHBDG_person_cert_type" class="content-tab-basicInfo"></td><td class="tit-tab-basicInfo" width="20%">' + '法定代表人证件号' + '</td><td width="30%" id="SHBDG_person_cert_code" class="content-tab-basicInfo"></td></tr>');
        htmlArr.push('<tr><td class="tit-tab-basicInfo" width="20%">' + '成立日期' + '</td><td width="30%" id="SHBDG_establish_date" class="content-tab-basicInfo"></td><td class="tit-tab-basicInfo" width="20%">' + '注册资金' + '</td><td width="30%" id="SHBDG_reg_capital" class="content-tab-basicInfo"></td></tr>');
        htmlArr.push('<tr><td class="tit-tab-basicInfo" width="20%">' + '登记机关' + '</td><td width="30%" id="SHBDG_receiving_organ" class="content-tab-basicInfo"></td><td class="tit-tab-basicInfo" width="20%">' + '业务主管单位' + '</td><td width="30%" id="SHBDG_organizers" class="content-tab-basicInfo"></td></tr>');
        htmlArr.push('<tr><td class="tit-tab-basicInfo" width="20%">' + '固定电话' + '</td><td width="30%" id="SHBDG_person_landline_tel" class="content-tab-basicInfo"></td><td class="tit-tab-basicInfo" width="20%">' + '电子邮箱' + '</td><td width="30%" id="SHBDG_person_email" class="content-tab-basicInfo"></td></tr>');
        htmlArr.push('<tr><td class="tit-tab-basicInfo">' + '住所经营场所' + '</td><td colspan="4" class="content-tab-basicInfo" id="SHBDG_address"></td></tr>')
        htmlArr.push('<tr><td class="tit-tab-basicInfo">' + '经营范围' + '</td><td colspan="4" class="content-tab-basicInfo" id="SHBDG_business_scope"></td></tr>')

        htmlArr.push('</tbody></table></div></div></div>');
        var $container = $dom ? $dom : $('#workspace');
        $container.append(htmlArr.join(""));
        this.getSHBDGbaseInfo();
    },
    showSHBDGgjjzhInfo: function($dom, data) {
        // 公积金账户
        var htmlArr = [];
        htmlArr.push('<div class="each-module" id="showSHBDGgjjzhInfo">')
        htmlArr.push('<div class="widget-model"><div class="widget-header"><span class="fl">' + '公积金账户' + '</span></div>');
        htmlArr.push('<div class="table-container"><table class="tab-basicInfo"><tbody>');

        htmlArr.push('<tr><td class="tit-tab-basicInfo" width="20%">' + '公积金账号' + '</td><td width="30%" id="SHBDG_funds_code" class="content-tab-basicInfo"></td><td class="tit-tab-basicInfo" width="20%">' + '公积金开设时间' + '</td><td width="30%" id="SHBDG_funds_open_date" class="content-tab-basicInfo"></td></tr>');
        htmlArr.push('<tr><td class="tit-tab-basicInfo" width="20%">' + '公积金注销时间' + '</td><td width="30%" id="SHBDG_funds_repeal_date" class="content-tab-basicInfo"></td><td class="tit-tab-basicInfo" width="20%">' + '公积金发布时间' + '</td><td width="30%" id="SHBDG_funds_upd_date" class="content-tab-basicInfo"></td></tr>');


        htmlArr.push('</tbody></table></div></div></div>');
        var $container = $dom ? $dom : $('#workspace');
        $container.append(htmlArr.join(""));
    },
    showSHBDGbcgjjzhInfo: function($dom, data) {
        // 补充公积金账户
        var htmlArr = [];
        htmlArr.push('<div class="each-module" id="showSHBDGbcgjjzhInfo">')
        htmlArr.push('<div class="widget-model"><div class="widget-header"><span class="fl">' + '补充公积金账户' + '</span></div>');
        htmlArr.push('<div class="table-container"><table class="tab-basicInfo"><tbody>');

        htmlArr.push('<tr><td class="tit-tab-basicInfo" width="20%">' + '补充公积金账号' + '</td><td width="30%" id="SHBDG_fundsadd_code" class="content-tab-basicInfo"></td><td class="tit-tab-basicInfo" width="20%">' + '补充公积金开设时间' + '</td><td width="30%" id="SHBDG_fundsadd_open_date" class="content-tab-basicInfo"></td></tr>');
        htmlArr.push('<tr><td class="tit-tab-basicInfo" width="20%">' + '补充公积金注销时间' + '</td><td width="30%" id="SHBDG_fundsaddd_repeal_date" class="content-tab-basicInfo"></td><td class="tit-tab-basicInfo" width="20%">' + '补充公积金发布时间' + '</td><td width="30%" id="SHBDG_fundsaddd_upd_date" class="content-tab-basicInfo"></td></tr>');

        htmlArr.push('</tbody></table></div></div></div>');
        var $container = $dom ? $dom : $('#workspace');
        $container.append(htmlArr.join(""));
    },
    showSHBDGsbzhInfo: function($dom, data) {
        // 社保账户
        var htmlArr = [];
        htmlArr.push('<div class="each-module" id="showSHBDGsbzhInfo">')
        htmlArr.push('<div class="widget-model"><div class="widget-header"><span class="fl">' + '社保账户' + '</span></div>');
        htmlArr.push('<div class="table-container"><table class="tab-basicInfo"><tbody>');

        htmlArr.push('<tr><td class="tit-tab-basicInfo" width="20%">' + '社保账号' + '</td><td width="30%" id="SHBDG_social_securiity_code" class="content-tab-basicInfo"></td><td class="tit-tab-basicInfo" width="20%">' + '社保开设时间' + '</td><td width="30%" id="SHBDG_social_securiity_open_date" class="content-tab-basicInfo"></td></tr>');
        htmlArr.push('<tr><td class="tit-tab-basicInfo" width="20%">' + '社保注销时间' + '</td><td width="30%" id="SHBDG_social_securiity_repeal_date" class="content-tab-basicInfo"></td><td class="tit-tab-basicInfo" width="20%">' + '社保发布时间' + '</td><td width="30%" id="SHBDG_social_securiity_upd_date" class="content-tab-basicInfo"></td></tr>');


        htmlArr.push('</tbody></table></div></div></div>');
        var $container = $dom ? $dom : $('#workspace');
        $container.append(htmlArr.join(""));
    },
    showMainMemberInfo: function($dom) {
        //主要成员
        var tableSetting = {
            interface: "getprimarymembers", //getnewcompanymainmemberinfo
            moreLink: "showMainMemberInfo",
            moduleName: intl('138503' /* 主要人员 */ ),
            modelNum: "member_num",
            thWidthRadio: ["5%", "50%", "15%", "30%"],
            thName: [intl('138741' /* 序号 */ ), intl('34979' /* 姓名 */ ), "", intl('138728' /* 职务 */ )],
            align: [0, 0, 0, 0],
            fields: ["NO.", "personName", "whitespace", "personTitle"],
        };

        var $container = $dom ? $dom : $('#workspace');
        $container.empty().html(Company.drawTab(tableSetting, "tabCompanyMainMemberInfo", "tbodyCompanyMainMemberInfo", false, $dom));
        var columnDefsSet = []
        if (Company.isHongkong || Company.isTw) {
            columnDefsSet = [{
                    "targets": 1,
                    "data": 'person_name',
                    "render": function(data, type, full, meta) {
                        var corpNum = full.enter_total_num;
                        var type = 1;
                        if (full.person_id && full.person_id.length == 10) {
                            type = 2;
                            var count = full.enter_total_num;
                            var id = full.person_id;
                            var img = full.image_id_t ? full.image_id_t : "";
                            var shortname = full.corp_short_name ? full.corp_short_name.substring(0, 4) : "";
                            var pingParam = '&fromModule=' + buryItemMapping.mappingEntity["showMainMemberInfo"] + '&fromField=企业名称&opId=' + id; //bury
                            return ('<div class="invest-legal-person">' + Common.showCompanyName(type, data, id, img, shortname, null, null, null, null, pingParam) + '</div>')
                        } else {
                            var count = full.enter_total_num;
                            var id = full.person_id;
                            var img = full.image_id_t ? full.image_id_t : "";
                            return (Common.showCompanyName(type, data, id, img, "", count, "", "", true))
                        }
                    }
                },
                {
                    "targets": 3,
                    "data": 'represented_legal_person',
                    "render": function(data, type, full, meta) {
                        var type = 2;
                        var shortname = full.corp_short_name;
                        var id = full.represented_legal_person_id;
                        var img = full.represented_legal_person_entp_log ? full.represented_legal_person_entp_log : "";
                        var pingParam = '&fromModule=' + buryItemMapping.mappingEntity["showMainMemberInfo"] + '&fromField=企业名称&opId=' + id; //bury
                        return (Common.showCompanyName(type, data, id, img, shortname, null, null, null, null, pingParam))
                    }
                }
            ]
        } else {
            columnDefsSet = [{
                    "targets": 1,
                    "data": 'personName',
                    "render": function(data, type, full, meta) {
                        var corpNum = full.relateEntNum;
                        if (full.personId && data) {
                            var pingParam = '&fromModule=showMainMemberInfo&fromField=姓名&opId=' + full.personId; //bury
                            if (full.personImage) {
                                var imgSrc = '';
                                if (full.personImage.indexOf('http') > -1) {
                                    imgSrc = full.personImage;
                                } else {
                                    imgSrc = 'http://180.96.8.44/imageWeb/ImgHandler.aspx?imageID=' + full.personImage;
                                }
                                // return ('<img class="person_txt_img big-logo" id="companyLogo" height="32" width="32" src=' + imgSrc + ' onerror="src=\"../resource/images/Company/company_logo.png\"">' + '<a class="underline wi-secondary-color wi-link-color" target="_blank" data-code="' + full.personId + '" data-name="' + full.personName + '" href="Person.html?id=' + full.personId + '&name=' + data + Common.isNoToolbar() + '" data-pingParam="' + pingParam + '">' + Common.formatCont(data) + '</a>' + (corpNum ? '<span class="person_txt_count underline wi-secondary-color wi-link-color fr" data-code="' + full.personId + '" data-name="' + full.personName + '">他有' + corpNum + '家企业</span>' : ''));
                                return ('<img class="person_txt_img big-logo" id="companyLogo" height="32" width="32" src=' + imgSrc + ' onerror="src=\"../resource/images/Company/company_logo.png\"">' + '<a class="" data-code="' + full.personId + '" data-name="' + full.personName + '">' + Common.formatCont(data) + '</a>' + (corpNum ? '<span class="person_txt_count underline wi-secondary-color wi-link-color fr" data-code="' + full.personId + '" data-name="' + full.personName + '">他有' + corpNum + '家企业</span>' : ''));
                            } else {
                                // return ('<span class="person_txt_img">' + full.personName[0] + '</span><a class="underline wi-secondary-color wi-link-color" target="_blank" data-code="' + full.personId + '" data-name="' + full.personName + '" href="Person.html?id=' + full.personId + '&name=' + data + '" data-pingParam="' + pingParam + '">' + Common.formatCont(data) + '</a>' + (corpNum ? '<span class="person_txt_count underline wi-secondary-color wi-link-color fr" data-type="person_qbqy" data-code="' + full.personId + '" data-name="' + full.personName + '">他有' + corpNum + '家企业</span>' : ''));
                                return ('<span class="person_txt_img">' + full.personName[0] + '</span><a class="" data-code="' + full.personId + '" data-name="' + full.personName + '">' + Common.formatCont(data) + '</a>' + (corpNum ? '<span class="person_txt_count underline wi-secondary-color wi-link-color fr" data-type="person_qbqy" data-code="' + full.personId + '" data-name="' + full.personName + '">他有' + corpNum + '家企业</span>' : ''));
                            }
                        }
                        return data ? ('<span class="person_txt_img">' + data.toString()[0] + '</span>' + data + (corpNum && corpNum != 0 ? '<span  data-type="person_qbqy"  class="person_txt_count fr">他有' + corpNum + '家企业</span>' : '')) : '--';
                    }
                },
                {
                    "targets": 2,
                    "data": 'whitespace',
                    "render": function(data) {
                        return "";
                    }
                }
            ]
        }
        var params = { "windCode": Company.companyCode };
        Company.pageSetting("#tabCompanyMainMemberInfo", tableSetting, columnDefsSet, params, $dom);
        $(document.body).append('<style>#tabCompanyMainMemberInfo tbody td{position:relative;line-height:32px;}</style>');
        $('#tabCompanyMainMemberInfo').off('click').on('click', '.underline', Company.linkWithCodeEventHandler);
    },
    showCompanyBranchInfo: function($dom) {
        //分支机构
        var tableSetting = {
            interface: "getnewcompanybranchinfo",
            moreLink: "showCompanyBranchInfo",
            moduleName: intl('138183' /* 分支机构 */ ),
            modelNum: "new_branch_num",
            thWidthRadio: ["5%", "39%", "25%", "18%", "13%"],
            thName: [intl('138741' /* 序号 */ ), intl('138677' /* 企业名称 */ ), intl('5529' /* 法定代表人 */ ), intl('138772' /* 登记状态 */ ), intl('138478' /* 注册日期 */ )],
            align: [0, 0, 0, 0, 0],
            fields: ["NO.", "branch_name", "branch_person", "branch_state", "branch_date"],
        }
        var $container = $dom ? $dom : $('#workspace');
        $container.empty().html(Company.drawTab(tableSetting, "tabCompanyBranchInfo", "tbodyCompanyBranchInfo", false, $dom));
        var columnDefsSet = [{
                "targets": 1,
                "data": 'branch_name',
                "render": function(data, type, full, meta) {
                    if (data && full['branch_id']) {
                        var personId = full.branch_id;
                        var pingParam = '&fromModule=showCompanyBranchInfo&fromField=名称&opId=' + personId; //bury
                        if (personId.length < 16) {
                            return '<a class="underline wi-secondary-color wi-link-color" data-code="' + personId + '" data-name="' + data + '" target="_blank" href="Company.html?companycode=' + personId + '&name=' + data + Common.isNoToolbar() + '" data-pingParam="' + pingParam + '">' + Common.formatCont(data) + '</a>';
                        } else {
                            // return '<a class="underline wi-secondary-color wi-link-color" data-code="' + personId + '" data-name="' + data + '" target="_blank" href="Person.html?id=' + personId + '&name=' + data + Common.isNoToolbar() + '" data-pingParam="' + pingParam + '">' + Common.formatCont(data) + '</a>';
                            return Common.formatCont(data)
                        }
                    }
                    return Common.formatCont(data)
                }
            },
            {
                "targets": 2,
                "data": 'branch_person',
                "render": function(data, type, full, meta) {
                    var corpNum = full.enter_total_num;
                    if (full.branch_personid && data) {
                        var personId = full.branch_personid;
                        var pingParam = '&fromModule=showCompanyBranchInfo&fromField=法定代表人&opId=' + personId; //bury
                        // return ('<a class="underline wi-secondary-color wi-link-color" target="_blank" data-code="' + full.branch_personid + '" data-name="' + full.branch_person + '" href="Person.html?id=' + full.branch_personid + '&name=' + data + Common.isNoToolbar() + '" data-pingParam="' + pingParam + '">' + Common.formatCont(data) + '</a>' + (corpNum ? '<span class="person_txt_count underline wi-secondary-color wi-link-color fr" data-code="' + full.branch_personid + '" data-name="' + full.branch_person + '">他有' + corpNum + '家企业</span>' : ''));
                        return ('<a class="" target="_blank" data-code="' + full.branch_personid + '" data-name="' + full.branch_person + '" data-pingParam="' + pingParam + '">' + Common.formatCont(data) + '</a>' + (corpNum ? '<span class="person_txt_count underline wi-secondary-color wi-link-color fr" data-code="' + full.branch_personid + '" data-name="' + full.branch_person + '">他有' + corpNum + '家企业</span>' : ''));
                    }
                    return data ? (data + (corpNum ? '<span class="person_txt_count fr">他有' + corpNum + '家企业</span>' : '')) : '--';
                }
            },
            {
                "targets": 3,
                "data": 'branch_state',
                "render": function(data, type, full, meta) {
                    var otherState = '撤销,吊销,迁出,停业,注销,停业,非正常户';
                    if (data && otherState.indexOf(data) > -1) {
                        return '<span style="color:#e50113;">' + data + '</span>'
                    } else {
                        return Common.formatCont(data, full)
                    }
                }
            },
            {
                "targets": 4,
                "data": 'branch_date',
                "render": function(data, type, full, meta) {
                    return Common.formatTime(data)
                }
            }
        ]
        if ($dom) {
            var eachModuleData = Company.companyBasicData.newbranches ? Company.companyBasicData.newbranches : null;
            Company.pageSetting_new("#tabCompanyBranchInfo", tableSetting, eachModuleData, columnDefsSet, null, $dom);
        } else {
            Company.pageSetting("#tabCompanyBranchInfo", tableSetting, columnDefsSet, null, $dom);
        }
        $(document.body).append('<style>#tabCompanyBranchInfo tbody td{position:relative;}</style>');
        $('#tabCompanyBranchInfo').off('click').on('click', '.underline', Company.linkWithCodeEventHandler);
    },
    getCompanyInfo: function() {
        //显示基本信息
        var backData = Company.companyBasicData.corp;
        if (backData) {
            var credit_code = backData.credit_code ? backData.credit_code : "--"; //统一社会信用代码
            var org_code = backData.org_code ? backData.org_code : "--"; //组织机构代码
            var biz_reg_no = backData.biz_reg_no ? backData.biz_reg_no : "--"; //	注册号
            var date_established = backData.date_established ? Common.formatTime(backData.date_established) : "--"; //核准设立日期
            var date_ppproved = backData.date_ppproved ? Common.formatTime(backData.date_ppproved) : "--"; //最后核准变更日期
            var simplified_chinese = backData.simplified_chinese ? backData.simplified_chinese : "--"; //简体中文名称
            var paid_in_capital_currency = backData.paid_in_capital_currency ? backData.paid_in_capital_currency : ""; //实收资本币种
            var paid_in_capital = backData.paid_in_capital ? Common.formatMoney(backData.paid_in_capital) + paid_in_capital_currency : "--"; //实收资本
            var entity_type = backData.entity_type ? backData.entity_type : "--"; //股权状态
            var corp_type = backData.corp_type ? backData.corp_type : "--"; //公司类型
            var legal_person_name = backData.legal_person_name ? backData.legal_person_name : "--"; //法定代表人:
            var reg_date = backData.reg_date ? Common.formatTime(backData.reg_date) : "--"; //成立日期
            var reg_authority = backData.reg_authority ? backData.reg_authority : "--"; //登记机关
            var BusinessTerm01 = backData.oper_period_begin ? Common.formatTime(backData.oper_period_begin) : "--"; //营业期限:
            var BusinessTerm02 = backData.oper_period_end ? Common.formatTime(backData.oper_period_end) : "无固定期限"; //营业期限:
            var BusinessTerm = BusinessTerm01 + " 至 " + BusinessTerm02;
            var unit = backData.reg_unit ? $.trim(backData.reg_unit) : "";
            var reg_capital = backData.reg_capital ? Common.formatMoney(backData.reg_capital) + unit : "--"; //注册资金
            var real_capital = backData.real_capital ? Common.formatMoney(backData.real_capital) + unit : "--"; //实缴资本            
            var person_count = backData.employee_num ? backData.employee_num : "--"; //人员规模
            var person_security = backData.endowment_num ? backData.endowment_num : "--"; //参保人数
            var reg_address = backData.reg_address ? backData.reg_address : "--"; //公司地址
            var OfficeAddress = backData.bus_address ? backData.bus_address : "--"; //办公地址
            var brief = backData.brief ? backData.brief : "--"; //公司简介
            Company.companyDetail = brief;
            var lenMax = 500;
            if (brief.length >= lenMax) {
                brief = brief.substring(0, lenMax) + '...' + '<span class="nav-person-detail-link wi-secondary-color wi-link-color" id="navPersonDetail">' + intl('40513' /* 详情 */ ) + '</span>'
            }
            var business_scope = backData.business_scope ? backData.business_scope : "--"; //经营范围
            var ChineseAbbr = backData.chinese_abbr ? backData.chinese_abbr : "--"; //公司简称
            var eng_name = backData.eng_name ? backData.eng_name : "--"; //英文名
            var tel = backData.tel ? backData.tel : "--"; //电话
            var mailtoStr = "<a href='mailto:" + backData.email_add + "'>" + backData.email_add + "</a>";
            var email = backData.email_add ? mailtoStr : "--"; //email
            var website = backData.official_web ? Common.formatWebsite(backData.official_web) : "--"; //官网
            var industryType01 = backData.industry_gb ? backData.industry_gb : "--"; //国民经济行业分类
            var industryType02 = backData.industry_wind ? backData.industry_wind : "--"; //万得行业分类
            var industryType03 = backData.industry_name ? backData.industry_name : "--"; //万得主题行业分类
            if (backData.industry_name && backData.industry_themecode) {
                var dataWi = backData.industry_themecode ? backData.industry_themecode : "";
                var returnLink = ""
                if (is_terminal) {
                    returnLink = Common.linkOut(1402, dataWi, "IndustryID")
                }
                industryType03 = backData.industry_name
            } else {
                industryType03 = "--";
            }
            var controllerPerson = backData.act_contro_name ? backData.act_contro_name : "--"; //疑似实际控制人
            var approvedDate = backData.issue_date ? Common.formatTime(backData.issue_date) : "--"; //核准日期
            var company_provice = backData.province ? backData.province : "--"; //所属省份:
            var mortgage_register = backData.mortgage_register ? backData.mortgage_register : "--"; //抵押登记册
            var wind_up_mode = backData.wind_up_mode ? backData.wind_up_mode : "--"; //抵押登记册
            var import_matter = backData.import_matter ? backData.import_matter : "--"; //重要事项
            var date_cancelled = backData.date_cancelled ? Common.formatTime(backData.date_cancelled) : "--"; //已告解散日期/不再是独立实体日期
            var stateClass = "";
            var badStateDate = backData.date_cancelled ? Common.formatTime(backData.date_cancelled) : "--"; // 吊注销日期
            switch (backData.state) {
                case '撤销':
                case '吊销':
                case '迁出':
                case '停业':
                case '吊销,未注销':
                case '吊销,已注销':
                case '注销':
                case '非正常户':
                case '已告解散':
                case '解散':
                case '廢止':
                case '已废止':
                case '歇業':
                case '破產':
                case '破產程序終結(終止)':
                case '合併解散':
                case '撤銷':
                case '已终止':
                case '解散已清算完結':
                case '该单位已注销':
                case '核准設立，但已命令解散':
                    stateClass = 'state-error02';
                    break;
                case '成立':
                case '存续':
                case '在业':
                case '正常':
                case '其他':
                    stateClass = 'state-normal02';
                    break;
                default:
                    stateClass = 'state-normal02';
                    break;
            }
            if (backData.state) {
                $('#ManagementState').addClass(stateClass).text(backData.state); //公司名称
            } else {
                $('#ManagementState').text("--");
            }
            if (stateClass === 'state-error02') {
                $('#ManagementState').append("<span style='color:#333 !important;'>" + "(" + badStateDate + ")" + "</span>");
            }

            if (backData.legal_person_name && backData.legal_person_id) {
                var pingParam = '&fromModule=showCompanyInfo&fromField=法定代表人&opId=' + backData.legal_person_id; //bury
                if (backData.legal_person_id.length < 16) {
                    legal_person_name = '<a class="underline wi-secondary-color wi-link-color" target="_blank" href="Company.html?companycode=' + backData.legal_person_id + '&name=' + backData.legal_person_name + Common.isNoToolbar() + '" data-pingParam="' + pingParam + '">' + backData.legal_person_name + '</a>';
                } else {
                    // legal_person_name = '<a class="underline wi-secondary-color wi-link-color" target="_blank" href="Person.html?id=' + backData.legal_person_id + '&name=' + backData.legal_person_name + Common.isNoToolbar() + '" data-pingParam="' + pingParam + '">' + backData.legal_person_name + '</a>';
                    legal_person_name = '<a class="underline wi-secondary-color wi-link-color" >' + backData.legal_person_name + '</a>';
                }
                $("#LegalPerson").append(legal_person_name);
            } else {
                $("#LegalPerson").text(legal_person_name);
            }

            var ctrlIcon = '<a class="realActControl" title="疑似实际控制人" href="#chart_yskzr" ></a>';
            if (backData.act_contro_name && backData.act_contro_id) {
                var act_name_arr = backData.act_contro_name.split(',');
                var act_id_arr = backData.act_contro_id.split(',');
                // TODO 处理多个控制人情况
                if (act_id_arr.length == act_name_arr.length && act_name_arr.length > 1) {
                    controllerPerson = '';
                    for (var _i = 0; _i < act_id_arr.length; _i++) {
                        if (act_id_arr[_i].length < 16) {
                            if (controllerPerson) {
                                controllerPerson += '<a class="underline wi-secondary-color wi-link-color" target="_blank" href="Company.html?companycode=' + act_id_arr[_i] + '&name=' + act_name_arr[_i] + Common.isNoToolbar() + '">' + ',' + act_name_arr[_i] + '</a>';
                            } else {
                                controllerPerson = '<a class="underline wi-secondary-color wi-link-color" target="_blank" href="Company.html?companycode=' + act_id_arr[_i] + '&name=' + act_name_arr[_i] + Common.isNoToolbar() + '">' + act_name_arr[_i] + '</a>';
                            }
                        } else {
                            // if (controllerPerson) {
                            //     controllerPerson += '<a class="underline wi-secondary-color wi-link-color" target="_blank" href="Person.html?id=' + act_id_arr[_i] + '&name=' + act_name_arr[_i] + Common.isNoToolbar() + '">' + ',' + act_name_arr[_i] + '</a>';
                            // } else {
                            //     controllerPerson += '<a class="underline wi-secondary-color wi-link-color" target="_blank" href="Person.html?id=' + act_id_arr[_i] + '&name=' + act_name_arr[_i] + Common.isNoToolbar() + '">' + act_name_arr[_i] + '</a>';
                            // }
                            if (controllerPerson) {
                                controllerPerson += '<a class="underline wi-secondary-color wi-link-color" >' + ',' + act_name_arr[_i] + '</a>';
                            } else {
                                controllerPerson += '<a class="underline wi-secondary-color wi-link-color" >' + act_name_arr[_i] + '</a>';
                            }
                        }
                    }
                    $("#ControllerPerson").append(controllerPerson + ctrlIcon);
                } else {
                    if (backData.act_contro_id.length < 16) {
                        controllerPerson = '<a class="underline wi-secondary-color wi-link-color" target="_blank" href="Company.html?companycode=' + backData.act_contro_id + '&name=' + backData.act_contro_name + Common.isNoToolbar() + '">' + backData.act_contro_name + ctrlIcon + '</a>';
                    } else {
                        // controllerPerson = '<a class="underline wi-secondary-color wi-link-color" target="_blank" href="Person.html?id=' + backData.act_contro_id + '&name=' + backData.act_contro_name + Common.isNoToolbar() + '">' + backData.act_contro_name + ctrlIcon + '</a>';
                        controllerPerson = '<a class="underline wi-secondary-color wi-link-color" >' + backData.act_contro_name + ctrlIcon + '</a>';
                    }
                    $("#ControllerPerson").append(controllerPerson);
                }
            } else if (backData.act_contro_name) {
                $("#ControllerPerson").append(controllerPerson + ctrlIcon);
            } else {
                $("#ControllerPerson").append(controllerPerson);
            }

            $("#backData").text(backData);
            $("#CreditCode").text(credit_code);
            $("#OrganizationCode").text(org_code);
            $("#RegisterCode").text(biz_reg_no);
            $("#CompanyType").text(corp_type);
            // $("#LegalPerson").text(legal_person_name);
            $("#EstablishDate").text(reg_date);
            $("#RegisterInstitution").text(reg_authority);
            $("#BusinessTerm").text(BusinessTerm);
            $("#RegisterCapital").text(reg_capital);
            $("#CompanyRealSetMoney").text(paid_in_capital);
            $("#CompanyPersonCount").text(person_count);
            $("#CompanySecurityPerson").text(person_security);
            $("#CompanyAddress").text(reg_address);
            $("#OfficeAddress").text(OfficeAddress);
            $("#CompanyBrief").html(brief);
            $("#BusinessScope").text(business_scope);
            $("#CompanyEnName").text(eng_name);
            $("#CompanyShortName").text(ChineseAbbr);
            $("#Tel").text(tel);
            $("#Email").html(email);
            $("#Website").html(website);
            $("#IndustryType01").text(industryType01);
            $("#IndustryType02").text(industryType02);
            $("#IndustryType03").html(industryType03);
            // $("#ControllerPerson").text(controllerPerson);
            $("#ApprovedDate").text(approvedDate);
            $("#mortgageRegister").text(mortgage_register);
            $("#dateCancelled").text(date_cancelled);
            $("#windUpMode").text(wind_up_mode);
            $("#importantMatter").text(import_matter);
            $("#CompanyProvice").text(company_provice);

            $("#date_established").text(date_established);
            $("#date_ppproved").text(date_ppproved);
            $("#simplified_chinese").text(simplified_chinese);
            $("#paid_in_capital").text(paid_in_capital);
            $("#entity_type").text(entity_type);


            // var personId = backData.legal_person_id ? backData.legal_person_id : '';
            // var controlId = backData.act_contro_id ? backData.act_contro_id : '';
            // var personStr = '';
            // var controlStr = '';
            // if (personId) {
            //     personStr = '<a class="underline wi-secondary-color fr" target="_blank" href="Person.html?id=' + personId + '&name=' + legal_person_name + '">他有N家企业</a>';
            // }
            // if (controlId) {
            //     controlStr = '<a class="underline wi-secondary-color fr" target="_blank" href="Person.html?id=' + controlId + '&name=' + controllerPerson + '">他有N家企业</a>';
            // }
            // $("#LegalPerson").append(personStr);
            // $("#ControllerPerson").append(controlStr);

            // if (!global_isRelease) {
            //     // TODO 暂不放开个人相关
            //     $('#person_glqy').attr('person-name', legal_person_name);
            // }
        }
    },
    getSHBDGbaseInfo: function() {
        // TODO 输入参数待传入
        shbdgAjax('base', {}, function(res) {
            if (res && res.code && res.code == 200) {
                Company.SHBDG_CORP_ID = res.data.corp_info_id;
                Company.getSHBDGgjjzhInfo();
                Company.getSHBDGbcgjjzhInfo();
                Company.getSHBDGsbzhInfo();
                var eles = $('#showSHBDGbaseInfo').find('.content-tab-basicInfo');
                eles.map(function(idx, ele) {
                    var id = $(ele).attr('id');
                    var key = id.split('SHBDG_')[1];
                    $(ele).text(res.data[key] ? res.data[key] : '--');
                });
            }
        }, function() {

        })
    },
    getSHBDGgjjzhInfo: function() {
        // TODO 输入参数待传入
        shbdgAjax('gjjzh', {}, function(res) {
            if (res && res.code && res.code == 200) {
                var eles = $('#showSHBDGgjjzhInfo').find('.content-tab-basicInfo');
                eles.map(function(idx, ele) {
                    var id = $(ele).attr('id');
                    var key = id.split('SHBDG_')[1];
                    $(ele).text(res.data[key] ? res.data[key] : '--');
                });
            }
        }, function() {

        })
    },
    getSHBDGbcgjjzhInfo: function() {
        // TODO 输入参数待传入
        shbdgAjax('bcgjjzh', {}, function(res) {
            if (res && res.code && res.code == 200) {
                var eles = $('#showSHBDGbcgjjzhInfo').find('.content-tab-basicInfo');
                eles.map(function(idx, ele) {
                    var id = $(ele).attr('id');
                    var key = id.split('SHBDG_')[1];
                    $(ele).text(res.data[key] ? res.data[key] : '--');
                });
            }
        }, function() {

        })
    },
    getSHBDGsbzhInfo: function() {
        // TODO 输入参数待传入
        shbdgAjax('sbzh', {}, function(res) {
            if (res && res.code && res.code == 200) {
                var eles = $('#showSHBDGsbzhInfo').find('.content-tab-basicInfo');
                eles.map(function(idx, ele) {
                    var id = $(ele).attr('id');
                    var key = id.split('SHBDG_')[1];
                    $(ele).text(res.data[key] ? res.data[key] : '--');
                });
            }
        }, function() {

        })
    },
    showFinacalNumRed: function(val) {
        //财务数据，如果小于0就变红，如果没有数据就用“--”显示
        var num = parseFloat(val);
        if (num) {
            content = num < 0 ? "<span style='color:red;'>" + num.toFixed(2) + "</span>" : num.toFixed(2);
            return content;
        } else {
            return "--";
        }
    },
    resetMonitorData: function(data, dateArr) {
        var monitorObj = {};
        for (var i = 0; i < dateArr.length; i++) {
            monitorObj[dateArr[i]] = { "positive": [], "negative": [] };
        }
        var len = data.length;
        for (var i = 0; i < len; i++) {
            var eachdate = $.trim(data[i].date.split("T")[0]);
            if (monitorObj[eachdate]) {
                if ($.trim(data[i]["ArticleType"]) == 0) {
                    monitorObj[eachdate]["positive"].push(data[i]);
                } else {
                    monitorObj[eachdate]["negative"].push(data[i]);
                }
            }
        }
        return monitorObj;
    },
    formatAdviceSouce: function(value) {
        if (!value || value.toLowerCase() == 'null') {
            return "--"
        } else {
            return value
        }
    },
    formatAdviceTime: function(value) {
        if (!value || value.toLowerCase() == 'null') {
            return "--"
        } else {
            var time = value.replace(/[TZ]/g, " ");
            var timeArr = time.split(':');
            if (timeArr.length == 3) {
                time = timeArr[0] + ':' + timeArr[1];
            }
            return time;
        }
    },
    newsHomeList: function() {
        //首页新闻舆情
        var param = { "companycode": Company.companyCode, "pageNo": 0, "pageSize": 3 };
        myWfcAjax("advicelisttag", param, function(data) {
            var resData = JSON.parse(data);
            if (resData.ErrorCode == 0 && resData.Data && resData.Data.length > 0) {
                $(".news-scroll").show();
                var htmlArr = [];
                htmlArr.push("<ul>")
                var len = resData.Data.length >= 3 ? 3 : resData.Data.length;

                for (var i = 0; i < len; i++) {
                    var eachRes = resData.Data[i];
                    var eachResList = eachRes.AdviceList;
                    var eachResTag = eachRes.NewsTag;
                    var target_news = '';
                    var tar_class = '';
                    var tar_html = '';
                    var fumian = '';
                    var njTestTag = '';
                    var njTagCode = { '2050200044': '相关提及', '2050200068': '财务风险', '2050200069': '债务风险', '2050200070': '非标意见', '2050200071': '偷税漏税', '2050200072': '延期披露', '2050200073': '财报披露', '2050200074': '业绩预警', '2050200075': '业绩增长', '2050200076': '费用成本', '2050200077': '财务造假', '2050200078': '资产冻结', '2050200079': '资产出售', '2050200080': '资产拍卖', '2050200081': '资产减持', '2050200082': '市值缩水', '2050200083': '商誉减值', '2050200084': '计提资产减值', '2050200085': '信息变更', '2050200086': '澄清辟谣', '2050200087': '环境保护', '2050200088': '合作经营', '2050200089': '垄断信息', '2050200090': '成果奖项', '2050200091': '关联交易', '2050200092': '停业破产', '2050200093': '经营异常', '2050200094': '安全事件', '2050200095': '不正当竞争', '2050200096': '客户投诉', '2050200097': '财务违规', '2050200098': '股票违规', '2050200099': '行贿受贿', '2050200100': '员工违规', '2050200101': '诉讼纠纷', '2050200102': '行政处罚', '2050200103': '环保处罚', '2050200104': '列入失信名单', '2050200105': '信息泄露', '2050200106': '造假欺诈', '2050200108': '私募失联', '2050200109': '项目违约', '2050200110': '担保违约', '2050200111': '评级上调', '2050200112': '评级下调', '2050200113': '高管负面', '2050200114': '高管变更', '2050200115': '裁员', '2050200116': '劳务风险', '2050200117': '内部管理混乱', '2050200118': '产能过剩', '2050200119': '生产停产', '2050200120': '投资融资', '2050200121': '收购重组', '2050200122': '资产解禁', '2050200123': '摘帽', '2050200124': '增持', '2050200126': '债券价格波动', '2050200128': '股价上涨', '2050200129': '股价下跌', '2050200130': '股权变更', '2050200131': '股东变更', '2050200132': '项目控制权变更', '2050200133': '融资失败', '2050200134': '上市失败', '2050200135': '项目预警', '2050200136': '并购重组失败', '2050200137': '停牌', '2050200138': '债券兑付风险', '2050200139': '投资踩雷', '2050200141': '监管问询', '2050200142': '退市风险', '2050200145': '质量风险', '2050200146': '食品安全', '2050200147': '侵权抄袭', '2050200148': '专利逾期', '2050200149': '产品信息', '2050200150': '新品升级', '2050200151': '产品价格变动', '2050200152': '拖欠行为', '2050200153': '借款信息', '2050200154': '商标到期', '2050200155': '立案调查', '2050200156': '合同纠纷', '2050200157': '技术违约' };

                    if (eachResList == undefined) {
                        $(".news-scroll").hide();
                        if (resData.Data.length == 1) {
                            $("#newsModelBottom").hide();
                            $('#newsModelList').empty().html('<div class="news-nodata">暂无数据</div>');
                        } else {
                            continue;
                        }
                    }
                    if (eachResTag != null && eachResTag.length == undefined) {
                        target_news = eachResTag.category;
                        if ((!target_news) || (target_news == 'null')) {
                            tar_class = 'tar_class_mid wi-secondary-bg';
                            tar_html += '<span class="' + tar_class + '">' + '相关提及' + '</span>';
                        } else {
                            for (var nl = 0; nl < target_news.length; nl++) {
                                switch (target_news[nl]) {
                                    case '财务风险':
                                    case '质量风险':
                                    case '退市风险':
                                    case '信用风险':
                                    case '债务风险':
                                    case '收购风险':
                                    case '侵权抄袭':
                                    case '垄断风险':
                                    case '环保处罚':
                                    case '劳务纠纷':
                                    case '合同纠纷':
                                    case '造假欺诈':
                                    case '高管变动':
                                    case '高管负面':
                                    case '安全事件':
                                    case '停业破产':
                                    case '偷税漏税':
                                    case '涉诉违规':
                                        tar_class = 'tar_class_bad wi-primary-bg';
                                        break;
                                    default:
                                        tar_class = 'tar_class_mid wi-secondary-bg';
                                        break;
                                }
                                tar_html += '<span class="' + tar_class + '">' + target_news[nl] + '</span>';
                            }
                        }

                        if (eachResList.ArticleType == '1') {
                            fumian = '<span class="tar_bad_home wi-primary-bg">负</span>'
                        } else {
                            fumian = ''
                        }
                    } else {
                        tar_class = 'tar_class_mid wi-secondary-bg';
                        tar_html += '<span class="' + tar_class + '">' + '相关提及' + '</span>';
                    }
                    var newsUrl = "";
                    for (var njt = 0; njt < eachResList.NJAssociateExtractCodes.length; njt++) {
                        njTestTag += '<span class="tar_bad_tag wi-secondary-bg">' + njTagCode[eachResList.NJAssociateExtractCodes[njt]] + '</span>';
                    }
                    if (is_terminal) {
                        newsUrl = '/SmartReaderWeb/SmartReader/?type=4&id=' + eachResList.MediaID;
                    } else {
                        newsUrl = eachResList.Url
                    }
                    var newsBuryType = eachResList.ArticleType ? eachResList.ArticleType : '0';
                    eachResList.NJAssociateExtractCodes.push(newsBuryType);
                    var buryStrategy = eachResList.NJAssociateExtractCodes ? eachResList.NJAssociateExtractCodes.join(',') : '';
                    var burynewsId = 'mediaId:' + eachResList.MediaID + '&groupId:' + eachResList.id;
                    htmlArr.push('<li>' + njTestTag + fumian + '<a target="_blank" class="wi-link-color buryClick" data-id="' + eachResList.MediaID + '" data-buryStrategy="' + buryStrategy + '" data-buryOpType="click" data-buryfuncType="detailView" data-buryEntity="news" data-buryId="' + burynewsId + '" data-title="' + eachResList.Title + '" data-title="' + eachResList.Title + '">' + eachResList.Title + '</a><span class="tips-news">' + Company.formatAdviceTime(eachResList.date) + '</span></li>');
                }
                htmlArr.push("</ul>");
                //$('#newsModelNum').text(Company.basicNum.advice_num);
                $('#newsModelList').empty().html(htmlArr.join(""));
                var minNewLen = 3; //最少滚动新闻总条数
                // if ($("#newsModelList li").length > minNewLen) {
                //     $("#newsModelList").Scroll({ line: minNewLen, speed: 500, timer: 4000, up: "but_up", down: "but_down" });
                // }
            } else {
                $(".news-scroll").hide();
                $("#newsModelBottom").hide();
                $('#newsModelList').empty().html('<div class="news-nodata">暂无数据</div>');
            }
        }, function(data) {
            $(".news-scroll").hide();
            $('#newsModelList').empty().html('<div class="news-nodata">暂无数据</div>');
        });
    },
    newsList: function() {
        //舆情监控
        $(".risk-overview").hide();
        var param = { "companycode": Company.companyCode, "pageNo": 0, "pageSize": 60 };
        $('#workspace').empty().html('<table class="news-list" id="tabNewsList"><thead><tr><th></th></tr></thead><tbody id="newsBody"><tr><td class="tab-loading"  id="load_data"></td></tr></tbody></table>');
        $('#tabNewsList').parent().prepend('<div class="widget-header"><span class="fl">' + intl('27210', '公司新闻') + '</span><span class="fl modle-num"></span></div>');
        var tableSetting = {
            interface: "advicelisttag",
            moduleName: intl('27116', '舆情监控'),
            modelNum: "advice_num",
            thWidthRadio: ["100%"],
            align: [1],
            fields: ["Title"]
        }

        var columnDefsSet = [{
            "targets": 0,
            "data": null,
            "render": function(data, type, full, meta) {
                if (full.AdviceList != undefined && full.AdviceList.length == undefined) {
                    var highlight_about = '';
                    var tar_class = '';
                    var tar_html = '';
                    var target_news = '';
                    var pat = '';
                    var fumian = ''
                    if (full.NewsTag != null && full.NewsTag.length == undefined) {
                        target_news = full.NewsTag.category;

                        if ((!target_news) || (target_news == 'null')) {
                            tar_class = 'tar_mid_detail wi-secondary-bg';
                            tar_html += '<span class="' + tar_class + '">' + '相关提及' + '</span>';
                        } else {
                            for (var nl = 0; nl < target_news.length; nl++) {
                                switch (target_news[nl]) {
                                    case '财务风险':
                                    case '质量风险':
                                    case '退市风险':
                                    case '信用风险':
                                    case '债务风险':
                                    case '收购风险':
                                    case '侵权抄袭':
                                    case '垄断风险':
                                    case '环保处罚':
                                    case '劳务纠纷':
                                    case '合同纠纷':
                                    case '造假欺诈':
                                    case '高管变动':
                                    case '高管负面':
                                    case '安全事件':
                                    case '停业破产':
                                    case '偷税漏税':
                                    case '涉诉违规':
                                        tar_class = 'tar_bad_detail wi-primary-bg';
                                        break;
                                    default:
                                        tar_class = 'tar_mid_detail wi-secondary-bg';
                                        break;
                                }
                                tar_html += '<span class="' + tar_class + '">' + target_news[nl] + '</span>';
                            }
                            // TODO 兼容处理 '/'、'('、')' 三个符号的转义 避免单一形式出现后面无法正则匹配
                            full.NewsTag.highlight = full.NewsTag.highlight.replaceAll('/', '').replaceAll(/\(/, '（').replaceAll(/\)/, '）').replaceAll(/\*/, '');
                            pat = new RegExp(full.NewsTag.highlight, "g");

                            if (full.NewsTag.sentences) {

                                for (var nl2 = 0; nl2 < full.NewsTag.sentences.length; nl2++) {

                                    // // 去除其他标点符号
                                    var reg_point = /\,$|\!$|\;$|\:$|\?$|\，$|\！$|\；$|\：$/gi;
                                    full.NewsTag.sentences[nl2] = $.trim(full.NewsTag.sentences[nl2]).replace(reg_point, '');

                                    highlight_about += '<span>' + full.NewsTag.sentences[nl2].replace(pat, "<em class='color-red wi-secondary-color'>" + full.NewsTag.highlight + "</em>") + '</span><br/>';
                                }
                            }
                            highlight_about = '<div class="div_3_hidden">' + highlight_about + '</div>';
                        }


                        if (full.AdviceList.ArticleType == '1') {
                            fumian = '<span class="tar_bad_tag wi-primary-bg">负</span>'
                        } else {
                            fumian = ''
                        }

                    } else {
                        tar_class = 'tar_mid_detail wi-secondary-bg';
                        tar_html += '<span class="' + tar_class + '">' + '相关提及' + '</span>';
                    }
                    // var p_html = '<div class="each-newslist" news-id="' + full.AdviceList.MediaID + '"><h3>' + tar_html + '<a href="!CommandParam[1903,ID=' + full.AdviceList.MediaID + ']">' + full.AdviceList.Title + '</a></h3><div class="news-summary"><span class="newslist-time">' + Company.formatAdviceTime(full.AdviceList.date) + '</span><span class="newslist-time">' + Company.formatAdviceSouce(full.AdviceList.SiteName) + '</span>' + highlight_about + '</div></div>';
                    var newsUrl = "";
                    if (is_terminal) {
                        newsUrl = '/SmartReaderWeb/SmartReader/?type=4&id=' + full.AdviceList.MediaID;
                    } else {
                        newsUrl = full.AdviceList.Url
                    }
                    //bury
                    var newsBuryType = full.AdviceList.ArticleType ? full.AdviceList.ArticleType : '0';
                    var buryStrategy = (full.NewsTag != null && full.NewsTag.category) ? full.NewsTag.category.join(',') : '';
                    var burynewsId = 'mediaId:' + full.AdviceList.MediaID + '&groupId:' + full.AdviceList.id;
                    var p_html = '<div class="each-newslist" news-id="' + full.AdviceList.MediaID + '"><h3>' + fumian + '<a target="_blank" class="buryClick" data-buryStrategy="' + buryStrategy + '" data-buryOpType="click" data-buryfuncType="detailView" data-buryEntity="news" data-buryId="' + burynewsId + '"  href=' + newsUrl + '>' + full.AdviceList.Title + '</a></h3><div>' + tar_html + '</div><div class="news-summary"><span class="newslist-time">' + Company.formatAdviceTime(full.AdviceList.date) + '</span><span class="newslist-time">' + Company.formatAdviceSouce(full.AdviceList.SiteName) + '</span>' + highlight_about + '</div></div>';

                    (function(id) {
                        setTimeout(function() {
                            var span_ele = $('[news-id=' + id + ']').find('.div_3_hidden').find('span');
                            var span_height = 0;
                            for (var spanLen = 0; spanLen < span_ele.length; spanLen++) {
                                span_height += span_ele[spanLen].offsetHeight;
                            }
                            if (span_height > 90) {
                                span_ele.parent().parent().append('<div class="news-sentence-more"><span class="read_more">更多</span></div>');
                            }
                        }, 10)
                    })(full.AdviceList.MediaID)
                    return p_html;
                }
                //                      return '<div class="each-newslist"><h3><a target="_blank" href="' + full.Url + '">' + full.Title + '</a></h3><div class="news-summary"><span class="newslist-time">' + Company.formatAdviceTime(full.date) + '</span><span class="newslist-time">' + Company.formatAdviceSouce(full.SiteName) + '</span></div></div>'
            }
        }, ]
        Company.pageSetting("#tabNewsList", tableSetting, columnDefsSet);
    },
    njNewsListTest: function() {
        //舆情监控
        $(".risk-overview").hide();
        var param = { "companycode": Company.companyCode, "pageNo": 0, "pageSize": 60 };
        $('#workspace').empty().html('<table class="news-list" id="tabNewsList"><thead><tr><th></th></tr></thead><tbody id="newsBody"><tr><td class="tab-loading"  id="load_data"></td></tr></tbody></table>');
        $('#tabNewsList').parent().prepend('<div class="widget-header"><span class="fl">' + intl('27210', '公司新闻') + '</span><span class="fl modle-num"></span></div>');
        if (!Company.isNoToolbar) {
            $('#workspace').css('margin-top', '60px');
        }
        var tableSetting = {
            interface: "advicelisttag",
            moduleName: intl('27116', '舆情监控'),
            modelNum: "advice_num",
            thWidthRadio: ["100%"],
            align: [1],
            fields: ["Title"]
        }

        var columnDefsSet = [{
            "targets": 0,
            "data": null,
            "render": function(data, type, full, meta) {
                if (full.AdviceList != undefined && full.AdviceList.length == undefined) {
                    var highlight_about = '';
                    var tar_class = '';
                    var tar_html = '';
                    var target_news = '';
                    var pat = '';
                    var fumian = ''
                    if (full.NewsTag != null && full.NewsTag.length == undefined) {
                        target_news = full.NewsTag.category;

                        if ((!target_news) || (target_news == 'null')) {
                            tar_class = 'tar_mid_detail wi-secondary-bg';
                            tar_html += '<span class="' + tar_class + '">' + '相关提及' + '</span>';
                        } else {
                            for (var nl = 0; nl < target_news.length; nl++) {
                                switch (target_news[nl]) {
                                    case '财务风险':
                                    case '质量风险':
                                    case '退市风险':
                                    case '信用风险':
                                    case '债务风险':
                                    case '收购风险':
                                    case '侵权抄袭':
                                    case '垄断风险':
                                    case '环保处罚':
                                    case '劳务纠纷':
                                    case '合同纠纷':
                                    case '造假欺诈':
                                    case '高管变动':
                                    case '高管负面':
                                    case '安全事件':
                                    case '停业破产':
                                    case '偷税漏税':
                                    case '涉诉违规':
                                        tar_class = 'tar_bad_detail wi-primary-bg';
                                        break;
                                    default:
                                        tar_class = 'tar_mid_detail wi-secondary-bg';
                                        break;
                                }
                                tar_html += '<span class="' + tar_class + '">' + target_news[nl] + '</span>';
                            }
                            // TODO 兼容处理 '/'、'('、')' 三个符号的转义 避免单一形式出现后面无法正则匹配
                            full.NewsTag.highlight = full.NewsTag.highlight.replaceAll('/', '').replaceAll(/\(/, '（').replaceAll(/\)/, '）').replaceAll(/\*/, '');
                            pat = new RegExp(full.NewsTag.highlight, "g");

                            if (full.NewsTag.sentences) {

                                for (var nl2 = 0; nl2 < full.NewsTag.sentences.length; nl2++) {

                                    // // 去除其他标点符号
                                    var reg_point = /\,$|\!$|\;$|\:$|\?$|\，$|\！$|\；$|\：$/gi;
                                    full.NewsTag.sentences[nl2] = $.trim(full.NewsTag.sentences[nl2]).replace(reg_point, '');

                                    highlight_about += '<span>' + full.NewsTag.sentences[nl2].replace(pat, "<em class='color-red wi-secondary-color'>" + full.NewsTag.highlight + "</em>") + '</span><br/>';
                                }
                            }
                            highlight_about = '<div class="div_3_hidden">' + highlight_about + '</div>';
                        }

                    } else {
                        tar_class = 'tar_mid_detail wi-secondary-bg';
                        tar_html += '<span class="' + tar_class + '">' + '相关提及' + '</span>';
                    }
                    if (full.AdviceList.ArticleType == '1') {
                        fumian = '<span class="tar_bad_tag wi-primary-bg">负</span>'
                    } else {
                        fumian = ''
                    }
                    var njTestTag = '';
                    var njTagCode = { '2050200044': '相关提及', '2050200068': '财务风险', '2050200069': '债务风险', '2050200070': '非标意见', '2050200071': '偷税漏税', '2050200072': '延期披露', '2050200073': '财报披露', '2050200074': '业绩预警', '2050200075': '业绩增长', '2050200076': '费用成本', '2050200077': '财务造假', '2050200078': '资产冻结', '2050200079': '资产出售', '2050200080': '资产拍卖', '2050200081': '资产减持', '2050200082': '市值缩水', '2050200083': '商誉减值', '2050200084': '计提资产减值', '2050200085': '信息变更', '2050200086': '澄清辟谣', '2050200087': '环境保护', '2050200088': '合作经营', '2050200089': '垄断信息', '2050200090': '成果奖项', '2050200091': '关联交易', '2050200092': '停业破产', '2050200093': '经营异常', '2050200094': '安全事件', '2050200095': '不正当竞争', '2050200096': '客户投诉', '2050200097': '财务违规', '2050200098': '股票违规', '2050200099': '行贿受贿', '2050200100': '员工违规', '2050200101': '诉讼纠纷', '2050200102': '行政处罚', '2050200103': '环保处罚', '2050200104': '列入失信名单', '2050200105': '信息泄露', '2050200106': '造假欺诈', '2050200108': '私募失联', '2050200109': '项目违约', '2050200110': '担保违约', '2050200111': '评级上调', '2050200112': '评级下调', '2050200113': '高管负面', '2050200114': '高管变更', '2050200115': '裁员', '2050200116': '劳务风险', '2050200117': '内部管理混乱', '2050200118': '产能过剩', '2050200119': '生产停产', '2050200120': '投资融资', '2050200121': '收购重组', '2050200122': '资产解禁', '2050200123': '摘帽', '2050200124': '增持', '2050200126': '债券价格波动', '2050200128': '股价上涨', '2050200129': '股价下跌', '2050200130': '股权变更', '2050200131': '股东变更', '2050200132': '项目控制权变更', '2050200133': '融资失败', '2050200134': '上市失败', '2050200135': '项目预警', '2050200136': '并购重组失败', '2050200137': '停牌', '2050200138': '债券兑付风险', '2050200139': '投资踩雷', '2050200141': '监管问询', '2050200142': '退市风险', '2050200145': '质量风险', '2050200146': '食品安全', '2050200147': '侵权抄袭', '2050200148': '专利逾期', '2050200149': '产品信息', '2050200150': '新品升级', '2050200151': '产品价格变动', '2050200152': '拖欠行为', '2050200153': '借款信息', '2050200154': '商标到期', '2050200155': '立案调查', '2050200156': '合同纠纷', '2050200157': '技术违约' };
                    for (var njt = 0; njt < full.AdviceList.NJAssociateExtractCodes.length; njt++) {
                        njTestTag += '<span class="tar_bad_tag wi-secondary-bg">' + njTagCode[full.AdviceList.NJAssociateExtractCodes[njt]] + '</span>';
                    }
                    var newsUrl = "";
                    if (is_terminal) {
                        newsUrl = '/SmartReaderWeb/SmartReader/?type=4&id=' + full.AdviceList.MediaID;
                    } else {
                        newsUrl = full.AdviceList.Url
                    }
                    //bury
                    var newsBuryType = full.AdviceList.ArticleType ? full.AdviceList.ArticleType : '0';
                    full.AdviceList.NJAssociateExtractCodes.push(newsBuryType);
                    var buryStrategy = full.AdviceList.NJAssociateExtractCodes ? full.AdviceList.NJAssociateExtractCodes.join(',') : '';
                    var burynewsId = 'mediaId:' + full.AdviceList.MediaID + '&groupId:' + full.AdviceList.id;
                    var p_html = '<div class="each-newslist" news-id="' + full.AdviceList.MediaID + '"><h3>' + fumian + '<a target="_blank" class="buryClick" data-buryOpType="click" data-buryStrategy="' + buryStrategy + '" data-buryfuncType="detailView" data-buryEntity="news" data-buryId="' + burynewsId + '" href=' + newsUrl + '>' + full.AdviceList.Title + '</a></h3><div>' + njTestTag + '</div><div class="news-summary"><span class="newslist-time">' + Company.formatAdviceTime(full.AdviceList.date) + '</span><span class="newslist-time">' + Company.formatAdviceSouce(full.AdviceList.SiteName) + '</span>' + '</div></div>';
                    (function(id) {
                        setTimeout(function() {
                            var span_ele = $('[news-id=' + id + ']').find('.div_3_hidden').find('span');
                            var span_height = 0;
                            for (var spanLen = 0; spanLen < span_ele.length; spanLen++) {
                                span_height += span_ele[spanLen].offsetHeight;
                            }
                            if (span_height > 90) {
                                span_ele.parent().parent().append('<div class="news-sentence-more"><span class="read_more">更多</span></div>');
                            }
                        }, 10)
                    })(full.AdviceList.MediaID)
                    return p_html;
                }
                //                      return '<div class="each-newslist"><h3><a target="_blank" href="' + full.Url + '">' + full.Title + '</a></h3><div class="news-summary"><span class="newslist-time">' + Company.formatAdviceTime(full.date) + '</span><span class="newslist-time">' + Company.formatAdviceSouce(full.SiteName) + '</span></div></div>'
            }
        }, ]
        Company.pageSetting("#tabNewsList", tableSetting, columnDefsSet);
    },
    //竞争对手测试
    getnetcomparable: function(page_num) {
        //竞争对手 原老版本可比企业
        var param = { "companycode": Company.companyCode, "pageNo": 0, "pageSize": 60 };
        $('#mainNav').remove();
        $('#workspace').parent().parent().css("width", "1190px");
        $('#workspace').empty().html('<div id="category_name" style="float:left;width:800px;min-height:1010px;border-right: 1px solid #e6e6e6;"></div><div id="occupancy" style="float:right;width:350px;height:450px;/*background-color: yellow;*/margin-bottom:10px;border-bottom: 1px solid #e6e6e6;"></div><div id="new_lest" style="float:right;width:350px;height:550px;"></div>');
        $('#category_name').html('<div  style="padding:10px;"><h1 id="category_title" style="font-size: 266% !important; margin-bottom: 14px;"></h1><br/><p id="category_content" style="font-size:17px !important; line-height:30px"></p></div><div id="table_list" style="padding: 55px 10px 10px 50px;"></div>');
        $('#table_list').html('<table style="width:90%;font-size:16px;line-height:41px;border-top: 1px solid #e6e6e6;border-bottom: 1px solid #e6e6e6;" id="netcomperList"><thead><tr><th></th></tr></thead><tbody id="netcomperBody"><tr><td class="tab-loading"  id="load_data"></td></tr></tbody></table>');
        $('#occupancy').html('<h1 style="font-size: 150% !important; margin-bottom: 14px;">市场占有率</h1><div id="occupancy_bar" style="width:350px;height:400px;"></div>');
        $('#new_lest').html('<h1 style="font-size: 150% !important; margin-bottom: 14px;">市场新闻事件</h1><div id="new_content" style="min-height: 350px;"></div><div id="turning_page" style="float:right;"><span id="page_one" style="margin-right:5px;cursor: pointer;">首页</span><span id="page_up" data-page="" style="margin-right:5px;cursor: pointer;">上一页</span><span id="page_down" data-page="" style="cursor: pointer;">下一页</span></div>');
        netJson = '{"detail": [{"city": "北京", "company_code": "1029242543", "install_count": "140000000", "app_name": "抖音短视频", "company_name": "北京微播视界科技有限公司"}, {"city": "运城", "company_code": "1120328251", "install_count": "80000000", "app_name": "西瓜视频", "company_name": "运城市阳光文化传媒有限公司"}, {"city": "北京", "company_code": "1168257116", "install_count": "440000000", "app_name": "快手", "company_name": "北京快手科技有限公司"}, {"city": "北京", "company_code": "1039140143", "install_count": "5000000", "app_name": "微视", "company_name": "腾讯科技（深圳）有限公司"}, {"city": "北京", "company_code": "1001968326", "install_count": "16000000", "app_name": "秒拍", "company_name": "炫一下(北京)科技有限公司"}], "install_count": 1300000000, "description": "短视频即短片视频，是一种互联网内容传播方式，一般是在互联网新媒体上传播的时长在5分钟以内的视频传播内容；随着移动终端普及和网络的提速，短平快的大流量传播内容逐渐获得各大平台、粉丝和资本的青睐。", "category_name": "短视频"}';

        //		var tableSetting = {
        //          interface: "getcomparable",
        //          moduleName: "",
        //          moreLink: "getcomparable",
        //          thWidthRadio: ["5%", "35%", "25%", "20%"],
        //          align: [0, 0, 0, 0],
        //          thName: [intl('138741' /* 序号 */ ) , intl('138677' /* 企业名称 */ ), '地区', '派系'],
        //          fields: ["NO.", "company_name", "legal_person_name", "reg_capital"],
        //      }

        //		$('#table_list').empty().html(Company.drawTab(tableSetting, "tabComparable", "tbodyComparable", false));
        var parameter = { "companycode": Company.companyCode, "pageNo": 0, "pageSize": 20, "category_code": Company.category_code };
        myWfcAjax("getnetcompetitors", parameter, function(resData) {
            //              var resData = JSON.parse(netJson);
            var resData = JSON.parse(resData)
            if (resData.ErrorCode == 0 && resData.Data) {
                resData = resData.Data.Data;
                var drawData = [];
                if (resData.category != null) {
                    var category_name = resData.category[0].second_category;
                    var description = resData.category[0].second_description;
                } else {
                    var category_name = '--';
                    var description = '--';
                }
                $('#category_title').text(category_name);
                $('#category_content').text(description);

                var data = resData.detail;
                var htmlArr = [];
                var others = 0;
                for (var i = 0; i < data.length; i++) {
                    var hrefStr = "";
                    if (data[i].company_code) {
                        hrefStr = "target='_blank' class='underline wi-secondary-color wi-link-color' href='Company.html?companycode=" + data[i].company_code + "'";
                    }
                    var count = data[i].install_count ? data[i].install_count : 0;
                    var app_name = data[i].app_name;
                    var company_name = data[i].company_name;
                    var short_name = data[i].short_name;
                    var city = data[i].city;
                    if (i > 9) {
                        others += parseFloat(data[i].install_count);
                    } else {
                        drawData.push([data[i].short_name, parseFloat(data[i].install_count)]);
                    }

                    htmlArr.push("<tr style='border-bottom: 1px solid #e6e6e6;'><td align='left' style='padding-left: 5px;'>" + app_name + "</td><td style='padding-left: 5px;'><a " + hrefStr + ">" + company_name + "</a></td><td align='left' style='padding-left: 5px;'>" + city + "</td></tr>");
                }
                if (data.length > 10) {
                    drawData.push(['其他', others]);
                }
                $("#netcomperList").html(htmlArr.join(""));

                Highcharts.setOptions({
                    colors: ['#1F4860', '#2C627A', '#387C94', '#4496AD', '#50AFC6', '#7AC2D4', '#A1D4E0', '#C3E4EB', '#DEF0F4', '#F1F9FB'],
                    lang: {
                        downloadJPEG: intl('222618') /* 下载JPEG图片 */ ,
                        downloadPNG: intl('222621') /* 下载PNG图片 */ ,
                    }
                });
                $('#occupancy_bar').highcharts({

                    chart: {
                        plotBackgroundColor: null,
                        plotBorderWidth: null,
                        plotShadow: false
                    },
                    colors: ['#1F4860', '#2C627A', '#387C94', '#4496AD', '#50AFC6', '#7AC2D4', '#A1D4E0', '#C3E4EB', '#DEF0F4', '#F1F9FB'],
                    title: {
                        text: ''
                    },
                    tooltip: {
                        headerFormat: '{series.name}<br>',
                        pointFormat: '{point.name}: <b>{point.percentage:.1f}%</b>'
                    },
                    legend: {
                        borderWidth: 0
                    },
                    plotOptions: {
                        pie: {
                            allowPointSelect: true,
                            cursor: 'pointer',
                            dataLabels: {
                                enabled: false
                            },
                            showInLegend: true
                        }
                    },
                    series: [{
                        type: 'pie',
                        name: "市场占有率",
                        data: drawData
                    }],
                    credits: {
                        enabled: false // 禁用版权信息
                    }
                });

            } else {
                $("#netcomperList").html('<tr><td colspan="5"><div class="no-data">没有找到竞争对手信息</div></td></tr>')
            }
        })
        Company.netnews_list(0);
    },
    netnews_list: function(page_num) {
        var page_no = page_num ? page_num : 0;
        var param_new = { "companycode": Company.companyCode, "pageNo": page_no, "pageSize": 6 };
        myWfcAjax("shishi", param_new, function(data) {
            var resData = JSON.parse(data);
            if (resData.ErrorCode == 0 && resData.Data && resData.Data.length > 0) {
                var htmlArr = [];
                htmlArr.push("<ul>")
                var len = resData.Data.length >= 6 ? 6 : resData.Data.length;
                for (var i = 0; i < len; i++) {
                    var eachRes = resData.Data[i];
                    var eachResList = eachRes.AdviceList;
                    var eachResTag = eachRes.NewsTag;
                    var target_news = '';
                    var tar_class = '';
                    if (eachResList == undefined) {
                        if (resData.Data.length == 1) {
                            $('#new_content').empty().html('<div class="news-nodata">暂无数据</div>');
                        } else {
                            continue;
                        }
                    }
                    //                  htmlArr.push('<li>'+tar_html+'<a target="_blank" href="' + eachResList.Url + '">' + eachResList.Title + '</a><div class="tips-news"><span class="fl">'+Company.formatAdviceTime(eachResList.date)+'</span>' + Company.formatAdviceSouce(eachResList.SiteName) + '</div></li>');
                    htmlArr.push('<li style="border-bottom: 1px solid #e6e6e6;margin-bottom: 10px;">' + '<a target="_blank" href="' + eachResList.Url + '">' + eachResList.Title + '</a><span class="tips-news">' + Company.formatAdviceTime(eachResList.date) + '</span></li>');
                }
                htmlArr.push("</ul>");
                $('#new_content').empty().html(htmlArr.join(""));
                $("#page_up").attr("data-page", page_no);
                $("#page_down").attr("data-page", page_no);
            } else {
                $('#new_content').empty().html('<div class="news-nodata">暂无数据</div>');
            }
        }, function(data) {
            $('#new_content').empty().html('<div class="news-nodata">暂无数据</div>');
        });
    },
    //新闻分类测试
    category_news: function(relative) {
        $('.top_change').parent().remove();
        Company.companyCode01 = relative ? relative : '';
        if ($('#tabNewsList01').parents('#rContent').children().length > 1) { $('#tabNewsList01').parents('#rContent').children().last().remove(); }
        $('#workspace').removeClass("second-nav-space second-nav-space02").empty().html('<table class="news-list" id="tabNewsList01"><thead><tr><th></th></tr></thead><tbody id="newsBody01"><tr><td class="tab-loading"  id="load_data01"></td></tr></tbody></table>');
        $('#tabNewsList01').parent().parent().append('<div id="relation_com" class="side_news"><div id="cooper_list" class="side_news_div"><i class="side_news_tag"></i><span class="side_news_title">合作企业</span><ul></ul><div style="height:25px;background-color:#dcdce2;text-align:center;" class="more_side">展开</div></div><div id="up_list" class="side_news_div"><i class="side_news_tag"></i><span class="side_news_title">上游企业</span><ul></ul><div style="height:25px;background-color:#dcdce2;text-align:center;" class="more_side">展开</div></div><div id="down_list" class="side_news_div"><i class="side_news_tag"></i><span class="side_news_title">下游企业</span><ul></ul><div style="height:25px;background-color:#dcdce2;text-align:center;" class="more_side">展开</div></div><div id="relation_list" class="side_news_div"><i class="side_news_tag"></i><span class="side_news_title">相关企业</span><ul></ul><div style="height:25px;background-color:#dcdce2;text-align:center;" class="more_side">展开</div></div></div>');
        var param_relate = { "companycode": Company.companyCode, "pageNo": 0, "pageSize": 20 };


        myWfcAjax("getrelatedcompany", param_relate, function(data) {
            var resData = JSON.parse(data);
            if (resData.Data) {
                var related_len = resData.Data.length;
                var relatre_code = '';
                if (related_len > 0) {
                    //var all_comp=[resData.Data[0].ccode_name1];//开发站
                    var ccode_name = $("#companyNameText").text();
                    var all_comp = [ccode_name];
                    var similar = 0;
                    var progress_bar = 1;
                    //var basic_bar=resData.Data[0].proportion;//开发站
                    var basic_bar = resData.Data[0].Proportion;
                    $('#relation_list').show();
                    related_len > 5 ? $('#relation_list').find('.more_side').show() : $('#relation_list').find('.more_side').hide();
                    for (var rl = 0, flag = 1; rl < related_len; rl++) {
                        //relatre_code=resData.Data[rl].companyName;//开发站
                        relatre_code = resData.Data[rl].codeName;
                        //relater_name=resData.Data[rl].ccode_name;//开发站
                        relater_name = resData.Data[rl].CompanyName;
                        if (relater_name == '') {
                            continue;
                        }
                        //relater_name="hahahah";
                        if (flag && (relater_name != all_comp[0])) {
                            //basic_bar=resData.Data[rl].proportion;//开发站
                            basic_bar = resData.Data[rl].Proportion;
                            flag--;
                        }
                        if (relatre_code == '1038621881' || relatre_code == '1181175161' || relatre_code == '1181175161') { continue; }
                        if (all_comp.indexOf(relater_name) == -1) {
                            all_comp.push(relater_name);
                        } else { continue; }
                        all_comp.push(relater_name);
                        //similar=(resData.Data[rl].proportion*100).toFixed(0);//开发站
                        similar = (resData.Data[rl].Proportion * 100).toFixed(0);
                        //progress_bar=((resData.Data[rl].proportion/basic_bar)*100).toFixed(0);//开发站
                        progress_bar = ((resData.Data[rl].Proportion / basic_bar) * 100).toFixed(0);
                        $('#relation_list').find('ul').append('<li><div style="background-color:#71a3f7;width:' + progress_bar + '%;height:4px;border-radius: 5px;"></div><a class="relativecode" data-code="' + relatre_code + '" title="' + relater_name + '" style="width: 200px;display: inline-block;overflow: hidden;text-overflow: ellipsis;white-space: nowrap;">' + relater_name + '</a><span style="float:right">' + similar + '%</span></li>')
                            //  					$('#relation_list').find('ul').append('<li><div style="background-color:#71a3f7;width:'+progress_bar+'%;height:4px;border-radius: 5px;"></div><a href="Company.html?companycode='+relatre_code+'" data-code="'+relatre_code+'" title="'+relater_name+'" style="width: 200px;display: inline-block;overflow: hidden;text-overflow: ellipsis;white-space: nowrap;">'+relater_name+'</a><span style="float:right">'+similar+'%</span></li>')
                    }
                    $('#relation_list li:gt(4)').hide();
                }
            }
        });
        //合作企业 
        myWfcAjax("getcooperate", param_relate, function(data) {
            var resData = JSON.parse(data);
            if (resData.Data) {
                var cooper_len = resData.Data.length;
                var cooper_code = '';
                if (cooper_len > 0) {
                    $('#cooper_list').show();
                    if (cooper_len > 5) {
                        $('#cooper_list').find('.more_side').show()
                    } else {
                        $('#cooper_list').find('.more_side').hide();
                        $('#cooper_list').find('ul').removeClass('more_news');
                    }
                    for (var cool = 0; cool < cooper_len; cool++) {
                        //cooper_name=resData.Data[cool].cooperate_name;//开发站
                        cooper_name = resData.Data[cool].CompanyName2;
                        //						cooper_name='上海浦东现代产业开发有限公司上海浦东现代产业开发有限公司';
                        $('#cooper_list').find('ul').append('<li><a href="" title="' + cooper_name + '" style="width: 100%;display: inline-block;overflow: hidden;text-overflow: ellipsis;white-space: nowrap;">' + cooper_name + '</a></li>')
                    }
                    $('#cooper_list li:gt(4)').hide();
                }
            }
        });

        //上下游企业 
        myWfcAjax("getupdownreach", param_relate, function(data) {
            var resData = JSON.parse(data);
            if (resData.Data) {
                var up_len = resData.Data.Data.UpReach.length;
                var down_len = resData.Data.Data.DownReach.length;
                var cooper_code = '';
                if (up_len > 0) {
                    $('#up_list').show();
                    up_len > 5 ? $('#up_list').find('.more_side').show() : $('#up_list').find('.more_side').hide();
                    for (var upl = 0; upl < up_len; upl++) {
                        up_name = resData.Data.Data.UpReach[upl].companyName;
                        //						cooper_name='上海浦东现代产业开发有限公司上海浦东现代产业开发有限公司';
                        $('#up_list').find('ul').append('<li><a href="" title="' + up_name + '" style="width: 100%;display: inline-block;overflow: hidden;text-overflow: ellipsis;white-space: nowrap;">' + up_name + '</a></li>');
                    }
                    $('#up_list li:gt(4)').hide();
                }
                if (down_len > 0) {
                    $('#down_list').show();
                    down_len > 5 ? $('#down_list').find('.more_side').show() : $('#down_list').find('.more_side').hide();
                    for (var dwl = 0; dwl < down_len; dwl++) {
                        down_name = resData.Data.Data.DownReach[dwl].companyName;
                        //						cooper_name='上海浦东现代产业开发有限公司上海浦东现代产业开发有限公司';
                        $('#down_list').find('ul').append('<li><a href="" title="' + down_name + '" style="width: 100%;display: inline-block;overflow: hidden;text-overflow: ellipsis;white-space: nowrap;">' + down_name + '</a></li>');
                    }
                    $('#down_list li:gt(4)').hide();
                }
            }
        });
        var tableSetting = {
            interface: "advicelist",
            //			interface: "shishi",
            moduleName: intl('147162', '新闻分类'),
            thWidthRadio: ["100%"],
            align: [1],
            fields: ["Title"]
        }
        var columnDefsSet = [
            //          {
            //              "targets": 0,
            //              "data": null,
            //              "render": function ( data, type, full, meta ) {
            //                  return '<div class="each-newslist"><h3><a target="_blank" href="' + full.Url + '">' + full.Title + '</a></h3><div class="news-summary"><span class="newslist-time">' + Company.formatAdviceTime(full.date) + '</span><span class="newslist-time">' + Company.formatAdviceSouce(full.SiteName) + '</span></div></div>'
            //              }
            //          },
            {
                "targets": 0,
                "data": 'null',
                "render": function(data, type, full, meta) {
                    var param01 = { "mediaid": full.MediaID, "companycode": Company.companyCode };
                    myWfcAjax("advicedetail", param01, function(data) {
                        //					myWfcAjax("shishidetail",param01,function(data) {
                        var resData = JSON.parse(data);
                        var tar_html = '';
                        if (resData.Data) {
                            var target_news = resData.Data.category;
                            var tar_class_mid = 'vertical-align: middle;padding: 4px;border-radius: 5px;color: white;margin-right: 5px;';
                            var tar_class_bad = 'vertical-align: middle;background-color: #FE7E17;padding: 4px;border-radius: 5px;color: white;margin-right: 5px;';
                            var news_bad = 'vertical-align: middle;background-color: #e05a5a;padding: 4px;border-radius: 5px;color: white;margin-right: 5px;';
                            var tar_class = '';
                            for (var nl = 0; nl < target_news.length; nl++) {
                                switch (target_news[nl]) {
                                    case '偷税漏税':
                                    case '造假欺诈':
                                    case '合同纠纷':
                                    case '涉诉违规':
                                    case '环境保护':
                                    case '安全事件':
                                    case '侵权抄袭':
                                    case '垄断信息':
                                    case '劳务纠纷':
                                    case '停业破产':
                                    case '高管负面':
                                    case '破产清算':
                                        tar_class = tar_class_bad;
                                        break;
                                    default:
                                        tar_class = tar_class_mid;
                                        break;
                                }
                                tar_html += '<span style="' + tar_class + '">' + target_news[nl] + '</span>';
                            }
                            // TODO 兼容处理 '/'、'('、')' 三个符号的转义 避免单一形式出现后面无法正则匹配
                            resData.Data.highlight = resData.Data.highlight.replaceAll('/', '').replaceAll(/\(/, '（').replaceAll(/\)/, '）').replaceAll(/\*/, '');
                            var pat = new RegExp(resData.Data.highlight, "g");
                            var highlight_about = '';
                            if (resData.Data.sentences) {
                                for (var nl2 = 0; nl2 < resData.Data.sentences.length; nl2++) {
                                    highlight_about += '<span>' + resData.Data.sentences[nl2].replace(pat, "<em class='color-red' style='color:red;font-style: normal;'>" + resData.Data.highlight + "</em>") + '</span><br/>';
                                }
                            }
                            highlight_about = '<div style="font-size: 14px;" class="div_3_hidden">' + highlight_about + '</div>';
                            //直接显示结果
                            //							var fumian =''
                            //							if (full.ArticleType){
                            //								fumian ='负面负面负面负面负面负面'
                            //							}else{
                            //								fumian = '正面正面正面正面正面正面'
                            //							}
                            var fumian = ''
                            if (full.ArticleType == '1') {

                                fumian = '<span style="' + news_bad + '">' + '负' + '</span>'
                            } else {
                                fumian = ''
                            }


                            var p_html = '<div class="each-newslist"><h3><span id="' + full.MediaID + '">' + tar_html + '</span>' + fumian + '<a target="_blank" href="' + full.Url + '">' + full.Title + '</a></h3><div class="news-summary"><span class="newslist-time">' + Company.formatAdviceTime(full.date) + '</span><span class="newslist-time">' + Company.formatAdviceSouce(full.SiteName) + '</span>' + highlight_about + '</div></div>';
                            var li_length = $('#newsBody01').children().length;
                            for (var eqq = 0; eqq < li_length; eqq++) {
                                if ($('#newsBody01').children().eq(eqq).text() == '') {
                                    $('#newsBody01').children().eq(eqq).html(p_html);
                                    var span_length = $('.div_3_hidden').eq(eqq).find('span').length;
                                    var span_height = 0;
                                    for (var eqq2 = 0; eqq2 < span_length; eqq2++) {
                                        span_height = span_height + $('.div_3_hidden').eq(eqq).find('span').eq(eqq2).height();
                                    }
                                    if (span_height > 90) {
                                        $('.div_3_hidden').eq(eqq).parent().append('<div style="text-align:right;"><span class="read_more">更多</span></div>');
                                    }
                                    break;
                                } else {
                                    continue;
                                }
                            }
                        }
                    });
                }
            }
            //          {
            //          	"targets": 0,
            //          	"data": 'null',
            //              "render": function ( data, type, full, meta ) {
            //					var param01={"mediaid":full.MediaID, "companycode": Company.companyCode};
            //					var kk=myWfcAjax("advicedetail",param01,function(data) {
            //						var resData = JSON.parse(data);
            //						var tar_html='';
            //						if(resData.Data){
            //							var target_news=resData.Data.category;
            //							var tar_class='vertical-align: middle;background-color: #f08834;padding: 4px;border-radius: 5px;color: white;margin-right: 5px;';
            //							for(var nl=0;nl<target_news.length;nl++){
            //								tar_html+='<span style="'+tar_class+'">'+target_news[nl]+'</span>';
            //							}
            //							$('#'+resData.Data.media_id).html(tar_html);
            //							var pat=new RegExp(resData.Data.highlight,"g");
            //							var highlight_about='';						
            //							if(resData.Data.sentences){
            //								for(var nl2=0;nl2<resData.Data.sentences.length;nl2++){
            //									highlight_about+='<span>'+resData.Data.sentences[nl2].replace(pat,"<em class='color-red' style='color:red;font-style: normal;'>"+resData.Data.highlight+"</em>")+'</span><br/>';
            //								}
            ////								$('#'+resData.Data.media_id).parent().next().append('<div style="font-size: 14px;overflow: hidden;-o-text-overflow: ellipsis;text-overflow: ellipsis;display: -webkit-box;display: -moz-box;max-height: 90px;-webkit-line-clamp: 3;-webkit-box-orient: vertical;">'+highlight_about+'</div>');
            //								$('#'+resData.Data.media_id).parent().next().append('<div style="font-size: 14px;">'+highlight_about+'</div>');
            //								var div_find=$('#'+resData.Data.media_id).parent().next().find('div');
            //								if(($('#'+resData.Data.media_id).text()!='')&&div_find.height()>90){
            //									div_find.addClass("div_3_hidden");
            //									$('#'+resData.Data.media_id).parent().next().append('<div style="text-align:right;"><span class="read_more">更多</span></div>');
            //								}
            //							}
            //						}
            //						else{
            //							$('#'+full.MediaID).parent().parent().css('display','none');
            //						}
            //					});
            //					return '<div class="each-newslist"><h3><span id="'+full.MediaID+'"></span><a target="_blank" href="' + full.Url + '">' +full.Title + '</a></h3><div class="news-summary"><span class="newslist-time">' + Company.formatAdviceTime(full.date) + '</span><span class="newslist-time">' + Company.formatAdviceSouce(full.SiteName) + '</span></div></div>';
            //              }
            //          }
        ]
        Company.pageSetting("#tabNewsList01", tableSetting, columnDefsSet);
    },
    // showCompanyChange: function($dom) {
    //     //工商变更
    //     if (!Company.isHongkong && !Company.isTw) {
    //         var tableSetting = {
    //             interface: "getcompanychangeinfo",
    //             moreLink: "showCompanyChange",
    //             moduleName: intl('138206' /* 工商变更 */ ),
    //             modelNum: "change_record_num",
    //             thWidthRadio: ["5%", "10%", "15%", "35%", "35%"],
    //             thName: [intl('138741' /* 序号 */ ), intl('138203' /* 变更日期 */ ), intl('138204' /* 变更事项 */ ), intl('138176' /* 变更前 */ ), intl('138135' /* 变更后 */ )],
    //             align: [0, 0, 0, 0, 0],
    //             fields: ["NO.", "change_time", "change_item", "before_change", "after_change"]
    //         }
    //         var $container = $dom ? $dom : $('#workspace');
    //         $container.empty().html(Company.drawTab(tableSetting, "tabbusinesschange", "tbodybusinesschange", false, $dom));
    //         var columnDefsSet = [{
    //             "targets": 1,
    //             "data": 'change_time',
    //             "render": function(data, type, full, meta) {
    //                 return Common.formatTime(data)
    //             }
    //         }, {
    //             "targets": 3,
    //             "data": 'before_change',
    //             "render": function(data, type, full, meta) {
    //                 if (data && (data.indexOf('text-insert') > -1)) {
    //                     data = data.replace(/text-insert/g, 'text-insert wi-secondary-color')
    //                 }
    //                 if (data && (data.indexOf('text-delete') > -1)) {
    //                     data = data.replace(/text-delete/g, 'text-delete wi-secondary-color')
    //                 }
    //                 return Common.formatCont(data)
    //             }
    //         }, {
    //             "targets": 4,
    //             "data": 'after_change',
    //             "render": function(data, type, full, meta) {
    //                 if (data && (data.indexOf('text-insert') > -1)) {
    //                     data = data.replace(/text-insert/g, 'text-insert wi-secondary-color')
    //                 }
    //                 if (data && (data.indexOf('text-delete') > -1)) {
    //                     data = data.replace(/text-delete/g, 'text-delete wi-secondary-color')
    //                 }
    //                 return Common.formatCont(data)
    //             }
    //         }];
    //         if ($dom) {
    //             var eachModuleData = Company.companyBasicData.change ? Company.companyBasicData.change : null;
    //             Company.pageSetting_new("#tabbusinesschange", tableSetting, eachModuleData, columnDefsSet, null, $dom);
    //         } else {
    //             Company.pageSetting("#tabbusinesschange", tableSetting, columnDefsSet, null, $dom);
    //         }
    //     } else {
    //         var tableSetting = {
    //             interface: "getorgnamechange",
    //             moreLink: "getorgnamechange",
    //             moduleName: intl('138205' /* 变更记录 */ ),
    //             modelNum: "orgnamechange_num",
    //             thWidthRadio: ["5%", "25%", "15%", "55%"],
    //             thName: [intl('138741' /* 序号 */ ), intl('138202' /* 变更类别 */ ), intl('138702' /* 生效日期 */ ), intl('138849' /* 变更内容 */ )],
    //             align: [0, 0, 0, 0, 0],
    //             fields: ["NO.", "org_name_type", "remark", "org_name"]
    //         }
    //         var $container = $dom ? $dom : $('#workspace');
    //         $container.empty().html(Company.drawTab(tableSetting, "tabbusinesschange", "tbodybusinesschange", false, $dom));
    //         var columnDefsSet = [{
    //             "targets": 2,
    //             "data": 'remark',
    //             "render": function(data, type, full, meta) {
    //                 return Common.formatTime(data)
    //             }
    //         }];
    //         if ($dom) {
    //             var eachModuleData = Company.companyBasicData.orgchange ? Company.companyBasicData.orgchange : null;
    //             Company.pageSetting_new("#tabbusinesschange", tableSetting, eachModuleData, columnDefsSet, null, $dom);
    //         } else {
    //             Company.pageSetting("#tabbusinesschange", tableSetting, columnDefsSet, null, $dom);
    //         }
    //     }
    // },
    showCompanyChange: function($dom) {
        //工商变更        
        var tableSetting = {
            interface: "getcorpchangeinfo",
            moreLink: "showCompanyChange",
            moduleName: intl('138206' /* 工商变更 */ ),
            modelNum: "change_record_num",
            aggName: ["aggs_type"],
            thWidthRadio: ["5%", "10%", "15%", "35%", "35%"],
            thName: [intl('138741' /* 序号 */ ), intl('138203' /* 变更日期 */ ), intl('138204' /* 变更事项 */ ), intl('138176' /* 变更前 */ ), intl('138135' /* 变更后 */ )],
            align: [0, 0, 0, 0, 0],
            fields: ["NO.", "change_date", "change_item", "change_benote", "change_afnote"]
        }
        var $container = $dom ? $dom : $('#workspace');
        $container.empty().html(Company.drawTab(tableSetting, "tabbusinesschange", "tbodybusinesschange", false, $dom));
        var columnDefsSet = [{
            "targets": 1,
            "data": 'change_date',
            "render": function(data, type, full, meta) {
                return Common.formatTime(data)
            }
        }, {
            "targets": 3,
            "data": 'change_benote',
            "render": function(data, type, full, meta) {
                if (data && (data.indexOf('text-insert') > -1)) {
                    data = data.replace(/text-insert/g, 'text-insert wi-secondary-color')
                }
                if (data && (data.indexOf('text-delete') > -1)) {
                    data = data.replace(/text-delete/g, 'text-delete wi-secondary-color')
                }
                return Common.formatCont(data)
            }
        }, {
            "targets": 4,
            "data": 'change_afnote',
            "render": function(data, type, full, meta) {
                if (data && (data.indexOf('text-insert') > -1)) {
                    data = data.replace(/text-insert/g, 'text-insert wi-secondary-color')
                }
                if (data && (data.indexOf('text-delete') > -1)) {
                    data = data.replace(/text-delete/g, 'text-delete wi-secondary-color')
                }
                return Common.formatCont(data)
            }
        }];
        var params = { "companycode": Company.companyCode, "pageSize": 10 };
        Company.shbdgPageSetting("#tabbusinesschange", tableSetting, columnDefsSet, params, $dom);
    },
    showCompanyChangeWD: function($dom) {
        //工商变更
        if (!Company.isHongkong && !Company.isTw) {
            var tableSetting = {
                interface: "getcorpchangeinfo",
                moreLink: "showCompanyChange",
                moduleName: intl('138206' /* 工商变更 */ ),
                modelNum: "change_record_num",
                aggName: ["aggs_type"],
                thWidthRadio: ["5%", "10%", "15%", "35%", "35%"],
                thName: [intl('138741' /* 序号 */ ), intl('138203' /* 变更日期 */ ), intl('138204' /* 变更事项 */ ), intl('138176' /* 变更前 */ ), intl('138135' /* 变更后 */ )],
                align: [0, 0, 0, 0, 0],
                fields: ["NO.", "change_time", "change_item", "before_change", "after_change"]
            }
            var $container = $dom ? $dom : $('#workspace');
            $container.empty().html(Company.drawTab(tableSetting, "tabbusinesschange", "tbodybusinesschange", false, $dom));
            var columnDefsSet = [{
                "targets": 1,
                "data": 'change_time',
                "render": function(data, type, full, meta) {
                    return Common.formatTime(data)
                }
            }, {
                "targets": 3,
                "data": 'before_change',
                "render": function(data, type, full, meta) {
                    if (data && (data.indexOf('text-insert') > -1)) {
                        data = data.replace(/text-insert/g, 'text-insert wi-secondary-color')
                    }
                    if (data && (data.indexOf('text-delete') > -1)) {
                        data = data.replace(/text-delete/g, 'text-delete wi-secondary-color')
                    }
                    return Common.formatCont(data)
                }
            }, {
                "targets": 4,
                "data": 'after_change',
                "render": function(data, type, full, meta) {
                    if (data && (data.indexOf('text-insert') > -1)) {
                        data = data.replace(/text-insert/g, 'text-insert wi-secondary-color')
                    }
                    if (data && (data.indexOf('text-delete') > -1)) {
                        data = data.replace(/text-delete/g, 'text-delete wi-secondary-color')
                    }
                    return Common.formatCont(data)
                }
            }];
            // if ($dom) {
            //     var eachModuleData = Company.companyBasicData.change ? Company.companyBasicData.change : null;
            //     Company.pageSetting_new("#tabbusinesschange", tableSetting, eachModuleData, columnDefsSet, null, $dom);
            // } else {
            //     Company.pageSetting("#tabbusinesschange", tableSetting, columnDefsSet, null, $dom);
            // }
            var params = { "companycode": Company.companyCode, "pageSize": 10 };
            Company.pageSetting("#tabbusinesschange", tableSetting, columnDefsSet, params, $dom);
        } else {
            var tableSetting = {
                interface: "getorgnamechange",
                moreLink: "getorgnamechange",
                moduleName: intl('138205' /* 变更记录 */ ),
                modelNum: "orgnamechange_num",
                thWidthRadio: ["5%", "25%", "15%", "55%"],
                thName: [intl('138741' /* 序号 */ ), intl('138202' /* 变更类别 */ ), intl('138702' /* 生效日期 */ ), intl('138849' /* 变更内容 */ )],
                align: [0, 0, 0, 0, 0],
                fields: ["NO.", "org_name_type", "remark", "org_name"]
            }
            var $container = $dom ? $dom : $('#workspace');
            $container.empty().html(Company.drawTab(tableSetting, "tabbusinesschange", "tbodybusinesschange", false, $dom));
            var columnDefsSet = [{
                "targets": 2,
                "data": 'remark',
                "render": function(data, type, full, meta) {
                    return Common.formatTime(data)
                }
            }];
            if ($dom) {
                var eachModuleData = Company.companyBasicData.orgchange ? Company.companyBasicData.orgchange : null;
                Company.pageSetting_new("#tabbusinesschange", tableSetting, eachModuleData, columnDefsSet, null, $dom);
            } else {
                Company.pageSetting("#tabbusinesschange", tableSetting, columnDefsSet, null, $dom);
            }
        }
    },
    showYearReport: function($dom) {
        //企业年报
        var tableSetting = {
            interface: "getannualinfo",
            moreLink: "showYearReport",
            moduleName: intl('138149' /* 企业年报 */ ),
            modelNum: "annual_num",
            thWidthRadio: ["8%", "46%", "46%", ],
            thName: [intl('138741' /* 序号 */ ), intl('138585' /* 报送年度 */ ), intl('138143' /* 公示日期 */ )],
            align: [0, 0, 0],
            fields: ["NO.", "annual_year", "release_time"]
        }
        var $container = $dom ? $dom : $('#workspace');
        $container.empty().html(Company.drawTab(tableSetting, "tabyearreport", "tbodyyearreport", false, $dom));
        var columnDefsSet = [{
            "targets": 1,
            "data": 'annual_year',
            "render": function(data, type, full, meta) {
                if (data) {
                    var yearReportHref = 'yearReport.html?companyCode=' + Company.companyCode + "&year=" + data + "&companyName=" + encodeURI(Company.companyName);
                    var str = '<a class="wi-secondary-color wi-link-color" target="_blank" href="' + yearReportHref + '">' + data + intl('138658' /* 年度报告 */ ) + '</a>';
                    return str;
                } else {
                    return "--";
                }
            }
        }, {
            "targets": 2,
            "data": 'release_time',
            "render": function(data, type, full, meta) {
                return Common.formatTime(data)
            }
        }];
        if ($dom) {
            var eachModuleData = Company.companyBasicData.annualInfos ? Company.companyBasicData.annualInfos : null;
            Company.pageSetting_new("#tabyearreport", tableSetting, eachModuleData, columnDefsSet, null, $dom);
        } else {
            Company.pageSetting("#tabyearreport", tableSetting, columnDefsSet, null, $dom);
        }
    },
    afterMergeData: null,
    showShareholder: function($dom, oIndex) {
        //股东信息
        var isOrNotPartnership = Company.isOrNotPartnership;
        var thNameChange = [intl('138741' /* 序号 */ ), intl('138783' /* 股东名称 */ ), intl('138412' /* 实际持股比例 */ ), intl('138455' /* 认缴出资(万元) */ )];
        var thWidthRadioChange = ["5%", "55%", "20%", "20%"];
        var thAlignChange = [0, 0, 2, 2];
        var thFieldsChange = ["NO.", "shareholder_name", "percentage", "promise_money_amount"];
        if (isOrNotPartnership) {
            thNameChange = [intl('138741' /* 序号 */ ), intl('222785', '合伙人名称'), intl('138412' /* 实际持股比例 */ ), intl('138455' /* 认缴出资(万元) */ )];
        }
        if (parseInt(Company.basicNum.is_real_amount_empty)) { //用于根据是否有实缴字段，将实缴列去掉，同时还有宽度以及居中状态需要修改,columnDefsSet
            thNameChange.push(intl('222784', '实缴出资(万元)'));
            thFieldsChange.push("real_money_amount");
            thWidthRadioChange = ["5%", "50%", "15%", "15%", "15%"];
            thAlignChange = [0, 0, 2, 2, 2];
        }
        var tableSetting = [{
            interface: "getnewshareholdert",
            moreLink: "showShareholder",
            moduleName: intl('138506' /* "股东信息"*/ ),
            modelNum: "shareholder_num",
            thWidthRadio: thWidthRadioChange,
            thName: thNameChange,
            align: thAlignChange,
            fields: thFieldsChange,
            callback: function(data) {
                var res, shareHolder, shareHolderMergeStatusInfo, shareHolderMergeCompInfo, pevcInfo;
                res = Company.companyBasicData.allShareholders;
                shareHolder = res.ShareHolder;
                shareHolderMergeStatusInfo = res.MergeStatusInfo;
                shareHolderMergeCompInfo = res.MergeCompInfo;
                pevcInfo = res.Pevc;
                /*处理股东信息下面peve及并购事件的文字*/
                var dateLater = shareHolder[0].end_time ? shareHolder[0].end_time : '';
                var dateLaterEle = $('#tabshareholder').parents(".widget-model").find(".datelater").length;
                var boxEle = $('#tabshareholder').parents(".M-box-Shareholder").length;
                if (dateLater && !dateLaterEle && !boxEle) {
                    if (dateLater.indexOf('-') > -1) {
                        dateLater = dateLater
                    } else {
                        dateLater = Common.formatTime(shareHolder[0].end_time)
                    }
                    var mergeHref = '//psmsserver/InvestmentBank/Merger/MergerEventDetail.aspx?ID=';
                    var pevcHref = '//psmsserver/InvestmentBank/PEVC/InvestFinancDetail.aspx?ID=';
                    if (shareHolder && shareHolder.length && dateLater) {
                        var dateStr = '<div class="datelater">' + intl('138542' /* 以上为截止到 */ ) + dateLater + intl('138593' /* 的股东信息 */ ) + '</div>';
                    }
                    if ((shareHolderMergeCompInfo && shareHolderMergeCompInfo.length) || (res.Pevc && res.Pevc.length)) {
                        var mergeStr = '<span>，  ' + dateLater + intl('138594' /* 之后，发生以下可能引起股东变化的重要事项 */ ) + '：<br/></span>'
                    }
                    if (shareHolderMergeCompInfo && shareHolderMergeCompInfo.length) {
                        var mergeStatusInfo = shareHolderMergeCompInfo;
                        var mergeMoreStr = '';
                        for (var i = 0; i < mergeStatusInfo.length; i++) {
                            var buyInfo = (mergeStatusInfo[i].Buyer && mergeStatusInfo[i].Buyer.length) ? mergeStatusInfo[i].Buyer[0] : {};
                            var sellInfo = (mergeStatusInfo[i].Seller && mergeStatusInfo[i].Seller.length) ? mergeStatusInfo[i].Seller[0] : {};
                            mergeMoreStr = mergeMoreStr + '<span class="type-shareholdchange">' + intl('138736' /* 并购 */ ) + '</span><a class="underline wi-secondary-color wi-link-color LinkToMerge" target="_blank">' + (buyInfo.tradePartName ? buyInfo.tradePartName : '--') + '竞购' + (sellInfo.tradePartName ? sellInfo.tradePartName : '--') + '所持有的' + (mergeStatusInfo[i].TradeTarget ? mergeStatusInfo[i].TradeTarget : '--') + '(' + mergeStatusInfo[i].Date + ')' + '</a><br>';
                        }
                    }
                    if (pevcInfo && pevcInfo.length) {
                        var pevcStr = '';
                        var tmpPevc = '';
                        for (var i = 0; i < pevcInfo.length; i++) {
                            var tmpArr = [];
                            var pevcCorp = '';
                            if (pevcInfo[i].invests) {
                                //只读第一个投资方，后面用“等”
                                for (var k in pevcInfo[i].invests) {
                                    if (k !== 'N/A') tmpArr.push(pevcInfo[i].invests[k])
                                }
                                if (tmpArr.length > 1) {
                                    pevcCorp = tmpArr[0] + intl('138285' /* 等 */ );
                                } else {
                                    pevcCorp = (tmpArr[0] || pevcInfo[i].investmentCompany) || '--';
                                }
                                pevcCorp = ', 投资方为' + pevcCorp + '。';
                            }
                            pevcStr = pevcStr + '<span class="type-shareholdchange">' + intl('138924' /* PEVC融资 */ ) + '</span><a class="underline wi-secondary-color wi-link-color LinkPEVC" target="_blank"> ' +
                                (pevcInfo[i].financingOrg ? pevcInfo[i].financingOrg : '--') + '获得' + (pevcInfo[i].turnCode ? pevcInfo[i].turnCode : '--') + '轮' + (pevcInfo[i].financingMoney ? (pevcInfo[i].financingMoney + intl('20116' /* 万 */ )) : '--') + (pevcInfo[i].moneyCode ? pevcInfo[i].moneyCode : '--') + '投资' + pevcCorp + '(' + (pevcInfo[i].financingDate ? pevcInfo[i].financingDate : '--') + ')' + '</a><br>';
                        }
                    }
                    if (!dateLater) {
                        mergeMoreStr = pevcStr = '';
                    }
                    var str = ((mergeMoreStr ? mergeMoreStr : '') + (pevcStr ? pevcStr : ''));
                    $('#tabshareholder').parents(".widget-model").find(".M-box").empty();
                    if (mergeMoreStr || pevcStr) {
                        $('#tabshareholder').parents(".widget-model").find(".M-box").addClass('M-box-Shareholder').append(dateStr);
                        $('#tabshareholder').parents(".widget-model").find(".datelater").append(mergeStr);
                        $('#tabshareholder').parents(".widget-model").find(".M-box").append(str);
                    }
                }
            }
        }, {
            interface: "getnewshareholder",
            moreLink: "showShareholder",
            moduleName: intl('138506' /* 股东信息 */ ),
            modelNum: "mshareholder_num",
            thWidthRadio: ["5%", "45%", "10%", "20%", "20%"],
            thName: [intl('138741' /* 序号 */ ), intl('138783' /* 股东名称 */ ), intl('138412' /* 实际持股比例 */ ), intl('138455' /* 认缴出资(万元) */ ), intl('222787', '关联并购状态')],
            align: [0, 0, 2, 2, 2],
            fields: ["NO.", "shareholder_name", "percentage", "promise_money_amount", "remark"],
            callback: function(data) {
                var res, shareHolder, pevcInfo;
                res = Company.companyBasicData.allShareholders;
                shareHolder = res.ShareHolder;
                pevcInfo = res.Pevc;
                /*处理股东信息下面peve及并购事件的文字*/
                var dateLater = shareHolder[0].end_time ? shareHolder[0].end_time : '';
                var dateLaterEle = $('#tabshareholder').parents(".widget-model").find(".datelater").length;
                var boxEle = $('#tabshareholder').parents(".M-box-Shareholder").length;
                if (dateLater && !dateLaterEle && !boxEle) {
                    if (dateLater.indexOf('-') > -1) {
                        dateLater = dateLater
                    } else {
                        dateLater = Common.formatTime(shareHolder[0].end_time)
                    }
                    var pevcHref = '//psmsserver/InvestmentBank/PEVC/InvestFinancDetail.aspx?ID=';
                    if (shareHolder && shareHolder.length && dateLater) {
                        var dateStr = '<div class="datelater">以上为截止到' + dateLater + '的股东信息' + '</div>';
                    }
                    if (pevcInfo && pevcInfo.length) {
                        var pevcStr = '';
                        var pevcCorp = '';
                        var tmpPevc = '';
                        for (var i = 0; i < pevcInfo.length; i++) {
                            var tmpArr = [];
                            if (pevcInfo[i].invests && !pevcInfo[i].invests['N/A']) {
                                //只读第一个投资方，后面用“等”
                                for (var k in pevcInfo[i].invests) {
                                    tmpArr.push(pevcInfo[i].invests[k])
                                }

                                if (tmpArr.length > 1) {
                                    pevcCorp = tmpArr[0] + "等";
                                } else {
                                    pevcCorp = tmpArr[0]
                                }
                                pevcCorp = ', 投资方为' + pevcCorp + '。';
                            }
                            pevcStr = pevcStr + '<span class="type-shareholdchange">' + intl('138924' /* PEVC融资 */ ) + '</span><a class="underline wi-secondary-color wi-link-color LinkPEVC" target="_blank" href="' +
                                pevcHref + (pevcInfo[i].financingId ? pevcInfo[i].financingId : pevcInfo[i].investmentCompanyId) + '&eventId=' + pevcInfo[i].eventId + '"> ' +
                                (pevcInfo[i].financingOrg ? pevcInfo[i].financingOrg : '--') + '获得' + (pevcInfo[i].turnCode ? pevcInfo[i].turnCode : '--') + '轮' + (pevcInfo[i].financingMoney ? pevcInfo[i].financingMoney + '万' : '--') +
                                (pevcInfo[i].moneyCode ? pevcInfo[i].moneyCode : '--') + '投资' + pevcCorp + '(' + (pevcInfo[i].financingDate ? pevcInfo[i].financingDate : '--') + ')' + '</a><br>';
                        }
                    }
                    if (!dateLater) {
                        pevcStr = '';
                    }
                    var str = pevcStr ? pevcStr : '';
                    $('#tabshareholder').parents(".widget-model").find(".M-box").empty();
                    if (pevcStr) {
                        $('#tabshareholder').parents(".widget-model").find(".M-box").addClass('M-box-Shareholder').append(dateStr);
                        $('#tabshareholder').parents(".widget-model").find(".M-box").append(str);
                    }
                }
                var params = { "type": "m" }
                Company.pageSetting("#tabshareholder", tableSetting, columnDefsSet, params, $dom, 1);
            }
        }]
        var $container = $dom ? $dom : $('#workspace');
        var hasMshareholder = oIndex == undefined && Company.basicNum["mshareholder_num"] > 0 ? true : false;
        if (hasMshareholder || oIndex == 1) {
            $container.empty().html(Company.drawTab(tableSetting[1], "tabshareholder", "tbodyshareholder", false, $dom));
        } else {
            $container.empty().html(Company.drawTab(tableSetting[0], "tabshareholder", "tbodyshareholder", false, $dom));
        }
        $('#showShareholder').find('.widget-header').eq(0).append("<a class='jumpActControl wi-secondary-color wi-link-color' title='疑似实际控制人' href='#chart_yskzr'>" + intl('138448' /* 疑似实际控制人 */ ) + "</a>" + Company.vipTips); //单项下载

        if ($(".merge-holder").length <= 0 && Company.basicNum["mshareholder_num"] > 0) {
            if ($('#showShareholder').length > 0) {
                $('#showShareholder').find('.widget-header').addClass("shareholder-header");
            } else {
                $('.widget-header').addClass("shareholder-header");
            }
            var holderMergeInfo;
            if (hasMshareholder || oIndex == 1) {
                holderMergeInfo = '<div class="merge-holder"><div class="fl"><i class="sel"></i><span>合并未完成并购事件</span></div>以下股东明细融合了未完成并购事件进行计算，并购事件若被终止，股东计算结果将实时更新</div>'

            } else {
                holderMergeInfo = '<div class="merge-holder"><div class="fl"><i></i><span>合并未完成并购事件</span></div>以下股东明细未融合没有完成的并购事件进行计算</div>'
            }
            $(".shareholder-header").append(holderMergeInfo);
        }
        var columnDefsSet = [
            [{
                    "targets": 1,
                    "data": 'shareholder_name',
                    "render": function(data, type, full, meta) {
                        var shortname = full.enter_abbreviation;
                        var dataType = full.shareholder_type ? full.shareholder_type : "";
                        var id = full.shareholder_id;
                        //                      var img = full.image_id ? full.image_id : "";
                        var img = full.image_id_v ? full.image_id_v : '';
                        var isBenifciary = full.benifciary;
                        var isActCtrl = full.act_ctrl;
                        var count = full.enter_total_num;
                        var pingParam = '&fromModule=' + buryItemMapping.mappingEntity["showShareholder"] + '&fromField=股东名称&opId=' + id; //bury
                        return (Common.showCompanyName(dataType, data, id, img, shortname, count, isBenifciary, isActCtrl, null, pingParam)); //企业logo
                    }
                },
                {
                    "targets": 2,
                    "data": 'percentage',
                    "render": function(data, type, full, meta) {
                        //格式化百分比
                        if (parseFloat(data)) {
                            return parseFloat(data).toFixed(4) + "%";
                        } else {
                            return "--";
                        }
                    }
                },
                {
                    "targets": 3,
                    "data": 'promise_money_amount',
                    "render": function(data, type, full, meta) {
                        return Common.formatMoney(data, [4, '&nbsp;'])
                    }
                }
            ],
            [{
                    "targets": 1,
                    "data": 'shareholder_name',
                    "render": function(data, type, full, meta) {
                        return Common.addCompanyLink(data, full);
                    }
                },
                {
                    "targets": 2,
                    "data": 'percentage',
                    "render": function(data, type, full, meta) {
                        return Common.formatPercent(data)
                    }
                },
                {
                    "targets": 3,
                    "data": 'promise_money_amount',
                    "render": function(data, type, full, meta) {
                        return Common.formatMoney(data, [4, '&nbsp;'])
                    }
                }, {
                    "targets": 4,
                    "data": 'remark',
                    "render": function(data, type, full, meta) {

                        if (data) {
                            var event = Company.afterMergeData.MergeStatusInfo;
                            var eventName = "";
                            for (var i = 0; i < event.length; i++) {
                                if (event[i].EventId == data) {
                                    eventName = event[i].Status;
                                    break;
                                }
                            }
                            var mergeHref = '//psmsserver/InvestmentBank/Merger/MergerEventDetail.aspx?ID=';
                            var str = '<span class="event-padding">' + eventName + '</span><a class="underline wi-secondary-color wi-link-color LinkToMerge fr" target="_blank" href="' + mergeHref + data + '">详情</a>';
                            return str;
                        } else {
                            return "--";
                        }
                    }
                }
            ]
        ];
        if (parseInt(Company.basicNum.is_real_amount_empty)) { //用于根据是否有实缴字段，将实缴列去掉，同时还有宽度以及居中状态需要修改,columnDefsSet
            var changeSet = {
                "targets": 4,
                "data": 'real_money_amount',
                "render": function(data, type, full, meta) {
                    return Common.formatMoney(data, [4, '&nbsp;'])
                }
            }
            columnDefsSet[0].push(changeSet);
        }
        if ($dom) {
            var eachModuleData;
            if (hasMshareholder || oIndex == 1) {
                var params = { "type": "m" }
                Company.pageSetting("#tabshareholder", tableSetting, columnDefsSet, params, $dom, 1);

            } else {
                eachModuleData = Company.companyBasicData.allShareholders.ShareHolder ? Company.companyBasicData.allShareholders.ShareHolder : null;
                Company.pageSetting_new("#tabshareholder", tableSetting, eachModuleData, columnDefsSet, null, $dom, 0);
            }
        } else {
            if (hasMshareholder || oIndex == 1) {
                var params = { "type": "m" }
                Company.pageSetting("#tabshareholder", tableSetting, columnDefsSet, params, null, 1);
            } else {
                Company.pageSetting("#tabshareholder", tableSetting, columnDefsSet, null, null, 0);
            }
        }
        $('#tabshareholder').off('click').on('click', '.underline', Company.linkWithCodeEventHandler);
    },
    showFinalBeneficiary: function($dom) {
        //最终受益人
        var tableSetting = {
            interface: 'getbeneficiary',
            moduleName: intl('138180' /* 最终受益人 */ ),
            modelNum: 'beneficiary_num',
            thWidthRadio: ["5%", '35%', '15%', '45%'],
            thName: [intl('138741' /* 序号 */ ), intl('138181' /* 最终受益人名称 */ ), intl('138412' /* 实际持股比例 */ ), intl('138518' /* 股权链 */ )],
            align: [0, 0, 0, 0],
            fields: ["NO.", 'beneficiaryName', 'shareRate', 'shareRoute'],
            notVipTitle: intl('138180' /* 最终受益人 */ ),
            notVipTips: intl('208263'),
        }
        var $container = $dom ? $dom : $('#workspace');
        $container.empty().html(Company.drawTab(tableSetting, "tabRealCtrl", "tbodyRealCtrl", false, $dom));
        $('#showFinalBeneficiary').find('.widget-header').eq(0).append(Company.vipTips); //单项下载

        if (!Company.isVip) {
            Common.notVipModule($($container).find('#tabRealCtrl').empty(), tableSetting.notVipTitle, tableSetting.notVipTips ? tableSetting.notVipTips.replace(/企业套餐/g, 'VIP/SVIP套餐') : '购买VIP/SVIP套餐，即可查看具体信息');
            // 模块本身已经提示了开通信息 隐藏导出按钮
            $('#showFinalBeneficiary').find('.widget-header').find('.singleDownload').hide();
            $('#showFinalBeneficiary').find('.widget-header').find('.export-vip-tips').hide();
            return;
        }

        var columnDefsSet = [{
            "targets": 1,
            "data": 'beneficiaryName',
            "render": function(data, type, full, meta) {
                var shortname = full.simpleName;
                var type = full.type;
                var id = full.beneficiaryId;
                var img = "";
                var count = full.corpNum ? full.corpNum : "";
                if (type == 2) {
                    //                  img = full.entLogo
                    img = full.entLogoV ? full.entLogoV : '';
                } else {
                    img = full.personImg
                }
                var pingParam = '&fromModule=' + buryItemMapping.mappingEntity["showFinalBeneficiary"] + '&fromField=最终受益人名称&opId=' + id; //bury
                return (Common.showCompanyName(type, data, id, img, shortname, count, null, null, null, pingParam)); //企业logo
            }
        }, {
            "targets": 2,
            "data": 'shareRate',
            "render": function(data) { return Common.formatPercent(data) }
        }, {
            "targets": 3,
            "data": 'shareRoute',
            "render": function(data, type, full, meta) {
                var str = '';
                for (var i = 0; i < data.length; i++) {
                    var item = null;
                    var rate = 0;
                    item = data[i];
                    var nameL = item[0]['name'] ? item[0]['name'] : '--';
                    for (var j = 0; j < item.length - 1; j++) { rate = rate ? (rate * item[j].stockShare / 100) : item[j].stockShare; }
                    str += '<span class="td-span-ctrl">' + intl('138431' /* 路径 */ ) + (i + 1) + '（' + intl('138459' /* 占比约 */ ) + Common.formatPercent(rate) + ')</span><br>';
                    var pingParam = '&fromModule=' + buryItemMapping.mappingEntity["showFinalBeneficiary"] + '&fromField=股权连&opId='; //bury
                    if (item[0]['Id']) {
                        var buryParam = pingParam + item[0]['Id']; //bury
                        str += '<span class="td-span-route-left underline wi-secondary-color wi-link-color" data-name="' + nameL + '" data-type="' + item[0]['type'] + '" data-code="' + item[0]['Id'] + '" data-pingParam="' + buryParam + '">' + nameL + '</span>';
                    } else {
                        str += '<span class="td-span-route-left ">' + nameL + '</span>';
                    }
                    for (var j = 0; j < item.length - 1; j++) {
                        var buryParam = pingParam + item[j + 1]['Id']; //bury
                        var nameR = item[j + 1]['name'] ? item[j + 1]['name'] : '--';
                        str += '<span class="td-span-route-right"><b>' + Common.formatPercent(item[j]['stockShare']) + '</b><i></i></span><br>' + '<span class="underline wi-secondary-color wi-link-color" data-name="' + nameL + '" data-type="' + item[j + 1]['type'] + '" data-code="' + item[j + 1]['Id'] + '" data-pingParam="' + buryParam + '">' + nameR + '</span>';
                    }
                    str += '</br>'
                }
                return str;
            }
        }]
        var params = { "companyname": Company.companyName }
        Company.pageSetting("#tabRealCtrl", tableSetting, columnDefsSet, params, $dom);
        $('#tabRealCtrl').off('click').on('click', '.underline', Company.linkWithCodeEventHandler);
    },
    showControllerCompany: function($dom) {
        // 控股企业
        var tableSetting = {
            interface: "getcontrolledcorplist",
            moduleName: intl('138589' /* 控股企业 */ ),
            moreLink: "showControllerCompany",
            modelNum: "foreign_ctrl_num",
            thWidthRadio: ["5%", '28%', '10%', '15%', '40%'],
            thName: [intl('138741' /* 序号 */ ), intl('138677' /* 企业名称 */ ), intl('32098' /* 状态 */ ), intl('138412' /* 实际持股比例 */ ), intl('138518' /* 股权链 */ )],
            align: [0, 0, 0, 0],
            fields: ["NO.", "invest_name", "invest_reg_status", "rate", 'path'],
            notVipTitle: intl('138589' /* 控股企业 */ ),
            notVipTips: intl('208265'),
        }
        var $container = $dom ? $dom : $('#workspace');
        $container.empty().html(Company.drawTab(tableSetting, "tabControllerCompany", "tbodyControllerCompany", false, $dom));
        if (!Company.isVip) {
            Common.notVipModule($($container).find('#tabControllerCompany').empty(), tableSetting.notVipTitle, tableSetting.notVipTips ? tableSetting.notVipTips.replace(/企业套餐/g, 'VIP/SVIP套餐') : '购买VIP/SVIP，即可查看具体信息');
            // 模块本身已经提示了开通信息 隐藏导出按钮
            $('#showControllerCompany').find('.widget-header').find('.singleDownload').hide();
            $('#showControllerCompany').find('.widget-header').find('.export-vip-tips').hide();
            return;
        }
        var columnDefsSet = [{
                "targets": 1,
                "data": 'invest_name',
                "render": function(data, type, full, meta) {
                    var shortname = full.short_name;
                    var type = 2;
                    var id = full.invest_id;
                    //                  var img = full.logo;
                    var img = full.logo_v ? full.logo_v : '';
                    var pingParam = '&fromModule=' + buryItemMapping.mappingEntity["showControllerCompany"] + '&fromField=企业名称&opId=' + id; //bury
                    return (Common.showCompanyName(type, data, id, img, shortname, null, null, null, null, pingParam)); //企业logo//bury
                }
            },
            {
                "targets": 2,
                "data": 'invest_reg_status',
                "render": function(data, type, full, meta) {
                    return Common.formatCont(data)
                }
            },
            {
                "targets": 3,
                "data": 'rate',
                "render": function(data, type, full, meta) {
                    return Common.formatPercent(data)
                }
            },
            {
                "targets": 4,
                "data": 'path',
                "render": function(data, type, full, meta) {
                    var str = '';
                    if (data) {
                        var pathArr = data.split(";")
                        str += '<span class="td-span-route-left underline wi-secondary-color wi-link-color" data-name="' + Company.companyName + '" data-code="' + Company.companyCode + '">' + Company.companyName + '</span>';
                        var pingParam = '&fromModule=' + buryItemMapping.mappingEntity["showControllerCompany"] + '&fromField=股权链'; //bury
                        for (var i = 0; i < pathArr.length; i++) {
                            var item = pathArr[i].split(",");
                            var nameR = item[1] ? item[1] : '--';
                            var ratio = item[2] ? Common.formatPercent(item[2]) : '--';
                            var type = (item[0] && item[0].length > 13) ? "person" : "company";
                            var code = item[0] ? item[0] : "";
                            pingParam += '&opId=' + code;
                            str += '<span class="td-span-route-right"><b>' + ratio + '</b><i></i>' + '<span class="underline wi-secondary-color wi-link-color" data-name="' + nameR + '" data-type="' + type + '" data-code="' + code + '" data-pingParam="' + pingParam + '">' + nameR + '</span></span>';
                        }
                        return str;
                    } else {
                        return "--"
                    }
                }
            }
        ]
        Company.pageSetting("#tabControllerCompany", tableSetting, columnDefsSet, null, $dom);
        $('#tabControllerCompany').off('click').on('click', '.underline', Company.linkWithCodeEventHandler);
    },
    investStatusVal: "", //全部状态
    investRatioVal: "", //全部持股比例
    showDirectInvestment: function($dom, oIndexResult, oValResult, oIndexCause, oValCause, oCount) {
        //直接对外投资
        var tableSetting = {
            interface: "getinvestsearch",
            moduleName: intl('138724' /* 对外投资 */ ),
            moreLink: "showDirectInvestment",
            modelNum: "foreign_invest_num",
            selName: ["investStatusVal", "investRatioVal"],
            aggName: ["aggs_invest_reg_status", "invest_rate_breakdown"],
            thWidthRadio: ["5%", "40%", "20%", "15%", "10%", "10%"],
            thName: [intl('138741' /* 序号 */ ), intl('138677' /* 企业名称 */ ), intl('5529' /* 法定代表人 */ ), intl('138768' /* 注册资本(万元) */ ), intl('138772' /* 登记状态 */ ), intl('138871' /* 持股比例 */ )],
            align: [0, 0, 0, 2, 0, 0],
            fields: ["NO.", "invest_name", "invest_legal_person", "invest_reg_capital", "invest_reg_status", "invest_rate"]
        }
        var $container = $dom ? $dom : $('#workspace');
        $container.empty().html(Company.drawTab(tableSetting, "tabforeigninvest", "tbodyforeigninvest", false, $dom));
        var columnDefsSet = [{
                "targets": 1,
                "data": 'invest_name',
                "render": function(data, type, full, meta) {
                    var type = 2;
                    var shortname = full.corp_short_name;
                    var dataType = full.shareholder_type ? full.shareholder_type : "";
                    var id = full.invest_id;
                    //                  var img = full.invest_img ? full.invest_img : "";
                    var img = full.invest_img_v ? full.invest_img_v : "";
                    var isActCtr = "";
                    if (full.invest_rate && full.invest_rate >= 50) {
                        isActCtr = true;
                    }
                    var pingParam = '&fromModule=' + buryItemMapping.mappingEntity["showDirectInvestment"] + '&fromField=企业名称&opId=' + id; //bury
                    return (Common.showCompanyName(type, data, id, img, shortname, "", "", isActCtr, null, pingParam)); //企业logo
                }
            },
            {
                "targets": 2,
                "data": 'invest_legal_person',
                "render": function(data, type, full, meta) {
                    var type = 1;
                    if (full.invest_legal_person_id && full.invest_legal_person_id.length == 10) {
                        type = 2;
                        var count = full.control_corps;
                        var id = full.invest_legal_person_id;
                        //                      var img = full.invest_legal_person_img ? full.invest_legal_person_img : "";
                        var img = full.invest_legal_person_img_v ? full.invest_legal_person_img_v : "";
                        var shortname = full.corp_short_name ? full.corp_short_name.substring(0, 4) : "";
                        var pingParam = '&fromModule=' + buryItemMapping.mappingEntity["showDirectInvestment"] + '&fromField=法定代表人&opId=' + id; //bury
                        return ('<div class="invest-legal-person">' + Common.showCompanyName(type, data, id, img, shortname, null, null, null, null, pingParam) + '</div>') //企业logo
                    } else {
                        var count = full.control_corps;
                        var id = full.invest_legal_person_id;
                        var img = full.invest_legal_person_img ? full.invest_legal_person_img : "";
                        return (Common.showCompanyName(type, data, id, img, "", count, "", "", true))
                    }

                }
            },
            {
                "targets": 3,
                "data": 'invest_reg_capital',
                "render": function(data, type, full, meta) {
                    var investMoney = (data && data != 'null') ? Common.formatMoney(data, [4, '&nbsp;']) : '--';
                    return investMoney
                }
            },
            {
                "targets": 5,
                "data": 'invest_rate',
                "render": function(data, type, full, meta) {
                    return Common.formatPercent(data)
                }
            }
        ]
        var params = { "companycode": Company.companyCode, "rate": Company.investRatioVal, "status": Company.investStatusVal, "pageSize": 10 };
        Company.pageSetting("#tabforeigninvest", tableSetting, columnDefsSet, params, $dom);
        $('#tabforeigninvest').off('click').on('click', '.underline', Company.linkWithCodeEventHandler);
    },
    showAllInvestment: function() {
        //企业全部投资企业
        var tableSetting = {
            moduleName: intl('222837', '全部投资企业'),
            thWidthRadio: ["5%", "40%", "15%", "20%", "10%", "10%"],
            thName: [intl('138741' /* 序号 */ ), intl('40672', '被投资企业名称'), intl('222786', '实际出资金额（万元）'), intl('222789', '实际出资比例'), intl('222788', '是否控股'), intl('222790', '控制路径图')]
        }
        $('#workspace').empty().html(Company.drawTab(tableSetting));
        var investmentParameter = { "companycode": this.companyCode, "pageSize": 60, "pageindex": 0 }
        myWfcAjax("getallinvestment", investmentParameter, function(data) {
            //企业全部投资企业
            var resData = JSON.parse(data);
            if (resData.ErrorCode == 0 && resData.Data && resData.Data.length > 0) {
                Company.showAllInvestmentTab(resData.Data);
            } else if (resData.ErrorCode == "-101") {
                //如果返回是-101说明数据正在计算，过6秒后重新读接口
                $("#tabContent").html('<tr><td class="tab-nodata" colspan="6">计算中...</td></tr>');
                var timeout = window.setTimeout(function() {
                    Company.secondRequest(investmentParameter)
                }, 6000);
            } else {
                Company.errorFn("#tabContent", 6, "没有找到全部投资企业信息")
            }
        });
    },
    secondRequest: function(param) {
        //企业全部投资企业的二次读取
        myWfcAjax("getallinvestment", param, function(data) {
            var resData = JSON.parse(data);
            if (resData.ErrorCode == 0 && resData.Data && resData.Data.length > 0) {
                Company.showAllInvestmentTab(resData.Data)
            } else {
                Company.errorFn("#tabContent", 6, "没有找到全部投资企业信息")
            }
        })
    },
    showAllInvestmentTab: function(data) {
        //成功取得全部投资企业后显示数据
        var len = data.length;
        var htmlArr = [];
        for (var i = 0; i < data.length; i++) {
            htmlArr.push("<tr><td align='center'>" + (i + 1) + "</td><td><a class='underline wi-secondary-color wi-link-color' target='_blank' href=Company.html?companycode=" + data[i].CompanyCode + ">" + data[i].CompanyName + "</a></td><td align='center'>" + Common.formatMoney(data[i].InvestmentAmount, [, '&nbsp;']) + "</td><td align='center'>" + Common.formatPercent(data[i].ShareholdingRate) + "</td><td align='center'>" + (data[i].IsControl ? "是" : "否") + "</td><td align='center'><a target='_blank' class='show-relation' data-tdlen='6' data-targetcode=" + data[i].CompanyCode + ">详细</a></td></tr>")
        }
        $("#tabContent").html(htmlArr.join(""));
        $('#tabCompany').DataTable({
            "pageLength": 15,
            "ordering": false,
            "info": false,
            "lengthChange": false,
            "searching": false,
            "language": {
                "paginate": {
                    "next": "&gt;",
                    "previous": "&lt;"
                }
            }
        });
    },
    showRelation: function(dom, tdlen) {
        var $main = $(".relation-main");
        if ($main.length >= 1 && $(dom).parents("tr").next("tr").find(".relation-main").length >= 1) {
            $main.parents("tr").remove();
        } else {
            $main.parents("tr").remove();
            $(dom).parents("tr").after("<tr><td colspan='" + tdlen + "'><div id='main' class='relation-main'></div></td></tr>");
            var parameter = { "companycode": $(dom).attr("data-targetcode"), "rootcode": Company.companyCode };
            myWfcAjax("getsuperiors", parameter, function(data) {
                var data = JSON.parse(data);
                if (data.ErrorCode == 0 && data.Data) {
                    // 显示内容
                    root = {};
                    root.Nodes = data.Data.InvestmentStructureDto;
                    root.Links = data.Data.InvestmentLinkDto;
                    Company.drawRelation(root);
                } else {
                    Company.noRelationData();
                }
            }, function() {
                Company.noRelationData();
            });
        }
    },
    showController: function(dom, tdlen, thisRatio, controlname) {
        //展开疑似控制人控制路径
        var $main = $(".relation-main");
        if ($main.length >= 1 && $(dom).parents("tr").next("tr").find(".relation-main").length >= 1) {
            $main.parents("tr").remove();
        } else {
            $dom = $(dom);
            $main.parents("tr").remove();
            $dom.parents("tr").after("<tr><td colspan='" + tdlen + "'><div id='main' class='relation-main'></div></td></tr>");
            param = {
                companyCode: Company.companyCode,
                rootName: Company.companyName,
                secondCode: $dom.attr("data-targetcode") || '-1',
                controllername: $dom.attr("data-name")
            };
            myWfcAjax("getactualcontrollerroute", param, function(data) {
                var data = JSON.parse(data);
                if (data.ErrorCode == 0 && data.Data) {
                    // 显示内容
                    root = data.Data;
                    Company.drawActualcontrollerroute(root, param, thisRatio, controlname);
                } else {
                    Company.noRelationData();
                }
            }, function() {
                Company.noRelationData();
            });
        }
    },
    drawActualcontrollerroute: function(root, param, thisRatio, controlname) {
        var tempLength = 0;
        var totalLevel = 0;

        function getNodeLocation(nodes) {
            var distance = 250;
            var xDistance = 220;

            for (var i = 0; i < nodes.length; i++) {
                if (nodes[i].Grade > totalLevel) {
                    totalLevel = nodes[i].Grade;
                }
            }

            for (var i = 0; i < nodes.length; i++) {
                nodes[i].y = 130 + distance * (totalLevel - nodes[i].Grade)
            }

            for (var i = 0; i < totalLevel; i++) {
                var temp = [];
                for (var j = 0; j < nodes.length; j++) {
                    if (nodes[j].Grade == i + 1) {

                        temp.push(nodes[j]);
                    }
                }
                if (i == totalLevel - 1) {
                    var tempArr = temp[0];
                    temp[0] = temp[parseInt(temp.length / 2)];
                    temp[parseInt(temp.length / 2)] = tempArr
                }
                for (var k = 0; k < temp.length; k++) {
                    temp[k].x = (width - (temp.length - 1) * xDistance) / 2 + xDistance * k;
                }

                if (temp.length >= tempLength) {
                    tempLength = temp.length;
                }

            }

        }

        function zoomed() {
            // container.attr("transform", d3.event.transform);
            container.attr("transform", "translate(" + d3.event.translate + ")scale(" + d3.event.scale + ")");
        }

        function dragged(d) {
            var lines = svgLinks.selectAll("path");
            lines.attr("d", function(d) {
                var dx = d.target.x - d.source.x,
                    dy = d.target.y - d.source.y,
                    dr = Math.sqrt(dx * dx + dy * dy),
                    //theta = Math.atan2(dy, dx) + Math.PI / 7.85,
                    theta = Math.atan2(dy, dx) + Math.PI / 720,
                    d90 = Math.PI / 2,
                    dtxs = d.target.x - (d.target.r) * Math.cos(theta),
                    dtys = d.target.y - (d.target.r) * Math.sin(theta);
                return "M" + d.source.x + "," + d.source.y
                    //+ "A" + dr + "," + dr + " 0 0 1," + d.target.x + "," + d.target.y + "A" + dr + "," + dr + " 0 0 0," + d.source.x + "," + d.source.y
                    +
                    "L" + d.target.x + "," + d.target.y +
                    "M" + dtxs + "," + dtys + "l" + (3.5 * Math.cos(d90 - theta) - 10 * Math.cos(theta)) + "," + (-3.5 * Math.sin(d90 - theta) - 10 * Math.sin(theta)) + "L" + (dtxs - 3.5 * Math.cos(d90 - theta) - 10 * Math.cos(theta)) + "," + (dtys + 3.5 * Math.sin(d90 - theta) - 10 * Math.sin(theta)) + "z";
            });

            //更新连接线上文字的位置
            edges_text.attr("x", function(d) {
                return (d.source.x + d.target.x) / 2 - d.Ratio.length / 2 * 10;
            });

            edges_text.attr("y", function(d) {
                return (d.source.y + d.target.y) / 2 - 3;
            });

            edges_text.attr("transform", function(d) {
                var x = (d.source.x + d.target.x) / 2;
                var y = (d.source.y + d.target.y) / 2;
                var angle = 0;
                if (d.target.x - d.source.x == 0) {
                    if (d.target.y > d.source.y) {
                        angle = 90;
                    } else {
                        angle = -90
                    }
                } else {
                    angle = Math.atan((d.target.y - d.source.y) / (d.target.x - d.source.x)) * 180 / Math.PI;
                }
                return "rotate(" + angle + " " + x + "," + y + ")";
            });
            edges_rect.attr("transform", function(d) {
                var x = (d.source.x + d.target.x) / 2;
                var y = (d.source.y + d.target.y) / 2;
                var angle = 0;
                if (d.target.x - d.source.x == 0) {
                    if (d.target.y > d.source.y) {
                        angle = 90;
                    } else {
                        angle = -90
                    }
                } else {
                    angle = Math.atan((d.target.y - d.source.y) / (d.target.x - d.source.x)) * 180 / Math.PI;
                }
                return "rotate(" + angle + " " + x + "," + y + ")";
            });

            // d3.select(this).select("circle").attr("cx", d.x = d3.event.x).attr("cy", d.y = d3.event.y);
            d3.select(this).attr("transform", function(d) {
                d.x = d3.event.x;
                d.y = d3.event.y;
                return "translate(" + d3.event.x + "," + d3.event.y + ")";
            });
        }
        // var width = document.querySelector('#main').clientWidth;
        // var height = document.querySelector('#main').clientHeight > 0 ? document.querySelector('#main').clientHeight : 640;

        var width = document.querySelector('#main').clientWidth;
        var height = 670;

        if (!root.NodeList) {
            root.NodeList = [];
        }
        if (!root.RelationList) {
            root.RelationList = [];
        }

        root.NodeList.push({
            NodeId: param.companyCode,
            NodeName: param.rootName
        });
        // root.NodeList.push({
        //     NodeId: param.secondCode,
        //     NodeName: param.controllername
        // });
        if (root.RelationList.length == 0) {
            //如果没有数据的时候，把两个公司直接画线
            root.RelationList.push({
                OrigionId: param.secondCode,
                TargetId: param.companyCode
            });
        }
        var nodes = root.NodeList;
        var links = root.RelationList;

        for (var i = 0; i < links.length; i++) {
            if (links[i].Ratio) {
                links[i].Ratio += '';
            } else {
                //如果没有数据的时候，画线以后把父层表格
                if (thisRatio && links.length == 1) {
                    links[i].Ratio = thisRatio;
                } else {
                    links[i].Ratio = '0';
                }
            }
            if (!links[i].OrigionId) {
                links[i].OrigionId = param.secondCode;
            }
            if (!links[i].TargetId) {
                links[i].TargetId = param.companyCode;
            }
            if (links[i].Ratio.indexOf('.') > -1) {
                links[i].Ratio = (parseFloat(links[i].Ratio)).toFixed(2);
            }
        }

        for (var i = 0; i < root.NodeList.length; i++) {
            // 5 = 2+3, 保证其至少大于1
            root.NodeList[i].Grade = 2 + Math.floor(i / 3);
            // 目标公司
            if (root.NodeList[i].NodeId == param.companyCode) {
                root.NodeList[i].Grade = 1;
                root.NodeList[i].isRoot = true;
                // 控制人
            } else if (root.NodeList[i].NodeId == param.secondCode) {
                root.NodeList[i].isCtrl = true;
                root.NodeList[i].Grade = 1;
            }
            if (/^[\u4e00-\u9fa5]/.test(root.NodeList[i].NodeName)) { //中文名称
                if (root.NodeList[i].NodeName.length > 5) {
                    var depth = root.NodeList[i].NodeName.length / 5;
                    root.NodeList[i].r = ((Math.ceil(depth + 2) * 17) / 2) > 39 ? (Math.ceil(depth + 2) * 17) / 2 : 39;
                } else {
                    root.NodeList[i].r = ((root.NodeList[i].NodeName.length * 17) / 2) > 39 ? ((root.NodeList[i].NodeName.length * 17) / 2) : 39;
                }
            } else { //英文名称
                var enArr = root.NodeList[i].NodeName.split(' ');
                var maxLength = Math.max(enArr[0].length, enArr.length); //取单词最大长度或者行数最大作为计算半径的基础
                for (var el = 0; el < enArr.length; el++) {
                    maxLength = Math.max(maxLength, enArr[el].length);
                }
                root.NodeList[i].r = ((maxLength * 10) / 2) > 39 ? ((maxLength * 10) / 2) : 39;
            }
        }

        // 计算节点位置
        getNodeLocation(nodes);

        for (var i = 0; i < links.length; i++) {
            for (var j = 0; j < nodes.length; j++) {
                if (links[i].OrigionId == nodes[j].NodeId) {
                    links[i].source = nodes[j];
                }

                if (links[i].TargetId == nodes[j].NodeId) {
                    links[i].target = nodes[j];
                }
            }

        }
        document.querySelector('#main').innerHTML = '';
        var zoom = d3.behavior.zoom()
            .scaleExtent([1, 2])
            .on("zoom", zoomed);
        var svg = d3.select("#main").append("svg").attr("xmlns", "http://www.w3.org/2000/svg")
            .attr("width", width)
            .attr("height", height)
            .append("g");
        var rect = svg.append("rect")
            .attr("width", width)
            .attr("height", height)
            .style("fill", "transparent")
            .call(zoom);
        var container = svg.append("g");
        var svgLinks = container.selectAll(".link").
        data(links)
            .enter()
            .append("g");
        var svgNodes = container.selectAll(".node")
            .data(nodes)
            .enter()
            .append("g")
            .attr("transform", function(d) {
                return "translate(" + d.x + "," + d.y + ")";
            })
            .call(d3.behavior.drag()
                .on("drag", dragged)
            )
            .on("click", function(d) {
                // TODO 点击事件
            });

        svgLinks.append("path")
            .style("fill", "#aaa")
            .style("stroke", "#aaa")
            .style("stroke-opacity", ".5")
            .attr("d", function(d) {
                var dx = d.target.x - d.source.x,
                    dy = d.target.y - d.source.y,
                    dr = Math.sqrt(dx * dx + dy * dy),
                    theta = Math.atan2(dy, dx) + Math.PI / 720,
                    d90 = Math.PI / 2,
                    dtxs = d.target.x - (d.target.r) * Math.cos(theta),
                    dtys = d.target.y - (d.target.r) * Math.sin(theta);
                return "M" + d.source.x + "," + d.source.y +
                    "L" + d.target.x + "," + d.target.y +
                    "M" + dtxs + "," + dtys + "l" + (3.5 * Math.cos(d90 - theta) - 10 * Math.cos(theta)) + "," + (-3.5 * Math.sin(d90 - theta) - 10 * Math.sin(theta)) + "L" + (dtxs - 3.5 * Math.cos(d90 - theta) - 10 * Math.cos(theta)) + "," + (dtys + 3.5 * Math.sin(d90 - theta) - 10 * Math.sin(theta)) + "z";
            });


        svgLinks.each(function(d) {
            d3.select(this).append("text")
                .attr("class", "linetext")
                .attr("fill", function(d) {
                    if (d.Ratio == '100') {
                        return "#3ea6ff";
                    } else {
                        return "#49ceb0";
                    }
                })
                .attr("fill-opacity", 1)
                .text(function(d) {
                    if (d.Ratio && d.Ratio != '?') {
                        return d.Ratio * 100 / 100 + '%';
                    } else {
                        return '';
                    }
                });
        });

        initLocation();

        var edges_text = svgLinks.selectAll(".linetext");
        var edges_rect = svgLinks.selectAll(".linerect");
        edges_text.attr("font-size", "12px");
        edges_text.attr("x", function(d) {
            if (d.source.x > d.target.x) {
                return (d.source.x + d.target.x - (d.Ratio.length) * 10) / 2;
            }
            return (d.source.x + d.target.x) / 2 - d.Ratio.length / 2 * 10;
        });

        edges_text.attr("y", function(d) {
            if (d.source.y > d.target.y) {
                return (d.source.y + d.target.y) / 2 - 3;
            }
            return (d.source.y + d.target.y) / 2 + 3;
        });


        edges_text.attr("transform", function(d) {
            var x = (d.source.x + d.target.x) / 2;
            var y = (d.source.y + d.target.y) / 2;
            var angle = 0;
            if (d.target.x - d.source.x == 0) {
                if (d.target.y > d.source.y) {
                    angle = 90;
                } else {
                    angle = -90
                }
            } else {
                angle = Math.atan((d.target.y - d.source.y) / (d.target.x - d.source.x)) * 180 / Math.PI;
            }
            return "rotate(" + angle + " " + x + "," + y + ")";
        });

        svgNodes.append("circle")
            .attr("r", function(d) {
                return d.r;
            })
            .attr("style", "cursor: pointer;")
            .attr("fill", function(d) {
                if (d.isRoot) {
                    return "#3ea6ff";
                }
                if (d.isCtrl || d.NodeName == controlname) {
                    return "#49ceb0";
                } else {
                    return "#99CCCC";
                }

            });
        svgNodes.each(function(d, i) {
            if (/^[\u4e00-\u9fa5]/.test(d.NodeName)) {
                var lines = Math.ceil(d.NodeName.length / 5);
                var text = "";
                //          	var dx = 0;
                var dy = 0;
                for (var line = 0; line < lines; line++) {
                    if (d.CategoryId == 2) {
                        //                  	dx = 0 - d.NodeName.length * 5;
                        dy = 3;
                        d3.select(this)
                            .append("text")
                            .attr("style", "cursor: pointer;")
                            //                      	.attr("dx", dx - 2)
                            .attr("dy", dy)
                            .attr("fill", "#fff")
                            .attr("font-size", "12px")
                            .text(d.NodeName)
                            .style("text-anchor", "middle");
                    } else if (lines == 1) {
                        //	                    dx = -13-(d.NodeName.length-2)*5;
                        dy = 5;

                        d3.select(this)
                            .append("text")
                            .attr("style", "cursor: pointer;")
                            //                      	.attr("dx", dx)
                            .attr("dy", dy)
                            .attr("font-size", "12px")
                            .attr("fill", "#fff")
                            .text(d.NodeName.substr(line * 5, 5))
                            .style("text-anchor", "middle");
                    } else {
                        //              		dx = -10 * 2.5;
                        //                  	if (line == (lines - 1)) {
                        //                      	dx = 0 - 5 * (d.NodeName.substr(line * 5, 5).length);
                        //                  	}
                        dy = 13 * line - lines * 2.5;

                        d3.select(this)
                            .append("text")
                            .attr("style", "cursor: pointer;")
                            //                      	.attr("dx", dx - 4)
                            .attr("dy", dy)
                            .attr("font-size", "12px")
                            .attr("fill", "#fff")
                            .text(d.NodeName.substr(line * 5, 5))
                            .style("text-anchor", "middle");
                    }

                }
            } else {
                var lineArr = d.NodeName.split(' ');
                var lineNum = d.NodeName.split(' ').length;
                if (d.NodeName.split(' ').length % 2 == 0) {
                    var dyy = -2.5;
                } else {
                    var dyy = 5;
                }
                var tent = Math.ceil(lineNum / 2);
                var tentArr = [];
                var tentStr = 0;
                for (var tentl = lineNum; tentl > 0; tentl--) {
                    tentStr = tent - tentl;
                    tentArr.push(tentStr);
                }
                var text = "";
                //          	var dx = 0;
                var dy = 5;
                for (var tl = 0; tl < lineNum; tl++) {
                    //          		dx=0-Math.ceil(lineArr[tl].length / 2)*6;
                    dy = dyy + tentArr[tl] * 11;

                    d3.select(this)
                        .append("text")
                        .attr("style", "cursor: pointer;")
                        //                      .attr("dx", dx)
                        .attr("dy", dy)
                        .attr("font-size", "12px")
                        .attr("fill", "#fff")
                        .text(lineArr[tl])
                        .style("text-anchor", "middle");
                }
            }
        });

        function initLocation() {
            zoom.translate([0, 0]);
            zoom.scale(1);
            container.attr("transform", "translate(" + (0) + "," + 0 + ")scale(" + zoom.scale() + ")");
        }
    },
    noRelationData: function() {
        $("#load_data").hide();
        $("#main").html('<div class="no-data">暂无数据</div>')
    },
    businessScope: function($dom) {
        //主营构成
        var tableSetting = {
            interface: "getmainbusinessstruct",
            moduleName: intl('138753' /* 主营构成 */ ),
            moreLink: "businessScope",
            modelNum: "mainbusinessstruct_num",
            thWidthRadio: ["5%", "30%", "35%", "25%"],
            thName: [intl('138741' /* 序号 */ ), '', intl('138754' /* 产品 */ ), intl('138762' /* 占比(%) */ )],
            align: [1, 1, 0, 2],
            // TODO 此处添加一个"EMPTY"字段占位，用于均分宽度
            fields: ["NO.", 'EMPTY', "businessItemAfterCorrecting", "incomeProportion"]
        }
        var $container = $dom ? $dom : $('#workspace');
        $container.empty().html(Company.drawTab(tableSetting, "tabBussinessScope", "tbodyBussinessScope", false, $dom));
        var parameter = { "itemType": "产品" }
        var columnDefsSet = null;
        if ($dom) {
            var eachModuleData = Company.companyBussinessInfoData.MainBusinessStruct ? Company.companyBussinessInfoData.MainBusinessStruct : null;
            Company.pageSetting_new("#tabBussinessScope", tableSetting, eachModuleData, null, parameter, $dom);
        } else {
            Company.pageSetting("#tabBussinessScope", tableSetting, columnDefsSet, parameter, $dom);
        }
    },
    drawManageTab: function(data) {
        if (data && data.length > 0) {
            var htmlArr = [];
            for (var i = 0; i < data.length; i++) {
                htmlArr.push('<tr><td align="center">' + (i + 1) + '</td><td align="center">' + data[i].businessItemAfterCorrecting + '</td><td align="center">' + Common.formatPercent(data[i].incomeProportion) + '</td></tr>')
            }
            $("#tbodyBussinessScope").html(htmlArr.join(""));
        } else {
            $("#tbodyBussinessScope").html('<tr><td colspan="3"><div class="no-data">没有找到主营构成信息</div></td></tr>')
        }
    },
    drawRelation: function(root) {
        //绘制全部投资
        drawMap(root);

        function nozoom() {
            d3.event.preventDefault();
        }

        function drawMap(root) {
            var width = document.querySelector('#main').clientWidth;
            var height = 640;
            document.querySelector('#main').innerHTML = '';
            svg = d3.select("#main").append("svg").attr("xmlns", "http://www.w3.org/2000/svg").attr({
                "width": width,
                "height": 670
            });
            svg.empty();
            document.querySelector('#main').style.width = width + 'px';
            d3.select('#main svg').attr('width', width);
            d3.select('#main svg').attr('height', height);
            container = svg.append("g");
            zoom = d3.behavior.zoom()
                .scaleExtent([1, 3])
                .on("zoom", zoomed);
            svg.call(zoom);

            function zoomed() {
                container.attr("transform", "translate(" + d3.event.translate + ")scale(" + d3.event.scale + ")");
            }

            function initLocation() {
                zoom.translate([1, 1]);
                zoom.scale(1);
                container.attr("transform", "translate(" + zoom.translate() + ")scale(" + zoom.scale() + ")");
            }
            initLocation();
            var defs = container.append("defs");
            var arrowMarker = defs.append("marker")
                .attr("id", "arrow")
                .attr("markerUnits", "strokeWidth")
                .attr("markerWidth", "12")
                .attr("markerHeight", "12")
                .attr("viewBox", "0 0 12 12")
                .attr("refX", "50")
                .attr("refY", "6")
                .attr("orient", "auto");
            var arrowMarker2 = defs.append("marker")
                .attr("id", "arrow2")
                .attr("markerUnits", "strokeWidth")
                .attr("markerWidth", "12")
                .attr("markerHeight", "12")
                .attr("viewBox", "0 0 12 12")
                .attr("refX", "85")
                .attr("refY", "6")
                .attr("orient", "auto");
            var arrow_path = "M2,2 L10,6 L2,10 L6,6 L2,2";
            arrowMarker.append("path")
                .attr("d", arrow_path)
                .attr("fill", "#000");
            arrowMarker2.append("path")
                .attr("d", arrow_path)
                .attr("fill", "#000");
            var copNum = 0;
            var copFlag = 0;
            for (var i = 0; i < root.Nodes.length; i++) {
                if (root.Nodes[i].Category == 2) {
                    root.Nodes[i].level = 0;
                } else {
                    copNum++;
                }
            }
            for (var i = 0; i < root.Nodes.length; i++) {
                if (root.Nodes[i].Category == 1) {
                    if (copFlag < copNum / 2) {
                        root.Nodes[i].level = 1;
                        copFlag++;
                    } else {
                        root.Nodes[i].level = 2;
                    }
                }
            }
            var nodes = [];
            var tempNodesIndex = [];
            for (var i = 0; i < root.Nodes.length; i++) {
                var tempR = 40;
                if (root.Nodes[i].Category == 1) {
                    tempR = 48;
                } else {
                    tempR = 40;
                }
                var nodeName = "";
                if (root.Nodes[i].CompanyName == "" && root.Nodes[i].CompanyCode == Company.companyCode) {
                    nodeName = Company.companyName;
                } else {
                    nodeName = root.Nodes[i].CompanyName;
                }
                nodes.push({
                    "nodeId": root.Nodes[i].SysNo,
                    "keyNo": root.Nodes[i].CompanyCode,
                    "name": nodeName,
                    "category": root.Nodes[i].SysNo,
                    "shortName": root.Nodes[i].CompanyName,
                    "r": tempR,
                    "level": root.Nodes[i].level
                });
                tempNodesIndex.push(root.Nodes[i].SysNo);
            }
            tempNodesIndex.reverse();
            nodes.reverse();
            var links = [];
            for (var i = 0; i < root.Links.length; i++) {
                if (tempNodesIndex.indexOf(root.Links[i].Source) > -1 && tempNodesIndex.indexOf(root.Links[i].Target) > -1) {
                    links.push({
                        "source": tempNodesIndex.indexOf(root.Links[i].Source),
                        "target": tempNodesIndex.indexOf(root.Links[i].Target),
                        "relation": root.Links[i].SuperiorRateStr.toString()
                    });
                }
            }
            var force = d3.layout.force()
                .nodes(nodes)
                .links(links)
                .size([width, height])
                .linkDistance(200)
                .charge(-1500)
                .start();

            var edges_line = container.selectAll("line")
                .data(links)
                .enter()
                .append("path")
                .style("fill", "#aaa")
                .style("stroke", "#aaa")
                .style("stroke-opacity", ".5")

            var edges_text = container.selectAll(".linetext")
                .data(links)
                .enter()
                .append("text")
                .style("font-size", "12px")
                .attr("fill", "#bbb")
                .text(function(d) {
                    return d.relation;
                });

            var drag = force.drag()
                .on("dragstart", function(d, i) {
                    d.fixed = true; //拖拽开始后设定被拖拽对象为固定
                    d3.event.sourceEvent.stopPropagation();
                });

            var nodes_circle = container.selectAll("circle")
                .data(nodes)
                .enter()
                .append("circle")
                .attr("class", "node")
                .attr("r", function(d) {
                    return d.r + 5;
                })
                .style("fill", function(d, i) {
                    if (d.category == 1) {
                        return "#7187D9";
                    } else {
                        return "#18b470";
                    }
                })
                .style("cursor", "pointer")
                .on("mouseover", function(d) {
                    if (d.category == 1) {
                        this.style.fill = "#5d67c0";
                    } else {
                        this.style.fill = "#209b7f";
                    }

                    mouseOver(d);
                })
                .on("mouseout", function(d) {
                    if (d.category == 1) {
                        this.style.fill = "#7187D9";
                    } else {
                        this.style.fill = "#18b470";
                    }

                    mouseOut(d);
                })
                .on("mousemove", function() {
                    nozoom();
                })
                .on("touchstart", function(d) {
                    if (d.category == 1) {
                        this.style.fill = "#5d67c0";
                    } else {
                        this.style.fill = "#209b7f";
                    }

                    mouseOver(d);
                })
                .on("touchend", function(d) {
                    if (d.category == 1) {
                        this.style.fill = "#7187D9";
                    } else {
                        this.style.fill = "#18b470";
                    }

                    mouseOut(d);
                })
                .on("click", function(d, i) {
                    if (d3.event.defaultPrevented) return; // ignore drag
                    if (d.category == 1 && d.keyNo != null) {
                        getCompanyInfo(d.keyNo, 0);
                    } else {
                        $.ajax({
                            url: "/OrgCompany/ToPersonView",
                            type: 'GET',
                            data: {
                                "keyNo": "",
                                "personName": d.name
                            },
                            success: function(data) {
                                document.getElementById("alink").href = data;
                                document.getElementById("alink").click();
                            },
                            async: false
                        });
                    }
                })
                .call(drag);
            var nodes_text = container.selectAll(".nodetext")
                .data(nodes)
                .enter()
                .append("g")
                .style("font-size", "12px")
                .style("fill", "#fff")
                .attr("keyNo", function(d) {
                    return d.keyNo;
                })
                .style("cursor", "pointer")
                .on("mouseover", function(t) {
                    nodes_circle.style("fill", function(d) {
                        if (t.index == d.index) {
                            if (d.category == 1) {
                                return "#5d67c0";
                            } else {
                                return "#209b7f";
                            }
                        } else {
                            if (d.category == 1) {
                                return "#7187D9";
                            } else {
                                return "#18b470";
                            }
                        }
                    });
                    mouseOver(t);
                })
                .on("mouseout", function(d) {
                    nodes_circle.style("fill", function(d) {
                        if (d.category == 1) {
                            return "#7187D9";
                        } else {
                            return "#18b470";
                        }
                    });
                    mouseOut(d);
                })
                .on("touchstart", function(d) {
                    mouseOver(d);
                })
                .on("touchend", function(d) {
                    mouseOut(d);
                })
                .on("mousemove", function() {
                    nozoom();
                })
                .on("click", function(d, i) {
                    if (d3.event.defaultPrevented) return;
                    if (d.category == 1 && d.keyNo != null) {
                        getCompanyInfo(d.keyNo, 0);
                    } else {
                        $.ajax({
                            url: "/OrgCompany/ToPersonView",
                            type: 'GET',
                            data: {
                                "keyNo": "",
                                "personName": d.name
                            },
                            //dataType: 'JSON',
                            success: function(data) {
                                document.getElementById("alink").href = data;
                                document.getElementById("alink").click();
                            },
                            async: false
                        });
                    }
                })
                .call(drag);

            nodes_text.each(function(d, i) {
                var lines = Math.ceil(d.name.length / 5);
                var text = "";
                var dx = 0;
                var dy = 0;
                for (var line = 0; line < lines; line++) {
                    if (d.category == 2) {
                        dx = 0 - d.name.length * 6;
                        dy = 3;
                        d3.select(this).append("text").attr("dx", dx).attr("dy", dy).text(d.name);
                    } else {
                        dx = -12 * 2.3;
                        if (line == (lines - 1)) {
                            dx = 0 - 6 * (d.name.substr(line * 5, 5).length);
                        }
                        dy = 14 * line - lines * 2.3;
                        d3.select(this).append("text").attr("dx", dx).attr("dy", dy).text(d.name.substr(line * 5, 5));
                    }
                }
            });

            function mouseOver(d) {
                edges_line.each(function(line) {
                    if (line.source.nodeId == d.nodeId || line.target.nodeId == d.nodeId) {
                        d3.select(this).style("stroke", "#128bed").style("fill", "#128bed");
                    }
                });

                edges_text.each(function(line) {
                    if (line.source.nodeId == d.nodeId || line.target.nodeId == d.nodeId) {
                        d3.select(this).style("fill", "#128bed");
                    }
                });
            }

            function mouseOut(d) {
                edges_line.each(function(line) {
                    if (line.source.nodeId == d.nodeId || line.target.nodeId == d.nodeId) {
                        d3.select(this).style("stroke", "#aaa").style("fill", "#aaa");
                    }
                });

                edges_text.each(function(line) {
                    if (line.source.nodeId == d.nodeId || line.target.nodeId == d.nodeId) {
                        d3.select(this).style("fill", "#bbb");
                    }
                });
            }
            force.on("tick", function() {
                //限制结点的边界
                nodes.forEach(function(d, i) {
                    d.x = d.x < d.r ? d.r : d.x;
                    d.x = d.x > width - d.r ? width - d.r : d.x;
                    d.y = d.y < d.r ? d.r : d.y;
                    d.y = d.y > height - d.r ? height - d.r : d.y;
                });
                edges_line.attr("d", function(d) {
                    var dx = d.target.x - d.source.x;
                    var dy = d.target.y - d.source.y;
                    var dr = Math.sqrt(dx * dx + dy * dy);
                    //theta = Math.atan2(dy, dx) + Math.PI / 7.85,
                    var theta = Math.atan2(dy, dx) + Math.PI / 720;
                    var d90 = Math.PI / 2;
                    var dtxs = d.target.x - 42 * Math.cos(theta);
                    var dtys = d.target.y - 42 * Math.sin(theta);
                    return "M" + d.source.x + "," + d.source.y
                        //+ "A" + dr + "," + dr + " 0 0 1," + d.target.x + "," + d.target.y + "A" + dr + "," + dr + " 0 0 0," + d.source.x + "," + d.source.y
                        +
                        "L" + d.target.x + "," + d.target.y +
                        "M" + dtxs + "," + dtys + "l" + (3.5 * Math.cos(d90 - theta) - 10 * Math.cos(theta)) + "," + (-3.5 * Math.sin(d90 - theta) - 10 * Math.sin(theta)) + "L" + (dtxs - 3.5 * Math.cos(d90 - theta) - 10 * Math.cos(theta)) + "," + (dtys + 3.5 * Math.sin(d90 - theta) - 10 * Math.sin(theta)) + "z";
                });
                //更新连接线上文字的位置
                edges_text.attr("x", function(d) {
                    return (d.source.x + d.target.x) / 2 - d.relation.length / 2 * 10;
                });
                edges_text.attr("y", function(d) {
                    return (d.source.y + d.target.y) / 2 - 5;
                });
                edges_text.attr("transform", function(d) {
                        var x = (d.source.x + d.target.x) / 2;
                        var y = (d.source.y + d.target.y) / 2;
                        var angle = 0;
                        if (d.target.x - d.source.x == 0) {
                            if (d.target.y > d.source.y) {
                                angle = 90;
                            } else {
                                angle = -90
                            }
                        } else {
                            angle = Math.atan((d.target.y - d.source.y) / (d.target.x - d.source.x)) * 180 / Math.PI;
                        }
                        return "rotate(" + angle + " " + x + "," + y + ")";
                    })
                    //更新结点图片和文字
                nodes_circle.attr("cx", function(d) {
                    return d.x;
                });
                nodes_circle.attr("cy", function(d) {
                    return d.y;
                });

                nodes_text.attr("x", function(d) {
                    d3.select(this).selectAll("text").attr("x", d.x);
                    return d.x
                });
                nodes_text.attr("y", function(d) {
                    d3.select(this).selectAll("text").attr("y", d.y);
                    return d.y;
                });
            });
        }
    },
    errorFn: function(dom, len, msg) {
        $(dom).html('<tr><td class="tab-nodata" colspan=' + len + '>暂无数据</td></tr>');
    },
    requestSuspectedControl: function($dom) {
        //请求疑似实际控制人数据
        var tableSetting = {
            modelNum: "act_controller_num",
            moduleName: intl('138448' /* 疑似实际控制人 */ ),
            thWidthRadio: ["40%", "20%", "20%", "20%"],
            thName: [intl('29979' /* 名称 */ ), intl('30034', '类型'), intl('222789', '实际出资比例'), intl('222790', '控制路径图')],
        }
        var $container = $dom ? $dom : $('#workspace');
        $container.empty().html(Company.drawTab(tableSetting, "tableSuspectedControl", "tbodySuspectedControl", false, null));
        var suspectedControlParam = { "companyid": Company.companyId, "companycode": Company.companyCode, "pageSize": 10, "pageNo": 0 }
        myWfcAjax("getactcontroinfo", suspectedControlParam, function(data) {
            //疑似实际控制人请求数据
            var resData = JSON.parse(data);
            if (resData.ErrorCode == 0 && resData.Data && resData.Data.length > 0 && resData.Data[0].ActControName) {
                Company.showSuspectedControl(resData.Data)
            } else {
                Company.errorFn("#tbodySuspectedControl", 7, "没有找到疑似实际控制人信息");
            }
        });
    },
    showSuspectedType: function(num) {
        if (num == 1) {
            return "自然人";
        } else if (num == 2) {
            return "非自然人";
        } else {
            return "";
        }
    },
    showSuspectedControl: function(data) {
        //疑似实际控制人
        var len = data.length;
        var htmlArr = [];
        var id = ""; //通过这个疑似实际控制人id去读取疑似实际控制人全部投资企业，如果为空，则显示无数据。
        for (var i = 0; i < len; i++) {
            htmlArr.push("<tr><td align='center'>" + (data[i].ActControName ? data[i].ActControName : '') + "</td><td align='center'>" + Company.showSuspectedType(data[i].ActControType) + "</td><td align='center'>" + (data[i].ActInvestRate ? Common.formatPercent(data[i].ActInvestRate) : '') + "</td><td align='center'><a target='_blank' data-tdlen='7' data-radio=" + (data[i].ActInvestRate ? data[i].ActInvestRate : 0) + " class='show-controller' data-type=" + data[i].ActControType + " data-name=" + data[i].ActControName + " data-targetcode=" + data[i].ActControId + ">详细</a></td></tr>")
            id = data[i].ActControId;
        }
        $("#tbodySuspectedControl").html(htmlArr.join(""));
    },
    showBond: function($dom, index) {
        //债券信息
        var tableSetting = [{
            fn: "showBond",
            interface: "getsharedbondsinfo",
            moduleName: intl('39463' /*债券信息*/ ),
            tabChange: {
                type: [intl('138664' /* 发行债券 */ ), intl('138839' /* 主体评级 */ )],
                typeName: "type",
                typeBasicNum: ["sharedbonds_num", "cbrcreditratingreport_num"]
            },
            moreLink: "showBond",
            modelNum: "sharedbonds_num",
            thWidthRadio: ["5%", "13%", "19%", "19%", "10%", "14%", "10%", "10%"],
            thName: [intl('138741' /* 序号 */ ), intl('138892' /* 债券简称 */ ), intl('138815' /* 发行规模(亿元) */ ), intl('138816' /* 当前余额(亿元) */ ), intl('30690' /* 票面利率 */ ), intl('138605' /* 债项/主体评级 */ ), intl('138894' /* 发行日期 */ ), intl('138895' /* 到期日期 */ )],
            align: [0, 0, 2, 2, 2, 0, 0, 0],
            fields: ["NO.", "secName", "realPublishNumber", "currentBalance", "interestRateForTicket", "credit", "interestDate", "dueDate"],
            notVipTitle: intl('39463' /*债券信息*/ ),
            notVipTips: intl('224199'),
        }, {
            fn: "showBond",
            interface: "getratingreportinfo",
            moduleName: intl('39463' /*债券信息*/ ),
            moreLink: "researchReport02",
            modelNum: "cbrcreditratingreport_num",
            thWidthRadio: ["5%", "30%", "35%", "30%"],
            thName: [intl('138741' /* 序号 */ ), intl('31013' /* 信用评级 */ ), intl('31987' /* 评级机构 */ ), intl('138908' /* 发布日期 */ )],
            align: [0, 0, 0, 0],
            fields: ["NO.", "creditRating", "ratingAgencyName", "issueDate|formatTime"],
            notVipTitle: intl('39463' /*债券信息*/ ),
            notVipTips: intl('224199'),
        }]
        var initIndex = index ? index : "0";
        if (initIndex == 0) {
            for (var i = 0; i < tableSetting.length; i++) {
                var thisBasicNum = tableSetting[0].tabChange.typeBasicNum[i];
                if (thisBasicNum && Company.basicNum[thisBasicNum] && Company.basicNum[thisBasicNum] != 0) {
                    break;
                } else {
                    initIndex++;
                    if (initIndex >= tableSetting.length) {
                        initIndex = 0;
                    }
                }
            }
        }
        var $container = $dom ? $dom : $('#workspace');
        $container.empty().html(Company.drawTab(tableSetting, "tabsharedbondsinfo", "tbodysharedbondsinfo", null, $dom, initIndex));

        if (!Company.isVip) {
            Common.notVipModule($($container).find('#tabsharedbondsinfo').empty(), tableSetting.notVipTitle, tableSetting[initIndex].notVipTips ? tableSetting[initIndex].notVipTips.replace(/企业套餐/g, 'VIP/SVIP套餐') : '购买VIP/SVIP套餐，即可查看具体信息');
            return;
        }

        var columnDefsSet = [
            [{
                    "targets": 1,
                    "data": 'secName',
                    "render": function(data, type, full, meta) {
                        //return Common.formatCont(data)
                        return Common.linkF9(data, full, ["", "windCode"])
                    }
                },

                {
                    "targets": 2,
                    "data": 'realPublishNumber',
                    "render": function(data, type, full, meta) {
                        return Common.formatMoney(data, [2, '&nbsp;'])
                    }
                },
                {
                    "targets": 3,
                    "data": 'currentBalance',
                    "render": function(data, type, full, meta) {
                        return Common.formatMoney(data, [2, '&nbsp;'])
                    }
                },
                {
                    "targets": 4,
                    "data": 'interestRateForTicket',
                    "render": function(data) {
                        return Common.formatCont(data)
                    }
                },
                {
                    "targets": 5,
                    "data": 'credit',
                    "render": function(data, type, full, meta) {
                        return data + "/" + (full['issueCredit'] ? full['issueCredit'] : "--")
                    }
                },
                {
                    "targets": 6,
                    "data": 'interestDate',
                    "render": function(data, type, full, meta) {
                        return Common.formatTime(data)
                    }
                },
                {
                    "targets": 7,
                    "data": 'dueDate',
                    "render": function(data, type, full, meta) {
                        return Common.formatTime(data)
                    }
                },               
            ],
            [{
                "targets": 3,
                "data": 'credit',
                "render": function(data, type, full, meta) {
                    return Common.formatCont(data)
                }
            }]
        ]

        Company.pageSetting("#tabsharedbondsinfo", tableSetting, columnDefsSet, null, $dom, initIndex);

    },
    showPledgedstock: function($dom, index) {
        //股权质押 
        var tableSetting = [{
                fn: "showPledgedstock",
                interface: "getequitypledgelist",
                moduleName: intl('138281' /* 股权出质 */ ),
                tabChange: {
                    type: [intl('138447' /* 出质人 */ ), intl('138446' /* 质权人 */ ), intl('138527' /* 出质标的 */ )],
                    typeCnName: ["出质人", "质权人", "出质标的"],
                    typeName: "type",
                    typeBasicNum: ["pledgor_num", "pawnee_num", "pcorp_num"]
                },
                modelNum: "pledgor_num",
                moreLink: "showPledgedstock",
                // modelNum:"equitypledgelist_num",
                thWidthRadio: ["5%", "10%", "15%", "15%", "15%", "17%", "10%", "8%"],
                thName: [intl('138741' /* 序号 */ ), intl('138769' /* 登记编号 */ ), intl('138447' /* 出质人 */ ), intl('138446' /* 质权人 */ ), intl('138528' /* 出质股权标的企业 */ ), intl('138283' /* 出质股权数额（万元） */ ), intl('138248' /* 出质登记日期 */ ), intl('32098' /* 状态 */ )],
                align: [0, 0, 0, 0, 0, 0, 0, 0, 0],
                fields: ["NO.", "ep_reg_no", "ep_pledgor_name", "ep_pawnee_name", "ep_plex", "ep_equity_amount", "ep_reg_date", "ep_reg_state"],

            },
            {
                fn: "showPledgedstock",
                interface: "getequitypledgelist",
                moduleName: intl('138281' /* 股权出质 */ ),
                modelNum: "pawnee_num",
                moreLink: "showPledgedstock",
                // modelNum:"equitypledgelist_num",
                thWidthRadio: ["5%", "10%", "15%", "15%", "15%", "17%", "10%", "8%"],
                thName: [intl('138741' /* 序号 */ ), intl('138769' /* 登记编号 */ ), intl('138447' /* 出质人 */ ), intl('138446' /* 质权人 */ ), intl('138528' /* 出质股权标的企业 */ ), intl('138283' /* 出质股权数额（万元） */ ), intl('138248' /* 出质登记日期 */ ), intl('32098' /* 状态 */ )],
                align: [0, 0, 0, 0, 0, 0, 0, 0, 0],
                fields: ["NO.", "ep_reg_no", "ep_pledgor_name", "ep_pawnee_name", "ep_plex", "ep_equity_amount", "ep_reg_date", "ep_reg_state"],

            },
            {
                fn: "showPledgedstock",
                interface: "getequitypledgelist",
                moduleName: intl('138281' /* 股权出质 */ ),
                modelNum: "pcorp_num",
                moreLink: "showPledgedstock",
                // modelNum:"equitypledgelist_num",
                thWidthRadio: ["5%", "10%", "15%", "15%", "15%", "17%", "10%", "8%"],
                thName: [intl('138741' /* 序号 */ ), intl('138769' /* 登记编号 */ ), intl('138447' /* 出质人 */ ), intl('138446' /* 质权人 */ ), intl('138528' /* 出质股权标的企业 */ ), intl('138283' /* 出质股权数额（万元） */ ), intl('138248' /* 出质登记日期 */ ), intl('32098' /* 状态 */ )],
                align: [0, 0, 0, 0, 0, 0, 0, 0, 0],
                fields: ["NO.", "ep_reg_no", "ep_pledgor_name", "ep_pawnee_name", "ep_plex", "ep_equity_amount", "ep_reg_date", "ep_reg_state"],

            }
        ]
        var initIndex = index ? index : "0";
        if (initIndex == 0) {
            for (var i = 0; i < tableSetting.length; i++) {
                var thisBasicNum = tableSetting[0].tabChange.typeBasicNum[i];
                if (thisBasicNum && Company.basicNum[thisBasicNum] && Company.basicNum[thisBasicNum] != 0) {
                    break;
                } else {
                    initIndex++;
                    if (initIndex >= tableSetting.length) {
                        initIndex = 0;
                    }
                }
            }
        }
        var $container = $dom ? $dom : $('#workspace');
        if (index) {
            // 多个页签切换时，移除之前已绑定的统计图表事件监听
            $container.find('.widget-header').off('click', '.icon-chart', tableSetting.drawChart)
        }
        $container.empty().html(Company.drawTab(tableSetting, "tabequitypledgelist", "tbodyequitypledgelist", null, $dom, initIndex));
        var columnDefsSet = [
            [{
                    "targets": 1,
                    "data": 'ep_reg_no',
                    "render": function(data, type, full, meta) {
                        return Common.formatCont(data)
                    }
                },
                {
                    "targets": 2,
                    "data": 'ep_pledgor_name',
                    "render": function(data, type, full, meta) {
                        if (data && full['ep_pledgor_id']) {
                            var personId = full.ep_pledgor_id;
                            var pingParam = '&fromModule=showPledgedstock&entityAttribute=getstockpledgers&fromField=出质人&opId=' + personId; //bury
                            if (personId.length < 16) {
                                return '<a class="underline wi-secondary-color wi-link-color" data-code="' + personId + '" data-name="' + data + '" target="_blank" href="Company.html?companycode=' + personId + '&name=' + data + Common.isNoToolbar() + '" data-pingParam="' + pingParam + '">' + Common.formatCont(data) + '</a>';
                            } else {
                                // return '<a class="underline wi-secondary-color wi-link-color" data-code="' + personId + '" data-name="' + data + '" target="_blank" href="Person.html?id=' + personId + '&name=' + data + Common.isNoToolbar() + '" data-pingParam="' + pingParam + '">' + Common.formatCont(data) + '</a>';
                                return Common.formatCont(data)
                            }
                        }
                        return Common.formatCont(data)
                    }
                },
                {
                    "targets": 3,
                    "data": 'ep_pawnee_name',
                    "render": function(data, type, full, meta) {
                        if (data && full['ep_pawnee_id']) {
                            var personId = full.ep_pawnee_id;
                            var pingParam = '&fromModule=showPledgedstock&entityAttribute=getstockpledgers&fromField=质权人&opId=' + personId; //bury
                            if (personId.length < 16) {
                                return '<a class="underline wi-secondary-color wi-link-color" data-code="' + personId + '" data-name="' + data + '" target="_blank" href="Company.html?companycode=' + personId + '&name=' + data + Common.isNoToolbar() + '" data-pingParam="' + pingParam + '">' + Common.formatCont(data) + '</a>';
                            } else {
                                // return '<a class="underline wi-secondary-color wi-link-color" data-code="' + personId + '" data-name="' + data + '" target="_blank" href="Person.html?id=' + personId + '&name=' + data + Common.isNoToolbar() + '" data-pingParam="' + pingParam + '">' + Common.formatCont(data) + '</a>';
                                return Common.formatCont(data)
                            }
                        }
                        return Common.formatCont(data)
                    }
                },
                {
                    "targets": 4,
                    "data": 'ep_plex',
                    "render": function(data, type, full, meta) {
                        if (data && full['ep_plex_id']) {
                            var personId = full.ep_plex_id;
                            var pingParam = '&fromModule=showPledgedstock&entityAttribute=getstockpledgers&fromField=出质股权标的企业&opId=' + personId; //bury
                            if (personId.length < 16) {
                                return '<a class="underline wi-secondary-color wi-link-color" data-code="' + personId + '" data-name="' + data + '" target="_blank" href="Company.html?companycode=' + personId + '&name=' + data + Common.isNoToolbar() + '" data-pingParam="' + pingParam + '">' + Common.formatCont(data) + '</a>';
                            } else {
                                // return '<a class="underline wi-secondary-color wi-link-color" data-code="' + personId + '" data-name="' + data + '" target="_blank" href="Person.html?id=' + personId + '&name=' + data + Common.isNoToolbar() + '" data-pingParam="' + pingParam + '">' + Common.formatCont(data) + '</a>';
                                return Common.formatCont(data)
                            }
                        }
                        return Common.formatCont(data)
                    }
                },
                {
                    "targets": 5,
                    "data": 'ep_equity_amount',
                    "render": function(data, type, full, meta) {
                        return Common.formatMoney(data, [4, '&nbsp;'])
                    }
                },
                {
                    "targets": 6,
                    "data": 'ep_reg_date',
                    "render": function(data, type, full, meta) {
                        return Common.formatTime(data)
                    }
                },
                {
                    "targets": 7,
                    "data": 'ep_reg_state',
                    "render": function(data) {
                        if (data) {
                            if (data == "有效") {
                                return "<span class='text-green'>有效</span>"
                            } else if (data == "无效") {
                                return "<span class='text-red'>无效</span>"
                            } else {
                                return data;
                            }
                        } else {
                            return "--"
                        }
                    }
                }
            ],
            [{
                    "targets": 1,
                    "data": 'ep_reg_no',
                    "render": function(data, type, full, meta) {
                        return Common.formatCont(data)
                    }
                },
                {
                    "targets": 2,
                    "data": 'ep_pledgor_name',
                    "render": function(data, type, full, meta) {
                        if (data && full['ep_pledgor_id']) {
                            var personId = full.ep_pledgor_id;
                            var pingParam = '&fromModule=showPledgedstock&entityAttribute=getstockpledgees&fromField=出质人&opId=' + personId; //bury
                            if (personId.length < 16) {
                                return '<a class="underline wi-secondary-color wi-link-color" data-code="' + personId + '" data-name="' + data + '" target="_blank" href="Company.html?companycode=' + personId + '&name=' + data + Common.isNoToolbar() + '" data-pingParam="' + pingParam + '">' + Common.formatCont(data) + '</a>';
                            } else {
                                // return '<a class="underline wi-secondary-color wi-link-color" data-code="' + personId + '" data-name="' + data + '" target="_blank" href="Person.html?id=' + personId + '&name=' + data + Common.isNoToolbar() + '" data-pingParam="' + pingParam + '">' + Common.formatCont(data) + '</a>';
                                return Common.formatCont(data)
                            }
                        }
                        return Common.formatCont(data)
                    }
                },
                {
                    "targets": 3,
                    "data": 'ep_pawnee_name',
                    "render": function(data, type, full, meta) {
                        if (data && full['ep_pawnee_id']) {
                            var personId = full.ep_pawnee_id;
                            var pingParam = '&fromModule=showPledgedstock&entityAttribute=getstockpledgees&fromField=质权人&opId=' + personId; //bury
                            if (personId.length < 16) {
                                return '<a class="underline wi-secondary-color wi-link-color" data-code="' + personId + '" data-name="' + data + '" target="_blank" href="Company.html?companycode=' + personId + '&name=' + data + Common.isNoToolbar() + '" data-pingParam="' + pingParam + '">' + Common.formatCont(data) + '</a>';
                            } else {
                                // return '<a class="underline wi-secondary-color wi-link-color" data-code="' + personId + '" data-name="' + data + '" target="_blank" href="Person.html?id=' + personId + '&name=' + data + Common.isNoToolbar() + '" data-pingParam="' + pingParam + '">' + Common.formatCont(data) + '</a>';
                                return Common.formatCont(data)
                            }
                        }
                        return Common.formatCont(data)
                    }
                },
                {
                    "targets": 4,
                    "data": 'ep_plex',
                    "render": function(data, type, full, meta) {
                        if (data && full['ep_plex_id']) {
                            var personId = full.ep_plex_id;
                            var pingParam = '&fromModule=showPledgedstock&entityAttribute=getstockpledgees&fromField=出质股权标的企业&opId=' + personId; //bury
                            if (personId.length < 16) {
                                return '<a class="underline wi-secondary-color wi-link-color" data-code="' + personId + '" data-name="' + data + '" target="_blank" href="Company.html?companycode=' + personId + '&name=' + data + Common.isNoToolbar() + '" data-pingParam="' + pingParam + '">' + Common.formatCont(data) + '</a>';
                            } else {
                                // return '<a class="underline wi-secondary-color wi-link-color" data-code="' + personId + '" data-name="' + data + '" target="_blank" href="Person.html?id=' + personId + '&name=' + data + Common.isNoToolbar() + '" data-pingParam="' + pingParam + '">' + Common.formatCont(data) + '</a>';
                                return Common.formatCont(data)
                            }
                        }
                        return Common.formatCont(data)
                    }
                },
                {
                    "targets": 5,
                    "data": 'ep_equity_amount',
                    "render": function(data, type, full, meta) {
                        return Common.formatMoney(data, [4, '&nbsp;'])
                    }
                },
                {
                    "targets": 6,
                    "data": 'ep_reg_date',
                    "render": function(data, type, full, meta) {
                        return Common.formatTime(data)
                    }
                },
                {
                    "targets": 7,
                    "data": 'ep_reg_state',
                    "render": function(data) {
                        if (data) {
                            if (data == "有效") {
                                return "<span class='text-green'>有效</span>"
                            } else if (data == "无效") {
                                return "<span class='text-red'>无效</span>"
                            } else {
                                return data;
                            }
                        } else {
                            return "--"
                        }
                    }
                }
            ],
            [{
                    "targets": 1,
                    "data": 'ep_reg_no',
                    "render": function(data, type, full, meta) {
                        return Common.formatCont(data)
                    }
                },
                {
                    "targets": 2,
                    "data": 'ep_pledgor_name',
                    "render": function(data, type, full, meta) {
                        if (data && full['ep_pledgor_id']) {
                            var personId = full.ep_pledgor_id;
                            var pingParam = '&fromModule=showPledgedstock&entityAttribute=getstockplexes&fromField=出质人&opId=' + personId; //bury
                            if (personId.length < 16) {
                                return '<a class="underline wi-secondary-color wi-link-color" data-code="' + personId + '" data-name="' + data + '" target="_blank" href="Company.html?companycode=' + personId + '&name=' + data + Common.isNoToolbar() + '" data-pingParam="' + pingParam + '">' + Common.formatCont(data) + '</a>';
                            } else {
                                // return '<a class="underline wi-secondary-color wi-link-color" data-code="' + personId + '" data-name="' + data + '" target="_blank" href="Person.html?id=' + personId + '&name=' + data + Common.isNoToolbar() + '" data-pingParam="' + pingParam + '">' + Common.formatCont(data) + '</a>';
                                return Common.formatCont(data)
                            }
                        }
                        return Common.formatCont(data)
                    }
                },
                {
                    "targets": 3,
                    "data": 'ep_pawnee_name',
                    "render": function(data, type, full, meta) {
                        if (data && full['ep_pawnee_id']) {
                            var personId = full.ep_pawnee_id;
                            var pingParam = '&fromModule=showPledgedstock&entityAttribute=getstockplexes&fromField=质权人&opId=' + personId; //bury
                            if (personId.length < 16) {
                                return '<a class="underline wi-secondary-color wi-link-color" data-code="' + personId + '" data-name="' + data + '" target="_blank" href="Company.html?companycode=' + personId + '&name=' + data + Common.isNoToolbar() + '" data-pingParam="' + pingParam + '">' + Common.formatCont(data) + '</a>';
                            } else {
                                // return '<a class="underline wi-secondary-color wi-link-color" data-code="' + personId + '" data-name="' + data + '" target="_blank" href="Person.html?id=' + personId + '&name=' + data + Common.isNoToolbar() + '" data-pingParam="' + pingParam + '">' + Common.formatCont(data) + '</a>';
                                return Common.formatCont(data)
                            }
                        }
                        return Common.formatCont(data)
                    }
                },
                {
                    "targets": 4,
                    "data": 'ep_plex',
                    "render": function(data, type, full, meta) {
                        if (data && full['ep_plex_id']) {
                            var personId = full.ep_plex_id;
                            var pingParam = '&fromModule=showPledgedstock&entityAttribute=getstockplexes&fromField=出质股权标的企业&opId=' + personId; //bury
                            if (personId.length < 16) {
                                return '<a class="underline wi-secondary-color wi-link-color" data-code="' + personId + '" data-name="' + data + '" target="_blank" href="Company.html?companycode=' + personId + '&name=' + data + Common.isNoToolbar() + '" data-pingParam="' + pingParam + '">' + Common.formatCont(data) + '</a>';
                            } else {
                                // return '<a class="underline wi-secondary-color wi-link-color" data-code="' + personId + '" data-name="' + data + '" target="_blank" href="Person.html?id=' + personId + '&name=' + data + Common.isNoToolbar() + '" data-pingParam="' + pingParam + '">' + Common.formatCont(data) + '</a>';
                                return Common.formatCont(data)
                            }
                        }
                        return Common.formatCont(data)
                    }
                },
                {
                    "targets": 5,
                    "data": 'ep_equity_amount',
                    "render": function(data, type, full, meta) {
                        return Common.formatMoney(data, [4, '&nbsp;'])
                    }
                },
                {
                    "targets": 6,
                    "data": 'ep_reg_date',
                    "render": function(data, type, full, meta) {
                        return Common.formatTime(data)
                    }
                },
                {
                    "targets": 7,
                    "data": 'ep_reg_state',
                    "render": function(data) {
                        if (data) {
                            if (data == "有效") {
                                return "<span class='text-green'>有效</span>"
                            } else if (data == "无效") {
                                return "<span class='text-red'>无效</span>"
                            } else {
                                return data;
                            }
                        } else {
                            return "--"
                        }
                    }
                }
            ]
        ]
        if (initIndex == 0 && $dom) {
            var param = { "type": tableSetting[0].tabChange.typeCnName[initIndex] };
            var eachModuleData = Company.companyFinancingInfoData.Equitypledgelist ? Company.companyFinancingInfoData.Equitypledgelist : null;
            Company.pageSetting_new("#tabequitypledgelist", tableSetting[0], eachModuleData, columnDefsSet[0], param, $dom);
        } else {
            var param = { "type": tableSetting[0].tabChange.typeCnName[initIndex] };
            Company.pageSetting("#tabequitypledgelist", tableSetting, columnDefsSet, param, $dom, initIndex);
        }
        $('#tabequitypledgelist').off('click').on('click', '.underline', Company.linkWithCodeEventHandler);
    },
    pvecInvestList: function(data) {
        if (data && data.length > 0) {
            var tmp = [];
            for (var i = 0; i < data.length; i++) {
                if (data[i].investorId) {
                    tmp.push('<a class="underline wi-secondary-color wi-link-color" data-code="' + data[i].investorId + '">' + Common.formatCont(data[i].investorName) + '</a>')
                } else {
                    tmp.push('<span>' + Common.formatCont(data[i].investorName) + '</a>')
                }
            }
            return tmp.join("<br/>")
        } else {
            return "--"
        }
    },
    showChattelmortgage: function($dom, index) {
        //动产抵押
        var tableSetting = [{
                fn: "showChattelmortgage",
                tabChange: {
                    type: [intl('138392' /* 抵押人 */ ), intl('138391' /* 抵押权人 */ )],
                    typeName: "type",
                    typeBasicNum: ["chatteimortgage_num", "chatteimortgage1_num"]
                },
                modelNum: "chatteimortgage_num",
                interface: "getchattelmortgagelist",
                moduleName: intl('138207' /* 动产抵押 */ ),
                moreLink: "showChattelmortgage",
                // modelNum:"chatteimortgageitem_num",
                thWidthRadio: ["5%", "10%", "14%", "14%", "14%", "18%", "8%", "10%", "6%"],
                thName: [intl('138741' /* 序号 */ ), intl('138769' /* 登记编号 */ ), intl('138392' /* 抵押人 */ ), intl('138391' /* 抵押权人 */ ), intl('138618' /* 被担保债权种类 */ ), intl('138830' /* 抵押债权数额（万元）  */ ), intl('138772' /* 登记状态 */ ), intl('138690' /* 登记日期 */ ), intl('132647' /* 操作 */ )],
                align: [0, 0, 0, 0, 0, 2, 0, 0, 0],
                fields: ["NO.", "cm_reg_no", "cm_mortgage_person_name1", "cm_mortgage_person_name", "cm_zq_type", "cm_zq_amount", "cm_reg_status", "cm_reg_date", "ob_object_id"],

            },
            {
                fn: "showChattelmortgage",
                interface: "getchattelmortgagelist",
                moduleName: intl('138207' /* 动产抵押 */ ),
                modelNum: "chatteimortgage1_num",
                moreLink: "showChattelmortgage",
                // modelNum:"chatteimortgageitem_num",
                thWidthRadio: ["5%", "10%", "14%", "14%", "14%", "18%", "8%", "10%", "6%"],
                thName: [intl('138741' /* 序号 */ ), intl('138769' /* 登记编号 */ ), intl('138392' /* 抵押人 */ ), intl('138391' /* 抵押权人 */ ), intl('138618' /* 被担保债权种类 */ ), intl('138830' /* 抵押债权数额（万元）  */ ), intl('138772' /* 登记状态 */ ), intl('138690' /* 登记日期 */ ), intl('132647' /* 操作 */ )],
                align: [0, 0, 0, 0, 0, 2, 0, 0, 0],
                fields: ["NO.", "cm_reg_no", "cm_mortgage_person_name1", "cm_mortgage_person_name", "cm_zq_type", "cm_zq_amount", "cm_reg_status", "cm_reg_date", "ob_object_id"],

            }
        ]
        var $container = $dom ? $dom : $('#workspace');
        var initIndex = index ? index : "0";
        if (initIndex == 0) {
            for (var i = 0; i < tableSetting.length; i++) {
                var thisBasicNum = tableSetting[0].tabChange.typeBasicNum[i];
                if (thisBasicNum && Company.basicNum[thisBasicNum] && Company.basicNum[thisBasicNum] != 0) {
                    break;
                } else {
                    initIndex++;
                    if (initIndex >= tableSetting.length) {
                        initIndex = 0;
                    }
                }
            }
        }
        if (index) {
            // 多个页签切换时，移除之前已绑定的统计图表事件监听
            $container.find('.widget-header').off('click', '.icon-chart', tableSetting.drawChart)
        }
        $container.empty().html(Company.drawTab(tableSetting, "tabchattelmortgagelist", "tbodychattelmortgagelist", false, $dom, initIndex));
        var columnDefsSet = [
            [{
                    "targets": 1,
                    "data": 'cm_reg_no',
                    "render": function(data) {
                        return Common.formatCont(data)
                    }
                },
                {
                    "targets": 2,
                    "data": 'cm_mortgage_person_name1',
                    "render": function(data, type, full, meta) {
                        return Common.JumpOtherCompany(data, full, ["", "cm_mortgage_person_id1"])
                    }
                },
                {
                    "targets": 3,
                    "data": 'cm_mortgage_person_name',
                    "render": function(data, type, full, meta) {
                        return Common.JumpOtherCompany(data, full, ["", "cm_mortgage_person_id"])
                    }
                },
                {
                    "targets": 4,
                    "data": 'cm_zq_type',
                    "render": function(data) {
                        return Common.formatCont(data)
                    }
                },
                {
                    "targets": 5,
                    "data": 'cm_zq_amount',
                    "render": function(data, type, full, meta) {
                        return Common.formatMoney(data, [4, '&nbsp;'])
                    }
                },
                {
                    "targets": 6,
                    "data": 'cm_reg_status',
                    "render": function(data, type, full, meta) {
                        return Common.formatCont(data)
                    }
                },
                {
                    "targets": 7,
                    "data": 'cm_reg_date',
                    "render": function(data, type, full, meta) {
                        return Common.formatTime(data)
                    }
                },
                {
                    "targets": 8,
                    "data": 'OB_OBJECT_ID',
                    "render": function(data, type, full, meta) {
                        var val = '';
                        if (full['OB_OBJECT_ID']) {
                            val = full['OB_OBJECT_ID'];
                        }
                        if (full['ob_object_id']) {
                            val = full['ob_object_id'];
                        }
                        var buryData = 'data-buryId="' + val + '" data-buryEntity="showChattelmortgage" data-buryEntity="抵押人"'; //bury
                        return Common.showDetailLink(val, ["getchatteimortgageitem", "detailid", 9], buryData);
                    }
                }
            ],
            [{
                    "targets": 1,
                    "data": 'cm_reg_no',
                    "render": function(data) {
                        return Common.formatCont(data)
                    }
                },
                {
                    "targets": 2,
                    "data": 'cm_mortgage_person_name1',
                    "render": function(data, type, full, meta) {
                        return Common.JumpOtherCompany(data, full, ["", "cm_mortgage_person_id1"])
                    }
                },
                {
                    "targets": 3,
                    "data": 'cm_mortgage_person_name',
                    "render": function(data, type, full, meta) {
                        return Common.JumpOtherCompany(data, full, ["", "cm_mortgage_person_id"])
                    }
                },
                {
                    "targets": 4,
                    "data": 'cm_zq_type',
                    "render": function(data) {
                        return Common.formatCont(data)
                    }
                },
                {
                    "targets": 5,
                    "data": 'cm_zq_amount',
                    "render": function(data, type, full, meta) {
                        return Common.formatMoney(data, [4, '&nbsp;'])
                    }
                },
                {
                    "targets": 6,
                    "data": 'cm_reg_status',
                    "render": function(data, type, full, meta) {
                        return Common.formatCont(data)
                    }
                },
                {
                    "targets": 7,
                    "data": 'cm_reg_date',
                    "render": function(data, type, full, meta) {
                        return Common.formatTime(data)
                    }
                },
                {
                    "targets": 8,
                    "data": 'OB_OBJECT_ID',
                    "render": function(data, type, full, meta) {
                        var val = '';
                        if (full['OB_OBJECT_ID']) {
                            val = full['OB_OBJECT_ID'];
                        }
                        if (full['ob_object_id']) {
                            val = full['ob_object_id'];
                        }
                        var buryData = 'data-buryId="' + val + '" data-buryEntity="showChattelmortgage" data-buryEntity="抵押权人"'; //bury
                        return Common.showDetailLink(val, ["getchatteimortgageitem", "detailid", 9], buryData);
                    }
                }
            ]
        ]
        if (initIndex == 0 && $dom) {
            var eachModuleData = Company.companyFinancingInfoData.Chattelmortgagelist ? Company.companyFinancingInfoData.Chattelmortgagelist : null;
            var param = { "type": tableSetting[0].tabChange.type[initIndex] };
            Company.pageSetting_new("#tabchattelmortgagelist", tableSetting[0], eachModuleData, columnDefsSet[0], param, $dom);
        } else {
            var param = { "type": tableSetting[0].tabChange.type[initIndex] };
            Company.pageSetting("#tabchattelmortgagelist", tableSetting, columnDefsSet, param, $dom, initIndex);
        }
    },
    showDeclarcompany: function($dom) {
        //IPO信息
        var tableSetting = {
            interface: "getdeclarcompany",
            moduleName: intl('138590' /* 待上市信息 */ ),
            moreLink: "showDeclarcompany",
            modelNum: "declarcompany_num",
            thWidthRadio: ["5%", "10%", "10%", "10%", "10%", "15%", "15%", "15%", "10%"],
            thName: [intl('138741' /* 序号 */ ), intl('138825' /* 上市板块 */ ), intl('138826' /* 申请事项 */ ), intl('138611' /* 申请进度 */ ), intl('19528' /* 时间 */ ), intl('138827' /* 预计发行股数(万股) */ ), intl('138828' /* 预计发行后总股本(万股) */ ), intl('138612' /* 募投项目投资总额 */ ), intl('138829' /* 保荐机构 */ )],
            align: [0, 0, 0, 0, 0, 2, 2, 0, 0],
            fields: ["NO.", "sectorCode", "applyCode", "code", "startDate", "noOfIssueSharesEstimated", "noOfIssueCapsEstimated", "totalInvestment", "recommendOrgan"],
            notVipTitle: intl('138590' /* 待上市信息 */ ),
            notVipTips: intl('224198'),
        }
        var $container = $dom ? $dom : $('#workspace');
        $container.empty().html(Company.drawTab(tableSetting, "tabIpoinfo", "tbodyIpoinfo", false, $dom));

        if (!Company.isVip) {
            Common.notVipModule($($container).find('#tabIpoinfo').empty(), tableSetting.notVipTitle, tableSetting.notVipTips ? tableSetting.notVipTips.replace(/企业套餐/g, 'VIP/SVIP套餐') : '购买VIP/SVIP套餐，即可查看具体信息');
            return;
        }

        var columnDefsSet = [{
                "targets": 1,
                "data": 'sectorCode',
                "render": function(data) {
                    return Common.formatCont(data)
                }
            },
            {
                "targets": 2,
                "data": 'applyCode',
                "render": function(data) {
                    return Common.formatCont(data)
                }
            },
            {
                "targets": 3,
                "data": 'code',
                "render": function(data) {
                    return Common.formatCont(data)
                }
            },
            {
                "targets": 4,
                "data": 'startDate',
                "render": function(data) {
                    return Common.formatTime(data)
                }
            },
            {
                "targets": 5,
                "data": 'noOfIssueSharesEstimated',
                "render": function(data) {
                    return Common.formatCont(data)
                }
            },
            {
                "targets": 6,
                "data": 'noOfIssueCapsEstimated',
                "render": function(data) {
                    return Common.formatCont(data)
                }
            },
            {
                "targets": 7,
                "data": 'totalInvestment',
                "render": function(data) {
                    return Common.formatCont(data)
                }
            },
            {
                "targets": 8,
                "data": 'recommendOrgan',
                "render": function(data, type, full, meta) {
                    var code = full.recommendOrganId || '';
                    if (code) {
                        var pingParam = '&fromModule=showDeclarcompany&fromField=保荐机构&opId=' + code; //bury
                        return '<a class="underline wi-secondary-color wi-link-color" data-code="' + code + '" target="_blank" href="#" data-pingParam="' + pingParam + '">' + Common.formatCont(data) + '</a>';
                    } else {
                        return Common.formatCont(data);
                    }
                }
            }
        ]

        Company.pageSetting("#tabIpoinfo", tableSetting, columnDefsSet, null, $dom);


        $('#tabIpoinfo').off('click').on('click', '.underline', Company.linkWithCodeEventHandler);
    },
    governmentSupport02: function($dom) {
        var tableSetting = {
            interface: "getgovernmentproject",
            moduleName: intl('138314' /* 政府项目 */ ),
            moreLink: "governmentSupport02",
            modelNum: "governmentproj_num",
            thWidthRadio: ["5%", "60%", "24%", "11%"],
            thName: [intl('138741' /* 序号 */ ), intl('138313' /* 政府项目名称 */ ), intl('9754' /* 来源 */ ), intl('1794' /* 报告期 */ )],
            align: [0, 0, 0, 0],
            fields: ["NO.", "projectType", "informationSource", "announcementDate"],
        }
        var $container = $dom ? $dom : $('#workspace');
        $container.empty().html(Company.drawTab(tableSetting, "tabCompany02", "tabContent02", false, $dom));
        var columnDefsSet = [{
            "targets": 3,
            "data": 'announcementDate',
            "render": function(data, type, full, meta) {
                return Common.formatTime(data)
            }
        }]
        if ($dom) {
            var eachModuleData = Company.companyBussinessInfoData && Company.companyBussinessInfoData.GovernmentProj ? Company.companyBussinessInfoData.GovernmentProj : null;
            Company.pageSetting_new("#tabCompany02", tableSetting, eachModuleData, columnDefsSet, null, $dom);
        } else {
            Company.pageSetting("#tabCompany02", tableSetting, columnDefsSet, null, $dom);
        }
    },
    getlandmortgage: function($dom) {
        //土地抵押
        var tableSetting = {
            interface: "getlandmortgage",
            moduleName: intl('205406' /*土地抵押*/ ),
            moreLink: "getlandmortgage",
            modelNum: "landmortgage_num",
            thWidthRadio: ["5%", "20%", "15%", "15%", "15%", "15%", "15%"],
            thName: [intl('138741' /* 序号 */ ), intl('205407' /*土地坐落*/ ), intl('138392' /*抵押人*/ ), intl('138391' /*抵押权人*/ ), intl('205408' /*抵押面积(公顷)*/ ), intl('205409' /*抵押金额(万元)*/ ), intl('205394' /*起止日期*/ )],
            align: [0, 0, 0, 0, 0, 0, 0],
            fields: ["NO.", "landPos", "landMger", "landMgee", "landHa", "landMgAmt", "landMgStart"],
        }
        var $container = $dom ? $dom : $('#workspace');
        $container.empty().html(Company.drawTab(tableSetting, "tablandmortgage", "tbodylandmortgage", false, $dom));
        var columnDefsSet = [{
                "targets": 1,
                "data": 'landPos',
                "render": function(data, type, full, meta) {
                    return Company.addDropLink(data, ["getlandmortgagedetail", "detailId", 7, full.referenceId])
                }
            },
            {
                "targets": 2,
                "data": 'landMger',
                "render": function(data, type, full, meta) {
                    return Common.formatCont(data)
                }
            },
            {
                "targets": 3,
                "data": 'landMgee',
                "render": function(data, type, full, meta) {
                    return Common.formatCont(data)
                }
            },
            {
                "targets": 4,
                "data": 'landHa',
                "render": function(data, type, full, meta) {
                    return Common.formatCont(data)
                }
            },
            {
                "targets": 5,
                "data": 'landMgAmt',
                "render": function(data, type, full, meta) {
                    return Common.formatMoney(data, [4, '&nbsp;'])
                }
            },
            {
                "targets": 6,
                "data": 'landMgStart',
                "render": function(data, type, full, meta) {
                    return Common.formatTime(data) + '至' + Common.formatTime(full.landMgEnd)
                }
            },
        ]
        if ($dom) {
            var eachModuleData = Company.companyFinancingInfoData.landMortgage ? Company.companyFinancingInfoData.landMortgage : null;
            Company.pageSetting_new("#tablandmortgage", tableSetting, eachModuleData, columnDefsSet, null, $dom);
        } else {
            Company.pageSetting("#tablandmortgage", tableSetting, columnDefsSet, null, $dom);
        }
    },
    researchReport01: function($dom) {
        //研报评级
        //研报评级-研究报告
        var tableSetting = {
            interface: "getreportinfo",
            moduleName: intl('138775' /* 公司研报 */ ),
            moreLink: "researchReport01",
            modelNum: "report_num",
            thWidthRadio: ["5%", "45%", "29%", "21%"],
            thName: [intl('138741' /* 序号 */ ), intl('1786', '报告标题'), intl('9754' /* 来源 */ ), intl('138908' /* 发布日期 */ )],
            align: [0, 0, 0, 0],
            fields: ["NO.", "title", "broker", "date"],
        }
        var $container = $dom ? $dom : $('#workspace');
        $container.empty().html(Company.drawTab(tableSetting, "tabReportinfo", "tbodyReportinfo", false, $dom));
        var param = { "windcode": Company.windcode };
        var columnDefsSet = []
        if ($dom) {
            var eachModuleData = Company.companyBussinessInfoData.ReportData ? Company.companyBussinessInfoData.ReportData : null;
            Company.pageSetting_new("#tabReportinfo", tableSetting, eachModuleData, columnDefsSet, null, $dom);
        } else {
            Company.pageSetting("#tabReportinfo", tableSetting, columnDefsSet, null, $dom);
        }
    },
    researchReport02: function($dom) {
        var tableSetting = {
            interface: "getratingreportinfo",
            moduleName: intl('204484' /* 发债评级 */ ),
            moreLink: "researchReport02",
            modelNum: "cbrcreditratingreport_num",
            thWidthRadio: ["5%", "30%", "35%", "30%"],
            thName: [intl('138741' /* 序号 */ ), intl('31013' /* 信用评级 */ ), intl('31987' /* 评级机构 */ ), intl('138908' /* 发布日期 */ )],
            align: [0, 0, 0, 0],
            fields: ["NO.", "creditRating", "ratingAgencyName", "issueDate|formatTime"],
        }
        var $container = $dom ? $dom : $('#workspace');
        $container.empty().html(Company.drawTab(tableSetting, "tabratingreportinfo", "tbodyratingreportinfo", false, $dom));
        var columnDefsSet = [{
            "targets": 3,
            "data": 'issueDate',
            "render": function(data, type, full, meta) {
                return Common.formatTime(data)
            }
        }]
        if ($dom) {
            var eachModuleData = Company.companyBussinessInfoData.RatingReport ? Company.companyBussinessInfoData.RatingReport : null;
            Company.pageSetting_new("#tabratingreportinfo", tableSetting, eachModuleData, columnDefsSet, null, $dom);
        } else {
            Company.pageSetting("#tabratingreportinfo", tableSetting, columnDefsSet, null, $dom);
        }
    },
    biddingVal: "",
    biddingInfo: function($dom, oIndex, oVal, oCount) {
        //招投标信息
        var tableSetting = {
            interface: "getbidsearch",
            moduleName: intl('142026' /* 招投标 */ ),
            moreLink: "biddingInfo",
            modelNum: "bid_new_num",
            selName: ["biddingVal"],
            aggName: ["aggs_role"],
            thWidthRadio: ["5%", "45%", "18%", "15%", "12%"],
            thName: [intl('138741' /* 序号 */ ), intl('19535' /* 标题 */ ), intl('142476' /* 采购单位 */ ), intl('142474' /* 参与角色 */ ), intl('142475' /* 最新公告时间 */ )],
            align: [0, 0, 0, 0, 0],
            fields: ["NO.", "title", "purchasing_unit", "participating_unit", "latest_announcement_time"],
            notVipPageTurning: true,
            notVipPageTitle: intl('142026' /* 招投标 */ ),
            notVipPagedesc: intl('224206'),
        }
        var $container = $dom ? $dom : $('#workspace');
        $container.empty().html(Company.drawTab(tableSetting, "tabbidding", "tbodybidding", false, $dom));
        var columnDefsSet = [{
                "targets": 1,
                "data": 'title',
                "render": function(data, type, full, meta) {
                    if (full["OB_OBJECT_ID"]) {
                        return Company.showBidDetail(data, full["OB_OBJECT_ID"]);
                    } else {
                        return data ? data : "--";
                    }
                }
            },
            {
                "targets": 2,
                "data": 'purchasing_unit',
                "render": function(data, type, full, meta) {
                    if (data) {
                        //var data="小米科技有限责任公司|1047934153,华为技术有限公司|1024736719,黔东南州水利投资（集团）有限责任公司"
                        var arr = data.split(",")
                        var returnData = "";
                        for (var i = 0; i < arr.length; i++) {
                            var id = arr[i].split("|")[1] ? arr[i].split("|")[1] : "";
                            var name = arr[i].split("|")[0] ? arr[i].split("|")[0] : "--";
                            var pingParam = '&fromModule=biddingInfo&fromField=采购单位&opId=' + id; //bury
                            returnData += '<a data-name="' + name + '" data-code="' + id + '" class="underline wi-secondary-color wi-link-color" data-pingParam="' + pingParam + '">' + name + '</a><br/>'
                        }
                        return returnData;
                    } else {
                        return "--"
                    }
                }
            },
            {
                "targets": 3,
                "data": 'participating_unit',
                "render": function(data, type, full, meta) {
                    if (data && data.length > 0) {
                        return data.join("<br/>");
                    } else {
                        return "--"
                    }

                }
            },
            {
                "targets": 4,
                "data": 'latest_announcement_time',
                "render": function(data, type, full, meta) {
                    var dateStr = data ? data.split(" ")[0] : "";
                    return Common.formatTime(dateStr)
                }
            }
        ]
        var params = { "companycode": Company.companyCode, "role": Company.biddingVal, "pageSize": 10 };
        Company.pageSetting("#tabbidding", tableSetting, columnDefsSet, params, $dom);
        $('#tabbidding').off('click').on('click', '.underline', Company.linkWithCodeEventHandler);
    },
    showBidDetail: function(title, id) {
        //招投标详情页
        return '<a class="wi-secondary-color wi-link-color buryClickCenter" target="_blank" href="bidDetail.html?detailId=' + $.trim(id) + '">' + title + '<a>'
    },
    invitationBid: function($dom) {
        //招标信息
        var tableSetting = {
            interface: "gettender",
            moduleName: intl('100969', '招标'),
            moreLink: "invitationBid",
            modelNum: "tender_num",
            thWidthRadio: ["5%", "20%", "10%", "15%", "15%", "10%", "15%", "10%"],
            thName: [intl('138741' /* 序号 */ ), intl('114650', '项目编号'), intl('34886', '项目名称'), intl('142476', '采购单位'), intl('32564', '代理机构名称'), intl('138908' /* 发布日期 */ ), intl('222793', '品目'), intl('138697' /* 详细信息 */ )],
            align: [0, 0, 0, 0, 0, 0, 0, 0, 0],
            fields: ["NO.", "proj_num", "proj_name", "buying_unit", "agency_name", "announcement_date|formatTime", "item", "proj_num|showDetailLink:ProjectNo,8"],
        }
        var $container = $dom ? $dom : $('#workspace');
        $container.empty().html(Company.drawTab(tableSetting, "tabinvitationbid", "tbodyinvitationbid", false, $dom));
        var columnDefsSet = [{
                "targets": 5,
                "data": 'announcement_date',
                "render": function(data, type, full, meta) {
                    return Common.formatTime(data)
                }
            },
            {
                "targets": 7,
                "data": 'proj_num',
                "render": function(data, type, full, meta) {
                    var buryData = 'data-buryId="' + data + '" data-buryEntity="invitationBid"'; //bury
                    return Common.showDetailLink(data, ["getinvitationbiddetail", "ProjectNo", 8], buryData);
                }
            }
        ]
        if ($dom) {
            var eachModuleData = Company.companyBussinessInfoData.Tender ? Company.companyBussinessInfoData.Tender : null;
            Company.pageSetting_new("#tabinvitationbid", tableSetting, eachModuleData, columnDefsSet, null, $dom);
        } else {
            Company.pageSetting("#tabinvitationbid", tableSetting, columnDefsSet, null, $dom);
        }
    },
    gettaxcredit: function($dom, index) {
        //税务信息
        var tableSetting = [{
            fn: "gettaxcredit",
            interface: "gettaxpayer",
            moduleName: intl('138531', '税务信息'),
            tabChange: {
                type: [intl('222479', '纳税人信息'), intl('214898', '税务评级')],
                typeCnName: ['纳税人信息', '税务评级'],
                typeName: "type",
                typeBasicNum: ["tax_payer_num", "taxcredit_num"]
            },
            moreLink: "gettaxcredit",
            modelNum: "tax_payer_num",
            thWidthRadio: ["5%", "20%", "20%", "20%", "15%", "20%"],
            thName: [intl('138741' /* 序号 */ ), intl('138539' /* 纳税人识别号 */ ), intl('222794', '纳税人资格类型'), intl('222795', '纳税人资格登记日期'), intl('222796', '认定有效起止日期'), intl('138218', '主管税务机关')],
            align: [0, 0, 0, 0, 0, 0],
            fields: ["NO.", "taxIdNo", "taxQualiType", "taxRegisterDate", "startDate", "taxAuthority"],
        }, {
            fn: "gettaxcredit",
            interface: "gettaxcredit",
            moduleName: intl('138531', '税务信息'),
            moreLink: "gettaxcredit",
            modelNum: "taxcredit_num",
            thWidthRadio: ["5%", "25%", "20%", "20%", "15%", "15%"],
            thName: [intl('138741' /* 序号 */ ), intl('138538' /* 纳税人名称 */ ), intl('138539' /* 纳税人识别号 */ ), intl('138532' /* 税务机关 */ ), intl('138469' /* 评级年度 */ ), intl('138534' /* 纳税信用级别 */ )],
            align: [0, 0, 0, 0, 0, 0],
            fields: ["NO.", "tax_name", "tax_id_no", "tax_uthority", "assess_time", "<span>A级</span>"],
        }]
        var initIndex = index ? index : "0";
        if (initIndex == 0) {
            for (var i = 0; i < tableSetting.length; i++) {
                var thisBasicNum = tableSetting[0].tabChange.typeBasicNum[i];
                if (thisBasicNum && Company.basicNum[thisBasicNum] && Company.basicNum[thisBasicNum] != 0) {
                    break;
                } else {
                    initIndex++;
                    if (initIndex >= tableSetting.length) {
                        initIndex = 0;
                    }
                }
            }
        }
        var $container = $dom ? $dom : $('#workspace');
        $container.empty().html(Company.drawTab(tableSetting, "tabtaxcredit", "tbodytaxcredit", false, $dom, initIndex));
        var columnDefsSet = [
            [{
                    "targets": 1,
                    "data": 'taxIdNo',
                    "render": function(data, type, full, meta) {
                        return Common.formatCont(data)
                    }
                },
                {
                    "targets": 2,
                    "data": "taxQualiType",
                    "render": function(data, type, full, meta) {
                        return Common.formatCont(data);
                    }
                },
                {
                    "targets": 3,
                    "data": "taxRegisterDate",
                    "render": function(data, type, full, meta) {
                        return Common.formatTime(data);
                    }
                },
                {
                    "targets": 4,
                    "data": "startDate",
                    "render": function(data, type, full, meta) {
                        if (data || full['endDate']) {
                            var starDate = Common.formatTime(data);
                            var endDate = Common.formatTime(full['endDate']);
                            return starDate + "至" + endDate;
                        } else {
                            return "--";
                        }
                    }
                },
                {
                    "targets": 5,
                    "data": "taxAuthority",
                    "render": function(data, type, full, meta) {
                        var code = full["taxAuthorityId"];
                        return Common.addLinkForCompanyOrPerson(data, code);
                    }
                }
            ],
            [{
                    "targets": 1,
                    "data": null,
                    "render": function(data, type, full, meta) {
                        return Common.addTaxCompanyLink(data, full)
                    }
                },
                {
                    "targets": 5,
                    "data": null,
                    "render": function(data, type, full, meta) {
                        return '<span>A级</span>'
                    }
                }
            ]
        ]
        Company.pageSetting("#tabtaxcredit", tableSetting[initIndex], columnDefsSet[initIndex], null, $dom);
    },
    listInformation: function($dom) {
        //上榜信息
        var tableSetting = {
            interface: "getrankedcompany",
            moduleName: intl('138468' /* 上榜信息 */ ),
            moreLink: "listInformation",
            modelNum: "ranked_num",
            thWidthRadio: ["5%", "40%", "15%", "20%", "20%", ],
            thName: [intl('138741' /* 序号 */ ), intl('138468' /* 上榜信息 */ ), intl('138555' /* 上榜总次数 */ ), intl('138361' /* 最新上榜时间 */ ), intl('138360' /* 最新上榜排名 */ )],
            align: [0, 0, 0, 0],
            fields: ["NO.", "rankName|formatCont", "rankCount", "latestRankDate", "latestRank"],
            notVipTitle: intl('138468' /* 上榜信息 */ ),
            notVipTips: intl('224205'),
        }
        var $container = $dom ? $dom : $('#workspace');
        $container.empty().html(Company.drawTab(tableSetting, "tabRankedcompany", "tbodyRankedcompany", false, $dom));
        if (!Company.isVip) {
            Common.notVipModule($($container).find('#tabRankedcompany').empty(), tableSetting.notVipTitle, tableSetting.notVipTips ? tableSetting.notVipTips.replace(/企业套餐/g, 'VIP/SVIP套餐') : '购买VIP/SVIP套餐，即可查看具体信息');
            return;
        }
        var columnDefsSet = [{
                "targets": 1,
                "data": 'rankName',
                "render": function(data) {
                    return Common.formatCont(data);
                }
            },
            {
                "targets": 2,
                "data": 'rankCount',
                "render": function(data) {
                    return '总计上榜' + (data ? data : '--') + '次';
                }
            },
            {
                "targets": 4,
                "data": 'latestRank',
                "render": function(data) {
                    if (data == 0) {
                        return "--"
                    } else {
                        return data;
                    }
                }
            },

        ];
        var parameter = { "option": "list", "companyid": Company.companyId }

        Company.pageSetting("#tabRankedcompany", tableSetting, columnDefsSet, parameter, $dom);
    },
    newDepartment: function($dom) {
        //新增部门
        var tableSetting = {
            interface: "getstructure",
            moduleName: intl('138396' /* 新增部门 */ ),
            thWidthRadio: ["20%", "80%"],
            thName: [intl('19528' /* 时间 */ ), intl('138450' /* 疑似新增部门 */ )],
            align: [1, 0],
        }
        var $container = $dom ? $dom : $('#workspace');
        $container.empty().html(Company.drawTab(tableSetting, "tabgetstructure", "tbodygetstructure", false));
        if (Company.companyBussinessInfoData && Company.companyBussinessInfoData.Rencai_struct && Company.companyBussinessInfoData.Rencai_struct.length > 0) {
            Company.resetData(Company.companyBussinessInfoData.Rencai_struct)
        } else {
            $("#tabgetstructure").html('<tr><td class="tab-nodata" colspan="2">暂无数据</td></tr>');
        }
    },
    resetData: function(data) {
        //新增部门的数据重组
        var len = data.length;
        var newObj = {};
        for (var i = 0; i < len; i++) {
            if (newObj[data[i].audit_year]) {
                newObj[data[i].audit_year].push(data[i].department);
            } else {
                newObj[data[i].audit_year] = [];
                newObj[data[i].audit_year].push(data[i].department);
            }
        }
        var htmlArr = [];
        for (var item in newObj) {
            var itemString = '';
            var itemArr = [];
            itemArr.push('<tr>');
            for (var j = 0; j < newObj[item].length; j++) {
                if (j && j % 3 == 0) {
                    itemArr.push('<tr>');
                }

                itemArr.push('<td class="add-department" title="' + newObj[item][j] + '">' + newObj[item][j] + '</td>');

                if (j && (j + 1) % 3 == 0) {
                    itemArr.push('</tr>');
                }
            }
            itemArr = itemArr.join('');
            htmlArr.unshift('<tr><td align="center">' + item + '</td><td>' + '<table class="add-table">' + itemArr + '</table>' + '</td></tr>');
        }
        $("#tbodygetstructure").html(htmlArr.join(""))
    },
    employeeSituationData: function($dom, index) {
        //员工情况-专业构成、在职时间以及人才指数
        try {
            var moduleNameArr = [intl('138682' /* 专业构成 */ ), intl('138549' /* 在职时间 */ ), intl('138526' /* 人才指数 */ )];
            var moduleIdArr = ["specialtyModule", "workingTimeModule", "talentModule"];
            var tableIdArr = ["tabSpecialty", "tabWorkingTime"];
            var chartIdArr = ["picSpecialty", "picWorkingTime"];
            var initIndex = index ? parseInt(index) : 0;

            var specState = Company.basicNum.exist_profession ? (Company.basicNum.exist_profession != '0' ? '' : 'nojump') : 'nojump';
            var papleState = Company.basicNum.exist_remain ? (Company.basicNum.exist_remain != '0' ? '' : 'nojump') : 'nojump';
            var jumpOrNo = [specState, specState, papleState];
            if (index != undefined) {
                $('#employeeSituationData').find('.wi-secondary-color').removeClass('wi-secondary-color');
                $('#employeeSituationData').find('[data-index="' + initIndex + '"]').addClass('wi-secondary-color');
                $('#employeeSituationData').find('.module-show').addClass('module-hidden');
                $('#employeeSituationData').find('.module-show').removeClass('module-show');
                $('#' + moduleIdArr[initIndex]).removeClass('module-hidden');
                $('#' + moduleIdArr[initIndex]).addClass('module-show');
                return null;
            }
            //nojump 
            var htmlArr = [];
            htmlArr.push('<div class="widget-model"><div class="widget-header"><span class="fl">' + intl('138272' /* 员工情况 */ ) + '</span>');
            htmlArr.push('<div class="fl tab-style" data-fn="employeeSituationData">');
            htmlArr.push('<a class="tab-second-style ' + specState + '" data-fn="employeeSituationData" data-index="0">' + intl('138682', '专业构成') + '</a>');
            htmlArr.push('<a class="tab-second-style ' + specState + '" data-fn="employeeSituationData" data-index="1">' + intl('138549', '在职时间') + '</a>');
            htmlArr.push('<a class="tab-second-style ' + papleState + '" data-fn="employeeSituationData" data-index="2">' + intl('138526', '人才指数') + '</a>');
            htmlArr.push('</div></div>');
            for (var i = 0; i < 2; i++) {
                //专业构成、在职时间
                htmlArr.push('<div class="manage-module module-hidden" id="' + moduleIdArr[i] + '"><div class="manage-main"><div class="main-wrap">');
                htmlArr.push('<table id="' + tableIdArr[i] + '" class="table-company table-company-employee"><tbody><tr><td class="manage-loading"><img src="../resource/images/Company/loading.gif" />' + intl('139612' /* 数据加载中... */ ) + '</td></tr></tbody></table>');
                htmlArr.push('<div class="manage-left" id="' + chartIdArr[i] + '"><div class="manage-loading"><img src="../resource/images/Company/loading.gif" />' + intl('139612' /* 数据加载中... */ ) + '</div></div></div></div></div>')
            }
            //人才指数
            htmlArr.push('<div class="manage-module" id="talentModule"><div class="manage-main"><div class="main-talent">');
            htmlArr.push('<div class="manage-talent" id="picTalent"><div class="manage-loading"><img src="../resource/images/Company/loading.gif" />' + intl('139612' /* 数据加载中... */ ) + '</div></div></div></div><div class="tips-talent">*' + intl('138813' /* 人才留存指数反映企业员工规模增长幅度，指数越高，增长越快 */ ) + '</div>')
            htmlArr.push('<table id="tabTalent" class="table-company"><tbody><tr><td class="manage-loading"><img src="../resource/images/Company/loading.gif" />' + intl('139612' /* 数据加载中... */ ) + '</td></tr></tbody></table></div>');

            htmlArr.push('</div>');
            var $container = $dom ? $dom : $('#workspace');
            $container.empty().html(htmlArr.join(""));
            var $container = $dom ? $dom : $('#workspace');
            $container.empty().html(htmlArr.join(""));
            Company.getSpecialtyData(); //获取专业构成
            Company.getEmployeeTimeData(); //获取在职时间 
            Company.getTalentsData(); //获取人才指数 
            for (var j in jumpOrNo) {
                //初始加载
                if (jumpOrNo[j] != 'nojump') {
                    $('#employeeSituationData').find('[data-index="' + j + '"]').addClass('wi-secondary-color');
                    if (j != 2) {
                        $('#' + moduleIdArr[j]).removeClass('module-hidden');
                        $('#' + moduleIdArr[j]).addClass('module-show');
                        $('#talentModule').addClass('module-hidden');
                    }
                    return;
                }
            }
        } catch (error) {

        }

    },
    employeeSituation: function($dom) {
        //员工情况
        var moduleNameArr = [intl('138682' /* 专业构成 */ ), intl('138549' /* 在职时间 */ )];
        var moduleIdArr = ["specialtyModule", "workingTimeModule"];
        var tableIdArr = ["tabSpecialty", "tabWorkingTime"];
        var chartIdArr = ["picSpecialty", "picWorkingTime"];
        var htmlArr = [];
        htmlArr.push('<div class="widget-model"><div class="widget-header"><span class="fl">' + intl('138272' /* 员工情况 */ ) + '</span></div>');
        for (var i = 0; i < 2; i++) {
            htmlArr.push('<div class="manage-module" id="' + moduleIdArr[i] + '"><div class="manage-main"><h3>' + moduleNameArr[i] + '</h3><div class="main-wrap">');
            htmlArr.push('<table id="' + tableIdArr[i] + '" class="table-company table-company-employee"><tbody><tr><td class="manage-loading"><img src="../resource/images/Company/loading.gif" />' + intl('139612' /* 数据加载中... */ ) + '</td></tr></tbody></table>');
            htmlArr.push('<div class="manage-left" id="' + chartIdArr[i] + '"><div class="manage-loading"><img src="../resource/images/Company/loading.gif" />' + intl('139612' /* 数据加载中... */ ) + '</div></div></div></div></div>')
        }
        htmlArr.push('</div>');
        var $container = $dom ? $dom : $('#workspace');
        $container.empty().html(htmlArr.join(""));
        Company.getSpecialtyData(); //获取专业构成
        Company.getEmployeeTimeData(); //获取在职时间 
    },
    manageSituation: function() {
        //管理情况
        var moduleNameArr = [intl('222838', '学历分布'), intl('138549' /* 在职时间 */ )];
        var moduleIdArr = ["employeeEducationModule", "workingTimeModule"];
        var tableIdArr = ["tabEmployeeEducation", "tabWorkingTime"];
        var chartIdArr = ["picEmployeeEducation", "picWorkingTime"];
        var htmlArr = [];
        for (var i = 0; i < 2; i++) {
            htmlArr.push('<div class="widget-model"><div class="widget-header"><a class="fl">' + moduleNameArr[i] + '</a></div>');
            htmlArr.push('<div class="manage-module" id="' + moduleIdArr[i] + '"><div class="manage-main"><div class="main-wrap">');
            htmlArr.push('<table id="' + tableIdArr[i] + '" class="table-company"><tbody><tr><td class="manage-loading"><img src="../resource/images/Company/loading.gif" />' + intl('139612' /* 数据加载中... */ ) + '</td></tr></tbody></table>');
            htmlArr.push('</div></div><div class="manage-left" id="' + chartIdArr[i] + '"><div class="manage-loading"><img src="../resource/images/Company/loading.gif" />' + intl('139612' /* 数据加载中... */ ) + '</div></div></div></div>')
        }
        $('#workspace').empty().html(htmlArr.join(""));
        Company.getEducationData(true); //获取学历数据
        Company.getEmployeeTimeData(true); //获取在职时间 
    },
    getSpecialtyData: function() {
        //员工专业构成
        if (Company.companyBussinessInfoData.Rencai_profession && Company.companyBussinessInfoData.Rencai_profession.length > 0) {
            Company.showData(Company.companyBussinessInfoData.Rencai_profession, "getprofession", "profession_name", "person_count", false, "#tabSpecialty", "#picSpecialty", "#specialtyModule", "没有找到员工专业构成信息", intl('138682' /* 专业构成 */ ));
        } else {
            Company.talentTableError("#specialtyModule", null, "没有员工专业构成信息")
        }
    },
    getEmployeeTimeData: function() {
        //员工在职时间
        if (Company.companyBussinessInfoData.Rencai_timeInPosition && Company.companyBussinessInfoData.Rencai_timeInPosition.length > 0) {
            Company.showData(Company.companyBussinessInfoData.Rencai_timeInPosition, "gettimeInPosition", "year_range", "person_count", false, "#tabWorkingTime", "#picWorkingTime", "#workingTimeModule", "没有找到员工在职时间信息", intl('138549' /* 在职时间 */ ));
        } else {
            Company.talentTableError("#workingTimeModule", null, "没有员工在职时间信息")
        }
    },
    getTalentsData: function() {
        //获取人才留存指数，用于渲染
        if (Company.companyBussinessInfoData.Rencai_remain && Company.companyBussinessInfoData.Rencai_remain.length > 0) {
            Company.showData(Company.companyBussinessInfoData.Rencai_remain, "getremain", "year_range", "remain_ratio", false, "#tabTalent", "#picTalent", "#talentModule", "没有找到员工人才指数信息", "人才留存");
            Company.showLineData(Company.companyBussinessInfoData.Rencai_remain, "没有找到员工人才指数信息");
        } else {
            Company.talentTableError("#talents", null, "没有找到员工人才指数信息")
        }
    },
    talents: function($dom) {
        //人才留存指数
        var htmlArr = [];
        htmlArr.push('<div class="widget-model"><div class="widget-header"><span class="fl">' + intl('138526' /* 人才指数 */ ) + '</span></div>');
        htmlArr.push('<div class="manage-module" id="talentModule"><div class="manage-main"><div class="main-talent">');
        htmlArr.push('<div class="manage-talent" id="picTalent"><div class="manage-loading"><img src="../resource/images/Company/loading.gif" />' + intl('139612' /* 数据加载中... */ ) + '</div></div></div></div><div class="tips-talent">*' + intl('138813' /* 人才留存指数反映企业员工规模增长幅度，指数越高，增长越快 */ ) + '</div></div>')
        htmlArr.push('<table id="tabTalent" class="table-company"><tbody><tr><td class="manage-loading"><img src="../resource/images/Company/loading.gif" />' + intl('139612' /* 数据加载中... */ ) + '</td></tr></tbody></table>');
        var $container = $dom ? $dom : $('#workspace');
        $container.empty().html(htmlArr.join(""));
        //var parameter = { "companycode": this.companyCode, "ismanagement": false, "yearcount": 3 };
        if (Company.companyBussinessInfoData.Rencai_remain && Company.companyBussinessInfoData.Rencai_remain.length > 0) {
            Company.showData(Company.companyBussinessInfoData.Rencai_remain, "getremain", "year_range", "remain_ratio", false, "#tabTalent", "#picTalent", "#talentModule", "没有找到员工人才指数信息", "人才留存");
            Company.showLineData(Company.companyBussinessInfoData.Rencai_remain, "没有找到员工人才指数信息");
        } else {
            Company.talentTableError("#talents", null, "没有找到员工人才指数信息")
        }
    },
    showLineData: function(data, errmsg) {
        //画线数据整理
        var res = data;
        if (res && res != null && res.length > 0) {
            var resetData = [];
            var yearArr = [];
            for (var i = 0; i < res.length; i++) {
                resetData.push(parseFloat(res[i].remain_ratio));
                yearArr.push(res[i].audit_year);
            }
            Company.drawChartline("#picTalent", yearArr.reverse(), resetData.reverse());
        } else {
            Company.errorFn("#tabTalent", "#picTalent", errmsg)
        }
    },
    talentTableError: function(tablid, picid, msg) {
        $(tablid).html('<div class="tab-nodata">' + (msg ? msg : "没有数据") + '</div>');
    },
    showData: function(data, interface, firstColumn, mainColumn, isBottom, tabId, drawId, moduleId, errmsg, module) {
        //画饼图数据整理
        /*
        data为ajax请求回来的数据，interface接口名字,firstColumn第一列的标签,isBottom是否有底部列，比如总计。tabId,表格id。moduleId，模块id。drawId画图id
         */

        if (data && data.length > 0) {
            res = data
            var resetData = {} //重新整理数据，建立对象，按年份把数据整理一遍
            var yearArr = [];
            for (var i = 0; i < res.length; i++) {
                if (resetData[res[i].audit_year]) {
                    resetData[res[i].audit_year].push(res[i]);
                } else {
                    resetData[res[i].audit_year] = [];
                    resetData[res[i].audit_year].push(res[i]);
                    yearArr.push(res[i].audit_year)
                }
            }
            yearArr.reverse();
            var theadHtml = [];
            if (interface == "getremain") {
                theadHtml.push('<thead>');
            } else {
                theadHtml.push('<thead><tr><th align="left">' + intl('138688' /* 截止时间 */ ) + '</th>');
            }
            for (var i = 0; i < yearArr.length; i++) {
                theadHtml.push('<th align="right">' + yearArr[i] + intl('138940' /* 年 */ ) + '</th>');
            }
            theadHtml.push('</tr></thead>');
            var tbobyHtml = [];
            tbobyHtml.push('<tbody>');
            var countArr = [0, 0, 0]; //默认表格底部的合计是0
            var lastestyear = resetData[yearArr[yearArr.length - 1]] //左边的highchart以最近一年的数据画图。
            for (var i = 0; i < lastestyear.length; i++) {
                //画表格tbody内容,区分人才留存和其他
                if (interface == "getremain") {
                    tbobyHtml.push('<tr>');
                    for (var j = 0; j < yearArr.length; j++) {
                        tbobyHtml.push('<td width="25%" align="right">' + (resetData[yearArr[j]][i] ? parseFloat(resetData[yearArr[j]][i][mainColumn]) : 0) + '</td>');
                        countArr[j] += ((resetData[yearArr[j]][i]) ? parseFloat(resetData[yearArr[j]][i][mainColumn]) : 0);
                    }
                    tbobyHtml.push("</tr>");
                } else {

                    tbobyHtml.push('<tr><td width="25%"  align="left">' + lastestyear[i][firstColumn] + '</td>');
                    var countArr = [0, 0, 0];
                    for (var j = 0; j < yearArr.length; j++) {
                        for (var k = 0; k < resetData[yearArr[j]].length; k++) {
                            countArr[j] += parseInt(resetData[yearArr[j]][k].person_count);
                        }

                        tbobyHtml.push('<td width="25%"  align="right">' + (resetData[yearArr[j]][i] ? (resetData[yearArr[j]][i][mainColumn] / countArr[j] * 100).toFixed(2) + "%" : 0) + '</td>');
                        //tbobyHtml.push('<td width="25%">'+(resetData[yearArr[j]][i]?(resetData[yearArr[j]][i][mainColumn]):0)+'</td>');
                        countArr[j] += ((resetData[yearArr[j]][i]) ? parseFloat(resetData[yearArr[j]][i][mainColumn]) : 0);
                    }
                    tbobyHtml.push("</tr>");
                }
            }
            tbobyHtml.push("</tbody>")
            $(tabId).html(theadHtml.join("") + tbobyHtml.join(""));
            if (interface != "getremain") {
                var drawData = []
                var drawOriginData = resetData[yearArr[yearArr.length - 1]]
                for (var i = 0; i < drawOriginData.length; i++) {
                    var tmpArr = [];
                    tmpArr.push(drawOriginData[i][firstColumn]);
                    var num = parseFloat(drawOriginData[i][mainColumn]) ? parseFloat(drawOriginData[i][mainColumn]) : 0;
                    tmpArr.push(countArr[0] == 0 ? 0 : num / countArr[0].toFixed(2));
                    drawData.push(tmpArr)
                }
                Company.drawChartPie(drawId, drawData, module);
            }
        } else {
            Company.talentTableError(tabId, drawId, errmsg);
        }
    },
    drawChartPie: function(dom, drawData, module) {
        Highcharts.setOptions({
            // colors: ['#1F4860', '#2C627A', '#387C94', '#4496AD', '#50AFC6', '#7AC2D4', '#A1D4E0', '#C3E4EB', '#DEF0F4', '#F1F9FB']
            // ycye.cecil modify UI颜色 2020-10-26 start
            colors: ['#2277a2', '#f68717', '#5fbebf', '#e05d5d', '#4a588e', '#e4c557', '#63a074', '#906f54', '#9da9b4', '#8862ac'],
            lang: {
                downloadJPEG: intl('222618') /* 下载JPEG图片 */ ,
                downloadPNG: intl('222621') /* 下载PNG图片 */ ,
            }
            // ycye.cecil modify UI颜色 2020-10-26 end
        });
        $(dom).highcharts({

            chart: {
                plotBackgroundColor: null,
                plotBorderWidth: null,
                plotShadow: false
            },
            // ycye.cecil modify UI颜色 2020-10-26 start
            colors: ['#2277a2', '#f68717', '#5fbebf', '#e05d5d', '#4a588e', '#e4c557', '#63a074', '#906f54', '#9da9b4', '#8862ac'],
            // ycye.cecil modify UI颜色 2020-10-26 end
            title: {
                text: module,
                // align: 'left',
                x: -170,
                style: {
                    "color": "#333333",
                    "fontSize": "12px",
                },
            },
            exporting: {
                buttons: {
                    contextButton: {
                        // ycye.cecil modify UI颜色 2020-10-28 start
                        symbol: 'url(../resource/images/Company/export_download.png)',
                        // ycye.cecil modify UI颜色 2020-10-28 end
                        symbolSize: 20,
                        symbolX: 23,
                        symbolY: 22,
                        y: -6,
                        menuItems: [
                            null, null, defaultMenuItem[3], defaultMenuItem[4]
                        ]
                    }
                }
            },
            tooltip: {
                headerFormat: '{series.name}<br>',
                pointFormat: '{point.name}: <b>{point.percentage:.2f}%</b>'
            },
            legend: {
                borderWidth: 0,
                itemStyle: {
                    fontFamily: "Microsoft YaHei"
                },
                symbolHeight: 12,
                symbolRadius: 2
            },
            plotOptions: {
                // pie: {
                //     allowPointSelect: true,
                //     cursor: 'pointer',
                //     dataLabels: {
                //         enabled: false
                //     },
                //     showInLegend: true
                // }
                pie: {
                    dataLabels: {
                        // ycye.cecil modify UI颜色 2020-10-28 start
                        useHTML: true,
                        formatter: function() {
                                return `<span style="color:` + this.point.color + `;font-size: 11px">` + this.point.name + `:` + Math.round(this.point.percentage * 100) / 100 + `%</span>`
                            }
                            // ycye.cecil modify UI颜色 2020-10-28 end
                    },
                }
            },
            series: [{
                type: 'pie',
                name: module,
                data: drawData
            }],
            credits: {
                enabled: false // 禁用版权信息
            }
        });
        // ycye.cecil modify UI颜色 2020-10-28 start
        $('.highcharts-button-symbol').attr("width", "19.6px")
        $('.highcharts-button-symbol').attr("height", "18px")
            // ycye.cecil modify UI颜色 2020-10-28 end
    },
    drawChartline: function(dom, year, drawData) {
        Highcharts.setOptions({
            // ycye.cecil modify UI颜色 2020-10-26 start
            colors: ['#2277a2'],
            // ycye.cecil modify UI颜色 2020-10-26 end
            lang: {
                downloadJPEG: intl('222618') /* 下载JPEG图片 */ ,
                downloadPNG: intl('222621') /* 下载PNG图片 */ ,
            }
        });
        $(dom).highcharts({
            title: {
                text: intl('138526' /* 人才指数 */ ),
                align: 'left',
                style: {
                    "color": "#333333",
                    "fontSize": "12px",
                },
                // x: 25,
            },
            plotOptions: {
                column: {
                    pointWidth: 20
                },
                series: {
                    dataLabels: {
                        enabled: true,
                        align: 'center',
                        // ycye.cecil modify UI颜色 2020-10-28 start
                        useHTML: true,
                        formatter: function() {
                                return `<span style="color:` + this.point.color + `">` + this.point.y + `</span>`
                            }
                            // ycye.cecil modify UI颜色 2020-10-28 end
                    }
                }
            },
            exporting: {
                buttons: {
                    contextButton: {
                        // ycye.cecil modify UI颜色 2020-10-28 start
                        symbol: 'url(../resource/images/Company/export_download.png)',
                        // ycye.cecil modify UI颜色 2020-10-28 end
                        symbolSize: 20,
                        symbolX: 23,
                        symbolY: 22,
                        menuItems: [
                            null, null, defaultMenuItem[3], defaultMenuItem[4]
                        ]
                    }
                }
            },
            xAxis: {
                categories: year
            },
            // ycye.cecil modify UI颜色 2020-10-26 start
            color: ['#2277a2'],
            // ycye.cecil modifyUI颜色 2020-10-26 end
            yAxis: [{
                title: {
                    text: '',
                },
                labels: {
                    enabled: false
                },
                visible: false
            }],
            tooltip: {
                valueSuffix: ''
            },
            legend: {
                layout: 'vertical',
                align: 'right',
                verticalAlign: 'middle',
                borderWidth: 0
            },
            series: [{
                name: '指数',
                data: drawData,
                showInLegend: false
            }],
            credits: {
                enabled: false // 禁用版权信息
            }
        });
        // ycye.cecil modify UI颜色 2020-10-28 start
        $('.highcharts-button-symbol').attr("width", "19.6px")
        $('.highcharts-button-symbol').attr("height", "18px")
            // ycye.cecil modify UI颜色 2020-10-28 end
    },
    jobs: function($dom) {
        //招聘职位
        var tableSetting = {
            //interface:"getrecruitment",
            interface: "getrecurit",
            moduleName: intl('138356' /* 招聘 */ ),
            moreLink: "jobs",
            modelNum: "recruitt_num",
            thWidthRadio: ["7%", "15%", "26%", "18%", "10%", "10%", "14%"],
            thName: [intl('138741' /* 序号 */ ), intl('138774' /* 发布时间 */ ), intl('138729' /* 职位 */ ), intl('138498' /* 薪资 */ ), intl('15972' /* 学历 */ ), intl('138289' /* 经验 */ ), intl('2901' /* 城市 */ )],
            align: [0, 0, 0, 0, 0, 0],
            fields: ["NO.", "release_time", "job", "pay", "education", "experience", "city"],
        }
        var columnDefsSet = [{
                "targets": 1,
                "data": 'release_time',
                "render": function(data, type, full, meta) {
                    return Common.formatTime(data)
                }
            },
            {
                "targets": 2,
                "data": 'job',
                "render": function(data, type, full, meta) {
                    if (full.OB_OBJECT_ID) {
                        return '<a target="_blank" class="underline wi-secondary-color wi-link-color" data-interface="' + 'getrecuritdetail' + '" data-key="' + 'objectid' + '" data-tdlen="' + '8' + '" data-value="' + full.OB_OBJECT_ID + '">' + (data ? data : '--') + '</a>'
                    } else {
                        return Common.formatCont(data)
                    }
                    // return Common.showDetailLink(data, ["getrecuritdetail", "objectid", 8]);
                }
            }
        ];
        var $container = $dom ? $dom : $('#workspace');
        $container.empty().html(Company.drawTab(tableSetting, "tabrecruitment", "tbodyrecruitment", false, $dom));
        if ($dom) {
            var eachModuleData = Company.companyBussinessInfoData && Company.companyBussinessInfoData.Recurit ? Company.companyBussinessInfoData.Recurit : null;
            Company.pageSetting_new("#tabrecruitment", tableSetting, eachModuleData, columnDefsSet, null, $dom);
        } else {
            Company.pageSetting("#tabrecruitment", tableSetting, columnDefsSet, null, $dom);
        }

        $('#tabrecruitment').off('click').on('click', '.underline', function() {
            var Band = false;
            if ($(this).parent().parent().parent().attr('id') == 'tbodyBand') {
                Band = true;
            }
            Company.showContentDetail(this, $(this).attr("data-tdlen"), Band)
            return false;
        });

    },
    products: function($dom) {
        //商品/产品
        var tableSetting = {
            interface: "getproductlist",
            moduleName: intl('138757' /* 产品信息 */ ),
            moreLink: "products",
            modelNum: "product_num",
            thWidthRadio: ["5%", "25%", "10%", "15%", "10%", "15%", "20%"],
            thName: [intl('138741' /* 序号 */ ), intl('208887' /*产品简称*/ ), intl('138754' /*产品类别*/ ), intl('208862' /*下载总数量*/ ), intl('208881' /*评分*/ ), intl('208863' /*评论总数量*/ ), intl('208864' /*产品简述*/ )],
            align: [0, 0, 0, 0, 0, 0, 0],
            fields: ["NO.", "appAbbr", "appCat", "downNum", "score", "noteNum", "appBrief"]
        }
        var $container = $dom ? $dom : $('#workspace');
        $container.empty().html(Company.drawTab(tableSetting, "tabgetcommodity", "tbodygetcommodity", false, $dom));
        var columnDefsSet = [{
                "targets": 1,
                "data": 'appAbbr',
                "render": function(data, type, full, meta) {
                    var img = 'http://news.windin.com/ns/imagebase/6730/' + full.appRowkey;
                    var imgStr = '<span class="person_img"><img class="big-logo" width="40" src=' + img + ' onerror="src=\'../resource/images/Company/no-product.png\'"></span>';
                    var nameStr = '<span class="name-isctrl"><a class="short-img-name wi-secondary-color wi-link-color" target="_blank" href="showItemDetail.html?type=product&detailid=' + full.appId + '">' + Common.formatCont(data) + '</a></span>';
                    return imgStr + nameStr;
                }
            },
            {
                "targets": 2,
                "data": 'appCat',
                "render": function(data) {
                    return Common.formatCont(data)
                }
            },
            {
                "targets": 3,
                "data": 'downNum',
                "render": function(data) {
                    return Common.formatMoney(data, [4, '&nbsp;'])
                }
            },
            {
                "targets": 4,
                "data": 'score',
                "render": function(data) {
                    return Common.formatFloat(data, 1);
                }
            },
            {
                "targets": 5,
                "data": 'noteNum',
                "render": function(data) {
                    return Common.formatMoney(data, [4, '&nbsp;'])
                }
            },
            {
                "targets": 6,
                "data": 'appBrief',
                "render": function(data) {
                    return Common.formatCont(data)
                }
            }

        ]
        if ($dom) {
            var eachModuleData = Company.companyBussinessInfoData.product ? Company.companyBussinessInfoData.product : null;
            Company.pageSetting_new("#tabgetcommodity", tableSetting, eachModuleData, columnDefsSet, null, $dom);
        } else {
            Company.pageSetting("#tabgetcommodity", tableSetting, columnDefsSet, null, $dom);
        }
        //      Company.pageSetting("#tabgetcommodity", tableSetting, columnDefsSet, null, $dom);

        $('#tabgetcommodity').off('click').on('click', '.underline', function() {
            var Band = false;
            if ($(this).parent().parent().parent().attr('id') == 'tbodyBand') {
                Band = true;
            }
            Company.showContentDetail(this, $(this).attr("data-tdlen"), Band)
            return false;
        });
    },
    getteleLics: function($dom) {
        //电信许可
        var tableSetting = {
            interface: "getteleLics",
            moduleName: intl('205397' /* 电信许可 */ ),
            moreLink: "getteleLics",
            modelNum: "telelic_num",
            thWidthRadio: ["5%", "35%", "45%", "15%"],
            thName: [intl('138741' /* 序号 */ ), intl('205398' /* 许可证号 */ ), intl('205399' /* 业务及其覆盖范围 */ ), intl('205400' /* 年报公示 */ )],
            align: [0, 0, 0, 0],
            fields: ["NO.", "licNo", "licCat", "referenceId"],
        }
        var $container = $dom ? $dom : $('#workspace');
        $container.empty().html(Company.drawTab(tableSetting, "tabelectricPermit", "tbodyelectricPermit", false, $dom));
        var columnDefsSet = [{
                "targets": 1,
                "data": 'licNo',
                "render": function(data, type, full, meta) {
                    return Common.formatCont(data)
                }
            },
            {
                "targets": 2,
                "data": 'licCat',
                "render": function(data) {
                    return Common.formatCont(data)
                }
            },
            {
                "targets": 3,
                "data": 'referenceId',
                "render": function(data) {
                    var buryData = 'data-buryId="' + data + '" data-buryEntity="getteleLics"'; //bury
                    return Common.showDetailLink(data, ["getteleLicsdetail", "detailId", 4], buryData);
                }
            }
        ]
        if ($dom) {
            var eachModuleData = Company.companyBussinessInfoData.teleLics ? Company.companyBussinessInfoData.teleLics : null;
            Company.pageSetting_new("#tabelectricPermit", tableSetting, eachModuleData, columnDefsSet, null, $dom);
        } else {
            Company.pageSetting("#tabelectricPermit", tableSetting, columnDefsSet, null, $dom);
        }
    },
    getimpexp: function($dom) {
        //进出口信用数据
        var tableSetting = {
            interface: "getimpexp",
            moduleName: intl('205419' /* 进出口信用 */ ),
            moreLink: "getimpexp",
            modelNum: "impexp_num",
            thWidthRadio: ["5%", "25%", "40%", "15%", "15%"],
            thName: [intl('138741' /* 序号 */ ), intl('205420' /* 注册海关 */ ), intl('205421' /* 经营类别*/ ), intl('138478' /* 注册日期*/ ), intl('40513' /*详情*/ )],
            align: [0, 0, 0, 0, 0],
            fields: ["NO.", "regCust", "bizCatName", "regDate", "referenceId"],
        }
        var $container = $dom ? $dom : $('#workspace');
        $container.empty().html(Company.drawTab(tableSetting, "tabimExport", "tbodyimExport", false, $dom));
        var columnDefsSet = [{
                "targets": 1,
                "data": 'regCust',
                "render": function(data, type, full, meta) {
                    return Common.formatCont(data)
                }
            },
            {
                "targets": 2,
                "data": 'bizCatName',
                "render": function(data) {
                    return Common.formatCont(data)
                }
            },
            {
                "targets": 3,
                "data": 'regDate',
                "render": function(data) {
                    return Common.formatTime(data)
                }
            },
            {
                "targets": 4,
                "data": 'referenceId',
                "render": function(data) {
                    var buryData = 'data-buryId="' + data + '" data-buryEntity="getimpexp"'; //bury
                    return Common.showDetailLink(data, ["getimpexpdetail", "detailId", 5], buryData);
                }
            }
        ]
        if ($dom) {
            var eachModuleData = Company.companyBussinessInfoData && Company.companyBussinessInfoData.impexp ? Company.companyBussinessInfoData.impexp : null;
            Company.pageSetting_new("#tabimExport", tableSetting, eachModuleData, columnDefsSet, null, $dom);
        } else {
            Company.pageSetting("#tabimExport", tableSetting, columnDefsSet, null, $dom);
        }
    },
    getfundpe: function($dom) {
        //私募基金
        var tableSetting = {
            interface: "getfundpe",
            moduleName: intl('119142' /* 私募基金 */ ),
            moreLink: "getfundpe",
            modelNum: "fundpe_num",
            thWidthRadio: ["30%", "30%", "15%", "10%", "10%", "5%"],
            thName: [intl('205392' /*私募基金管理人名称*/ ), intl('118609' /*法定代表人/执行事务合伙人*/ ), intl('145812' /*机构类型*/ ), intl('138769' /*登记编号*/ ), intl('138860' /*成立日期*/ ), intl('40513' /*详情*/ )],
            align: [0, 0, 0, 0, 0, 0],
            fields: ["orgName", "legalPerson", "orgType", "regCode", "establishDate", "referenceId"],
        }
        var $container = $dom ? $dom : $('#workspace');
        $container.empty().html(Company.drawTab(tableSetting, "tabgetfundpe", "tbodygetfundpe", false, $dom));
        var columnDefsSet = [{
                "targets": 0,
                "data": 'orgName',
                "render": function(data, type, full, meta) {
                    var type = 2;
                    var id = full.windId;
                    //                  var img = full.orgImgId;
                    var img = full.orgImgIdV ? full.orgImgIdV : '';
                    var pingParam = '&fromModule=' + buryItemMapping.mappingEntity["getfundpe"] + '&fromField=私募基金管理人名称&opId=' + id; //bury
                    return (Common.showCompanyName(type, data, id, img, null, null, null, null, null, pingParam)); //企业logo
                }
            },
            {
                "targets": 1,
                "data": 'legalPerson',
                "render": function(data, type, full, meta) {
                    var type = 2;
                    if (full.legalPersonId) {
                        type = full.legalPersonId.length < 16 ? 2 : 1;
                    }
                    var id = full.legalPersonId;
                    var img = full.legalPersonImgId;
                    var pingParam = '&fromModule=' + buryItemMapping.mappingEntity["getfundpe"] + '&fromField=执行事务合伙人&opId=' + id; //bury
                    return (Common.showCompanyName(type, data, id, img, null, null, null, null, null, pingParam));
                }
            },
            {
                "targets": 2,
                "data": 'orgType',
                "render": function(data) {
                    return Common.formatCont(data)
                }
            },
            {
                "targets": 3,
                "data": 'regCode',
                "render": function(data) {
                    return Common.formatCont(data)
                }
            },
            {
                "targets": 4,
                "data": 'establishDate',
                "render": function(data) {
                    return Common.formatTime(data)
                }
            },
            {
                "targets": 5,
                "data": 'referenceId',
                "render": function(data) {
                    return '<a class="wi-secondary-color wi-link-color jump2Private" >' + intl('40513' /*详情*/ ) + '<a>'
                }
            }
        ]
        Company.pageSetting("#tabgetfundpe", tableSetting, columnDefsSet, null, $dom);
        $('#tabgetfundpe').off('click').on('click', '.underline', Company.linkWithCodeEventHandler);
    },
    showLandInfo: function($dom, index) {
        //土地信息
        var tableSetting = [{
                fn: "showLandInfo",
                interface: "getlandanns",
                moduleName: intl('114647' /* 土地信息 */ ),
                tabChange: {
                    type: [intl('205431' /*地块公示*/ ), intl('205432' /* 购地信息 */ ), intl('205433' /* 土地转让 */ )],
                    typeCnName: ["地块公示", "购地信息", "土地转让"],
                    typeName: "type",
                    typeBasicNum: ["landanns_num", "landpurchase_num", "landtrans_num"]
                },
                modelNum: "landanns_num",
                moreLink: "showLandInfo",
                thWidthRadio: ["5%", "40%", "15%", "20%", "20%"],
                thName: [intl('138741' /* 序号 */ ), intl('205434' /* 地块位置 */ ), intl('205383' /*行政区*/ ), intl('205435' /* 发布机关*/ ), intl('138908' /*发布日期*/ )],
                align: [0, 0, 0, 0, 0],
                fields: ["NO.", "landLoc", "regionCode", "relAgency", "relDate"],

            },
            {
                fn: "showLandInfo",
                interface: "getlandpurchase",
                moduleName: intl('114647' /* 土地信息 */ ),
                modelNum: "landpurchase_num",
                moreLink: "showLandInfo",
                thWidthRadio: ["5%", "20%", "15%", "15%", "15%", "15%", "15%"],
                thName: [intl('138741' /* 序号 */ ), intl('205437' /* 项目位置*/ ), intl('100868' /*土地用途*/ ), intl('205389' /*土地面积(公顷)*/ ), intl('205386' /*成交价格(万元)*/ ), intl('205383' /*行政区*/ ), intl('205436' /*合同签订日期*/ )],
                align: [0, 0, 0, 0, 0, 0, 0],
                fields: ["NO.", "projPos", "landUsage", "landHa", "dealPrice", "regionCode", "contractDate"],

            },
            {
                fn: "showLandInfo",
                interface: "getlandtrans",
                moduleName: intl('114647' /* 土地信息 */ ),
                modelNum: "landtrans_num",
                moreLink: "showLandInfo",
                thWidthRadio: ["5%", "20%", "15%", "15%", "15%", "15%", "15%"],
                thName: [intl('138741' /* 序号 */ ), intl('205407' /*土地坐落*/ ), intl('205439' /*原土地使用权人*/ ), intl('205438' /*现土地使用权人*/ ), intl('205389' /*土地面积(公顷)*/ ), intl('205396' /*转让价格(万元)*/ ), intl('113991' /* 成交时间*/ )],
                align: [0, 0, 0, 0, 0, 0, 0],
                fields: ["NO.", "landPos", "oldUser", "curUser", "landHa", "transPrice", "dealTime"],

            }
        ]
        var initIndex = index ? index : "0";
        if (initIndex == 0) {
            for (var i = 0; i < tableSetting.length; i++) {
                var thisBasicNum = tableSetting[0].tabChange.typeBasicNum[i];
                if (thisBasicNum && Company.basicNum[thisBasicNum] && Company.basicNum[thisBasicNum] != 0) {
                    break;
                } else {
                    initIndex++;
                    if (initIndex >= tableSetting.length) {
                        initIndex = 0;
                    }
                }
            }
        }
        var $container = $dom ? $dom : $('#workspace');
        if (index) {
            // 多个页签切换时，移除之前已绑定的统计图表事件监听
            $container.find('.widget-header').off('click', '.icon-chart', tableSetting.drawChart)
        }
        $container.empty().html(Company.drawTab(tableSetting, "tablandinfolist", "tbodylandinfolist", null, $dom, initIndex));
        var columnDefsSet = [
            [{
                    "targets": 1,
                    "data": 'landLoc',
                    "render": function(data, type, full, meta) {
                        return Company.addDropLink(data, ["getlandannsdetail", "detailId", 5, full.referenceId])
                    }
                },
                {
                    "targets": 2,
                    "data": 'regionCode',
                    "render": function(data, type, full, meta) {
                        return Common.formatCont(data)
                    }
                },
                {
                    "targets": 3,
                    "data": 'relAgency',
                    "render": function(data, type, full, meta) {
                        return Common.formatCont(data)
                    }
                },
                {
                    "targets": 4,
                    "data": 'relDate',
                    "render": function(data, type, full, meta) {
                        return Common.formatTime(data)
                    }
                }
            ],
            [{
                    "targets": 1,
                    "data": 'projPos',
                    "render": function(data, type, full, meta) {
                        return Company.addDropLink(data, ["getlandpurchasedetail", "detailId", 7, full.referenceId])
                    }
                },
                {
                    "targets": 2,
                    "data": 'landUsage',
                    "render": function(data, type, full, meta) {
                        return Common.formatCont(data)
                    }
                },
                {
                    "targets": 3,
                    "data": 'landHa',
                    "render": function(data, type, full, meta) {
                        return Common.formatCont(data)
                    }
                },
                {
                    "targets": 4,
                    "data": 'dealPrice',
                    "render": function(data, type, full, meta) {
                        return Common.formatMoney(data, [4, '&nbsp;'])
                    }
                },
                {
                    "targets": 5,
                    "data": 'regionCode',
                    "render": function(data, type, full, meta) {
                        return Common.formatCont(data)
                    }
                },
                {
                    "targets": 6,
                    "data": 'contractDate',
                    "render": function(data, type, full, meta) {
                        return Common.formatTime(data)
                    }
                }
            ],
            [{
                    "targets": 1,
                    "data": 'landPos',
                    "render": function(data, type, full, meta) {
                        return Company.addDropLink(data, ["getlandtransdetail", "detailId", 7, full.referenceId])
                    }
                },
                {
                    "targets": 2,
                    "data": 'oldUser',
                    "render": function(data, type, full, meta) {
                        return Common.formatCont(data)
                    }
                },
                {
                    "targets": 3,
                    "data": 'curUser',
                    "render": function(data, type, full, meta) {
                        return Common.formatCont(data)
                    }
                },
                {
                    "targets": 4,
                    "data": 'landHa',
                    "render": function(data, type, full, meta) {
                        return Common.formatCont(data)
                    }
                },
                {
                    "targets": 5,
                    "data": 'transPrice',
                    "render": function(data, type, full, meta) {
                        return Common.formatMoney(data, [4, '&nbsp;'])
                    }
                },
                {
                    "targets": 6,
                    "data": 'dealTime',
                    "render": function(data, type, full, meta) {
                        return Common.formatTime(data)
                    }
                }
            ]
        ]
        Company.pageSetting("#tablandinfolist", tableSetting[initIndex], columnDefsSet[initIndex], null, $dom);
        //      Company.pageSetting("#tablandinfolist", tableSetting[initIndex], columnDefsSet[initIndex], null, $dom);
        $('#tablandinfolist').off('click').on('click', '.underline', Company.linkWithCodeEventHandler);
    },
    showComBuInfo: function($dom, index) {
        //企业业务
        var tableSetting = [{
                fn: "showComBuInfo",
                interface: "getprojectsinfo",
                moduleName: intl('205500', '企业业务'),
                tabChange: {
                    type: [intl('205502', '项目信息'), intl('205501', '品牌信息'), intl('222476', '品牌加盟'), intl('138757', '产品信息'), intl('222477', '电商店铺'), intl('222478', '旗下酒店')],
                    typeCnName: ["项目信息", "品牌信息", '品牌加盟', '产品信息', '电商店铺', '旗下酒店'],
                    typeName: "type",
                    typeBasicNum: ["project_info_num", "tradelbl_num", "brand_combining_num", "product_num", "ecommerce_store_num", "hotel_num"]
                },
                modelNum: "project_info_num",
                moreLink: "showComBuInfo",
                thWidthRadio: ["5%", "30%", "15%", "50%"],
                thName: [intl('138741' /* 序号 */ ), intl('34886' /* 项目名称 */ ), intl('205503' /* 所属领域*/ ), intl('138847' /*简介*/ )],
                align: [0, 0, 0, 0],
                fields: ["NO.", "projName", "domain", "projBrief"],

                notVipPageTurning: true,
                notVipPageTitle: intl('205502', '项目信息'),
                notVipPagedesc: intl('224207'),
            },
            { //品牌信息
                fn: "showComBuInfo",
                interface: "getbrandnamelist",
                moduleName: intl('205500' /*企业业务*/ ),
                modelNum: "tradelbl_num",
                moreLink: "showComBuInfo",
                thWidthRadio: ["5%", "25%", "10%", "10%", "50%"],
                thName: [intl('138741' /* 序号 */ ), intl('138665' /* 品牌名称 */ ), intl('205504' /*发源地*/ ), intl('205505' /* 创立时间*/ ), intl('138847' /*简介*/ )],
                align: [0, 0, 0, 0, 0],
                fields: ["NO.", "brand_name", "cradle", "founding_time", "introduction"],
                notVipPageTurning: true,
                notVipPageTitle: intl('205501', '品牌信息'),
                notVipPagedesc: intl('224208'),
            },
            { //品牌加盟
                fn: "showComBuInfo",
                interface: "getbrandcombining",
                moduleName: intl('205500' /*企业业务*/ ),
                modelNum: "brand_combining_num",
                moreLink: "showComBuInfo",
                thWidthRadio: ["5%", "30%", "15%", "20%", "15%", "15%"],
                thName: [intl('138741' /* 序号 */ ), intl('138665', '品牌名称'), intl('222797', '加盟行业'), intl('222798', '加盟模式'), intl('222799', '基本投资'), intl('222800', '加盟费用')],
                align: [0, 0, 0, 0, 0, 0],
                fields: ["NO.", "brandName", "industry", "joinModel", "basicInvestment", "joiningFree"],
            },
            { //产品信息
                fn: "showComBuInfo",
                interface: "getproductlist",
                moduleName: intl('205500' /*企业业务*/ ),
                moreLink: "showComBuInfo",
                modelNum: "product_num",
                thWidthRadio: ["5%", "25%", "10%", "15%", "10%", "15%", "20%"],
                thName: [intl('138741' /* 序号 */ ), intl('208887' /*产品简称*/ ), intl('138754' /*产品类别*/ ), intl('208862' /*下载总数量*/ ), intl('208881' /*评分*/ ), intl('208863' /*评论总数量*/ ), intl('208864' /*产品简述*/ )],
                align: [0, 0, 0, 0, 0, 0, 0],
                fields: ["NO.", "appAbbr", "appCat", "downNum", "score", "noteNum", "appBrief"],
                notVipPageTurning: true,
                notVipPageTitle: intl('138757', '产品信息'),
                notVipPagedesc: intl('224209'),
            },
            { //电商店铺
                fn: "showComBuInfo",
                interface: "getecommercestore",
                moduleName: intl('205500' /*企业业务*/ ),
                modelNum: "ecommerce_store_num",
                moreLink: "showComBuInfo",
                thWidthRadio: ["5%", "40%", "20%", "20%", "15%"],
                thName: [intl('138741' /* 序号 */ ), intl('222801', '店铺名称'), intl('222802', '店铺类型'), intl('222804', '所属平台'), intl('222803', '经营模式')],
                align: [0, 0, 0, 0, 0],
                fields: ["NO.", "shopName", "shopType", "platform", "businessModel"],
            },
            { //旗下酒店
                fn: "showComBuInfo",
                interface: "gethotels",
                moduleName: intl('205500' /*企业业务*/ ),
                modelNum: "hotel_num",
                moreLink: "showComBuInfo",
                thWidthRadio: ["5%", "20%", "10%", "10%", "10%", "10%", "35%"],
                thName: [intl('138741' /* 序号 */ ), intl('222805', '酒店名称'), intl('222806', '酒店类型'), intl('222808', '酒店星级'), intl('138418', '经营状况'), intl('222807', '开业日期'), intl('222809', '酒店简介')],
                align: [0, 0, 0, 0, 0, 0, 0],
                fields: ["NO.", "hotelName", "hotelType", "hotelStar", "operatingCondition", "openDate", "introduction"],
            }
        ]
        var initIndex = index ? index : "0";
        if (initIndex == 0) {
            for (var i = 0; i < tableSetting.length; i++) {
                var thisBasicNum = tableSetting[0].tabChange.typeBasicNum[i];
                if (thisBasicNum && Company.basicNum[thisBasicNum] && Company.basicNum[thisBasicNum] != 0) {
                    break;
                } else {
                    initIndex++;
                    if (initIndex >= tableSetting.length) {
                        initIndex = 0;
                    }
                }
            }
        }
        var $container = $dom ? $dom : $('#workspace');
        if (index) {
            // 多个页签切换时，移除之前已绑定的统计图表事件监听
            $container.find('.widget-header').off('click', '.icon-chart', tableSetting.drawChart)
        }
        $container.empty().html(Company.drawTab(tableSetting, "tabcompanybulist", "tbodycompanybulist", null, $dom, initIndex));
        var columnDefsSet = [
            [{
                    "targets": 1,
                    "data": 'projName',
                    "render": function(data, type, full, meta) {
                        var img = full.projRowKey; //logo
                        var str_img_list = "../resource/images/Company/default_group.png";
                        if (data) {
                            var brand_img_list = '<img width="40" src="http://news.windin.com/ns/imagebase/6760/' + img + '" class="business_images big-logo"' + ' onerror="this.src=\'' + str_img_list + '\'"/>';
                            return brand_img_list + Company.addDropLink(data, ["getprojectsinfodetail", "detailId", 4, full.referenceId]);
                        } else {
                            var no_img_list = '<img width="40"  src="' + str_img_list + '" class="brand_images_list"/>';
                            return no_img_list + Company.addDropLink(data, ["getprojectsinfodetail", "detailId", 4, full.referenceId]);
                        }
                    }
                },
                {
                    "targets": 2,
                    "data": 'domain',
                    "render": function(data, type, full, meta) {
                        return Common.formatCont(data)
                    }
                },
                {
                    "targets": 3,
                    "data": 'projBrief',
                    "render": function(data, type, full, meta) {
                        var result = '<span class="text-2-show view-cont-control" title="点击展开">' + Common.formatCont(data) + '</span>';
                        return result;
                    }
                }
            ],
            [{
                    "targets": 1,
                    "data": 'brandName',
                    "render": function(data, type, full, meta) {
                        var img = full.logo; //logo
                        var str_img_list = "../resource/images/Reports/no_photo_list.png";
                        if (data) {
                            var brand_img_list = '<img width="40" src="' + img + '" class="business_images big-logo"' + ' onerror="this.src=\'' + str_img_list + '\'"/>';
                            return brand_img_list + Company.addDropLink(data, ["gettradelblsdetail", "detailId", 5, full.detail_id]);
                        } else {
                            var no_img_list = '<img width="40"  src="' + str_img_list + '" class="brand_images_list"/>';
                            return no_img_list + Company.addDropLink(data, ["gettradelblsdetail", "detailId", 5, full.detail_id]);
                        }
                    }
                },
                {
                    "targets": 2,
                    "data": 'brandOrigin',
                    "render": function(data, type, full, meta) {
                        return Common.formatCont(data)
                    }
                },
                {
                    "targets": 3,
                    "data": 'brandBeginTime',
                    "render": function(data, type, full, meta) {
                        return Common.formatCont(data)
                    }
                },
                {
                    "targets": 4,
                    "data": 'brandBrief',
                    "render": function(data, type, full, meta) {
                        //...展开
                        var result = '<span class="text-2-show view-cont-control" title="点击展开">' + Common.formatCont(data) + '</span>';
                        return result;
                    }
                }
            ],
            [ //品牌加盟
                {
                    "targets": 1,
                    "data": 'brandName',
                    "render": function(data, type, full, meta) {
                        var img = full.brandLogo ? full.brandLogo : '';
                        var imgStr = '<span class="person_img"><img class="big-logo" width="40" src=' + img + ' onerror="src=\'../resource/images/Company/no-product.png\'"></span>';
                        return imgStr + Company.addDropLink(data, ["getbrandcombiningdetail", "detailId", 6, full.brandJoinId]);
                    }
                },
                {
                    "targets": 2,
                    "data": 'industry',
                    "render": function(data) {
                        return Common.formatCont(data)
                    }
                },
                {
                    "targets": 3,
                    "data": 'joinModel',
                    "render": function(data) {
                        return Common.formatCont(data)
                    }
                },
                {
                    "targets": 4,
                    "data": 'basicInvestment',
                    "render": function(data) {
                        return Common.formatCont(data);
                    }
                },
                {
                    "targets": 5,
                    "data": 'joiningFree',
                    "render": function(data) {
                        return Common.formatCont(data)
                    }
                }
            ],
            [ //产品信息
                {
                    "targets": 1,
                    "data": 'appAbbr',
                    "render": function(data, type, full, meta) {
                        var img = 'http://news.windin.com/ns/imagebase/6730/' + full.appRowkey;
                        var imgStr = '<span class="person_img"><img class="big-logo" width="40" src=' + img + ' onerror="src=\'../resource/images/Company/no-product.png\'"></span>';
                        var nameStr = '<span class="name-isctrl"><a class="short-img-name wi-secondary-color wi-link-color buryClickCenter" target="_blank" href="showItemDetail.html?type=product&detailid=' + full.appId + '">' + Common.formatCont(data) + '</a></span>';
                        return imgStr + nameStr;
                    }
                },
                {
                    "targets": 2,
                    "data": 'appCat',
                    "render": function(data) {
                        return Common.formatCont(data)
                    }
                },
                {
                    "targets": 3,
                    "data": 'downNum',
                    "render": function(data) {
                        return Common.formatMoney(data, [4, '&nbsp;'])
                    }
                },
                {
                    "targets": 4,
                    "data": 'score',
                    "render": function(data) {
                        return Common.formatFloat(data, 1);
                    }
                },
                {
                    "targets": 5,
                    "data": 'noteNum',
                    "render": function(data) {
                        return Common.formatMoney(data, [4, '&nbsp;'])
                    }
                },
                {
                    "targets": 6,
                    "data": 'appBrief',
                    "render": function(data) {
                        return Common.formatCont(data)
                    }
                }
            ],
            [ //电商店铺
                {
                    "targets": 1,
                    "data": 'shopName',
                    "render": function(data, type, full, meta) {
                        var img = full.shopLogo ? full.shopLogo : '';
                        if (img) {
                            var imgStr = '<span class="person_img"><img class="big-logo" width="40" src=' + img + ' onerror="src=\'../resource/images/Company/no-shop.png\'"></span>';
                            return imgStr + Company.addDropLink(data, ["getecommercestoredetail", "detailId", 5, full.shopId]);
                        } else {
                            var imgStr = '<span class="person_img"><img class="big-logo" width="40" src="../resource/images/Company/no-shop.png"></span>';
                            return imgStr + Company.addDropLink(data, ["getecommercestoredetail", "detailId", 5, full.shopId]);
                        }
                    }
                },
                {
                    "targets": 2,
                    "data": 'shopType',
                    "render": function(data) {
                        return Common.formatCont(data)
                    }
                },
                {
                    "targets": 3,
                    "data": 'platformName',
                    "render": function(data) {
                        return Common.formatCont(data)
                    }
                },
                {
                    "targets": 4,
                    "data": 'businessModel',
                    "render": function(data) {
                        return Common.formatCont(data);
                    }
                }
            ],
            [ //旗下酒店
                {
                    "targets": 1,
                    "data": 'hotelName',
                    "render": function(data, type, full, meta) {
                        var nameStr = '<span class="name-isctrl"><a class="short-img-name wi-secondary-color wi-link-color" target="_blank" href="showItemDetail.html?type=hotels&detailid=' + full.hotelId + '">' + Common.formatCont(data) + '</a></span>';
                        return nameStr;
                    }
                },
                {
                    "targets": 2,
                    "data": 'hotelType',
                    "render": function(data) {
                        return Common.formatCont(data)
                    }
                },
                {
                    "targets": 3,
                    "data": 'hotelStar',
                    "render": function(data) {
                        return Common.formatCont(data)
                    }
                },
                {
                    "targets": 4,
                    "data": 'operatingCondition',
                    "render": function(data) {
                        return Common.formatCont(data);
                    }
                },
                {
                    "targets": 5,
                    "data": 'openDate',
                    "render": function(data) {
                        return Common.formatTime(data)
                    }
                },
                {
                    "targets": 6,
                    "data": 'introduction',
                    "render": function(data) {
                        //...展开
                        var result = '<span class="text-2-show view-cont-control" title="点击展开">' + Common.formatCont(data) + '</span>';
                        return result;
                    }
                }
            ],
        ]
        Company.pageSetting("#tabcompanybulist", tableSetting[initIndex], columnDefsSet[initIndex], null, $dom);
        $('#tabcompanybulist').off('click').on('click', '.underline', Company.linkWithCodeEventHandler);
    },
    showStockMortgage: function($dom, index) {
        //股票质押
        var tableSetting = [{
                fn: "showStockMortgage",
                interface: "getstockpledgers",
                moduleName: intl('205471' /* 股票质押 */ ),
                tabChange: {
                    type: [intl('138447' /*出质人*/ ), intl('138446' /* 质权人*/ ), intl('138527' /* 出质标的*/ )],
                    typeCnName: ["出质人", "质权人", "出质标的"],
                    typeName: "type",
                    typeBasicNum: ["stock_pledgers_num", "stock_pledgees_num", "stock_plexes_num"]
                },
                modelNum: "stock_pledgers_num",
                moreLink: "showStockMortgage",
                thWidthRadio: ["5%", "20%", "20%", "15%", "15%", "10%", "10%", "5%"],
                thName: [intl('138741' /* 序号 */ ), intl('138447' /* 出质人 */ ), intl('138446' /*质权人*/ ), intl('138528' /*出质股权标的企业*/ ), intl('205511' /*质押数量(万股)*/ ), intl('138654' /*公告日期*/ ), intl('205512' /*是否解押*/ ), intl('40513' /*详情*/ )],
                align: [0, 0, 0, 0, 0, 0, 0, 0],
                fields: ["NO.", "pledger_name", "pledgee_name", "plex_name", "amount", "announceDate", "isRelease", "reference_id"],

            },
            {
                fn: "showStockMortgage",
                interface: "getstockpledgees",
                moduleName: intl('205471' /* 股票质押 */ ),
                modelNum: "stock_pledgees_num",
                moreLink: "showStockMortgage",
                thWidthRadio: ["5%", "20%", "20%", "15%", "15%", "10%", "10%", "5%"],
                thName: [intl('138741' /* 序号 */ ), intl('138447' /* 出质人 */ ), intl('138446' /*质权人*/ ), intl('138528' /*出质股权标的企业*/ ), intl('205511' /*质押数量(万股)*/ ), intl('138654' /*公告日期*/ ), intl('205512' /*是否解押*/ ), intl('40513' /*详情*/ )],
                align: [0, 0, 0, 0, 0, 0, 0, 0],
                fields: ["NO.", "pledger_name", "pledgee_name", "plex_name", "amount", "announceDate", "isRelease", "reference_id"],

            },
            {
                fn: "showStockMortgage",
                interface: "getstockplexes",
                moduleName: intl('205471' /* 股票质押 */ ),
                modelNum: "stock_plexes_num",
                moreLink: "showStockMortgage",
                // modelNum:"equitypledgelist_num",
                thWidthRadio: ["5%", "20%", "20%", "15%", "15%", "10%", "10%", "5%"],
                thName: [intl('138741' /* 序号 */ ), intl('138447' /* 出质人 */ ), intl('138446' /*质权人*/ ), intl('138528' /*出质股权标的企业*/ ), intl('205511' /*质押数量(万股)*/ ), intl('138654' /*公告日期*/ ), intl('205512' /*是否解押*/ ), intl('40513' /*详情*/ )],
                align: [0, 0, 0, 0, 0, 0, 0, 0],
                fields: ["NO.", "pledger_name", "pledgee_name", "plex_name", "amount", "announceDate", "isRelease", "reference_id"],

            }
        ]
        var initIndex = index ? index : "0";
        if (initIndex == 0) {
            for (var i = 0; i < tableSetting.length; i++) {
                var thisBasicNum = tableSetting[0].tabChange.typeBasicNum[i];
                if (thisBasicNum && Company.basicNum[thisBasicNum] && Company.basicNum[thisBasicNum] != 0) {
                    break;
                } else {
                    initIndex++;
                    if (initIndex >= tableSetting.length) {
                        initIndex = 0;
                    }
                }
            }
        }
        var $container = $dom ? $dom : $('#workspace');
        if (index) {
            // 多个页签切换时，移除之前已绑定的统计图表事件监听
            $container.find('.widget-header').off('click', '.icon-chart', tableSetting.drawChart)
        }
        $container.empty().html(Company.drawTab(tableSetting, "tabstockPledgelist", "tbodystockPledgelist", null, $dom, initIndex));
        var columnDefsSet = [
            [{
                    "targets": 1,
                    "data": 'pledger_name',
                    "render": function(data, type, full, meta) {
                        var personId = full.pledger_id ? full.pledger_id : '';
                        return (personId ? Common.jumpPersonOrCompany(data, personId) : data)
                    }
                },
                {
                    "targets": 2,
                    "data": 'pledgee_name',
                    "render": function(data, type, full, meta) {
                        var personId = full.pledgee_id ? full.pledgee_id : '';
                        return (personId ? Common.jumpPersonOrCompany(data, personId) : data)
                    }
                },
                {
                    "targets": 3,
                    "data": 'plex_name',
                    "render": function(data, type, full, meta) {
                        var personId = full.plex_id ? full.plex_id : '';
                        return (personId ? Common.jumpPersonOrCompany(data, personId) : data)
                    }
                },
                {
                    "targets": 4,
                    "data": 'amount',
                    "render": function(data, type, full, meta) {
                        return data
                    }
                },
                {
                    "targets": 5,
                    "data": 'announceDate',
                    "render": function(data, type, full, meta) {
                        return Common.formatTime(data)
                    }
                },
                {
                    "targets": 6,
                    "data": 'isRelease',
                    "render": function(data, type, full, meta) {
                        if (data == '1') {
                            return '是';
                        } else {
                            return '否';
                        }

                    }
                },
                {
                    "targets": 7,
                    "data": 'reference_id',
                    "render": function(data, type, full, meta) {
                        var buryData = 'data-buryId="' + data + '" data-buryEntity="showStockMortgage" data-buryEntity="出质人"'; //bury
                        return Common.showDetailLink(data, ["getstockpledgersdetail", "detailId", 8], buryData);
                    }
                }
            ],
            [{
                    "targets": 1,
                    "data": 'pledger_name',
                    "render": function(data, type, full, meta) {
                        var personId = full.pledger_id ? full.pledger_id : '';
                        return (personId ? Common.jumpPersonOrCompany(data, personId) : data)
                    }
                },
                {
                    "targets": 2,
                    "data": 'pledgee_name',
                    "render": function(data, type, full, meta) {
                        var personId = full.pledgee_id ? full.pledgee_id : '';
                        return (personId ? Common.jumpPersonOrCompany(data, personId) : data)
                    }
                },
                {
                    "targets": 3,
                    "data": 'plex_name',
                    "render": function(data, type, full, meta) {
                        var personId = full.plex_id ? full.plex_id : '';
                        return (personId ? Common.jumpPersonOrCompany(data, personId) : data)
                    }
                },
                {
                    "targets": 4,
                    "data": 'amount',
                    "render": function(data, type, full, meta) {
                        return data
                    }
                },
                {
                    "targets": 5,
                    "data": 'announceDate',
                    "render": function(data, type, full, meta) {
                        return Common.formatTime(data)
                    }
                },
                {
                    "targets": 6,
                    "data": 'isRelease',
                    "render": function(data, type, full, meta) {
                        if (data == '1') {
                            return '是';
                        } else {
                            return '否';
                        }
                    }
                },
                {
                    "targets": 7,
                    "data": 'referenceId',
                    "render": function(data, type, full, meta) {
                        var buryData = 'data-buryId="' + data + '" data-buryEntity="showStockMortgage" data-buryEntity="质权人"'; //bury
                        return Common.showDetailLink(data, ["getstockpledgeesdetail", "detailId", 8], buryData);
                    }
                }
            ],
            [{
                    "targets": 1,
                    "data": 'pledger_name',
                    "render": function(data, type, full, meta) {
                        var personId = full.pledger_id ? full.pledger_id : '';
                        return (personId ? Common.jumpPersonOrCompany(data, personId) : data)
                    }
                },
                {
                    "targets": 2,
                    "data": 'pledgee_name',
                    "render": function(data, type, full, meta) {
                        var personId = full.pledgee_id ? full.pledgee_id : '';
                        return (personId ? Common.jumpPersonOrCompany(data, personId) : data)
                    }
                },
                {
                    "targets": 3,
                    "data": 'plex_name',
                    "render": function(data, type, full, meta) {
                        var personId = full.plex_id ? full.plex_id : '';
                        return (personId ? Common.jumpPersonOrCompany(data, personId) : data)
                    }
                },
                {
                    "targets": 4,
                    "data": 'amount',
                    "render": function(data, type, full, meta) {
                        return data
                    }
                },
                {
                    "targets": 5,
                    "data": 'announceDate',
                    "render": function(data, type, full, meta) {
                        return Common.formatTime(data)
                    }
                },
                {
                    "targets": 6,
                    "data": 'isRelease',
                    "render": function(data, type, full, meta) {
                        if (data == '1') {
                            return '是';
                        } else {
                            return '否';
                        }
                    }
                },
                {
                    "targets": 7,
                    "data": 'referenceId',
                    "render": function(data, type, full, meta) {
                        var buryData = 'data-buryId="' + data + '" data-buryEntity="showStockMortgage" data-buryEntity="出质标的"'; //bury
                        return Common.showDetailLink(data, ["getstockplexesdetail", "detailId", 8], buryData);
                    }
                }
            ]
        ]
        if (initIndex == 0 && $dom) {
            var eachModuleData = Company.companyFinancingInfoData.stockPledgers ? Company.companyFinancingInfoData.stockPledgers : null;
            Company.pageSetting_new("#tabstockPledgelist", tableSetting[0], eachModuleData, columnDefsSet[0], null, $dom);
        } else {
            Company.pageSetting("#tabstockPledgelist", tableSetting[initIndex], columnDefsSet[initIndex], null, $dom);
        }

        $('#tabstockPledgelist a').removeClass('underline');
    },
    customerSupVal: "",
    supplierVal: "",
    showCustomersSup: function($dom, index) {
        //客户和供应商
        var tableSetting = [{
                fn: "showCustomersSup",
                interface: "getcorpcustomer",
                moduleName: intl('205516' /*客户和供应商*/ ),
                selName: ["customerSupVal"],
                aggName: ["aggs_period"],
                tabChange: {
                    type: [intl('28717' /*客户*/ ), intl('108764' /* 供应商*/ )],
                    typeCnName: ["客户", "供应商"],
                    typeName: "type",
                    typeBasicNum: ["customer_num", "supplier_num"]
                },
                modelNum: "customer_num",
                moreLink: "showCustomersSup",
                thWidthRadio: ["5%", "30%", "15%", "10%", "10%", "15%", "15%"],
                thName: [intl('138741' /* 序号 */ ), intl('205519' /*客户名称*/ ), intl('205518' /*销售金额(元)*/ ), intl('2045' /*币种*/ ), intl('205517' /*销售比例*/ ), intl('1794' /*报告期*/ ), intl('138662' /*关联关系*/ )],
                align: [0, 0, 0, 0, 0, 0, 0],
                fields: ["NO.", "company_name", "money", "currency_code", "proportion", "period", "relationship"],
                notVipPageTurning: true,
                notVipPageTitle: intl('28717', '客户'),
                notVipPagedesc: intl('224210'),
            },
            {
                fn: "showCustomersSup",
                interface: "getcorpsupplier",
                moduleName: intl('205516' /*客户和供应商*/ ),
                selName: ["supplierVal"],
                aggName: ["aggs_period"],
                modelNum: "supplier_num",
                moreLink: "showCustomersSup",
                thWidthRadio: ["5%", "30%", "15%", "10%", "10%", "15%", "15%"],
                thName: [intl('138741' /* 序号 */ ), intl('205522' /*供应商名称*/ ), intl('205521' /*采购金额(元)*/ ), intl('2045' /*币种*/ ), intl('205520' /*采购比例*/ ), intl('1794' /*报告期*/ ), intl('138662' /*关联关系*/ )],
                align: [0, 0, 0, 0, 0, 0, 0],
                fields: ["NO.", "company_name", "money", "currency_code", "proportion", "period", "relationship"],
                notVipPageTurning: true,
                notVipPageTitle: intl('108764', '供应商'),
                notVipPagedesc: intl('224211'),
            }
        ]
        var initIndex = index ? index : "0";
        if (initIndex == 0) {
            for (var i = 0; i < tableSetting.length; i++) {
                var thisBasicNum = tableSetting[0].tabChange.typeBasicNum[i];
                if (thisBasicNum && Company.basicNum[thisBasicNum] && Company.basicNum[thisBasicNum] != 0) {
                    break;
                } else {
                    initIndex++;
                    if (initIndex >= tableSetting.length) {
                        initIndex = 0;
                    }
                }
            }
        }
        var $container = $dom ? $dom : $('#workspace');
        if (index) {
            // 多个页签切换时，移除之前已绑定的统计图表事件监听
            $container.find('.widget-header').off('click', '.icon-chart', tableSetting.drawChart)
        }
        $container.empty().html(Company.drawTab(tableSetting, "tabCustomerSuplist", "tbodyCustomerSuplist", null, $dom, initIndex));
        var columnDefsSet = [
            [{
                    "targets": 1,
                    "data": 'company_name',
                    "render": function(data, type, full, meta) {
                        var shortname = full.company_short_name;
                        var type = 2;
                        var id = full.company_code;
                        //                      var img = full.company_logo ? full.company_logo : null;
                        var img = full.company_logo_v ? full.company_logo_v : '';
                        var pingParam = '&fromModule=' + buryItemMapping.mappingEntity["showCustomersSup"] + '&entityAttribute=' + buryItemMapping.mappingEntity["getcorpcustomer"] + '&fromField=客户名称&opId=' + id; //bury
                        return (Common.showCompanyName(type, data, id, img, shortname, null, null, null, null, pingParam)); //企业logo
                    }
                },
                {
                    "targets": 2,
                    "data": 'money',
                    "render": function(data, type, full, meta) {
                        return Common.formatMoney(data, [4, '&nbsp;'])
                    }
                },
                {
                    "targets": 3,
                    "data": 'currency_code',
                    "render": function(data, type, full, meta) {
                        return Common.formatCont(data)
                    }
                },
                {
                    "targets": 4,
                    "data": 'proportion',
                    "render": function(data, type, full, meta) {
                        return Common.formatPercent(data)
                    }
                },
                {
                    "targets": 5,
                    "data": 'period',
                    "render": function(data, type, full, meta) {
                        return Common.formatTime(data)
                    }
                },
                {
                    "targets": 6,
                    "data": 'relationship',
                    "render": function(data, type, full, meta) {
                        return Common.formatCont(data)
                    }
                }
            ],
            [{
                    "targets": 1,
                    "data": 'company_name',
                    "render": function(data, type, full, meta) {
                        var shortname = full.company_short_name;
                        var type = 2;
                        var id = full.company_code;
                        //                      var img = full.company_logo ? full.company_logo : null;
                        var img = full.company_logo_v ? full.company_logo_v : null;
                        var pingParam = '&fromModule=' + buryItemMapping.mappingEntity["showCustomersSup"] + '&entityAttribute=' + buryItemMapping.mappingEntity["getcorpsupplier"] + '&fromField=供应商名称&opId=' + id; //bury
                        return (Common.showCompanyName(type, data, id, img, shortname, null, null, null, null, pingParam)); //企业logo
                    }
                },
                {
                    "targets": 2,
                    "data": 'money',
                    "render": function(data, type, full, meta) {
                        return Common.formatMoney(data, [4, '&nbsp;'])
                    }
                },
                {
                    "targets": 3,
                    "data": 'currency_code',
                    "render": function(data, type, full, meta) {
                        return Common.formatCont(data)
                    }
                },
                {
                    "targets": 4,
                    "data": 'proportion',
                    "render": function(data, type, full, meta) {
                        return Common.formatPercent(data)
                    }
                },
                {
                    "targets": 5,
                    "data": 'period',
                    "render": function(data, type, full, meta) {
                        return Common.formatTime(data)
                    }
                },
                {
                    "targets": 6,
                    "data": 'relationship',
                    "render": function(data, type, full, meta) {
                        return Common.formatCont(data)
                    }
                }
            ]
        ]
        var params = { "companycode": Company.companyCode, "period": Company.customerSupVal, "pageSize": 10 };
        if (initIndex == 1) {
            params = { "companycode": Company.companyCode, "period": Company.supplierVal, "pageSize": 10 };
        }
        Company.pageSetting("#tabCustomerSuplist", tableSetting[initIndex], columnDefsSet[initIndex], params, $dom);
        $('#tabCustomerSuplist').off('click').on('click', '.underline', Company.linkWithCodeEventHandler);
    },
    isEmptyObjForArr: function(obj) {
        //判断是不是所有值都是空数组的空对象
        var flag = true;
        for (var key in obj) {
            if (obj[key] && obj[key].length > 0) {
                flag = false;
                break;
            }
        }
        return flag;
    },
    isEmptyObjForLaw: function(obj) {
        //判断是不是所有值都是空数组的空对象
        var riskNum = parseInt(Company.basicNum["coutnotice_num"]) + parseInt(Company.basicNum["judgeinfo_num"]) + parseInt(Company.basicNum["trialnotice_num"]) + parseInt(Company.basicNum["cur_debetor_num"]);
        var flag = riskNum > 0 ? false : true;
        return flag;
    },
    drawCourtDetail: function(dom) {
        var params = { "companycode": Company.companyCode, "year": Company.companyRegDate }
        myWfcAjax("getjudgeinfostatistics", params, function(secondData) {
            var resSecondData = JSON.parse(secondData);
            Company.judgeinfostatistics = resSecondData;
            if (resSecondData.Data && !Company.isEmptyObjForArr(resSecondData.Data)) {
                var data = resSecondData.Data
                var nameArr = [];
                var valArr = [];
                var dataListType = []; //案件类型
                var dataListResult = []; //判决结果
                var dataListRole = []; //原被告角色
                var dataListCity = [];
                var nameTimeArr = [];
                var valTimeArr = [];
                for (var i = 0; i < data.aggs_case_type_detail.length; i++) {
                    var eachItem = data.aggs_case_type_detail[i]
                    nameArr.push(eachItem.key);
                    valArr.push(eachItem.doc_count)
                }
                for (var i = 0; i < data.aggs_case_type.length; i++) {
                    dataListType.push({ 'name': data.aggs_case_type[i].key, 'y': data.aggs_case_type[i].doc_count })
                }
                for (var i = 0; i < data.aggs_role.length; i++) {
                    dataListRole.push({ 'name': data.aggs_role[i].key, 'y': data.aggs_role[i].doc_count })
                }
                for (var i = 0; i < data.aggs_case_result.length; i++) {
                    dataListResult.push({ 'name': data.aggs_case_result[i].key, 'y': data.aggs_case_result[i].doc_count })
                }
                for (var i = 0; i < data.aggs_area_name.length; i++) {
                    dataListCity.push({ 'name': data.aggs_area_name[i].key, 'value': data.aggs_area_name[i].doc_count })
                }
                for (var i = 0; i < data.aggs_judge_time.length; i++) {
                    var eachItem = data.aggs_judge_time[i];
                    nameTimeArr.push(eachItem.key);
                    valTimeArr.push(eachItem.doc_count);
                }
                var tmpArr = [];
                tmpArr.push('<div id="chartCount01" class="each-draw-court"></div>');
                tmpArr.push('<div id="chartCount02" class="each-draw-court" style="display:none"></div>')
                tmpArr.push('<div id="chartCount03" class="each-draw-court" style="display:none"></div>')
                tmpArr.push('<div id="chartCount04" class="each-draw-court" style="display:none"></div>')
                tmpArr.push('<div id="chartCount05" class="each-draw-court" style="display:none"></div>')
                $(dom).html(tmpArr.join(""))
                Highcharts.setOptions({
                    lang: {
                        downloadJPEG: intl('222618') /* 下载JPEG图片 */ ,
                        downloadPNG: intl('222621') /* 下载PNG图片 */ ,
                    }
                })
                $("#chartCount01").highcharts({
                    credits: {
                        enabled: false // 禁用版权信息
                    },
                    // ycye.cecil modify UI颜色 2020-10-26 start
                    colors: ['#2277a2'],
                    // ycye.cecil modify UI颜色 2020-10-26 end
                    chart: {
                        type: 'column',
                        spacingRight: 45,
                        width: 999
                    },
                    plotOptions: {
                        column: {
                            maxPointWidth: 20
                        },
                        series: {
                            dataLabels: {
                                enabled: true,
                                align: 'center',
                                // ycye.cecil modify UI颜色 2020-10-28 start
                                useHTML: true,
                                formatter: function() {
                                    return `<span style="color:` + this.point.color + `">` + this.point.y + `</span>`
                                },
                                // ycye.cecil modify UI颜色 2020-10-28 end
                                crop: false, //让数字一直显示在顶部，而不根据需要自动调整到内部。
                                overflow: "none" //让数字一直显示在顶部，而不根据需要自动调整到内部。
                            }
                        }
                    },
                    tooltip: {
                        formatter: function() {
                            return this.x + ":" + this.y
                        }
                    },
                    title: {
                        text: '案由Top10',
                        align: 'left',
                        style: {
                            "color": "#333333",
                            "fontSize": "12px",
                        },
                        margin: 30
                    },
                    noData: {
                        style: {
                            fontWeight: 'bold',
                            fontSize: '16px',
                            color: '#666666'
                        }
                    },
                    exporting: {
                        buttons: {
                            contextButton: {
                                // ycye.cecil modify UI颜色 2020-10-28 start
                                symbol: 'url(../resource/images/Company/export_download.png)',
                                // ycye.cecil modify UI颜色 2020-10-28 end
                                symbolSize: 20,
                                symbolX: 23,
                                symbolY: 22,
                                menuItems: [
                                    null, null, defaultMenuItem[3], defaultMenuItem[4]
                                ]
                            }
                        }
                    },
                    xAxis: [{
                        categories: nameArr,
                        crosshair: true,
                        type: 'category',
                        labels: {
                            rotation: 40,
                            align: 'left',
                            style: { color: '#333333' }
                        },
                        tickWidth: 0,
                        lineColor: '#333333'
                    }],
                    yAxis: [{
                        title: {
                            text: '',
                        },
                        labels: {
                            enabled: false
                        },
                        gridLineWidth: 0,
                        visible: false
                    }],
                    legend: {
                        enabled: false
                    },
                    series: [{
                        name: '',
                        data: valArr
                    }]
                });
                // ycye.cecil modify UI颜色 2020-10-28 start
                $('.highcharts-button-symbol').attr("width", "19.6px")
                $('.highcharts-button-symbol').attr("height", "18px")
                    // ycye.cecil modify UI颜色 2020-10-28 end
                Company.drawPie($("#chartCount02"), dataListType, "案件类型")
                Company.drawPie($("#chartCount03"), dataListResult, "判决结果")
                Company.drawPie($("#chartCount04"), dataListRole, "原告被告角色")
                Company.drawLines($("#chartCount05"), nameTimeArr, valTimeArr, "判决年份分布")
            } else {
                $("#modelDrawCount").hide();
            }
        }, function() {
            $("#modelDrawCount").hide();
        })
    },
    drawBrandDetail: function(dom) {
        var params = { "companycode": Company.companyCode, "year": Company.companyRegDate }
        myWfcAjax("gettrademarkstatistics", params, function(secondData) {
            var resSecondData = JSON.parse(secondData);
            Company.brandinfostatistics = resSecondData;
            if (resSecondData.Data && !Company.isEmptyObjForArr(resSecondData.Data)) {
                var data = resSecondData.Data
                var dataListType = []; //分类
                var dataListStatus = []; //判决结果
                var nameTimeArr = [];
                var valTimeArr = [];
                for (var i = 0; i < data.aggs_trademark_classify.length; i++) {
                    dataListType.push({ 'name': data.aggs_trademark_classify[i].key, 'y': data.aggs_trademark_classify[i].doc_count })
                }
                for (var i = 0; i < data.aggs_trademark_status.length; i++) {
                    dataListStatus.push({ 'name': data.aggs_trademark_status[i].key, 'y': data.aggs_trademark_status[i].doc_count })
                }

                for (var i = 0; i < data.aggs_applicant_time.length; i++) {
                    var eachItem = data.aggs_applicant_time[i];
                    nameTimeArr.push(eachItem.key);
                    valTimeArr.push(eachItem.doc_count);
                }
                var tmpArr = [];
                tmpArr.push('<div id="chartBrand01" class="each-draw-court"></div>');
                tmpArr.push('<div id="chartBrand02" class="each-draw-court" style="display:none"></div>')
                tmpArr.push('<div id="chartBrand03" class="each-draw-court" style="display:none"></div>')
                $(dom).html(tmpArr.join(""))
                Company.drawPie($("#chartBrand02"), dataListType, "商标分类分布")
                Company.drawPie($("#chartBrand03"), dataListStatus, "商标状态分布")
                Company.drawLines($("#chartBrand01"), nameTimeArr, valTimeArr, "申请年份分布")
            } else {
                $("#modelDrawBrand").hide();
            }
        })
    },

    drawPatentDetail: function(dom) {
        var params = { "companycode": Company.companyCode, "year": Company.companyRegDate }
        myWfcAjax("getpatentstatistics", params, function(secondData) {
            var resSecondData = JSON.parse(secondData);
            Company.patentinfostatistics = resSecondData;
            if (resSecondData.Data && !Company.isEmptyObjForArr(resSecondData.Data)) {
                var data = resSecondData.Data
                var typeArr = []; //分类
                var statusArr = []; //判决结果
                var nameTimeArr = [];
                var valTimeArr = []; //专利申请值
                var valTimeArr02 = []; //专利公布值
                var objZllx = {}; // 专利类型统计表对象
                var objZlfl = {}; // 专利分类统计表对象
                var objTypes = {};
                var objDates = [];
                for (var i = 0; i < data.aggs_patent_type_detail.length; i++) {
                    typeArr.push({ 'name': data.aggs_patent_type_detail[i].key, 'y': data.aggs_patent_type_detail[i].doc_count })
                    Object.defineProperty(objTypes, data.aggs_patent_type_detail[i].key, {
                        value: data.aggs_patent_type_detail[i].key,
                    })
                }
                for (var i = 0; i < data.aggs_law_status.length; i++) {
                    statusArr.push({ 'name': data.aggs_law_status[i].key, 'y': data.aggs_law_status[i].doc_count })
                }
                for (var i = 0; i < data.aggs_apply_date.length; i++) {
                    var eachItem = data.aggs_apply_date[i]
                    nameTimeArr.push(eachItem.key);
                    valTimeArr.push(eachItem.doc_count)

                    try {
                        typeArr.forEach(function(tt) {
                            if (!objZllx[tt.name]) {
                                objZllx[tt.name] = { '申请': null, '公布': null };
                            }
                            if (!objZllx[tt.name]['申请']) {
                                objZllx[tt.name]['申请'] = {
                                    a0: tt.name,
                                    b0: '申请数量',
                                    data: [{
                                        key: eachItem.key, // 年份
                                        doc_count: '--', // 数量
                                    }]
                                }
                            } else {
                                objZllx[tt.name]['申请'].data.push({
                                    key: eachItem.key,
                                    doc_count: '--', // 数量
                                })
                            }
                            if (!objZllx[tt.name]['公布']) {
                                objZllx[tt.name]['公布'] = {
                                    a0: tt.name,
                                    b0: '公布数量',
                                    data: [{
                                        key: eachItem.key, // 年份
                                        doc_count: '--', // 数量
                                    }]
                                }
                            } else {
                                objZllx[tt.name]['公布'].data.push({
                                    key: eachItem.key,
                                    doc_count: '--', // 数量
                                })
                            }
                        });
                    } catch (e) {
                        typeArr = [];
                    }
                }
                nameTimeArr = nameTimeArr.sort();
                for (var i = 0; i < nameTimeArr.length; i++) {
                    var flag = false;
                    for (var k = 0; k < data.aggs_release_date.length; k++) {
                        if (nameTimeArr[i] == data.aggs_release_date[k].key) {
                            valTimeArr02.push(data.aggs_release_date[k].doc_count);
                            flag = true;
                        }
                    }
                    if (!flag) {
                        valTimeArr02.push(0)
                    }
                }
                objDates = nameTimeArr;
                var lineValArr = [];
                lineValArr.push({ 'name': '专利申请', 'data': valTimeArr });
                lineValArr.push({ 'name': '专利公布', 'data': valTimeArr02 })
                var tmpArr = [];
                tmpArr.push('<div id="chartPatent01" class="each-draw-court"></div>');
                tmpArr.push('<div id="chartPatent02" class="each-draw-court" style="display:none"></div>')
                tmpArr.push('<div id="chartPatent03" class="each-draw-court" style="display:none"></div>')
                tmpArr.push('<div id="chartPatent04" class="each-draw-court" style="display:none"></div>')
                tmpArr.push('<div id="chartPatent05" class="each-draw-court" style="display:none"></div>')

                $(dom).html(tmpArr.join(""))
                Company.drawPie($("#chartPatent02"), typeArr, "专利分类分布")
                Company.drawPie($("#chartPatent03"), statusArr, "专利状态分布")
                Company.drawTwoLines($("#chartPatent01"), nameTimeArr, lineValArr, "专利年份分布")

                try {
                    if (data.aggs_apply_date && data.aggs_apply_date.length) {
                        for (var i = 0; i < data.aggs_apply_date.length; i++) {
                            var t = data.aggs_apply_date[i];
                            var y = t.key;
                            if (y && t.aggs_patent_type && t.aggs_patent_type.length) {
                                t.aggs_patent_type.forEach(function(tt) {
                                    if (objZllx[tt.key]['申请'] && objZllx[tt.key]['申请'].data) {
                                        for (var jj = 0; jj < objZllx[tt.key]['申请'].data.length; jj++) {
                                            if (objZllx[tt.key]['申请'].data[jj].key == y) {
                                                objZllx[tt.key]['申请'].data[jj].doc_count = tt.doc_count;
                                                break;
                                            }
                                        }
                                    }
                                })
                            }
                        }
                    }
                    if (data.aggs_release_date && data.aggs_release_date.length) {
                        for (var i = 0; i < data.aggs_release_date.length; i++) {
                            var t = data.aggs_release_date[i];
                            var y = t.key;
                            if (y && t.aggs_patent_type && t.aggs_patent_type.length) {
                                t.aggs_patent_type.forEach(function(tt) {
                                    for (var jj = 0; jj < objZllx[tt.key]['公布'].data.length; jj++) {
                                        if (objZllx[tt.key]['公布'].data[jj].key == y) {
                                            objZllx[tt.key]['公布'].data[jj].doc_count = tt.doc_count;
                                            break;
                                        }
                                    }

                                })
                            }
                        }
                    }
                    if (data.aggs_patent_classification_type && data.aggs_patent_classification_type.length) {
                        data.aggs_patent_classification_type.forEach(function(t) {
                            if (!objZlfl['IPC'] && !objZlfl['LOC']) {
                                objZlfl = {
                                    IPC: {}, // 发明专利等       
                                    LOC: {}, // 外观专利等                               
                                }
                            }
                            if (t.aggs_patent_classification_2 && t.aggs_patent_classification_2.length) {
                                t.aggs_patent_classification_2.forEach(function(tt) {
                                    var title = '--';
                                    if (/ipc/ig.test(t.key)) {
                                        title = '发明专利/实用新型专利/其他类型';
                                    } else if (/loc/ig.test(t.key)) {
                                        title = '外观设计专利';
                                    }
                                    objZlfl[t.key][tt.key] = {
                                        a0: title,
                                        b0: tt.key,
                                        data: tt.aggs_release_date && tt.aggs_release_date.length ? tt.aggs_release_date : [],
                                    };
                                })
                            }
                        })
                    }
                } catch (e) {
                    objZllx = {};
                    objZlfl = {};
                }
                Company.drawExtraTable($("#chartPatent04").addClass('auto-table'), "专利类型统计表", objZllx, objDates);
                Company.drawExtraTable($("#chartPatent05").addClass('auto-table'), "专利分类统计表", objZlfl, objDates);
            } else {
                $("#modelDrawPatent").hide();
            }
        })
    },
    drawExtraTable: function($dom, title, ds, years) {
        var tableHtmlArr = [];
        tableHtmlArr.push('<table class="table-company table-company-patent" id="ddd" ><thead><tr>');
        tableHtmlArr.push(`<th align="left" width="200%" colspan="2" class="th-rorate">        
            <span class="th-rorate-down">专利类型</span>
            <span class="th-rorate-up">年份</span>        
        </th>`);
        years.forEach(function(t) {
            var td = t + '年';
            tableHtmlArr.push(`<th align="left" width="100%">${td}</th>`);
        })
        tableHtmlArr.push(`</tr></thead>`)
        tableHtmlArr.push(`<tbody>`)
        var keys = Object.keys(ds);
        for (var i = 0; i < keys.length; i++) {
            var k = keys[i];
            var t = ds[k];
            var len = Object.keys(t).length;
            var trIdx = 0; // 记录第一列相同情况下遍历到第二列的idx
            for (var key in t) {
                tableHtmlArr.push('<tr>');
                if (!(trIdx++ % len)) {
                    tableHtmlArr.push(`<td colspan="1" rowspan="${len}"  class="td-colspans-center" >${t[key].a0}</td>`);
                }
                var item = t[key];
                tableHtmlArr.push(`<td class="" colspan="1" ><span>${t[key].b0}</span></td>`)

                for (var ii = 0; ii < years.length; ii++) {
                    if (item.data && item.data.length && item.data[ii]) {
                        tableHtmlArr.push(`<td colspan="1" class="" >${item.data[ii].doc_count}</td>`);
                    } else {
                        tableHtmlArr.push(`<td colspan="1" class="" >--</td>`);
                    }
                }
                tableHtmlArr.push('</tr>');
            }
        }
        tableHtmlArr.push(`</tbody></table>`);
        $dom.append(title);
        $dom.append(tableHtmlArr.join(''));
    },
    drawPie: function($dom, data, title, hasLegend) {
        //画饼图
        if (data)
            var tit = title ? title : "";
        Highcharts.setOptions({
            lang: {
                downloadJPEG: intl('222618') /* 下载JPEG图片 */ ,
                downloadPNG: intl('222621') /* 下载PNG图片 */ ,
            }
        })
        $dom.highcharts({
            credits: {
                enabled: false // 禁用版权信息
            },
            // ycye.cecil modify UI颜色 2020-10-26 start
            colors: ['#2277a2', '#f68717', '#5fbebf', '#e05d5d', '#4a588e', '#e4c557', '#63a074', '#906f54', '#9da9b4', '#8862ac'],
            // ycye.cecil modify UI颜色 2020-10-26 end
            chart: {
                type: 'pie'
            },
            exporting: {
                buttons: {
                    contextButton: {
                        // ycye.cecil modify UI颜色 2020-10-28 start
                        symbol: 'url(../resource/images/Company/export_download.png)',
                        // ycye.cecil modify UI颜色 2020-10-28 end
                        symbolSize: 20,
                        symbolX: 23,
                        symbolY: 22,
                        menuItems: [
                            null, null, defaultMenuItem[3], defaultMenuItem[4]
                        ]
                    }
                }
            },
            plotOptions: {
                pie: {
                    dataLabels: {
                        // ycye.cecil modify UI颜色 2020-10-28 start
                        useHTML: true,
                        formatter: function() {
                                return `<span style="color:` + this.point.color + `;font-size: 11px">` + this.point.name + `:` + Math.round(this.point.percentage * 100) / 100 + `%</span>`
                            }
                            // ycye.cecil modify UI颜色 2020-10-28 end
                    },
                }
            },
            noData: {
                style: {
                    fontWeight: 'bold',
                    fontSize: '16px',
                    color: '#666666'
                }
            },
            title: {
                text: tit,
                align: 'left',
                style: {
                    "color": "#333333",
                    "fontSize": "14px",
                },
                margin: 30
            },
            tooltip: {
                pointFormat: '{point.percentage:.2f}%',
            },
            legend: {
                enabled: hasLegend
            },
            series: [{
                name: '',
                data: data,
                size: '70%'
            }],
            noData: {
                positon: {
                    align: 'center'
                },
                style: {
                    fontWeight: 'bold',
                    fontSize: '16px',
                    color: '#666666'
                }
            },
        });
        // ycye.cecil modify UI颜色 2020-10-28 start
        $('.highcharts-button-symbol').attr("width", "19.6px")
        $('.highcharts-button-symbol').attr("height", "18px")
            // ycye.cecil modify UI颜色 2020-10-28 end
    },
    drawLines: function($dom, xData, yData, title) {
        //画折线
        var tit = title ? title : "";
        Highcharts.setOptions({
            lang: {
                downloadJPEG: intl('222618') /* 下载JPEG图片 */ ,
                downloadPNG: intl('222621') /* 下载PNG图片 */ ,
            }
        })
        $dom.highcharts({
            credits: {
                enabled: false // 禁用版权信息
            },
            // ycye.cecil modify UI颜色 2020-10-26 start
            colors: ['#2277a2'],
            // ycye.cecil modify UI颜色 2020-10-26 end
            plotOptions: {
                column: {
                    pointWidth: 20
                },
                series: {
                    dataLabels: {
                        enabled: true,
                        align: 'center',
                        // ycye.cecil modify UI颜色 2020-10-28 start
                        useHTML: true,
                        formatter: function() {
                                return `<span style="color:` + this.point.color + `">` + this.point.y + `</span>`
                            }
                            // ycye.cecil modify UI颜色 2020-10-28 end
                    },
                    // ycye.cecil modify UI颜色 2020-10-28 start
                    marker: {
                        radius: 6
                    }
                    // ycye.cecil modify UI颜色 2020-10-28 end
                }
            },
            exporting: {
                buttons: {
                    contextButton: {
                        // ycye.cecil modify UI颜色 2020-10-28 start
                        symbol: 'url(../resource/images/Company/export_download.png)',
                        // ycye.cecil modify UI颜色 2020-10-28 end
                        symbolSize: 20,
                        symbolX: 23,
                        symbolY: 22,
                        menuItems: [
                            null, null, defaultMenuItem[3], defaultMenuItem[4]
                        ]
                    }
                }
            },
            noData: {
                style: {
                    fontWeight: 'bold',
                    fontSize: '16px',
                    color: '#666666'
                }
            },
            tooltip: {
                formatter: function() {
                    return this.x + ":" + this.y
                }
            },
            title: {
                text: tit,
                align: 'left',
                style: {
                    "color": "#333333",
                    "fontSize": "12px",
                },
                margin: 30
            },
            xAxis: [{
                categories: xData,
                crosshair: true,
                type: 'category',
                labels: {
                    style: { color: '#333333' }
                },
                tickWidth: 0,
                lineColor: '#333333'
            }],
            yAxis: [{
                title: {
                    text: '',
                },
                labels: {
                    enabled: false
                },
                gridLineWidth: 0,
                visible: false
            }],
            legend: {
                enabled: false
            },
            series: [{
                data: yData
            }]
        });
        // ycye.cecil modify UI颜色 2020-10-28 start
        $('.highcharts-button-symbol').attr("width", "19.6px")
        $('.highcharts-button-symbol').attr("height", "18px")
            // ycye.cecil modify UI颜色 2020-10-28 end
    },
    drawTwoLines: function($dom, xData, yData, title) {
        //画折线
        var tit = title ? title : "";
        Highcharts.setOptions({
            lang: {
                downloadJPEG: intl('222618') /* 下载JPEG图片 */ ,
                downloadPNG: intl('222621') /* 下载PNG图片 */ ,
            }
        })
        $dom.highcharts({
            credits: {
                enabled: false // 禁用版权信息
            },
            // ycye.cecil modify UI颜色 2020-10-26 start
            colors: ['#2277a2', '#f68717', '#5fbebf', '#e05d5d', '#4a588e', '#e4c557', '#63a074', '#906f54', '#9da9b4', '#8862ac'],
            // ycye.cecil modify UI颜色 2020-10-26 end
            plotOptions: {
                column: {
                    pointWidth: 12
                },
                series: {
                    dataLabels: {
                        enabled: true,
                        align: 'center',
                        // ycye.cecil modify UI颜色 2020-10-28 start
                        useHTML: true,
                        formatter: function() {
                                return `<span style="color:` + this.point.color + `">` + this.point.y + `</span>`
                            }
                            // ycye.cecil modify UI颜色 2020-10-28 end
                    },
                    // ycye.cecil modify UI颜色 2020-10-28 start
                    marker: {
                        radius: 6
                    }
                    // ycye.cecil modify UI颜色 2020-10-28 end
                }
            },
            exporting: {
                buttons: {
                    contextButton: {
                        // ycye.cecil modify UI颜色 2020-10-28 start
                        symbol: 'url(../resource/images/Company/export_download.png)',
                        // ycye.cecil modify UI颜色 2020-10-28 end
                        symbolSize: 20,
                        symbolX: 23,
                        symbolY: 22,
                        menuItems: [
                            null, null, defaultMenuItem[3], defaultMenuItem[4]
                        ]
                    }
                }
            },
            tooltip: {
                formatter: function() {
                    return this.x + ":" + this.y
                }
            },
            title: {
                text: tit,
                align: 'left',
                style: {
                    "color": "#333333",
                    // ycye.cecil modify UI颜色 2020-10-28 start
                    "fontSize": "12px",
                    // ycye.cecil modify UI颜色 2020-10-28 end
                },
                margin: 30
            },
            xAxis: [{
                categories: xData,
                crosshair: true,
                type: 'category',
                labels: {
                    style: { color: '#333333' }
                },
                tickWidth: 0,
                lineColor: '#333333'
            }],
            yAxis: [{
                title: {
                    text: '',
                },
                labels: {
                    enabled: false
                },
                gridLineWidth: 0,
                visible: false
            }],
            legend: {
                // ycye.cecil modify UI颜色 2020-10-28 start
                symbolWidth: 16,
                symbolHeight: 12,
                symbolPadding: 5,
                symbolRadius: 2
                    // ycye.cecil modify UI颜色 2020-10-28 end
            },
            series: yData
        });
        // ycye.cecil modify UI颜色 2020-10-28 start
        $('.highcharts-button-symbol').attr("width", "19.6px")
        $('.highcharts-button-symbol').attr("height", "18px")
            // ycye.cecil modify UI颜色 2020-10-28 end
    },
    drawMap: function(data) {
        var myChart = echarts.init(document.getElementById('chartCount05'));
        var mapData = data;
        var maxData = mapData[0].value;;
        for (var i = 0; i < mapData.length; i++) {
            if (mapData[i].value > maxData) {
                maxData = mapData[i].value
            }
        }
        echarts.registerMap('china', china);
        echarts.graphic.IncrementalDisplayable.prototype.__proto__.cursor = 'default';
        myChart.setOption({
            tooltip: {
                formatter: function(params, ticket, callback) {
                    var dataShow = params.data.name + ': ' + params.data.value + '家企业';
                    return dataShow;
                }
            },
            legend: {
                orient: 'vertical',
                left: 'left',

            },
            visualMap: {
                min: 0,
                max: maxData,
                left: 'left',
                top: 'bottom',
                text: ['高', '低'], // 文本，默认为数值文本
                color: ['#00aec7', '#f4f4f4'],
                calculable: true
            },
            series: [{
                type: 'map',
                mapType: 'china',
                roam: true,
                label: {
                    normal: {
                        show: false,
                    },
                    emphasis: {
                        show: false
                    }
                },
                data: mapData
            }]
        });
    },
    courtdecisionCauseVal: "",
    courtdecisionResultVal: "",
    courtTypeVal: "",
    getcourtdecision: function($dom, oIndexResult, oValResult, oIndexCause, oValCause, oCount) {
        //裁判文书
        var tableSetting = {
            interface: "getjudge",
            moduleName: intl('138731' /* 裁判文书 */ ),
            moreLink: "getcourtdecision",
            modelNum: "judgeinfo_num",
            selName: ["courtTypeVal", "courtdecisionResultVal", "courtdecisionCauseVal"],
            aggName: ["aggs_type", "aggs_result", "aggs_cause"],
            thWidthRadio: ["5%", "20%", "15%", "10%", "12%", "16%", "10%", "12%"],
            thName: [intl('138741' /* 序号 */ ), intl('138191' /* 案件标题 */ ), intl('138190' /* 案号 */ ), intl('138192', '案件类型'), intl('138196' /* 案由 */ ), intl('138427' /* 当事人 */ ), intl('145344' /* 判决结果 */ ), intl('138357' /* 判决时间 */ )],
            align: [0, 0, 0, 0, 0, 0, 0, 0, 0],
            fields: ["NO.", "case_title", "case_no", "case_type", "case_type_detail", "prosecutor", "judge_result", "judge_time"]
        }
        var $container = $dom ? $dom : $('#workspace');
        $container.empty().html(Company.drawTab(tableSetting, "tabJudgeinfo", "tbodyJudgeinfo", false, $dom));
        if (!Company.judgeinfostatistics) {

            Company.drawCourtDetail("#drawCountCon")
        }
        var columnDefsSet = [{
                "targets": 1,
                "data": 'case_title',
                "render": function(data, type, full, meta) {
                    if (data) {
                        var paramVal = full.case_id;
                        return '<a target="_blank" class="wi-secondary-color wi-link-color buryClickCenter" href="showItemDetail.html?type=judgment&detailid=' + paramVal + '">' + (data ? data : '--') + '</a>'
                            // return Common.showJudgeDetail(full["case_id"], data);
                    } else {
                        return "--"
                    }
                }
            },
            {
                "targets": 2,
                "data": 'case_no',
                "render": function(data, type, full, meta) {
                    if (data) {
                        var paramVal = full.case_id;
                        return '<a target="_blank" class="wi-secondary-color wi-link-color buryClickCenter" href="showItemDetail.html?type=judgment&detailid=' + paramVal + '">' + (data ? data : '--') + '</a>'
                            // return Common.showJudgeDetail(full["case_id"], data);
                    } else {
                        return "--"
                    }
                }
            },
            {
                "targets": 3,
                "data": 'case_type',
                "render": function(data) {
                    return Common.formatCont(data)
                }
            },
            {
                "targets": 4,
                "data": 'case_type_detail',
                "render": function(data) {
                    return Common.formatCont(data)
                }
            },
            {
                "targets": 5,
                "data": 'case_appellee',
                "render": function(data, type, full, meta) {
                    var prosecutor = full.prosecutor ? full.prosecutor : "";
                    var defendant = full.defendant ? full.defendant : "";
                    var third_party = full.third_party ? full.third_party : "";
                    var str = "";
                    if (prosecutor.length > 0) {
                        str += (prosecutor[0].split("-")[0] + " - ");
                        var strArr = [];
                        for (var i = 0; i < prosecutor.length; i++) {
                            var tmpArr = prosecutor[i].split("|");
                            if (tmpArr[1]) {
                                var tmpArr02 = tmpArr[0].split("-");
                                if (tmpArr02[1]) {
                                    strArr.push(Common.jumpPersonOrCompany(tmpArr02[1], tmpArr[1]));
                                } else {
                                    strArr.push("");
                                }
                            } else {
                                var tmpArr02 = tmpArr[0].split("-");
                                if (tmpArr02[1]) {
                                    strArr.push(tmpArr02[1]);
                                } else {
                                    strArr.push("");
                                }
                            }
                        }
                        str += strArr.join(",") + "<br/>"
                    }
                    if (defendant.length > 0) {
                        str += (defendant[0].split("-")[0] + " - ");
                        var strArr = [];
                        for (var i = 0; i < defendant.length; i++) {
                            var tmpArr = defendant[i].split("|");
                            if (tmpArr[1]) {
                                var tmpArr02 = tmpArr[0].split("-");
                                if (tmpArr02[1]) {
                                    strArr.push(Common.jumpPersonOrCompany(tmpArr02[1], tmpArr[1]));
                                } else {
                                    strArr.push("");
                                }
                            } else {
                                var tmpArr02 = tmpArr[0].split("-");
                                if (tmpArr02[1]) {
                                    strArr.push(tmpArr02[1]);
                                } else {
                                    strArr.push("");
                                }
                            }
                        }
                        str += strArr.join(",") + "<br/>"
                    }
                    if (third_party.length > 0) {
                        str += (third_party[0].split("-")[0] + " - ");
                        var strArr = [];
                        for (var i = 0; i < third_party.length; i++) {
                            var tmpArr = third_party[i].split("|");
                            if (tmpArr[1]) {
                                var tmpArr02 = tmpArr[0].split("-");
                                if (tmpArr02[1]) {
                                    strArr.push(Common.jumpPersonOrCompany(tmpArr02[1], tmpArr[1]));
                                } else {
                                    strArr.push("");
                                }
                            } else {
                                var tmpArr02 = tmpArr[0].split("-");
                                if (tmpArr02[1]) {
                                    strArr.push(tmpArr02[1]);
                                } else {
                                    strArr.push("");
                                }
                            }
                        }
                        str += strArr.join(",") + "<br/>"
                    }
                    return str ? str : '--';
                }
            },
            {
                "targets": 6,
                "data": 'judge_result',
                "render": function(data) {
                    return Common.formatCont(data)
                }
            },
            {
                "targets": 7,
                "data": 'judge_time',
                "render": function(data, type, full, meta) {
                    return Common.formatTime(data)
                }
            }
        ]
        var params = { "companycode": Company.companyCode, "cause": Company.courtdecisionCauseVal, "result": Company.courtdecisionResultVal, "caseType": Company.courtTypeVal, "pageSize": 10 };
        Company.pageSetting("#tabJudgeinfo", tableSetting, columnDefsSet, params, $dom);
    },
    showClient: function(data) {
        var defendant = data.defendant ? data.defendant + "<br/>" : "";
        var prosecutor = data.prosecutor ? data.prosecutor + "<br/>" : "";
        var third_party = data.third_party ? data.third_party + "<br/>" : "";
        return defendant + prosecutor + third_party;
    },
    courtopenannouncementSelVal: "",
    getcourtopenannouncement: function($dom, oIndex, oVal, oCount) {
        //开庭公告
        var tableSetting = {
            interface: "getcourtsession2",
            moreLink: "getcourtopenannouncement",
            moduleName: intl('138657' /* 开庭公告 */ ),
            modelNum: "trialnotice_num",
            selName: ["courtopenannouncementSelVal"],
            aggName: ["aggs_cause"],
            thWidthRadio: ["8%", "15%", "27%", "30%", "15%", "10%"],
            thName: [intl('138741' /* 序号 */ ), intl('138190', '案号'), intl('138196' /* 案由 */ ), intl('138427' /* 当事人 */ ), intl('138229' /* 开庭时间 */ ), intl('40513' /* 详情 */ )],
            align: [0, 0, 0, 0, 0],
            fields: ["NO.", "announcement_no", "announcement_cause", "announcement_party", "court_time", "announcement_id"],
        }
        var $container = $dom ? $dom : $('#workspace');
        $container.empty().html(Company.drawTab(tableSetting, "tabCourtopenannouncement", "tbodyCourtopenannouncement", false, $dom));
        var columnDefsSet = [{
                "targets": 1,
                "data": 'announcement_no',
                "render": function(data) {
                    return Common.formatCont(data)
                }
            },
            {
                "targets": 2,
                "data": 'announcement_cause',
                "render": function(data) {
                    return Common.formatCont(data)
                }
            },
            {
                "targets": 3,
                "data": 'announcement_party',
                "render": function(data, type, full, meta) {
                    return Company.getPartyStr(data)
                }
            },
            {
                "targets": 4,
                "data": 'court_time',
                "render": function(data, type, full, meta) {
                    return Common.formatTime(data)
                }
            },
            {
                "targets": 5,
                "data": 'announcement_id',
                "render": function(data, type, full, meta) {
                    var buryData = 'data-buryId="' + data + '" data-buryEntity="getcourtopenannouncement"'; //bury
                    return Common.showDetailLink(data, ["gettrialnoticedetail2", "detailid", 6], buryData);
                }
            }
        ]
        var params = { "companycode": Company.companyCode, "cause": Company.courtopenannouncementSelVal, "pageSize": 10 };
        Company.pageSetting("#tabCourtopenannouncement", tableSetting, columnDefsSet, params, $dom);
    },
    courtannouncementSelVal: "",
    getcourtannouncement: function($dom, oIndex, oVal, oCount) {
        //法院公告
        var tableSetting = {
            moreLink: "getcourtannouncement",
            interface: "getcourtannounce2",
            moduleName: intl('138226' /* 法院公告 */ ),
            modelNum: "coutnotice_num",
            selName: ["courtannouncementSelVal"], //聚合的名字
            aggName: ["aggs_cause"], //聚合类下的名字,有可能有多个，比如裁判文书
            thWidthRadio: ["8%", "12%", "20%", "23%", "15%", "12%", "10%"],
            thName: [intl('138741' /* 序号 */ ), intl('138147' /* 公示类型 */ ), intl('138196' /* 案由 */ ), intl('138427' /* 当事人 */ ), intl('138148' /* 公告人 */ ), intl('138144' /* 公示时间 */ ), intl('40513' /* 详情 */ )],
            align: [0, 0, 0, 0, 0, 0],
            fields: ["NO.", "announcement_type", "announcement_cause", 'announcement_party', "announcer", "announcement_time", "announcement_id"],
        }
        var $container = $dom ? $dom : $('#workspace');
        $container.empty().html(Company.drawTab(tableSetting, "tabCourtannouncement", "tbodyCourtannouncement", false, $dom));
        var columnDefsSet = [{
                "targets": 1,
                "data": 'announcement_type',
                "render": function(data) {
                    return Common.formatCont(data)
                }
            },
            {
                "targets": 2,
                "data": 'announcement_cause',
                "render": function(data) {
                    return Common.formatCont(data)
                }
            },
            {
                "targets": 3,
                "data": 'announcement_party',
                "render": function(data) {
                    return Company.splitComKeyValueList(data)
                }
            }, {
                "targets": 4,
                "data": 'announcer',
                "render": function(data, type, full, meta) {
                    return Common.formatCont(data)
                }
            },
            {
                "targets": 5,
                "data": 'announcement_time',
                "render": function(data, type, full, meta) {
                    return Common.formatTime(data)
                }
            },
            {
                "targets": 6,
                "data": 'announcement_id',
                "render": function(data, type, full, meta) {
                    var buryData = 'data-buryId="' + data + '" data-buryEntity="getcourtannouncement"'; //bury
                    return Common.showDetailLink(data, ["getcourtannouncementdetail2", "announcementno", 7], buryData);
                }
            }
        ]
        var params = { "companycode": Company.companyCode, "cause": Company.courtannouncementSelVal, "pageSize": 10 };
        Company.pageSetting("#tabCourtannouncement", tableSetting, columnDefsSet, params, $dom);
    },
    getPartyStr: function(obj) {
        var tmpArr = [];
        if (obj) {
            for (var key in obj) {
                tmpArr.push(key)
                tmpArr.push("-")
                for (var i = 0; i < obj[key].length; i++) {
                    var objArr = obj[key][i].split("|");
                    if (objArr[1]) {
                        tmpArr.push(Common.jumpPersonOrCompany(objArr[0], objArr[1]));
                    } else {
                        tmpArr.push(objArr[0])
                    }
                    if (i < obj[key].length - 1) {
                        tmpArr.push(",");
                    }
                }
                tmpArr.push("<br/>");
            }
            return tmpArr.join("");
        } else {
            return "--"
        }
    },
    judicialsaleSelVal: "",
    getjudicialsale: function($dom) {
        //司法拍卖
        var tableSetting = {
            interface: "getjudicialsalesearch",
            moreLink: "getjudicialsale",
            moduleName: intl('138359' /* 司法拍卖 */ ),
            modelNum: "judical_auction_num",
            selName: ["judicialsaleSelVal"],
            aggName: ["aggs_status"],
            thWidthRadio: ["6%", "35%", "24%", "15%", "15%", "10%"],
            thName: [intl('138741' /* 序号 */ ), intl('138168' /* 拍卖公告 */ ), intl('138237' /* 拍卖日期 */ ), intl('138497' /* 拍卖轮次 */ ), intl('138227' /* 拍卖法院 */ ), intl('138517' /* 拍卖状态 */ )],
            align: [0, 0, 0, 0, 0, 0],
            fields: ["NO.", "sale_title", "sale_date", "sale_turn", "sale_court", "sale_status"],
        }
        var $container = $dom ? $dom : $('#workspace');
        $container.empty().html(Company.drawTab(tableSetting, "tabJudicialsale", "tbodyJudicialsale", false, $dom));
        var columnDefsSet = [{
                "targets": 1,
                "data": 'sale_title',
                "render": function(data, type, full, meta) {
                    return Company.addDropLink(data, ["getjudicialsaledetail", "detailId", 6, full["notice_no"]])
                }
            },
            {
                "targets": 2,
                "data": 'sale_date',
                "render": function(data) {
                    return data
                }
            }
        ]
        var params = { "companycode": Company.companyCode, "status": Company.judicialsaleSelVal, "pageSize": 10 };
        Company.pageSetting("#tabJudicialsale", tableSetting, columnDefsSet, params, $dom);
    },
    getpersonenforced: function($dom) {
        //被执行人
        var tableSetting = {
            interface: "getconcerned",
            moreLink: "getpersonenforced",
            moduleName: intl('138592' /* 被执行人 */ ),
            modelNum: "cur_debetor_num",
            thWidthRadio: ["5%", "25%", "30%", "29%", "11%"],
            thName: [intl('138741' /* 序号 */ ), intl('138190' /* 案号 */ ), intl('138288' /* 执行标的 */ ), intl('138228' /* 执行法院 */ ), intl('138294' /* 立案时间 */ )],
            align: [0, 0, 0, 0, 0],
            fields: ["NO.", "case_no", "execution_target", "execution_court", "filing_time"],
        }
        var $container = $dom ? $dom : $('#workspace');
        $container.empty().html(Company.drawTab(tableSetting, "tabPersonenforced", "tbodyPersonenforced", false, $dom));
        var columnDefsSet = [{
                "targets": 1,
                "data": 'case_no',
                "render": function(data) {
                    return Common.formatCont(data)
                }
            },
            {
                "targets": 2,
                "data": 'execution_target',
                "render": function(data) {
                    return Common.formatCont(data)
                }
            },
            {
                "targets": 3,
                "data": 'execution_court',
                "render": function(data, type, full, meta) {
                    return Common.formatCont(data)
                }
            },
            {
                "targets": 4,
                "data": 'filing_time',
                "render": function(data) {
                    return Common.formatTime(data)
                }
            }
        ]
        var params = { "companycode": Company.companyCode, "pageSize": 10 };
        Company.pageSetting("#tabPersonenforced", tableSetting, columnDefsSet, params, $dom);
    },
    getdishonesty: function($dom) {
        //失信信息
        var tableSetting = {
            interface: "getbreakpromise",
            moduleName: intl('138591' /* 失信信息 */ ),
            moreLink: "getdishonesty",
            modelNum: "breakpromise_num",
            thWidthRadio: ["5%", "22%", "10%", "26%", "14%", "13%", "10%"],
            thName: [intl('138741' /* 序号 */ ), intl('138190' /* 案号 */ ), intl('138435' /* 被执行人的履行情况 */ ), intl('138512' /* 行为具体情形 */ ), intl('138228' /* 执行法院 */ ), intl('138294' /* 立案时间 */ ), intl('132647' /* 操作 */ )],
            align: [0, 0, 0, 0, 0, 0, 0],
            fields: ["NO.", "case_no|formatCont", "debetor_fulfil|formatCont", "debetor_action|formatCont", "exe_court|formatCont", "case_time|formatTime", "ob_object_id|showDetailLink:getbreakpromisedetail,detailId,7"],
        }
        var $container = $dom ? $dom : $('#workspace');
        $container.empty().html(Company.drawTab(tableSetting, "tabDishonesty", "tbodyDishonesty", true, $dom));
        var columnDefsSet = [{
                "targets": 1,
                "data": 'case_no',
                "render": function(data) {
                    return Common.formatCont(data)
                }
            },
            {
                "targets": 2,
                "data": 'debetor_fulfil',
                "render": function(data) {
                    return Common.formatCont(data)
                }
            },
            {
                "targets": 3,
                "data": 'debetor_action',
                "render": function(data) {
                    return Common.formatCont(data)
                }
            },
            {
                "targets": 4,
                "data": 'exe_court',
                "render": function(data) {
                    return Common.formatCont(data)
                }
            },
            {
                "targets": 5,
                "data": 'case_time',
                "render": function(data, type, full, meta) {
                    return Common.formatTime(data)
                }
            },
            {
                "targets": 6,
                "data": 'ob_object_id',
                "render": function(data, type, full, meta) {
                    var buryData = 'data-buryId="' + data + '" data-buryEntity="getdishonesty"'; //bury
                    return Common.showDetailLink(data, ["getbreakpromisedetail", "detailId", 7], buryData);
                }
            }
        ]
        if ($dom) {
            var eachModuleData = Company.companyRiskInfoData.breakpromise ? Company.companyRiskInfoData.breakpromise : null;
            Company.pageSetting_new("#tabDishonesty", tableSetting, eachModuleData, columnDefsSet, null, $dom);
        } else {
            Company.pageSetting("#tabDishonesty", tableSetting, columnDefsSet, null, $dom);
        }
    },
    getshbdgGSNJ: function($dom) {
        // 工商年检
        var tableSetting = {
            interface: "getshbdgGSNJ",
            moduleName: '工商年检',
            moreLink: "getshbdgGSNJ",
            modelNum: "SHBDGGSNJ_num",
            thWidthRadio: ["10%", "45%", "45%"],
            thName: [intl('138741' /* 序号 */ ), '年检年度', '年检结果'],
            align: [0, 0, 0, 0, 0],
            fields: ["NO.", "annl_year", "annl_result"],
        }
        var $container = $dom ? $dom : $('#workspace');
        $container.empty().html(Company.drawTab(tableSetting, "tabSHBDGGSNJ", "tbodySHBDGGSNJ", false, $dom));
        var columnDefsSet = [{
                "targets": 1,
                "data": 'annl_year',
                "render": function(data) {
                    return Common.formatCont(data)
                }
            },
            {
                "targets": 2,
                "data": 'annl_result',
                "render": function(data) {
                    return Common.formatCont(data)
                }
            },
        ]
        Company.shbdgPageSetting("#tabSHBDGGSNJ", tableSetting, columnDefsSet, null, $dom);
    },
    getshbdgpunishment: function($dom) {
        //行政处罚
        var tableSetting = {
            interface: "getshbdgpunishment",
            moduleName: '工商行政处罚',
            moreLink: "getshbdgpunishment",
            modelNum: "getshbdgpunishment_num",
            thWidthRadio: ["10%", "30%", "20%", "20%", "20%"],
            thName: [intl('138741' /* 序号 */ ), '处罚通知书号', '处罚决定日期', '履罚期限', '处罚机关'],
            align: [0, 0, 0, 0, 0],
            fields: ["NO.", "punish_code", "punish_date", "punish_limit", "punish_unit", ],
        }
        var $container = $dom ? $dom : $('#workspace');
        $container.empty().html(Company.drawTab(tableSetting, "tabSHBDGPunishment", "tbodySHBDGPunishment", false, $dom));
        var columnDefsSet = [{
                "targets": 1,
                "data": 'punish_code',
                "render": function(data) {
                    return Common.formatCont(data)
                }
            },
            {
                "targets": 2,
                "data": 'punish_date',
                "render": function(data) {
                    return Common.formatTime(data)
                }
            },
            {
                "targets": 3,
                "data": 'punish_limit',
                "render": function(data) {
                    return Common.formatCont(data)
                }
            },
            {
                "targets": 4,
                "data": 'punish_unit',
                "render": function(data, type, full, meta) {
                    return Common.formatCont(data)
                }
            }
        ]
        Company.shbdgPageSetting("#tabSHBDGPunishment", tableSetting, columnDefsSet, null, $dom);
    },
    getadministrativepenaltyBu: function($dom) {
        //行政处罚
        var tableSetting = {
            interface: "getbusinesspunishment",
            moduleName: intl('153356' /* 行政处罚[工商局] */ ),
            moreLink: "getadministrativepenaltyBu",
            modelNum: "business_punishment_num",
            thWidthRadio: ["5%", "20%", "15%", "30%", "15%", "15%"],
            thName: [intl('138741' /* 序号 */ ), intl('153358' /* 决定文书号 */ ), intl('153360' /* 违法行为类型 */ ), intl('153361' /* 行政处罚内容 */ ), intl('153362' /* 决定机关 */ ), intl('153359' /* 决定日期*/ )],
            align: [0, 0, 0, 0, 0, 0],
            fields: ["NO.", "doc_no|formatCont", "punish_type|formatCont", "punish_content|formatCont", "punish_organ|formatCont", "punish_time|formatTime"],
        }
        var $container = $dom ? $dom : $('#workspace');
        $container.empty().html(Company.drawTab(tableSetting, "tabAdministrativepenaltyBu", "tbodyAdministrativepenaltyBu", false, $dom));
        var columnDefsSet = [{
                "targets": 1,
                "data": 'doc_no',
                "render": function(data) {
                    return Common.formatCont(data)
                }
            },
            {
                "targets": 2,
                "data": 'punish_type',
                "render": function(data) {
                    return Common.formatCont(data)
                }
            },
            {
                "targets": 3,
                "data": 'punish_content',
                "render": function(data) {
                    return Common.formatCont(data)
                }
            },
            {
                "targets": 4,
                "data": 'punish_organ',
                "render": function(data) {
                    return Common.formatCont(data)
                }
            },
            {
                "targets": 5,
                "data": 'punish_time',
                "render": function(data, type, full, meta) {
                    return Common.formatTime(data)
                }
            }
        ]
        if ($dom) { //to do 
            var eachModuleData = Company.companyBusinessRiskData && Company.companyBusinessRiskData.businesspunishment ? Company.companyBusinessRiskData.businesspunishment : null;
            Company.pageSetting_new("#tabAdministrativepenaltyBu", tableSetting, eachModuleData, columnDefsSet, null, $dom);
        } else {
            Company.pageSetting("#tabAdministrativepenaltyBu", tableSetting, columnDefsSet, null, $dom);
        }
    },
    getadministrativepenalty: function($dom) {
        //行政处罚
        var tableSetting = {
            interface: "getadminipunishment",
            moduleName: intl('153355' /* 行政处罚[信用中国] */ ),
            moreLink: "getadministrativepenalty",
            modelNum: "punishment_num",
            thWidthRadio: ["5%", "35%", "45%", "15%"],
            thName: [intl('138741' /* 序号 */ ), intl('153358' /* 决定文书号 */ ), intl('153357' /* 处罚名称 */ ), intl('153359' /* 决定日期 */ )],
            align: [0, 0, 0, 0],
            fields: ["NO.", "docId", "title", "time"],
        }
        var $container = $dom ? $dom : $('#workspace');
        $container.empty().html(Company.drawTab(tableSetting, "tabAdministrativepenalty", "tbodyAdministrativepenalty", false, $dom));
        var columnDefsSet = [{
                "targets": 1,
                "data": 'docId',
                "render": function(data, type, full, meta) {
                    if (full.detailId) {
                        return '<a target="_blank" class="underline wi-secondary-color wi-link-color" data-interface="getadminipunishmentdetail" data-key="' + 'detailId' + '" data-tdlen="' + '4' + '" data-value="' + full.detailId + '">' + (data ? data : '--') + '</a>'
                    } else {
                        return Common.formatCont(data)
                    }
                }
            },
            {
                "targets": 2,
                "data": 'title',
                "render": function(data, type, full, meta) {
                    if (full.detailId) {
                        return '<a target="_blank" class="underline wi-secondary-color wi-link-color" data-interface="getadminipunishmentdetail" data-key="' + 'detailId' + '" data-tdlen="' + '4' + '" data-value="' + full.detailId + '">' + (data ? data : '--') + '</a>'
                    } else {
                        return Common.formatCont(data)
                    }
                }
            },
            {
                "targets": 3,
                "data": 'time',
                "render": function(data, type, full, meta) {
                    return Common.formatTime(data)
                }
            }
        ]
        var params = { 'corpId': Company.companyCode }
        Company.pageSetting("#tabAdministrativepenalty", tableSetting, columnDefsSet, params, $dom);

        $('#tabAdministrativepenalty').off('click').on('click', '.underline', function() {
            var Band = false;
            if ($(this).parent().parent().parent().attr('id') == 'tbodyBand') {
                Band = true;
            }
            Company.showContentDetail(this, $(this).attr("data-tdlen"), Band)
            return false;
        });
    },
    getoperationexception: function($dom) {
        //经营异常
        var tableSetting = {
            interface: "getbizexception",
            moduleName: intl('138568' /* 经营异常 */ ),
            moreLink: "getoperationexception",
            modelNum: "bizexception_num",
            thWidthRadio: ["5%", "10%", "25%", "10%", "10%", "25%", "15%"],
            thName: [intl('138741' /* 序号 */ ), intl('138241' /* 列入日期 */ ), intl('138470' /* 列入经营异常名录原因 */ ), intl('138419' /* 列入决定机关 */ ), intl('138246' /* 移出日期 */ ), intl('138471' /* 移出经营异常名录原因 */ ), intl('138420' /* 移出决定机关 */ )],
            align: [0, 0, 0, 0, 0, 0, 0],
            fields: ["NO.", "exc_record_date|formatTime", "exc_record_reason|formatCont", "exc_decision_organ|formatCont", "exc_remove_date|formatTime", "exc_remove_reason|formatCont", "exc_decision_organ_out|formatCont"],
        }
        var $container = $dom ? $dom : $('#workspace');
        $container.empty().html(Company.drawTab(tableSetting, "tabOperationexception", "tbodyOperationexception", false, $dom));
        var columnDefsSet = [{
                "targets": 1,
                "data": 'exc_record_date',
                "render": function(data, type, full, meta) {
                    return Common.formatTime(data)
                }
            },
            {
                "targets": 2,
                "data": 'exc_record_reason',
                "render": function(data) {
                    return Common.formatCont(data)
                }
            },
            {
                "targets": 3,
                "data": 'exc_decision_organ',
                "render": function(data, type, full, meta) {
                    return Common.formatCont(data)
                }
            },
            {
                "targets": 4,
                "data": 'exc_remove_date',
                "render": function(data, type, full, meta) {
                    if (!full['exc_remove_reason'] && !full['exc_remove_date'] && !full['exc_decision_organ_out']) {
                        return '<span class="text-red wi-secondary-color">未移出</span>';
                    } else {
                        return Common.formatTime(data)
                    }
                }
            },
            {
                "targets": 5,
                "data": 'exc_remove_reason',
                "render": function(data, type, full, meta) {
                    if (!full['exc_remove_reason'] && !full['exc_remove_date'] && !full['exc_decision_organ_out']) {
                        return '<span class="text-red wi-secondary-color">未移出</span>';
                    } else {
                        return Common.formatCont(data)
                    }
                }
            },
            {
                "targets": 6,
                "data": 'exc_decision_organ_out',
                "render": function(data, type, full, meta) {
                    if (!full['exc_remove_reason'] && !full['exc_remove_date'] && !full['exc_decision_organ_out']) {
                        return '<span class="text-red wi-secondary-color">未移出</span>';
                    } else {
                        return Common.formatCont(data)
                    }
                }
            }
        ]
        if ($dom) {
            var eachModuleData = Company.companyBusinessRiskData.bizexception ? Company.companyBusinessRiskData.bizexception : null;
            Company.pageSetting_new("#tabOperationexception", tableSetting, eachModuleData, columnDefsSet, null, $dom);
        } else {
            Company.pageSetting("#tabOperationexception", tableSetting, columnDefsSet, null, $dom);
        }
    },
    getinspection: function($dom) {
        //抽查检查
        var tableSetting = {
            interface: "getinspection",
            moduleName: intl('138467' /* 抽查检查 */ ),
            moreLink: "getinspection",
            modelNum: "inspection_num",
            thWidthRadio: ["5%", "20%", "25%", "20%", "30%"],
            thName: [intl('138741' /* 序号 */ ), intl('138244' /* 检查日期 */ ), intl('138564' /* 检查类型 */ ), intl('138492' /* 检查结果 */ ), intl('138345' /* 检查实施机关 */ )],
            align: [0, 0, 0, 0, 0],
            fields: ["NO.", "inspection_time|formatTime", "inspection_name|formatCont", "inspection_result|formatCont", "inspection_uthority|formatCont"],
        }
        var $container = $dom ? $dom : $('#workspace');
        $container.empty().html(Company.drawTab(tableSetting, "tabInspection", "tbodyInspection", false, $dom));
        var columnDefsSet = [{
                "targets": 1,
                "data": 'inspection_time',
                "render": function(data, type, full, meta) {
                    return Common.formatTime(data)
                }
            },
            {
                "targets": 2,
                "data": 'inspection_name',
                "render": function(data) {
                    return Common.formatCont(data)
                }
            },
            {
                "targets": 3,
                "data": 'inspection_result',
                "render": function(data) {
                    return Common.formatCont(data)
                }
            },
            {
                "targets": 4,
                "data": 'inspection_uthority',
                "render": function(data, type, full, meta) {
                    if (data && full['inspection_uthority_id']) {
                        var personId = full.inspection_uthority_id;
                        var pingParam = '&fromModule=getinspection&fromField=检查实施机关&opId=' + personId; //bury
                        return '<a class="underline wi-secondary-color wi-link-color" data-code="' + personId + '" data-name="' + data + '" target="_blank" href="Company.html?companycode=' + personId + '&name=' + data + Common.isNoToolbar() + '" data-pingParam="' + pingParam + '">' + Common.formatCont(data) + '</a>';
                    } else {
                        return Common.formatCont(data)
                    }
                }
            }
        ]
        if ($dom) {
            var eachModuleData = Company.companyBusinessRiskData && Company.companyBusinessRiskData.inspection ? Company.companyBusinessRiskData.inspection : null;
            Company.pageSetting_new("#tabInspection", tableSetting, eachModuleData, columnDefsSet, null, $dom);
        } else {
            Company.pageSetting("#tabInspection", tableSetting, columnDefsSet, null, $dom);
        }
    },
    getenvpenalties: function($dom) {
        //环保处罚
        var tableSetting = {
            interface: "getenvpenalties",
            moduleName: intl('143314' /* 环保处罚 */ ),
            moreLink: "getenvpenalties",
            modelNum: "envpenalty_num",
            thWidthRadio: ["5%", "30%", "20%", "30%", "15%"],
            thName: [intl('138741' /* 序号 */ ), intl('153358' /* 决定文书号 */ ), intl('138462' /* 处罚类别 */ ), intl('138464' /* 处罚机关 */ ), intl('153359' /* 决定日期 */ )],
            align: [0, 0, 0, 0, 0],
            fields: ["NO.", "punishDocNo|formatCont", "punishCat|formatCont", "punishAgency|formatCont", "punishDate|formatTime"],
        }
        var $container = $dom ? $dom : $('#workspace');
        $container.empty().html(Company.drawTab(tableSetting, "tabenvironmental", "tbodyenvironmental", false, $dom));
        var columnDefsSet = [{
                "targets": 1,
                "data": 'punishDocNo',
                "render": function(data, type, full, meta) {
                    return Company.addDropLink(data, ["getenvpenaltiesdetail", "detailId", 5, full.referenceId])
                }
            },
            {
                "targets": 2,
                "data": 'punishCat',
                "render": function(data) {
                    return Common.formatCont(data)
                }
            },
            {
                "targets": 3,
                "data": 'punishAgency',
                "render": function(data) {
                    return Common.formatCont(data)
                }
            },
            {
                "targets": 4,
                "data": 'punishDate',
                "render": function(data, type, full, meta) {
                    return Common.formatTime(data)
                }
            }
        ]
        Company.pageSetting("#tabenvironmental", tableSetting, columnDefsSet, null, $dom);
    },
    getillegal: function($dom) {
        //严重违法
        var tableSetting = {
            interface: "getillegal",
            moduleName: intl('138335' /* 严重违法 */ ),
            moreLink: "getillegal",
            modelNum: "illegal_num",
            thWidthRadio: ["5%", "15%", "15%", "15%", "15%", "20%", "15%"],
            thName: [intl('138741' /* 序号 */ ), intl('138241' /* 列入日期 */ ), intl('138242' /* 列入原因 */ ), intl('138419' /* 列入决定机关 */ ), intl('138246' /* 移出日期 */ ), intl('138247' /* 移出原因 */ ), intl('138420' /* 移出决定机关 */ )],
            align: [0, 0, 0, 0, 0, 0, 0],
            fields: ["NO.", "input_time|formatTime", "input_reason|formatCont", "resolve_uthority|formatCont", "output_time|formatTime", "output_reason|formatCont", "resolve_uthority_out|formatCont"],
        }
        var $container = $dom ? $dom : $('#workspace');
        $container.empty().html(Company.drawTab(tableSetting, "tabillegal", "tbodyillegal", false, $dom));
        var columnDefsSet = [{
                "targets": 1,
                "data": 'input_time',
                "render": function(data, type, full, meta) {
                    return Common.formatTime(data)
                }
            },
            {
                "targets": 2,
                "data": 'input_reason',
                "render": function(data) {
                    return Common.formatCont(data)
                }
            },
            {
                "targets": 3,
                "data": 'resolve_uthority',
                "render": function(data, type, full, meta) {
                    if (data && full['resolve_uthority_id']) {
                        var personId = full.resolve_uthority_id;
                        var pingParam = '&fromModule=getillegal&fromField=列入决定机关&opId=' + personId; //bury
                        return '<a class="underline wi-secondary-color wi-link-color" data-code="' + personId + '" data-name="' + data + '" target="_blank" href="Company.html?companycode=' + personId + '&name=' + data + Common.isNoToolbar() + '" data-pingParam="' + pingParam + '">' + Common.formatCont(data) + '</a>';
                    } else {
                        return Common.formatCont(data)
                    }
                }
            },
            {
                "targets": 4,
                "data": 'output_time',
                "render": function(data, type, full, meta) {
                    if (!full['output_time'] && !full['output_reason'] && !full['resolve_uthority_out']) {
                        return '<span class="text-red wi-secondary-color">未移出</span>';
                    }
                    return Common.formatTime(data)
                }
            },
            {
                "targets": 5,
                "data": 'output_reason',
                "render": function(data, type, full, meta) {
                    if (!full['output_time'] && !full['output_reason'] && !full['resolve_uthority_out']) {
                        return '<span class="text-red wi-secondary-color">未移出</span>';
                    }
                    return Common.formatCont(data)
                }
            },
            {
                "targets": 6,
                "data": 'resolve_uthority_out',
                "render": function(data, type, full, meta) {
                    if (!full['output_time'] && !full['output_reason'] && !full['resolve_uthority_out']) {
                        return '<span class="text-red wi-secondary-color">未移出</span>';
                    } else {
                        if (data && full['resolve_uthority_id']) {
                            var personId = full.resolve_uthority_out_id;
                            var pingParam = '&fromModule=getillegal&fromField=移出决定机关&opId=' + personId; //bury
                            return '<a class="underline wi-secondary-color wi-link-color" data-code="' + personId + '" data-name="' + data + '" target="_blank" href="Company.html?companycode=' + personId + '&name=' + data + Common.isNoToolbar() + '" data-pingParam="' + pingParam + '">' + Common.formatCont(data) + '</a>';
                        } else {
                            return Common.formatCont(data)
                        }
                    }
                }
            }
        ]
        if ($dom) {
            var eachModuleData = Company.companyBusinessRiskData.illegal ? Company.companyBusinessRiskData.illegal : null;
            Company.pageSetting_new("#tabillegal", tableSetting, eachModuleData, columnDefsSet, null, $dom);
        } else {
            Company.pageSetting("#tabillegal", tableSetting, columnDefsSet, null, $dom);
        }
    },
    owingtaxSelVal: "",
    getowingtax: function($dom) {
        //欠税信息
        var tableSetting = {
            interface: "getowingtaxsearch",
            moduleName: intl('138424' /* 欠税信息 */ ),
            moreLink: "getowingtax",
            modelNum: "owingtax_num",
            selName: ["owingtaxSelVal"],
            aggName: ["aggs_type"],
            thWidthRadio: ["5%", "20%", "15%", "20%", "20%", "10%", "10%", ],
            thName: [intl('138741' /* 序号 */ ), intl('138194' /* 欠税税种 */ ), intl('138566' /* 欠税类型 */ ), intl('138172' /* 欠税余额 */ ), intl('138397' /* 当期新增欠税 */ ), intl('138654' /* 公告日期 */ ), intl('40513' /* 详情 */ )],
            align: [0, 0, 0, 2, 2, 0, 0],
            fields: ["NO.", "owing_tax_tax_type", "owing_tax_type", "owing_tax_balance", "new_owing_tax", "owing_tax_publish_time", "reference_id"],
        }
        var $container = $dom ? $dom : $('#workspace');
        $container.empty().html(Company.drawTab(tableSetting, "tabowingtax", "tbodyowingtax", false, $dom));
        var columnDefsSet = [{
                "targets": 1,
                "data": 'owing_tax_tax_type',
                "render": function(data) {
                    return Common.formatCont(data)
                }
            },
            {
                "targets": 2,
                "data": 'owing_tax_type',
                "render": function(data) {
                    return Common.formatCont(data)
                }
            },
            {
                "targets": 3,
                "data": 'owing_tax_balance',
                "render": function(data) {
                    return Common.formatCont(data)
                }
            },
            {
                "targets": 4,
                "data": 'new_owing_tax',
                "render": function(data, type, full, meta) {
                    return Common.formatCont(data)
                }
            },
            {
                "targets": 5,
                "data": 'owing_tax_publish_time',
                "render": function(data, type, full, meta) {
                    return Common.formatTime(data)
                }
            },
            {
                "targets": 6,
                "data": 'reference_id',
                "render": function(data, type, full, meta) {
                    var buryData = 'data-buryId="' + data + '" data-buryEntity="getowingtax"'; //bury
                    return Common.showDetailLink(data, ["getowingtaxdetail", "detailId", 7], buryData);
                }
            },
        ]
        var params = { "companycode": Company.companyCode, "type": Company.owingtaxSelVal, "pageSize": 10 };
        Company.pageSetting("#tabowingtax", tableSetting, columnDefsSet, params, $dom);

    },
    getjudicialhelp: function($dom) {
        //司法协助
        var tableSetting = {
            interface: "judicailassist",
            moduleName: intl('138358' /* 司法协助 */ ),
            moreLink: "judicailassist",
            modelNum: "judicail_assist_num",
            thWidthRadio: ["5%", "15%", "15%", "20%", "20%", "10%", "10%"],
            thName: [intl('138741' /* 序号 */ ), intl('138592' /* 被执行人 */ ), intl('138278' /* 股权数额 */ ), intl('138523' /* 执行通知书文号 */ ), intl('138228' /* 执行法院 */ ), intl('30034' /* 类型 */ ), intl('40513' /* 详情 */ )],
            align: [0, 0, 0, 0, 0, 0],
            fields: ["NO.", "executed_person|formatCont", "stock_share|formatCont", "exe_notice_no|formatCont", "exe_court|formatCont", "status|formatCont"],
        }
        var $container = $dom ? $dom : $('#workspace');
        $container.empty().html(Company.drawTab(tableSetting, "tabjudicialhelp", "tbodyjudicialhelp", false, $dom));
        var columnDefsSet = [{
                "targets": 1,
                "data": 'executed_person',
                "render": function(data, type, full, meta) {
                    if (data && full['executed_person_id']) {
                        var personId = full.executed_person_id;
                        var pingParam = '&fromModule=getjudicialhelp&fromField=被执行人&opId=' + personId; //bury
                        if (personId.length < 16) {
                            return '<a class="underline wi-secondary-color wi-link-color" data-code="' + personId + '" data-name="' + data + '" target="_blank" href="Company.html?companycode=' + personId + '&name=' + data + Common.isNoToolbar() + '" data-pingParam="' + pingParam + '">' + Common.formatCont(data) + '</a>';
                        } else {
                            // return '<a class="underline wi-secondary-color wi-link-color" data-code="' + personId + '" data-name="' + data + '" target="_blank" href="Person.html?id=' + personId + '&name=' + data + Common.isNoToolbar() + '" data-pingParam="' + pingParam + '">' + Common.formatCont(data) + '</a>';
                            return Common.formatCont(data)
                        }
                    }
                    return Common.formatCont(data)
                }
            },
            {
                "targets": 2,
                "data": 'stock_share',
                "render": function(data, type, full, meta) {
                    var capital = data ? Common.formatMoney(data) + (full.stock_share_currency ? full.stock_share_currency : "") : "--"; //注册资金
                    return capital;
                }
            },
            {
                "targets": 3,
                "data": 'exe_notice_no',
                "render": function(data) {
                    return Common.formatCont(data)
                }
            },
            {
                "targets": 4,
                "data": 'exe_court',
                "render": function(data) {
                    return Common.formatCont(data)
                }
            },
            {
                "targets": 5,
                "data": 'status',
                "render": function(data, type, full, meta) {
                    return Common.formatCont(data)
                }
            },
            {
                "targets": 6,
                "data": 'ob_object_id',
                "render": function(data, type, full, meta) {
                    if (full.corp_id && full.reference_id) {
                        var val = full.corp_id + ',' + full.reference_id;
                        var buryData = 'data-buryId="' + val + '" data-buryEntity="judicailassist"'; //bury
                        return Common.showDetailLink(val, ["judicailassistdetail", "windId", 7], buryData);
                    } else {
                        return '--';
                    }
                }
            }
        ]
        if ($dom) {
            var eachModuleData = Company.companyRiskInfoData.judicailAssist ? Company.companyRiskInfoData.judicailAssist : null;
            Company.pageSetting_new("#tabjudicialhelp", tableSetting, eachModuleData, columnDefsSet, null, $dom);
        } else {
            Company.pageSetting("#tabjudicialhelp", tableSetting, columnDefsSet, null, $dom);
        }
        $('#tabjudicialhelp').off('click').on('click', '.underline', Company.linkWithCodeEventHandler);
    },
    getpublicnotice: function($dom) {
        //公示催告
        var tableSetting = {
            interface: "getpublicnotice",
            moduleName: intl('71767' /* 公示催告 */ ),
            moreLink: "getpublicnotice",
            modelNum: "public_notice_num",
            thWidthRadio: ["5%", "30%", "30%", "20%", "15%"],
            thName: [intl('138741' /* 序号 */ ), intl('138427' /* 当事人 */ ), intl('138148' /* 公告人*/ ), intl('137829' /* 公告时间*/ ), intl('40513' /* 详情*/ )],
            align: [0, 0, 0, 0, 0],
            fields: ["NO.", "announcement_party", "announcer|formatCont", "announcement_time|formatTime", "announcement_id|formatCont"],
        }
        var $container = $dom ? $dom : $('#workspace');
        $container.empty().html(Company.drawTab(tableSetting, "tabpublicnotice", "tbodypublicnotice", false, $dom));
        var columnDefsSet = [{
                "targets": 1,
                "data": 'announcement_party',
                "render": function(data, type, full, meta) {
                    return Company.splitComKeyValueList(data);
                }
            },
            {
                "targets": 2,
                "data": 'announcer',
                "render": function(data, type, full, meta) {
                    return Common.formatCont(data);
                }
            },
            {
                "targets": 3,
                "data": 'announcement_time',
                "render": function(data) {
                    return Common.formatTime(data)
                }
            },
            {
                "targets": 4,
                "data": 'announcement_id',
                "render": function(data) {
                    var buryData = 'data-buryId="' + data + '" data-buryEntity="getpublicnotice"'; //bury
                    return Common.showDetailLink(data, ["getpublicnoticedetail", "detailId", 5], buryData);
                }
            }
        ]
        Company.pageSetting("#tabpublicnotice", tableSetting, columnDefsSet, null, $dom);
    },
    getfilinginfo: function($dom) {
        //立案信息
        var tableSetting = {
            interface: "getfilinginfo",
            moduleName: intl('205388' /* 立案信息 */ ),
            moreLink: "getfilinginfo",
            modelNum: "filing_info_num",
            thWidthRadio: ["5%", "15%", "30%", "20%", "20%", "10%"],
            thName: [intl('138741' /* 序号 */ ), intl('138190' /* 案号 */ ), intl('138427' /* 当事人*/ ), intl('205387' /* 立案日期*/ ), intl('138229' /*开庭时间*/ ), intl('40513' /* 详情*/ )],
            align: [0, 0, 0, 0, 0, 0],
            fields: ["NO.", "announcement_no|formatCont", "announcement_party|formatCont", "filing_time|formatTime", "court_time|formatTime", "announcement_id|formatCont"],
        }
        var $container = $dom ? $dom : $('#workspace');
        $container.empty().html(Company.drawTab(tableSetting, "tabfilinginfo", "tbodyfilinginfo", false, $dom));
        var columnDefsSet = [{
                "targets": 1,
                "data": 'announcement_no',
                "render": function(data, type, full, meta) {
                    return Common.formatCont(data);
                }
            },
            {
                "targets": 2,
                "data": 'announcement_party',
                "render": function(data, type, full, meta) {
                    return Company.splitComKeyValueList(data);
                }
            },
            {
                "targets": 3,
                "data": 'filing_time',
                "render": function(data) {
                    return Common.formatTime(data)
                }
            },
            {
                "targets": 4,
                "data": 'court_time',
                "render": function(data) {
                    return Common.formatTime(data)
                }
            },
            {
                "targets": 5,
                "data": 'announcement_id',
                "render": function(data) {
                    var buryData = 'data-buryId="' + data + '" data-buryEntity="getfilinginfo"'; //bury
                    return Common.showDetailLink(data, ["getfilinginfodetail", "detailId", 6], buryData);
                }
            }
        ]
        Company.pageSetting("#tabfilinginfo", tableSetting, columnDefsSet, null, $dom);
    },
    getsimplecancel: function($dom) {
        // 简易注销
        var moduleNameArr = [intl('138656' /* 公告信息 */ ), intl('138493' /* 简易注销结果 */ )];
        var moduleIdArr = ["sampleInfoModule", "sampleResultModule"];
        var tableIdArr = ["tabSampleInfo", "tabSampleResult"];
        var htmlArr = [];
        htmlArr.push('<div class="widget-model"><div class="widget-header"><span class="fl">' + intl('138187' /* 简易注销 */ ) + '</span></div>');
        for (var i = 0; i < 2; i++) {
            htmlArr.push('<div class="manage-module" id="' + moduleIdArr[i] + '"><div class="sample-main"><h3>' + moduleNameArr[i] + '</h3><div class="sample-wrap">');
            htmlArr.push('<table id="' + tableIdArr[i] + '" class="table-company table-company-sample"><tbody><tr><td class="manage-loading"><img src="../resource/images/Company/loading.gif" />' + intl('139612' /* 数据加载中... */ ) + '</td></tr></tbody></table>');
            htmlArr.push('</div></div></div>')
        }
        htmlArr.push('</div>');
        var $container = $dom ? $dom : $('#workspace');
        $container.empty().html(htmlArr.join(""));

        if ($dom) {
            if (Company.companyBusinessRiskData.simpleCancel && Company.companyBusinessRiskData.simpleCancel.length) {
                var firstData = Company.companyBusinessRiskData.simpleCancel[0];
                var firstArr = [],
                    secondArr = [];
                firstArr.push('<tbody>');
                firstArr.push('<tr><td class="tit-tab-basicInfo" width="20%">' + intl('138677' /* 企业名称 */ ) + '</td><td width="30%" id="simpleCancel_name" class="content-tab-basicInfo"></td><td class="tit-tab-basicInfo" width="20%">' + intl('138808' /* 统一社会信用代码 */ ) + '</td><td width="30%" id="simpleCancel_code" class="content-tab-basicInfo"></td></tr>');
                firstArr.push('<tr><td class="tit-tab-basicInfo" width="20%">' + intl('138477' /* 登记机关 */ ) + '</td><td width="30%" id="simpleCancel_public" class="content-tab-basicInfo"></td><td class="tit-tab-basicInfo" width="20%">' + intl('138146' /* 公告期 */ ) + '</td><td width="30%" id="simpleCancel_date" class="content-tab-basicInfo"></td></tr>');
                firstArr.push('</tbody>');
                secondArr.push('<tbody>');
                secondArr.push('<tr><td class="tit-tab-basicInfo" width="20%">' + intl('138493' /* 简易注销结果 */ ) + '</td><td width="30%" id="simpleCancel_result" class="content-tab-basicInfo"></td><td class="tit-tab-basicInfo" width="20%">' + intl('138153' /* 公告申请日期 */ ) + '</td><td width="30%" id="simpleCancel_other_date" class="content-tab-basicInfo"></td></tr>');
                secondArr.push('</tbody>');

                $('#tabSampleInfo').empty().html(firstArr).addClass('tab-basicInfo');
                $('#simpleCancel_name').html('<a class="underline wi-link-color wi-secondary-color" data-code=' + firstData.corp_id + ' data-name=' + firstData.corp_name + '>' + firstData.corp_name + '</a>');
                $('#simpleCancel_code').text(firstData.credit_code);
                $('#simpleCancel_public').text(firstData.register_auth);
                $('#simpleCancel_date').text(Common.formatTime(firstData.start_date) + '至' + Common.formatTime(firstData.end_date));

                $('#tabSampleResult').empty().html(secondArr).addClass('tab-basicInfo');
                $('#simpleCancel_result').text(firstData.result);
                $('#simpleCancel_other_date').text(Common.formatTime(firstData.apply_date));

            }
        } else {

            // ajax
        }
    },
    getdoublerandom: function($dom) {
        // 双随机抽查
        var tableSetting = {
            interface: "getspotcheck",
            moduleName: intl('145855' /* 双随机抽查 */ ),
            moreLink: "getdoublerandom",
            modelNum: "spot_check_num",
            thWidthRadio: ["5%", "13%", "13%", "14%", "13%", "10%", "10%", "12%", "10%"],
            thName: [intl('138741' /* 序号 */ ), intl('145856' /* 抽查计划编号 */ ), intl('145857' /* 抽查计划名称 */ ), intl('145858' /* 抽查任务编号 */ ), intl('145859' /* 抽查任务名称 */ ), intl('145860' /* 抽查类型 */ ), intl('145861' /* 抽查机关 */ ), intl('145862' /* 抽查完成日期 */ ), intl('145863' /* 抽查结果 */ )],
            align: [0, 0, 0, 0, 0, 0, 0, 0],
            fields: ["NO.", "check_plan_no", "check_plan_name", "check_task_no", "check_task_name", "check_type", "check_organs", "check_completion_date", "OB_OBJECT_ID"],
        }
        var $container = $dom ? $dom : $('#workspace');
        $container.empty().html(Company.drawTab(tableSetting, "tabdoublerandom", "tbodydoublerandom", false, $dom));
        var columnDefsSet = [{
                "targets": 1,
                "data": 'check_plan_no',
                "render": function(data) {
                    return Common.formatCont(data)
                }
            },
            {
                "targets": 2,
                "data": 'check_plan_name',
                "render": function(data) {
                    return Common.formatCont(data)
                }
            },
            {
                "targets": 3,
                "data": 'check_task_no',
                "render": function(data) {
                    return Common.formatCont(data)
                }
            },
            {
                "targets": 4,
                "data": 'check_task_name',
                "render": function(data) {
                    return Common.formatCont(data)
                }
            },
            {
                "targets": 5,
                "data": 'check_type',
                "render": function(data) {
                    return Common.formatCont(data)
                }
            },
            {
                "targets": 6,
                "data": 'check_organs',
                "render": function(data) {
                    return Common.formatCont(data)
                }
            },
            {
                "targets": 7,
                "data": 'check_completion_date',
                "render": function(data) {
                    return Common.formatTime(data)
                }
            },
            {
                "targets": 8,
                "data": 'OB_OBJECT_ID',
                "render": function(data, type, full, meta) {
                    if (full.check_plan_no && full.check_task_no) {
                        var val = full.check_plan_no + '|' + full.check_task_no;
                        var buryData = 'data-buryId="' + val + '" data-buryEntity="getdoublerandom"'; //bury
                        return Common.showDetailLink(val, ["getspotcheckdetail", "checkPlanNo|checkTaskNo", 9], buryData);
                    } else {
                        return '/';
                    }
                }
            }
        ]
        Company.pageSetting("#tabdoublerandom", tableSetting, columnDefsSet, null, $dom);
    },
    getclearinfo: function($dom) {
        // 清算信息
        var tableSetting = {
            interface: "getliquidation",
            moduleName: intl('145873' /* 清算信息 */ ),
            moreLink: "getclearinfo",
            modelNum: "liquidation_num",
            thWidthRadio: ["5%", "25%", "70%"],
            thName: [intl('138741' /* 序号 */ ), intl('145874' /* 清算组负责人 */ ), intl('145875' /* 清算组成员 */ )],
            align: [0, 0, 0],
            fields: ["NO.", "director", "member"],
        }
        var $container = $dom ? $dom : $('#workspace');
        $container.empty().html(Company.drawTab(tableSetting, "tabclearinfo", "tbodyclearinfo", false, $dom));
        var columnDefsSet = [{
                "targets": 1,
                "data": 'director',
                "render": function(data) {
                    return Common.formatCont(data)
                }
            },
            {
                "targets": 2,
                "data": 'member',
                "render": function(data) {
                    return Common.formatCont(data)
                }
            }
        ]
        if ($dom) {
            var eachModuleData = Company.companyBusinessRiskData.liquidation ? Company.companyBusinessRiskData.liquidation : null;
            Company.pageSetting_new("#tabclearinfo", tableSetting, eachModuleData, columnDefsSet, null, $dom);
        } else {
            Company.pageSetting("#tabclearinfo", tableSetting, columnDefsSet, null, $dom);
        }
    },
    getmultiplecertificate: function($dom) {
        // 多证合一
        var tableSetting = {
            interface: "getcompanycertificate",
            moduleName: intl('145871' /* “多证合一”信息公示 */ ),
            moreLink: "getmultiplecertificate",
            modelNum: "company_certificate_num",
            thWidthRadio: ["5%", "25%", "70%"],
            thName: [intl('138741' /* 序号 */ ), intl('145872' /* 备案事项名称 */ ), intl('138123' /* 备注 */ )],
            align: [0, 0, 0],
            fields: ["NO.", "item_name", "remark"],
        }
        var $container = $dom ? $dom : $('#workspace');
        $container.empty().html(Company.drawTab(tableSetting, "tabmultiplecertificate", "tbodymultiplecertificate", false, $dom));
        var columnDefsSet = [{
                "targets": 1,
                "data": 'item_name',
                "render": function(data) {
                    return Common.formatCont(data)
                }
            },
            {
                "targets": 2,
                "data": 'remark',
                "render": function(data) {
                    return Common.formatCont(data)
                }
            }
        ]
        if ($dom) {
            var eachModuleData = Company.companyBussinessInfoData.CompanyCertificate ? Company.companyBussinessInfoData.CompanyCertificate : null;
            Company.pageSetting_new("#tabmultiplecertificate", tableSetting, eachModuleData, columnDefsSet, null, $dom);
        } else {
            Company.pageSetting("#tabmultiplecertificate", tableSetting, columnDefsSet, null, $dom);
        }
    },
    getvoidagestatement: function($dom) {
        // 作废声明
        var tableSetting = {
            interface: "getlicenseabolish",
            moduleName: intl('149696' /* 营业执照作废声明 */ ),
            moreLink: "getvoidagestatement",
            modelNum: "license_abolish_num",
            thWidthRadio: ["5%", "15%", "15%", "25%", "15%", "25%"],
            thName: [intl('138741' /* 序号 */ ), intl('145866' /* 声明日期 */ ), intl('145867' /* 正副本 */ ), intl('145868' /* 声明内容 */ ), intl('145869' /* 副本编号 */ ), intl('145870' /* 补领情况 */ )],
            align: [0, 0, 0, 0, 0, 0],
            fields: ["NO.", "declaration_date", "original_or_copy", "declaration_content", "duplicate_no", "replacement_status"],
        }
        var $container = $dom ? $dom : $('#workspace');
        $container.empty().html(Company.drawTab(tableSetting, "tabvoidagestatement", "tbodyvoidagestatement", false, $dom));
        var columnDefsSet = [{
                "targets": 1,
                "data": 'declaration_date',
                "render": function(data) {
                    return Common.formatTime(data)
                }
            },
            {
                "targets": 2,
                "data": 'original_or_copy',
                "render": function(data) {
                    return Common.formatCont(data)
                }
            },
            {
                "targets": 3,
                "data": 'declaration_content',
                "render": function(data) {
                    return Common.formatCont(data)
                }
            },
            {
                "targets": 4,
                "data": 'duplicate_no',
                "render": function(data) {
                    return Common.formatCont(data)
                }
            },
            {
                "targets": 5,
                "data": 'replacement_status',
                "render": function(data) {
                    return Common.formatCont(data)
                }
            }
        ]
        if ($dom) {
            var eachModuleData = Company.companyBussinessInfoData.LicenseAbolish ? Company.companyBussinessInfoData.LicenseAbolish : null;
            Company.pageSetting_new("#tabvoidagestatement", tableSetting, eachModuleData, columnDefsSet, null, $dom);
        } else {
            Company.pageSetting("#tabvoidagestatement", tableSetting, columnDefsSet, null, $dom);
        }
    },
    gettaxillegal: function($dom) {
        //税收违法
        var tableSetting = {
            interface: "getillegaltax",
            moduleName: intl('138533' /* 税收违法 */ ),
            moreLink: "gettaxillegal",
            modelNum: "illegaltax_num",
            thWidthRadio: ["5%", "20%", "15%", "15%", "20%", "15%", "10%"],
            thName: [intl('138741' /* 序号 */ ), intl('138189' /* 案件性质 */ ), intl('138178' /* 违法事实开始日期 */ ), intl('138234' /* 违法事实截止日期 */ ), intl('138346' /* 实施检查单位 */ ), intl('138908' /* 发布日期 */ ), intl('40513' /* 详情 */ )],
            align: [0, 0, 0, 0, 0, 0, 0],
            fields: ["NO.", "case_nature", "start_date", "closing_date", "inspection_unit", "release_date", "reference_id"],
        }
        var $container = $dom ? $dom : $('#workspace');
        $container.empty().html(Company.drawTab(tableSetting, "tabillegaltax", "tbodyillegaltax", false, $dom));
        var columnDefsSet = [{
                "targets": 1,
                "data": 'case_nature',
                "render": function(data) {
                    return Common.formatCont(data)
                }
            },
            {
                "targets": 2,
                "data": 'start_date',
                "render": function(data) {
                    return Common.formatTime(data)
                }
            },
            {
                "targets": 3,
                "data": 'closing_date',
                "render": function(data) {
                    return Common.formatTime(data)
                }
            },
            {
                "targets": 4,
                "data": 'inspection_unit',
                "render": function(data, type, full, meta) {
                    return Common.formatCont(data)
                }
            },
            {
                "targets": 5,
                "data": 'release_date',
                "render": function(data, type, full, meta) {
                    return Common.formatTime(data)
                }
            },
            {
                "targets": 6,
                "data": 'reference_id',
                "render": function(data, type, full, meta) {
                    var buryData = 'data-buryId="' + data + '" data-buryEntity="gettaxillegal"'; //bury
                    return Common.showDetailLink(data, ["getillegaltaxdetail", "detailId", 7], buryData);
                }
            }
        ]
        Company.pageSetting("#tabillegaltax", tableSetting, columnDefsSet, null, $dom);
    },
    getcomparable: function($dom, oIndex, oId, oType, oVal, oCount, oName) {
        //竞争对手 原老版本可比企业
        var tableSetting = {
            interface: "getcomparable",
            moduleName: intl('138219' /* 竞争对手 */ ),
            moreLink: "getcomparable",
            thWidthRadio: ["5%", "35%", "25%", "20%", "10%"],
            align: [0, 0, 0, "2|td-padding20", 0],
            thName: [intl('138741' /* 序号 */ ), intl('138677' /* 企业名称 */ ), intl('5529' /* 法定代表人 */ ), intl('138768' /* 注册资本(万元) */ ), intl('138860' /* 成立日期 */ )],
            fields: ["NO.", "company_name", "legal_person_name", "reg_capital", "reg_date"],
            notVipTitle: intl('138219' /* 竞争对手 */ ),
            notVipTips: intl('224197'),
            moduleVal: oVal ? oVal : "",
            callback: function(data) {
                var otherType = Company.companyCompareType;
                var titleArr = [];
                if (otherType.length > 0) {

                    if ($("#selectComparable").length > 0) {

                    } else {
                        titleArr.push('<select id="selectComparable" class="fr">')
                        for (var i = 0; i < otherType.length; i++) {
                            // TODO second_code 有重复情况 避免出现两个option value相同                             
                            var valTmp = otherType[i].type ? (otherType[i].type + '|' + otherType[i].second_code) : otherType[i].second_code;
                            titleArr.push('<option data-count=' + otherType[i].count + ' data-type=' + otherType[i].type + ' data-name=' + otherType[i].second_code_name + ' value=' + valTmp + ' data-val=' + valTmp + '>' + otherType[i].second_code_name + '</option>')
                        }
                        titleArr.push('</select>')
                        $("#getcomparable .widget-header").append(titleArr.join(""));
                    }
                    if (tableSetting.moduleVal) {
                        var valTmp = oType ? (oType + '|' + tableSetting.moduleVal) : tableSetting.moduleVal;
                        $("#selectComparable").find("option[value='" + valTmp + "']").prop("selected", true);
                    } else {
                        tableSetting.moduleVal = otherType[0];
                        var valTmp = oType ? (oType + '|' + tableSetting.moduleVal) : tableSetting.moduleVal;
                        $("#selectComparable").find("option[value='" + valTmp + "']").prop("selected", true);
                    }
                }
            }
        }
        var parameter = { "CompanyId": Company.companyId, "CompanyCode": Company.companyCode, "industrycode": Company.base2Code };
        var $container = $dom ? $dom : $('#workspace');
        $container.empty().html(Company.drawTab(tableSetting, "tabComparable", "tbodyComparable", false));
        if (!Company.isVip) {
            Common.notVipModule($($container).find('#tabComparable').empty(), tableSetting.notVipTitle, tableSetting.notVipTips ? tableSetting.notVipTips.replace(/企业套餐/g, 'VIP/SVIP套餐') : '购买VIP/SVIP套餐，即可查看具体信息');
            // 模块本身已经提示了开通信息 隐藏导出按钮
            $('#getcomparable').find('.widget-header').find('#selectComparable').hide();
            return;
        }
        if ($dom) { //$dom--调小接口
            var columnDefsSet = [{
                    "targets": 1,
                    "data": 'company_name',
                    "render": function(data, type, full, meta) {
                        var type = 2;
                        var shortname = full.corp_short_name;
                        var id = full.company_code;
                        //                      var img = full.logo ? full.logo : "";
                        var img = full.logo_v ? full.logo_v : "";
                        var pingParam = '&fromModule=getcomparable&fromField=企业名称&opId=' + id; //bury
                        return (Common.showCompanyName(type, data, id, img, shortname, null, null, null, null, pingParam)); //企业logo
                    }
                },
                {
                    "targets": 2,
                    "data": 'legal_person_name',
                    "render": function(data, type, full, meta) {
                        if (data && full['legal_person_id']) {
                            var personId = full.legal_person_id;
                            var pingParam = '&fromModule=getcomparable&fromField=法定代表人&opId=' + id; //bury
                            if (personId.length < 16) {
                                return '<a class="underline wi-secondary-color wi-link-color" data-code="' + personId + '" data-name="' + data + '" target="_blank" href="Company.html?companycode=' + personId + '&name=' + data + Common.isNoToolbar() + '" data-pingParam="' + pingParam + '">' + Common.formatCont(data) + '</a>';
                            } else {
                                // return '<a class="underline wi-secondary-color wi-link-color" data-code="' + personId + '" data-name="' + data + '" target="_blank" href="Person.html?id=' + personId + '&name=' + data + Common.isNoToolbar() + '" data-pingParam="' + pingParam + '">' + Common.formatCont(data) + '</a>';
                                return Common.formatCont(data)
                            }
                        }
                        return Common.formatCont(data)
                    }
                },
                {
                    "targets": 3,
                    "data": 'reg_capital',
                    "render": function(data) {
                        return Common.formatMoney(data, [4, '&nbsp;'])
                    }
                },
                {
                    "targets": 4,
                    "data": 'reg_date',
                    "render": function(data, type, full, meta) {
                        return Common.formatTime(data)
                    }
                }
            ]
            if (!Company.companyCompareType || Company.companyCompareType.length <= 0) {
                return false;
            }
            var selIdx = oIndex ? oIndex : 0;
            var testId = Company.companyCompareType[selIdx].second_code;
            var testType = Company.companyCompareType[selIdx].type;
            var params = { "companycode": Company.companyCode, "secondcode": testId, "type": testType };
            myWfcAjax("getcomparable", params, function(secondData) {
                    var resSecondData = JSON.parse(secondData);
                    if (resSecondData.Data) {
                        tableSetting.modelNum = oCount;
                        tableSetting.interface = "getcomparable";
                        tableSetting.secondModuleName = "getcomparable";
                        Company.pageSetting_new("#tabComparable", tableSetting, resSecondData.Data, columnDefsSet, params, $dom);
                    }
                })
                // }
        } else {
            myWfcAjax("getcomparable", parameter, function(resData) {
                var res = JSON.parse(resData);
                if (res.ErrorCode == 0 && res.Data && res.Data.length > 0) {
                    var data = res.Data;
                    var htmlArr = [];
                    for (var i = 0; i < data.length; i++) {
                        var hrefStr = "";
                        var name = data[i].company_name
                        var shortname = data[i].corp_short_name;
                        var id = data[i].company_code;
                        var img = data[i].logo ? data[i].logo : "";
                        var pingParam = '&fromModule=' + buryItemMapping.mappingEntity["getcomparable"] + '&fromField=企业名称&opId=' + id; //bury
                        hrefStr = Common.showCompanyName(2, name, id, img, shortname, null, null, null, null, pingParam);

                        var money = data[i].reg_capital ? Common.formatMoney(String(parseFloat(data[i].reg_capital)), [, '&nbsp;']) : "--";
                        var personId = data[i].legal_person_id ? data[i].legal_person_id : '';
                        var personName = data[i].legal_person_name ? data[i].legal_person_name : '--';
                        var personStr = '';
                        if (personId) {
                            // personStr = '<a class="underline wi-secondary-color wi-link-color" target="_blank" href="Person.html?id=' + personId + '&name=' + personName + Common.isNoToolbar() + '">' + personName + '</a>';
                            personStr = '<a class="underline wi-secondary-color wi-link-color" >' + personName + '</a>';
                        }
                        htmlArr.push("<tr><td align='left'>" + (i + 1) + "</td><td>" + hrefStr + "</td><td align='left'>" + (personId ? personStr : personName) + "</td><td align='right' class='td-padding20'>" + money + "</td><td align='left'>" + Common.formatTime(data[i].reg_date) + "</td></tr>")
                    }
                    $("#tbodyComparable").html(htmlArr.join(""));
                } else {
                    $("#tbodyComparable").html('<tr><td colspan="5"><div class="no-data">没有找到竞争对手信息</div></td></tr>')
                }
            })
        }
        // TODO 竞争对手调整bug修复（暂时）
        $('#getcomparable').off('click').on('click', '.underline', Company.linkWithCodeEventHandler);
    },
    // old 股权穿透图
    getShareAndInvest: function($dom) {
        var selfEle = $('#getShareAndInvest')
        var $container = $dom ? $dom : $('#workspace');

        var rootData = null;
        var parameter = { "companycode": Company.companyCode, "depth": 4 };
        var vData = {}; // 暂存原始数据
        var echartInstance = null;

        var htmlArr = [];
        htmlArr.push('<div class="widget-model">')
        htmlArr.push('<div class="widget-header"><span class="fl">' + intl('138279' /* 股权穿透图 */ ) + '</span></div>')

        htmlArr.push('<div class="widget-chart-header">' + Company.companyName + '</div>')

        htmlArr.push('<div style="height:400px;background:#fff;">')
        htmlArr.push('<div class="mao-screen-area" id="screenArea" style="height: 400px; cursor: pointer;background:#fff;border:1px solid #e8e8e9;box-sizing:border-box;">')
        htmlArr.push('<div class="chart-header" style="display:none;position:absolute;z-index:1;top:-34px;">')
        htmlArr.push('<button class="chart-header-redirect wi-secondary-bg"><i></i>' + '风格切换' + '</button>')
        htmlArr.push('<button class="chart-header-redirect wi-secondary-bg"><i></i>' + intl('138310' /* 全屏查看 */ ) + '</button>')
        htmlArr.push('<button class="chart-header-reload wi-secondary-bg"><i></i>' + intl('138765' /* 还原 */ ) + '</button>')
        htmlArr.push('<button class="chart-header-save wi-secondary-bg buryClick" data-buryOpType="click" data-buryfuncType="picEx" data-buryEntity="getShareAndInvest">' + intl('138780' /* 保存图片 */ ) + '</button>')
        htmlArr.push('</div>')
        htmlArr.push('<div class="chart-loading" id="load_data" style="display: none;"><img src="../resource/images/Company/loading.gif" />' + intl('139612' /* 数据加载中... */ ) + '</div>')
        htmlArr.push('<div class="chart-none" id="no_data" style="display: none;">暂无数据</div>')
        htmlArr.push('<div id="companyChart" style="height:400px;"></div>')
        htmlArr.push('</div></div></div>');
        $container.empty().html(htmlArr.join(""));

        $(selfEle).find('#load_data').show();
        $(selfEle).find('.chart-header').off('click', 'button');

        myWfcAjax("tracingstockex", parameter, function(data) {
            $('#load_data').hide();

            data = JSON.parse(data);
            if (data && data.ErrorCode == 0 && data.Data) {
                rootData = rootData = data.Data;
                try {
                    if ((rootData.investTree && rootData.investTree.children && rootData.investTree.children.length) || (rootData.shareHolderTree && rootData.shareHolderTree.children && rootData.shareHolderTree.children.length)) {
                        $.extend(true, vData, data.Data);

                        echartInstance = echarts.init($(selfEle).find('#companyChart')[0]);
                        echartInstance._wind_scale = 0.8;
                        echartInstance._wind_redirect = true;


                        Common.shareHolderAndInvestChartInitFun(echartInstance, rootData, parameter.companycode, Company.companyName);
                        $(selfEle).find('.chart-header').show();
                        $(selfEle).find('.chart-header').on('click', 'button', gqctNavEvent);
                    } else {
                        $(selfEle).find('.widget-header').siblings('div:not(.widget-chart-header)').height(212);
                        $(selfEle).find('.widget-header').siblings('div').find('#screenArea').height('210').css('cursor', 'default');
                        $(selfEle).find('.chart-header').hide();
                        $(selfEle).find('#load_data').hide();
                        $(selfEle).find('#no_data').show();
                    }
                } catch (e) {
                    $(selfEle).find('.widget-header').siblings('div:not(.widget-chart-header)').height(212);
                    $(selfEle).find('.widget-header').siblings('div').find('#screenArea').height('210').css('cursor', 'default');
                    $(selfEle).find('.chart-header').hide();
                    $(selfEle).find('#load_data').hide();
                    $(selfEle).find('#no_data').show();
                }
            } else {
                $(selfEle).find('.widget-header').siblings('div:not(.widget-chart-header)').height(212);
                $(selfEle).find('.widget-header').siblings('div').find('#screenArea').height('210').css('cursor', 'default');
                $(selfEle).find('.chart-header').hide();
                $(selfEle).find('#load_data').hide();
                $(selfEle).find('#no_data').show();
            }
        }, function() {
            $(selfEle).find('.widget-header').siblings('div:not(.widget-chart-header)').height(212);
            $(selfEle).find('.widget-header').siblings('div').find('#screenArea').height('210').css('cursor', 'default');
            $(selfEle).find('.chart-header').hide();
            $(selfEle).find('#load_data').hide();
            $(selfEle).find('#no_data').show();
        });

        /**
         * 刷新
         * 
         * @param {any} e 
         * @returns 
         */
        function reloadChart(e) {
            // Common.burypcfunctioncode('');
            var ecConfig = require('echarts/config');
            echartInstance._messageCenter.dispatch('restore', null, null, echartInstance);
            return false;
        }

        /**
         * 股权穿透保存图片事件委托
         * 
         * @param {any} e 
         */
        function gqctSaveImgEvent(e) {
            // Common.burypcfunctioncode('');
            if (navigator.userAgent.toLowerCase().indexOf('chrome') < 0) {
                if (layer) {
                    layer.msg('功能升级中!')
                } else {
                    window.alert('功能升级中!')
                }
                return;
            }
            Common.saveEchart2Img(echartInstance, Company.companyName ? (Company.companyName + '_' + '股权穿透') : '股权穿透', '#companyChart');
            // CompanyChart.saveEchart2Img(echartInstance, CompanyChart.companyName ? (CompanyChart.companyName + '_' + '股权穿透') : '股权穿透');
        }

        /**
         * 股权穿透header事件委托
         * 
         * @param {any} e 
         * @returns 
         */
        function gqctNavEvent(e) {
            var target = e.target;
            if (!$(target).is('button')) {
                target = target.closest('li');
            }
            var idx = $(target).parent().children().index($(target));

            switch (idx) {
                case 3:
                    gqctSaveImgEvent();
                    break;
                case 2:
                    reloadChart();
                    break;
                case 1:
                    Company.redirectToChart('#chart_gqct');
                    break;
                default:
                    Company.getShareAndInvestNew($('#getShareAndInvest'));
                    break;
            }
            return false;
        }
    },
    // new 股权穿透图
    getShareAndInvestNew: function($dom) {
        var selfEle = $('#getShareAndInvest')
        var $container = $dom ? $dom : $('#workspace');

        var rootData = null;
        var parameter = { "companycode": Company.companyCode, "depth": 4 };
        var vData = {}; // 暂存原始数据
        var echartInstance = null;

        var htmlArr = [];
        htmlArr.push('<div class="widget-model">')
        htmlArr.push('<div class="widget-header"><span class="fl">' + intl('138279' /* 股权穿透图 */ ) + '</span></div>')

        htmlArr.push('<div class="widget-chart-header">' + Company.companyName + '</div>')

        htmlArr.push('<div style="height:400px;background:#fff;">')
        htmlArr.push('<div class="mao-screen-area" id="screenArea" style="height: 400px; cursor: pointer;background:#fff;border:1px solid #e8e8e9;box-sizing:border-box;">')
        htmlArr.push('<div class="chart-header" style="display:none;position:absolute;z-index:1;top:-34px;">')
        htmlArr.push('<button class="chart-header-redirect wi-secondary-bg"><i></i>' + '风格切换' + '</button>')
        htmlArr.push('<button class="chart-header-redirect wi-secondary-bg"><i></i>' + intl('138310' /* 全屏查看 */ ) + '</button>')
        htmlArr.push('<button class="chart-header-reload wi-secondary-bg"><i></i>' + intl('138765' /* 还原 */ ) + '</button>')
        htmlArr.push('<button class="chart-header-save wi-secondary-bg buryClick" data-buryOpType="click" data-buryfuncType="picEx" data-buryEntity="getShareAndInvest">' + intl('138780' /* 保存图片 */ ) + '</button>')
        htmlArr.push('</div>')
        htmlArr.push('<div class="chart-loading" id="load_data" style="display: none;"><img src="../resource/images/Company/loading.gif" />' + intl('139612' /* 数据加载中... */ ) + '</div>')
        htmlArr.push('<div class="chart-none" id="no_data" style="display: none;">暂无数据</div>')
        htmlArr.push('<div id="companyChart" style="height:400px;"></div>')
        htmlArr.push('</div></div></div>');
        $container.empty().html(htmlArr.join(""));

        $(selfEle).find('#load_data').show();
        $(selfEle).find('.chart-header').off('click', 'button');

        var t = null;

        myWfcAjax("tracingstockex", parameter, function(data) {
            $('#load_data').hide();

            data = JSON.parse(data);
            if (data && data.ErrorCode == 0 && data.Data) {
                rootData = rootData = data.Data;
                try {
                    if ((rootData.investTree && rootData.investTree.children && rootData.investTree.children.length) || (rootData.shareHolderTree && rootData.shareHolderTree.children && rootData.shareHolderTree.children.length)) {
                        t = Common.newShareHolderAndInvestChartInitFun(data, Company.companyName, Company.companyCode);
                        $(selfEle).find('.chart-header').show();
                        $(selfEle).find('.chart-header').on('click', 'button', gqctNavEvent);
                    } else {
                        $(selfEle).find('.widget-header').siblings('div:not(.widget-chart-header)').height(212);
                        $(selfEle).find('.widget-header').siblings('div').find('#screenArea').height('210').css('cursor', 'default');
                        $(selfEle).find('.chart-header').hide();
                        $(selfEle).find('#load_data').hide();
                        $(selfEle).find('#no_data').show();
                    }
                } catch (e) {
                    $(selfEle).find('.widget-header').siblings('div:not(.widget-chart-header)').height(212);
                    $(selfEle).find('.widget-header').siblings('div').find('#screenArea').height('210').css('cursor', 'default');
                    $(selfEle).find('.chart-header').hide();
                    $(selfEle).find('#load_data').hide();
                    $(selfEle).find('#no_data').show();
                }
            } else {
                $(selfEle).find('.widget-header').siblings('div:not(.widget-chart-header)').height(212);
                $(selfEle).find('.widget-header').siblings('div').find('#screenArea').height('210').css('cursor', 'default');
                $(selfEle).find('.chart-header').hide();
                $(selfEle).find('#load_data').hide();
                $(selfEle).find('#no_data').show();
            }
        }, function() {
            $(selfEle).find('.widget-header').siblings('div:not(.widget-chart-header)').height(212);
            $(selfEle).find('.widget-header').siblings('div').find('#screenArea').height('210').css('cursor', 'default');
            $(selfEle).find('.chart-header').hide();
            $(selfEle).find('#load_data').hide();
            $(selfEle).find('#no_data').show();
        });

        /**
         * 股权穿透header事件委托
         * 
         * @param {any} e 
         * @returns 
         */
        function gqctNavEvent(e) {
            var target = e.target;
            if (!$(target).is('button')) {
                target = target.closest('li');
            }
            var idx = $(target).parent().children().index($(target));

            switch (idx) {
                case 3:
                    t.save();
                    break;
                case 2:
                    t.reload();
                    break;
                case 1:
                    Company.redirectToChart('#chart_gqct');
                    break;
                case 0:
                default:
                    Company.getShareAndInvest($('#getShareAndInvest'));
                    break;
            }
            return false;
        }

    },
    industryData: function($dom) {
        //行业数据
        var htmlArr = [];
        htmlArr.push('<div class="widget-model">')
        htmlArr.push('<div class="widget-header"><span class="fl">行业数据</span><a class="connect-wft  icon-industrydata" title="行业中心" id="jumpIndustryName">行业中心</a></div>');
        htmlArr.push('<div ><div class="widget-header02"><span class="fl">盈利现状</span></div><div class="manage-module"><div class="draw-container fl" id="drawIncome"><div class="chart-loading"><img src="../resource/images/Company/loading.gif" />' + intl('139612' /* 数据加载中... */ ) + '</div></div><div class="draw-container fr" id="drawNetIncome"><div class="chart-loading"><img src="../resource/images/Company/loading.gif" />' + intl('139612' /* 数据加载中... */ ) + '</div></div></div></div>');
        htmlArr.push('<div ><div class="widget-header02"><span class="fl">成本现状</span></div><div class="manage-module"><div class="draw-container fl" id="drawCost"><div class="chart-loading"><img src="../resource/images/Company/loading.gif" />' + intl('139612' /* 数据加载中... */ ) + '</div></div><div class="draw-container fr" id="drawSelling"><div class="chart-loading"><img src="../resource/images/Company/loading.gif" />' + intl('139612' /* 数据加载中... */ ) + '</div></div><div class="draw-container fl" id="drawFinance"><div class="chart-loading"><img src="../resource/images/Company/loading.gif" />' + intl('139612' /* 数据加载中... */ ) + '</div></div></div></div>');
        htmlArr.push('<div ><div class="widget-header02"><span class="fl">偿债现状</span></div><div class="manage-module"><div class="draw-container fl" id="drawTotalLiabilities"><div class="chart-loading"><img src="../resource/images/Company/loading.gif" />' + intl('139612' /* 数据加载中... */ ) + '</div></div><div class="draw-container fr" id="drawAccountsLiabilities"><div class="chart-loading"><img src="../resource/images/Company/loading.gif" />' + intl('139612' /* 数据加载中... */ ) + '</div></div><div class="draw-container fl" id="drawAssetLiabilityRatio"><div class="chart-loading"><img src="../resource/images/Company/loading.gif" />' + intl('139612' /* 数据加载中... */ ) + '</div></div></div></div>');
        htmlArr.push('</div>')
        var $container = $dom ? $dom : $('#workspace');
        $container.empty().html(htmlArr.join(""));
        var returnLink = Common.linkOut(1402, Company.baseCode, "IndustryID")
        $("#jumpIndustryName").attr("href", returnLink); //行业名称
        IndustryData = {
            showIndustryData: function(industryCode) {
                var parameter = { "windsectorid": industryCode, "year": 4, "companycode": Company.companyCode };
                myWfcAjax("getindustrydata", parameter, function(data) {
                    var data = JSON.parse(data);
                    if (data.ErrorCode == 0) {
                        IndustryData.showData(data);
                    } else {
                        IndustryData.errorFn(data)
                    }
                }, function(data) {
                    IndustryData.errorFn(data)
                });
            },
            showData: function(data) {
                /*
                data为ajax请求回来的数据
                 */
                if (data && data != null) {
                    var res = data.Data[0];
                    if (!res.Profit || res.Profit.length <= 0) {
                        IndustryData.errorFn(data)
                    } else {
                        IndustryData.drawChart(res)
                    }
                }
            },
            drawChart: function(data) {
                var profit = data["Profit"];
                var profit2 = data["ProfitAnalogy"];
                var GetCore_F_I = data["GetCore_Financial_Indicators"];
                var Assets_L = data["Assets_Liabilities"];
                var Assets_L2 = data["Assets_LiabilitiesAnalogy"];
                var xAxisArr = [];
                var incomeArr = []; //营业收入
                var incomeRateArr = []; //营业收入增长率
                var incomeNetArr = []; //行业净利润
                var incomeNetRateArr = []; //行业净利润增长率
                var costArr = []; //成本规模
                var costRateArr = []; //成本规模增长率
                var sellingArr = []; //销售费用
                var sellingRateArr = []; //销售费用增长率
                var financeArr = []; //财务费用
                var financeRateArr = []; //财务费用增长率
                var totalLiabilitiesArr = []; //行业总负债规模
                var totalLiabilitiesRateArr = []; //行业总负债规模增长率
                var accountsLiabilitiesArr = []; //行业流动负债规模
                var accountsLiabilitiesRateArr = []; //行业流动负债规模增长率
                var assetLiabilityRatio = []; //资产负债率
                var liquidityRatioArr = []; //流动比率
                var quickRatioArr = []; //速动比率
                for (var i = 0; i < profit.length; i++) {
                    xAxisArr.push(profit[i]["column_0"].substring(0, 4));
                    var eachIncome = (profit[i]["column_2"] && profit[i]["column_2"] != null) ? Number((profit[i]["column_2"] / 100000000).toFixed(2)) : 0;
                    var eachIncreaseRate = (profit2 && profit2[i]["column_2"] && profit[i]["column_2"] != null) ? Number((profit2[i]["column_2"]).toFixed(2)) : 0;
                    var eachIncomeNet = (profit[i]["column_14"] && profit[i]["column_14"] != null) ? Number((profit[i]["column_14"] / 100000000).toFixed(2)) : 0;
                    var eachIncreaseRate02 = (profit2 && profit2[i]["column_14"] && profit[i]["column_14"] != null) ? Number((profit2[i]["column_14"]).toFixed(2)) : 0;
                    var eachCost = (profit[i]["column_3"] && profit[i]["column_3"] != null) ? Number((profit[i]["column_3"] / 100000000).toFixed(2)) : 0;
                    var eachCostRate = (profit2 && profit2[i]["column_3"] && profit[i]["column_3"] != null) ? Number((profit2[i]["column_3"]).toFixed(2)) : 0;
                    var eachSelling = (profit[i]["column_4"] && profit[i]["column_4"] != null) ? Number((profit[i]["column_4"] / 100000000).toFixed(2)) : 0;
                    var eachSellingRate = (profit2 && profit2[i]["column_4"] && profit[i]["column_4"] != null) ? Number((profit2[i]["column_4"]).toFixed(2)) : 0;
                    var eachFinance = (profit[i]["column_6"] && profit[i]["column_6"] != null) ? Number((profit[i]["column_6"] / 100000000).toFixed(2)) : 0;
                    var eachFinanceRate = (profit2 && profit2[i]["column_6"] && profit[i]["column_6"] != null) ? Number((profit2[i]["column_6"]).toFixed(2)) : 0;
                    var eachTotal = (Assets_L[i]["column_24"] && Assets_L[i]["column_24"] != null) ? Number((Assets_L[i]["column_24"] / 100000000).toFixed(2)) : 0;
                    var eachTotalRate = (Assets_L2 && Assets_L2[i]["column_24"] && Assets_L[i]["column_24"] != null) ? Number((Assets_L2[i]["column_24"]).toFixed(2)) : 0;
                    var eachAccount = (Assets_L[i]["column_20"] && Assets_L[i]["column_20"] != null) ? Number((Assets_L[i]["column_20"] / 100000000).toFixed(2)) : 0;
                    var eachAccountRate = (Assets_L2 && Assets_L2[i]["column_20"] && Assets_L2[i]["column_20"] != null) ? Number((Assets_L2[i]["column_20"]).toFixed(2)) : 0;
                    var eachAsset = (GetCore_F_I && GetCore_F_I[i]["column_11"] && GetCore_F_I[i]["column_11"] != null) ? Number((GetCore_F_I[i]["column_11"]).toFixed(2)) : 0;
                    var eachLiquidity = (GetCore_F_I && GetCore_F_I[i]["column_12"] && GetCore_F_I[i]["column_12"] != null) ? Number((GetCore_F_I[i]["column_12"]).toFixed(2)) : 0;
                    var eachQuickRatio = (GetCore_F_I && GetCore_F_I[i]["column_13"] && GetCore_F_I[i]["column_13"] != null) ? Number((GetCore_F_I[i]["column_13"]).toFixed(2)) : 0;
                    incomeArr.push(eachIncome);
                    incomeRateArr.push(eachIncreaseRate);
                    incomeNetArr.push(eachIncomeNet);
                    incomeNetRateArr.push(eachIncreaseRate02);
                    costArr.push(eachCost);
                    costRateArr.push(eachCostRate);
                    sellingArr.push(eachSelling);
                    sellingRateArr.push(eachSellingRate);
                    financeArr.push(eachFinance);
                    financeRateArr.push(eachFinanceRate);
                    totalLiabilitiesArr.push(eachTotal);
                    totalLiabilitiesRateArr.push(eachTotalRate);
                    accountsLiabilitiesArr.push(eachAccount);
                    accountsLiabilitiesRateArr.push(eachAccountRate);
                    assetLiabilityRatio.push(eachAsset);
                    liquidityRatioArr.push(eachLiquidity);
                    quickRatioArr.push(eachQuickRatio);
                }
                xAxisArr.reverse();
                incomeArr.reverse();
                incomeRateArr.reverse();
                incomeNetArr.reverse();
                incomeNetRateArr.reverse();
                costArr.reverse();
                sellingArr.reverse();
                sellingRateArr.reverse();
                financeArr.reverse();
                financeRateArr.reverse();
                totalLiabilitiesArr.reverse();
                totalLiabilitiesRateArr.reverse();
                accountsLiabilitiesArr.reverse();
                accountsLiabilitiesRateArr.reverse();
                assetLiabilityRatio.reverse();
                liquidityRatioArr.reverse();
                quickRatioArr.reverse();

                IndustryData.drawFn("#drawIncome", xAxisArr, incomeArr, incomeRateArr, "营业收入", "销售收入", "销售收入增长率");
                IndustryData.drawFn("#drawNetIncome", xAxisArr, incomeNetArr, incomeNetRateArr, "净利润", "净利润", "净利润增长率");
                IndustryData.drawFn("#drawCost", xAxisArr, costArr, costRateArr, "营业成本", "销售成本", "销售成本增长率");
                IndustryData.drawFn("#drawSelling", xAxisArr, sellingArr, sellingRateArr, "销售费用", "销售费用", "销售费用增长率");
                IndustryData.drawFn("#drawFinance", xAxisArr, financeArr, financeRateArr, "财务费用", "财务费用", "财务费用增长率");
                IndustryData.drawFn("#drawTotalLiabilities", xAxisArr, totalLiabilitiesArr, totalLiabilitiesRateArr, "总负债", "总负债", "总负债增长率");
                IndustryData.drawFn("#drawAccountsLiabilities", xAxisArr, accountsLiabilitiesArr, accountsLiabilitiesRateArr, "流动负债", "流动负债", "流动负债增长率");
                IndustryData.drawLine("drawAssetLiabilityRatio", xAxisArr, assetLiabilityRatio, liquidityRatioArr, quickRatioArr);
            },
            drawFn: function(dom, xAxisArr, dataArr, dataArr02, tit, subtit01, subtit02) {
                var str01 = dataArr.join("");
                var str02 = dataArr02.join("");
                if (/^0{5}$/.test(str01) && /^0{5}$/.test(str02)) {
                    $(dom).html("<div class='chart-nodata'>" + intl('132725' /* 暂无数据 */ ) + "</div>");
                    return;
                }
                Highcharts.setOptions({
                    lang: {
                        downloadJPEG: intl('222618') /* 下载JPEG图片 */ ,
                        downloadPNG: intl('222621') /* 下载PNG图片 */ ,
                    }
                })
                $(dom).highcharts({
                    credits: {
                        enabled: false // 禁用版权信息
                    },
                    chart: {
                        zoomType: 'xy'
                    },
                    title: {
                        text: tit
                    },
                    xAxis: [{
                        categories: xAxisArr,
                        crosshair: true
                    }],
                    yAxis: [{ // Primary yAxis
                        title: {
                            text: '',
                            style: {
                                color: Highcharts.getOptions().colors[1]
                            }
                        },
                        labels: {
                            format: '{value} %',
                            style: {
                                color: Highcharts.getOptions().colors[1]
                            }
                        }
                    }, { // Secondary yAxis
                        title: {
                            text: '',
                            style: {
                                color: Highcharts.getOptions().colors[0]
                            }
                        },
                        labels: {

                            format: '{value}亿元',
                            style: {
                                color: Highcharts.getOptions().colors[0]
                            }
                        },
                        opposite: true
                    }],
                    tooltip: {
                        shared: true
                    },
                    legend: {
                        layout: 'horizontal',
                        align: 'center',
                        verticalAlign: 'bottom',
                        borderWidth: 0
                    },
                    series: [{
                        name: subtit01,
                        type: 'column',
                        yAxis: 1,
                        data: dataArr
                    }, {
                        name: subtit02,
                        type: 'spline',
                        data: dataArr02,
                        color: '#f6a623'
                    }]
                });
            },
            drawLine: function(dom, xAxisArr, dataArr, dataArr02, dataArr03) {
                var str01 = dataArr.join("");
                var str02 = dataArr02.join("");
                var str03 = dataArr03.join("");
                if (/^0+$/.test(str01) && /^0+$/.test(str02) && /^0+$/.test(str03)) {
                    $("#" + dom).html("<div class='chart-nodata'>" + intl('132725' /* 暂无数据 */ ) + "</div>");
                    return;
                }
                Highcharts.setOptions({
                    lang: {
                        downloadJPEG: intl('222618') /* 下载JPEG图片 */ ,
                        downloadPNG: intl('222621') /* 下载PNG图片 */ ,
                    }
                })
                $("#" + dom).highcharts({
                    credits: {
                        enabled: false // 禁用版权信息
                    },
                    chart: {
                        type: 'spline'
                    },
                    title: {
                        text: '',
                        x: -20
                    },
                    xAxis: {
                        categories: xAxisArr
                    },
                    yAxis: {
                        title: {
                            text: ''
                        },
                        plotLines: [{
                            value: 0,
                            width: 1,
                            color: '#808080'
                        }]
                    },
                    tooltip: {
                        valueSuffix: ''
                    },
                    legend: {
                        layout: 'horizontal',
                        align: 'center',
                        verticalAlign: 'bottom',
                        borderWidth: 0
                    },
                    series: [{
                        name: '资产负债率',
                        data: dataArr
                    }, {
                        name: '流动比率',
                        data: dataArr02
                    }, {
                        name: '速动比率',
                        data: dataArr03
                    }]
                });
            },
            errorFn: function(data) {
                $(".chart-loading").html(intl('132725' /* 暂无数据 */ ));
            }
        }
        IndustryData.showIndustryData(Company.WTSectorId);
    },
    brandSelVal: "",
    getbrand: function($dom, oIndex, oVal, oCount) {
        //商标信息
        var tableSetting = {
            interface: "getintellectual",
            moduleName: intl('138799' /* 商标 */ ),
            moreLink: "getbrand",
            modelNum: "trademark_num",
            selName: ["brandSelVal"],
            aggName: ["aggs_trademark_status"],
            thWidthRadio: ["5%", "10%", "15%", "20%", "15%", "15%", "10%", "10%"],
            thName: [intl('138741' /* 序号 */ ), intl('138799' /* 商标 */ ), intl('138560' /* 商标名 */ ), intl('138476' /* 注册号 */ ), intl('138348' /* 国际分类 */ ), intl('32098' /* 状态 */ ), intl('138156' /* 申请时间 */ ), intl('40513' /* 详情 */ )],
            align: [0, 0, 0, 0, 0, 0, 0],
            fields: ["NO.", "trademark_image", "trademark_name", "application_number", "international_classification", "trademark_status", "application_date", "detail_id"],
            notVipPageTurning: true,
            notVipPageTitle: intl('138799' /* 商标 */ ),
            notVipPagedesc: intl('224213'),
        }
        var $container = $dom ? $dom : $('#workspace');
        $container.empty().html(Company.drawTab(tableSetting, "tabBand", "tbodyBand", false, $dom));
        if (!Company.brandinfostatistics) {
            Company.drawBrandDetail("#drawBrandCon")
        }

        var columnDefsSet = [{
                "targets": 1,
                "data": 'trademark_image',
                "render": function(data) {
                    var str_img_list = "../resource/images/Reports/no_photo_list.png";
                    if (data) {
                        var brand_img_list = '<img src="http://news.windin.com/ns/imagebase/6710/' + data + '" class="brand_images_list big-logo"' + ' onerror="this.src=\'' + str_img_list + '\'"/>';
                        return brand_img_list;
                    } else {
                        var no_img_list = '<img src="' + str_img_list + '" class="brand_images_list"/>';
                        return no_img_list;
                    }
                }
            },
            {
                "targets": 2,
                "data": 'trademark_name',
                "render": function(data) {
                    return Common.formatCont(data)
                }
            },
            {
                "targets": 3,
                "data": 'application_number',
                "render": function(data) {
                    return Common.formatCont(data)
                }
            },
            {
                "targets": 4,
                "data": 'international_classification',
                "render": function(data) {
                    return Common.formatCont(data)
                }
            },
            {
                "targets": 5,
                "data": 'trademark_status',
                "render": function(data) {
                    return Common.formatCont(data)
                }
            },
            {
                "targets": 6,
                "data": 'apply_date',
                "render": function(data, type, full, meta) {
                    return Common.formatTime(data)
                }
            },
            {
                "targets": 7,
                "data": 'detail_id',
                "render": function(data, type, full, meta) {
                    var buryData = 'data-buryId="' + data + '" data-buryEntity="getbrand"'; //bury
                    return Common.showDetailLink(data, ["getbranddetail", "detailId", 8], buryData)
                }
            }
        ];
        var params = { "companycode": Company.companyCode, "type": "trademark_corp", "status": Company.brandSelVal, "pageSize": 10 };
        Company.pageSetting("#tabBand", tableSetting, columnDefsSet, params, $dom);
    },
    addDropLink: function(value, paramArr) {
        //下拉
        return '<a target="_blank" class="show-list-rank wi-secondary-color wi-link-color" data-interface="' + paramArr[0] + '" data-key="' + paramArr[1] + '" data-tdlen="' + paramArr[2] + '" data-value="' + paramArr[3] + '">' + value + '</a>'
    },
    go2PatentDetail: function(data, detailId) {
        if (detailId) {
            return '<a target="_blank" class="wi-secondary-color wi-link-color buryClickCenter" href="SearchOtherDetail.html?type=patent&detailid=' + detailId + '" >' + data + '</a>'
        } else {
            return data;
        }
    },
    addDropDetail: function(value, paramArr) {
        return '<a target="_blank" class="link-showdetail" href="detail.html?interface=' + paramArr[0] + '&key=' + paramArr[1] + '&value=' + encodeURIComponent(value) + '&companycode=' + paramArr[2] + '" >' + value + '</a>'
    },
    getpatent: function($dom) {
        //专利
        var tableSetting = {
            interface: "getintellectual",
            moduleName: intl('138749' /* 专利 */ ),
            moreLink: "getpatent",
            modelNum: "patent_num",

            thWidthRadio: ["7%", "36%", "15%", "20%", "10%", "12%"],
            thName: [intl('138741' /* 序号 */ ), intl('138748' /* 专利名称  */ ), intl('138430' /* 专利类型 */ ), intl('149731' /* 公开公告号 */ ), intl('138372' /* 法律状态 */ ), intl('149732' /* 公开公告日 */ )],
            align: [0, 0, 0, 0, 0, 0, 0, 0],
            fields: ["NO.", "patent_name", "patent_type|formatCont", "release_number", "law_status|formatCont", "release_date|formatTime"],
            notVipPageTurning: true,
            notVipPageTitle: intl('138749' /* 专利 */ ),
            notVipPagedesc: intl('224212'),
        }
        var $container = $dom ? $dom : $('#workspace');
        $container.empty().html(Company.drawTab(tableSetting, "tabPatent", "tbodyPatent", false, $dom));
        if (!Company.patentinfostatistics) {
            Company.drawPatentDetail("#drawPatentCon")
        }

        var columnDefsSet = [{
                "targets": 1,
                "data": 'patent_name',
                "render": function(data, type, full, meta) {
                    if (data) {

                        return Company.go2PatentDetail(data, full["detail_id"])
                    } else {
                        return "--"
                    }
                }
            },
            {
                "targets": 2,
                "data": 'patent_type',
                "render": function(data) {
                    return Common.formatCont(data)
                }
            },
            {
                "targets": 3,
                "data": 'release_number',
                "render": function(data) {
                    return Common.formatCont(data)
                }
            },
            {
                "targets": 4,
                "data": 'law_status',
                "render": function(data) {
                    return data
                }
            },
            {
                "targets": 5,
                "data": 'release_date',
                "render": function(data, type, full, meta) {
                    return Common.formatTime(data)
                }
            }
        ]
        var params = { "companycode": Company.companyCode, "type": "patent_corp", "status": "", "pageSize": 10 };
        Company.pageSetting("#tabPatent", tableSetting, columnDefsSet, params, $dom);
    },
    getweixin: function($dom) {
        //微信
        var tableSetting = {
            interface: "getwebchat",
            moduleName: intl('138581' /* 微信公众号 */ ),
            moreLink: "getweixin",
            modelNum: "webchat_public_num",
            thWidthRadio: ["5%", "10%", "15%", "15%", "15%", "40%"],
            thName: [intl('138741' /* 序号 */ ), intl('138171' /* 头像 */ ), intl('138581' /* 微信公众号 */ ), intl('138582' /* 微信号 */ ), '二维码', intl('138847' /* 简介 */ )],
            align: [0, 0, 0, 0, 0],
            fields: ["NO.", "image_id", "name", "account", "qr_code", "profile"],
        }
        var $container = $dom ? $dom : $('#workspace');
        $container.empty().html(Company.drawTab(tableSetting, "tabWebchat", "tbodyWebchat", false, $dom));
        var columnDefsSet = [{
            "targets": 1,
            "data": 'image_id',
            "render": function(data) {
                if (data) {
                    return "<img class='header-img  big-logo' width=40 height=40  src='" + data + "' />"
                } else {
                    return "<img class='header-img' width=40 height=40  src='../resource/images/Company/default-header.png' />"
                }

            }
        }, {
            "targets": 2,
            "data": 'name',
            "render": function(data, type, full, meta) {
                if (data) {
                    return data;
                } else {
                    return "--"
                }

            }
        }, {
            "targets": 4,
            "data": 'qr_code',
            "render": function(data, type, full, meta) {
                if (data) {

                    return "<span class='weixin-code'><div class='detail-weixin'><img width='160' class='qr-code' src='" + full['qr_code'] + "'  /></div><img  class='qr-code' src='../resource/images/Company/weixin.png' data-val='" + data + "' /></span>"
                } else {
                    return "--"
                }
            }
        }, {
            "targets": 5,
            "data": 'profile',
            "render": function(data) {
                return Common.formatCont(data)
            }
        }]
        if ($dom) {
            var eachModuleData = Company.companyIntellectualData && Company.companyIntellectualData.webchat ? Company.companyIntellectualData.webchat : null;
            Company.pageSetting_new("#tabWebchat", tableSetting, eachModuleData, columnDefsSet, null, $dom);
        } else {
            Company.pageSetting("#tabWebchat", tableSetting, columnDefsSet, null, $dom);
        }
    },
    getweibo: function($dom) {
        //微博
        var tableSetting = {
            interface: "getmicroblogbywindcode",
            moduleName: intl('138579' /* 微博账号 */ ),
            moreLink: "getmicroblog",
            modelNum: "micro_blog_num",
            thWidthRadio: ["5%", "10%", "20%", "20%", "45%"],
            thName: [intl('138741' /* 序号 */ ), intl('138171' /* 头像 */ ), intl('138398' /* 昵称 */ ), intl('31801' /* 行业 */ ), intl('138847' /* 简介 */ )],
            align: [0, 0, 0, 0, 0],
            fields: ["NO.", "image_id", "name", "industry", "sign"],
        }
        var $container = $dom ? $dom : $('#workspace');
        $container.empty().html(Company.drawTab(tableSetting, "tabWeibo", "tbodyWeibo", false, $dom));
        var columnDefsSet = [{
            "targets": 1,
            "data": 'image_id',
            "render": function(data) {
                if (data) {
                    return "<img class='header-img  big-logo' width=40 height=40 src='" + data + "' />"
                } else {
                    return "<img class='header-img' width=40 height=40  src='../resource/images/Company/default-header.png' />"
                }
            }
        }, {
            "targets": 2,
            "data": 'name',
            "render": function(data, type, full, meta) {
                if (data) {
                    if (full['account_url']) {
                        return "<a target='_blank' href='" + full['account_url'] + "' class='underline wi-secondary-color wi-link-color'>" + data + "</a>"
                    } else {
                        return data;
                    }
                } else {
                    return "--"
                }
            }
        }, {
            "targets": 3,
            "data": 'industry',
            "render": function(data) {
                return Common.formatCont(data)
            }
        }, {
            "targets": 4,
            "data": 'sign',
            "render": function(data) {
                return Common.formatCont(data)
            }
        }]
        if ($dom) {
            var eachModuleData = Company.companyIntellectualData && Company.companyIntellectualData.microblog ? Company.companyIntellectualData.microblog : null;
            Company.pageSetting_new("#tabWeibo", tableSetting, eachModuleData, columnDefsSet, null, $dom);
        } else {
            Company.pageSetting("#tabWeibo", tableSetting, columnDefsSet, null, $dom);
        }
    },
    gettoutiao: function($dom) {
        //头条
        var tableSetting = {
            interface: "getheadline",
            moduleName: intl('69042' /* 今日头条 */ ),
            moreLink: "getheadline",
            modelNum: "today_headline_num",
            thWidthRadio: ["5%", "10%", "20%", "20%", "45%"],
            thName: [intl('138741' /* 序号 */ ), intl('138171' /* 头像 */ ), intl('29979' /* 名称 */ ), intl('138559' /* 头条号 */ ), intl('138847' /* 简介 */ )],
            align: [0, 0, 0, 0, 0],
            fields: ["NO.", "image_id", "name", "account", "profile"],
        }
        var $container = $dom ? $dom : $('#workspace');
        $container.empty().html(Company.drawTab(tableSetting, "tabToutiao", "tbodyToutiao", false, $dom));
        var columnDefsSet = [{
            "targets": 1,
            "data": 'image_id',
            "render": function(data) {
                if (data) {
                    return "<img class='header-img  big-logo' src='" + data + "' />"
                } else {
                    return "<img class='header-img' src='../resource/images/Company/default-header.png' />"
                }

            }
        }, {
            "targets": 2,
            "data": 'name',
            "render": function(data, type, full, meta) {
                if (data) {
                    if (full['account_url']) {
                        return "<a target='_blank' href='" + full['account_url'] + "' class='underline wi-secondary-color wi-link-color'>" + data + "</a>"
                    } else {
                        return data;
                    }
                } else {
                    return "--"
                }
            }
        }, {
            "targets": 3,
            "data": 'account',
            "render": function(data) {
                return Common.formatCont(data)
            }
        }, {
            "targets": 4,
            "data": 'profile',
            "render": function(data) {
                return Common.formatCont(data)
            }
        }]
        if ($dom) {
            var eachModuleData = Company.companyIntellectualData && Company.companyIntellectualData.headline ? Company.companyIntellectualData.headline : null;
            Company.pageSetting_new("#tabToutiao", tableSetting, eachModuleData, columnDefsSet, null, $dom);
        } else {
            Company.pageSetting("#tabToutiao", tableSetting, columnDefsSet, null, $dom);
        }
    },
    productioncopyrightSelVal: "",
    getproductioncopyright: function($dom, oIndex, oVal, oCount) {
        //作品著作权
        var tableSetting = {
            interface: "getintellectual",
            moduleName: intl('138756' /* 作品著作权 */ ),
            moreLink: "getproductioncopyright",
            modelNum: "workcopyr_num",
            selName: ["productioncopyrightSelVal"],
            aggName: ["aggs_work_category"],
            thWidthRadio: ["5%", "20%", "10%", "20%", "15%", "15%", "10%"],
            thName: [intl('138741' /* 序号 */ ), intl('138553' /* 作品名称 */ ), intl('138195' /* 作品类别 */ ), intl('138482' /* 登记号 */ ), intl('138220' /* 创作完成日期 */ ), intl('138243' /* 首次发表日期 */ ), intl('138690' /* 登记日期 */ )],
            align: [0, 0, 0, 0, 0, 0, 0, 0, 0],
            fields: ["NO.", "work_title", "work_category", "registration_number", "completion_date|formatTime", "initial_publication_date|formatTime", "registration_date|formatTime"],
        }
        var $container = $dom ? $dom : $('#workspace');
        $container.empty().html(Company.drawTab(tableSetting, "tabProductioncopyright", "tbodyProductioncopyright", false, $dom));
        var columnDefsSet = [{
                "targets": 1,
                "data": 'work_title',
                "render": function(data) {
                    return Common.formatCont(data)
                }
            },
            {
                "targets": 2,
                "data": 'work_category',
                "render": function(data) {
                    return Common.formatCont(data)
                }
            },
            {
                "targets": 3,
                "data": 'registration_number',
                "render": function(data) {
                    return Common.formatCont(data)
                }
            },
            {
                "targets": 4,
                "data": 'completion_date',
                "render": function(data, type, full, meta) {
                    return Common.formatTime(data)
                }
            },
            {
                "targets": 5,
                "data": 'initial_publication_date',
                "render": function(data, type, full, meta) {
                    return Common.formatTime(data)
                }
            },
            {
                "targets": 6,
                "data": 'registration_date',
                "render": function(data, type, full, meta) {
                    return Common.formatTime(data)
                }
            }
        ]
        var params = { "companycode": Company.companyCode, "type": "production_corp", "category": Company.productioncopyrightSelVal, "pageSize": 10 };
        Company.pageSetting("#tabProductioncopyright", tableSetting, columnDefsSet, params, $dom);
    },
    getsoftwarecopyright: function($dom) {
        //软件著作权
        var tableSetting = {
            interface: "getsoftwarecopyright",
            moduleName: intl('138788' /* 软件著作权 */ ),
            moreLink: "getsoftwarecopyright",
            modelNum: "softwarecopyright_num",
            thWidthRadio: ["5%", "25%", "15%", "8%", "13%", "10%", "12%", "12%"],
            thName: [intl('138741' /* 序号 */ ), intl('29979' /* 名称 */ ), intl('138936' /* 简称 */ ), intl('138573' /* 版本号 */ ), intl('138482' /* 登记号 */ ), intl('138209' /* 分类号 */ ), intl('138243' /* 首次发表日期 */ ), intl('138158' /* 登记批准日期 */ )],
            align: [0, 0, 0, 0, 0, 0, 0],
            fields: ["NO.", "software_name|formatCont", "software_abbreviation|formatCont", "version_number|formatCont", "register_number|formatCont", "classified_number|formatCont", "first_publish_date|formatTime", "register_date|formatTime"],
        }
        var $container = $dom ? $dom : $('#workspace');
        $container.empty().html(Company.drawTab(tableSetting, "tabSoftwarecopyright", "tbodySoftwarecopyright", false, $dom));
        var columnDefsSet = [{
                "targets": 1,
                "data": 'software_name',
                "render": function(data) {
                    return Common.formatCont(data)
                }
            },
            {
                "targets": 2,
                "data": 'software_abbreviation',
                "render": function(data) {
                    return Common.formatCont(data)
                }
            },
            {
                "targets": 3,
                "data": 'version_number',
                "render": function(data) {
                    return Common.formatCont(data)
                }
            },
            {
                "targets": 4,
                "data": 'register_number',
                "render": function(data) {
                    return Common.formatCont(data)
                }
            },
            {
                "targets": 5,
                "data": 'classified_number',
                "render": function(data) {
                    return Common.formatCont(data)
                }
            },
            {
                "targets": 6,
                "data": 'first_publish_date',
                "render": function(data, type, full, meta) {
                    return Common.formatTime(data)
                }
            },
            {
                "targets": 7,
                "data": 'register_date',
                "render": function(data, type, full, meta) {
                    return Common.formatTime(data)
                }
            }
        ]
        Company.pageSetting("#tabSoftwarecopyright", tableSetting, columnDefsSet, null, $dom);
    },
    getshbdgpermission: function($dom) {
        // 法人资质信息
        var tableSetting = {
            interface: "getshbdgpermission",
            moreLink: "getshbdgpermission",
            moduleName: '资质信息',
            modelNum: "shbdgpermission_num",
            modelNumFromSHBDG: true,
            thWidthRadio: ["6%", "15%", "20%", "12%", "12%", "15%", "20%", "20%"],
            thName: [intl('138741' /* 序号 */ ), '资质类型', '许可证号', '发证日期', '有效期自', '有效期至', '发证机关', '许可证状态'],
            align: [0, 0, 0, 0, 0, 0],
            fields: ["NO.", "license_type", "license_code", "license_data", "start_date", "end_date", "issue_organ", "license_status", ],
        }
        var $container = $dom ? $dom : $('#workspace');
        $container.empty().html(Company.drawTab(tableSetting, "tabShbdgPermission", "tbodyShbdgPermission", false, $dom));
        var columnDefsSet = [{
                "targets": 1,
                "data": 'license_type',
                "render": function(data) {
                    return Common.formatCont(data)
                }
            },
            {
                "targets": 2,
                "data": 'license_code',
                "render": function(data) {
                    return Common.formatCont(data)
                }
            },
            {
                "targets": 3,
                "data": 'license_data',
                "render": function(data, type, full, meta) {
                    return Common.formatTime(data)
                }
            },
            {
                "targets": 4,
                "data": 'start_date',
                "render": function(data, type, full, meta) {
                    return Common.formatTime(data)
                }
            },
            {
                "targets": 5,
                "data": 'end_date',
                "render": function(data, type, full, meta) {
                    return Common.formatTime(data)
                }
            },
            {
                "targets": 6,
                "data": 'issue_organ',
                "render": function(data, type, full, meta) {
                    return Common.formatCont(data)
                }
            },
            {
                "targets": 7,
                "data": 'license_status',
                "render": function(data, type, full, meta) {
                    return Common.formatCont(data)
                }
            }
        ]
        Company.shbdgPageSetting("#tabShbdgPermission", tableSetting, columnDefsSet, null, $dom);
    },
    getpermission: function($dom) {
        //行政许可[工商局]
        var tableSetting = {
            interface: "getpermission",
            moreLink: "getpermission",
            moduleName: intl('222480', '行政许可[工商局]'),
            modelNum: "permission_num",
            thWidthRadio: ["6%", "28%", "15%", "12%", "12%", "15%", "32%"],
            thName: [intl('138741' /* 序号 */ ), intl('138376' /* 许可文件编号 */ ), intl('138375' /* 许可文件名称 */ ), intl('138571' /* 有效期自 */ ), intl('138802' /* 有效期至 */ ), intl('138377' /* 许可机关 */ ), intl('138378' /* 许可内容 */ )],
            align: [0, 0, 0, 0, 0, 0],
            fields: ["NO.", "permission_file_number|formatCont", "permission_file_name|formatCont", "effective_start_date|formatTime", "effective_expiration_date|formatTime", "license_department", "license_content"],
        }
        var $container = $dom ? $dom : $('#workspace');
        $container.empty().html(Company.drawTab(tableSetting, "tabPermission", "tbodyPermission", false, $dom));
        var columnDefsSet = [{
                "targets": 1,
                "data": 'permission_file_number',
                "render": function(data) {
                    return Common.formatCont(data)
                }
            },
            {
                "targets": 2,
                "data": 'permission_file_name',
                "render": function(data) {
                    return Common.formatCont(data)
                }
            },
            {
                "targets": 3,
                "data": 'effective_start_date',
                "render": function(data, type, full, meta) {
                    return Common.formatTime(data)
                }
            },
            {
                "targets": 4,
                "data": 'effective_expiration_date',
                "render": function(data, type, full, meta) {
                    return Common.formatTime(data)
                }
            },
            {
                "targets": 5,
                "data": 'license_department',
                "render": function(data, type, full, meta) {
                    return Common.formatCont(data)
                }
            },
            {
                "targets": 6,
                "data": 'license_content',
                "render": function(data, type, full, meta) {
                    var result = '<span class="text-2-show view-cont-control" title="点击展开">' + Common.formatCont(data) + '</span>';
                    return result;
                }
            }
        ]
        if ($dom) {
            var eachModuleData = Company.companyBussinessInfoData && Company.companyBussinessInfoData.Permission ? Company.companyBussinessInfoData.Permission : null;
            Company.pageSetting_new("#tabPermission", tableSetting, eachModuleData, columnDefsSet, null, $dom);
        } else {
            Company.pageSetting("#tabPermission", tableSetting, columnDefsSet, null, $dom);
        }
    },
    getpermission02: function($dom) {
        //行政许可[信用中国]
        var tableSetting = {
            interface: "getadminilicence",
            moreLink: "getpermission02",
            moduleName: '行政许可[信用中国]',
            modelNum: "admin_licence_num",
            thWidthRadio: ["5%", "30%", "15%", "25%", "25%"],
            thName: [intl('138741' /* 序号 */ ), intl('222773', '行政许可决定文书号'), intl('222771', '许可决定日期'), intl('222768', '有效期起止日期'), intl('138377' /* 许可机关 */ )],
            align: [0, 0, 0, 0, 0, 0],
            fields: ["NO.", "docId", "licenceDate", "startDate", "orgName"],
        }
        var $container = $dom ? $dom : $('#workspace');
        $container.empty().html(Company.drawTab(tableSetting, "tabPermission02", "tbodyPermission02", false, $dom));
        var columnDefsSet = [{
                "targets": 1,
                "data": 'docName',
                "render": function(data, type, full, meta) {
                    if (full.detailId) {
                        return '<a target="_blank" class="drop-up underline wi-secondary-color wi-link-color" data-interface="' + 'getadminilicencedetail' + '" data-key="' + 'detailId' + '" data-tdlen="' + '5' + '" data-value="' + full.detailId + '">' + (data ? data : '--') + '</a>'
                    } else {
                        return Common.formatCont(data)
                    }
                }
            },
            {
                "targets": 2,
                "data": 'licenceDate',
                "render": function(data) {
                    return Common.formatTime(data)
                }
            },
            {
                "targets": 3,
                "data": 'startDate',
                "render": function(data, type, full, meta) {
                    if (data || full['endDate']) {
                        var starDate = Common.formatTime(data);
                        var endDate = Common.formatTime(full['endDate']);
                        return starDate + "至" + endDate;
                    } else {
                        return "--";
                    }
                }
            },
            {
                "targets": 4,
                "data": 'orgName',
                "render": function(data, type, full, meta) {
                    var code = full['orgId'];
                    return Common.addLinkForCompanyOrPerson(data, code)
                }
            }
        ]
        Company.pageSetting("#tabPermission02", tableSetting, columnDefsSet, null, $dom);
        $('#tabPermission02').on('click', '.drop-up', function() {
            var Band = false;
            if ($(this).parent().parent().parent().attr('id') == 'tbodyBand') {
                Band = true;
            }
            Company.showContentDetail(this, $(this).attr("data-tdlen"), Band)
            return false;
        });
        $('#tabPermission02').on('click', '.underline', Company.linkWithCodeEventHandler);
    },
    authenticationSelVal: "", //状态筛选
    authenticationTypeSelVal: "", //类型筛选
    getauthentication: function($dom) {
        //资质认证-认证
        var tableSetting = {
            interface: "getcertificationlist",
            moduleName: intl('138671' /* 资质认证 */ ),
            moreLink: "getauthentication",
            modelNum: "certification_merge_num",
            selName: ["authenticationTypeSelVal", "authenticationSelVal"],
            aggName: ["aggs_type", "aggs_status"],
            thWidthRadio: ["5%", "30%", "25%", "20%", "10%", "10%"],
            thName: [intl('138741' /* 序号 */ ), intl('138670' /* 证书类型 */ ), intl('138197' /* 证书编号 */ ), intl('138245' /* 发证日期 */ ), intl('138895' /* 到期日期 */ ), intl('138199' /* 证书状态 */ )],
            align: [0, 0, 0, 0, 0, 0],
            fields: ["NO.", "certif_type|formatCont", "certif_no|showDetailLink:getauthenticationdetail,CertificateNo,7", "certif_date|formatTime", "expire_date|formatTime", "certif_status|formatCont"],
        }
        var $container = $dom ? $dom : $('#workspace');
        $container.empty().html(Company.drawTab(tableSetting, "tabAuthentication", "tbodyAuthentication", false, $dom));
        var columnDefsSet = [{
                "targets": 1,
                "data": 'certif_type',
                "render": function(data) {
                    return Common.formatCont(data)
                }
            },
            {
                "targets": 2,
                "data": 'certif_no',
                "render": function(data, type, full, meta) {
                    var parValue = data + '|' + (full && full['search_tag'] ? full['search_tag'] : '');
                    if (full && full['search_tag'] && full['search_tag'] == 'ent_type') {
                        parValue = full && full['detail_id'] ? full['detail_id'] + '|ent_type' : '|';
                    }
                    return Company.addDropLink(data, ["getcertificationdetail", "detailId|detailType", 6, parValue])
                }
            },
            {
                "targets": 3,
                "data": 'certif_date',
                "render": function(data, type, full, meta) {
                    return Common.formatTime(data)
                }
            },
            {
                "targets": 4,
                "data": 'expire_date',
                "render": function(data, type, full, meta) {
                    return Common.formatTime(data)
                }
            },
            {
                "targets": 5,
                "data": 'certif_status',
                "render": function(data) {
                    return Common.formatCont(data)
                }
            }
        ]
        var params = { "companycode": Company.companyCode, "status": Company.authenticationSelVal, "category": Company.authenticationTypeSelVal, "pageSize": 10 };
        Company.pageSetting("#tabAuthentication", tableSetting, columnDefsSet, params, $dom);
    },
    getdomainname: function($dom) {
        //域名
        var tableSetting = {
            interface: "getdomain",
            moduleName: intl('138804' /* 网站备案 */ ),
            moreLink: "getdomainname",
            modelNum: "domain_num",
            thWidthRadio: ["5%", "20%", "25%", "15%", "20%", "15%"],
            thName: [intl('138741' /* 序号 */ ), intl('138578' /* 网站名称 */ ), intl('138805' /* 网址 */ ), intl('138266' /* 域名 */ ), intl('138328' /* 网站备案/许可证号 */ ), intl('138159' /* 审核通过时间 */ )],
            align: [0, 0, 0, 0, 0, 0],
            fields: ["NO.", "web_name|formatCont", "web_home_page", "domain_name|formatCont", "web_number|formatCont", "audit_transit_time|formatTime"],
        }
        var $container = $dom ? $dom : $('#workspace');
        $container.empty().html(Company.drawTab(tableSetting, "tabDomainname", "tbodyDomainname", false, $dom));
        var columnDefsSet = [{
                "targets": 1,
                "data": 'web_name',
                "render": function(data, type, full, meta) {
                    return Common.formatCont(data)
                }
            },
            {
                "targets": 2,
                "data": 'web_home_page',
                "render": function(data, type, full, meta) {
                    return Common.formatWebsite(data ? data : 'www.' + full['domain_name'])
                }
            },
            {
                "targets": 3,
                "data": 'domain_name',
                "render": function(data) {
                    return Common.formatCont(data)
                }
            },
            {
                "targets": 4,
                "data": 'web_number',
                "render": function(data) {
                    return Common.formatCont(data)
                }
            },
            {
                "targets": 5,
                "data": 'audit_transit_time',
                "render": function(data, type, full, meta) {
                    return Common.formatTime(data)
                }
            }
        ]
        if ($dom) {
            var eachModuleData = Company.companyIntellectualData && Company.companyIntellectualData.domain ? Company.companyIntellectualData.domain : null;
            Company.pageSetting_new("#tabDomainname", tableSetting, eachModuleData, columnDefsSet, null, $dom);
        } else {
            Company.pageSetting("#tabDomainname", tableSetting, columnDefsSet, null, $dom);
        }
    },
    showContentDetail: function(dom, tdlen, change) {
        //显示详细页
        var $main = $(dom).closest(".table-company").find(".show-main");
        var bandClass = '';
        if ($main.length >= 1 && $(dom).parents("tr").next("tr").find(".show-main").length >= 1) {
            $main.parents("tr").remove();
        } else {
            $main.parents("tr").remove();
            if (change) {
                bandClass = 'no-sideborder';
            } else {
                bandClass = 'base-no-sideborder';
            }
            $(dom).parents("tr").after("<tr><td colspan='" + tdlen + "' class='" + bandClass + "'><div id='main' class='show-main clear-border " + bandClass + "'><div class='loading-data'><img src='../resource/images/Company/loading.gif' />" + intl('139612' /* 数据加载中... */ ) + "</div></div></td></tr>");
            var key = $(dom).attr("data-key");
            var value = $(dom).attr("data-value");
            var interfaceStr = $(dom).attr("data-interface");
            var parameter = new Object();
            parameter["companycode"] = Company.companyCode;
            if (interfaceStr == 'getrankedcompany') { //还需要parameter[key] = value;
                parameter["companyid"] = Company.companyId;
                parameter["option"] = "detail";
            }
            if (interfaceStr == 'getspotcheckdetail' || interfaceStr == 'getcertificationdetail') { //需要在请求详情的时候带上多个参数，使用|分隔
                var multiKey = key.split('|');
                var multiVal = value.split('|');
                for (var i = 0; i < multiKey.length; i++) {
                    parameter[multiKey[i]] = multiVal[i];
                    parameter[multiKey[i]] = multiVal[i];
                }
            } else {
                parameter[key] = value;
            }
            $main = $(dom).closest(".table-company").find(".show-main");
            myWfcAjax(interfaceStr, parameter, function(data) {
                var data = JSON.parse(data);
                if (data.ErrorCode == 0) {
                    Company.showDetailContent(interfaceStr, data.Data, $main, parameter);
                } else {
                    $main.html('<div class="no-data">暂无数据</div>');
                }
            })
        }
    },
    showMergeDetail: function(dom, tdlen) {
        //显示并购信息详细页
        var $main = $(".show-main");
        if ($main.length >= 1 && $(dom).parents("tr").next("tr").find(".show-main").length >= 1) {
            $main.parents("tr").remove();
        } else {
            $main.parents("tr").remove();
            var desc = $(dom).attr("data-title") || '--';
            desc = desc.replace(/:/g, '：');
            var descs = desc.split('\n');
            var descBak = '';
            if (descs.length > 0) {
                for (var i = 0; i < descs.length; i++) {
                    var str = descs[i].split('：');
                    if (str.length > 1) {
                        var dateStr = date = str[0];
                        var content = str[1];
                        date = Common.formatTime(date);
                        if (date !== '--') {
                            descs[i] = date + "：" + content;
                        } else {
                            descs[i] = dateStr + "：" + content;
                        }
                    }
                    descBak += descs[i] + '<br/><br/>';
                }
            } else {
                descBak = desc;
            }
            $(dom).parents("tr").after("<tr><td colspan='" + tdlen + "' class='base-no-sideborder'><div id='main' class='show-main clear-border base-no-sideborder'><table class='show-table'><tbody class='tbody-detail'><td width='15%' class='title-item'>" + intl('59999' /* 进展描述 */ ) + "</td><td>" + descBak + "</td></tbody></table></div></td></tr>");
        }
    },
    showDetailContent: function(interfaceStr, data, $main, parameter) {
        var data = data;
        if (data instanceof Array && interfaceStr != "getrankedcompany" && interfaceStr != "getspotcheckdetail") {
            data = data[0];
        }
        var tableHtml = '<table class="show-table"><tbody class="tbody-detail"></tbody></table>';
        $main.html(tableHtml);
        var $tbody = $main.find(".tbody-detail");
        if (!data) {
            $tbody.html('<tr><td><div class="no-data">暂无数据</div></td></tr>');
            return false;
        }

        switch (interfaceStr) {
            case "getcourtannouncementdetail2":
                //法院公告
                var itemKey = [intl('138147' /* 公示类型 */ ), intl('138190' /* 案号 */ ), intl('138144' /* 公示时间 */ ), intl('138427' /* 当事人 */ ), intl('138148' /* 公告人 */ )];
                var CaseCause = data.CaseCause ? data.CaseCause : "--";
                var NoticeType = data.announcement_type ? data.announcement_type : "--";
                var Litigant = data.announcement_party ? Company.splitComKeyValueDetail(data.announcement_party) : "--";
                var CaseNo = data.announcement_no ? data.announcement_no : "--";
                var NoticeTime = data.announcement_time ? Common.formatTime(data.announcement_time) : "--";
                var NoticePerson = data.announcer ? data.announcer : "--";
                var NoticeContent = data.announcement_content ? data.announcement_content : "--";
                var itemValue = [NoticeType, CaseNo, NoticeTime, Litigant, NoticePerson];
                var htmlArr = [];
                var mainHtml = this.displayTable(itemKey, itemValue);
                htmlArr.push(mainHtml);
                htmlArr.push("<tr><td width='15%' class='title-item'>" + intl('138142' /* 公告内容 */ ) + "</td><td colspan=3>" + NoticeContent + "</td></tr>");
                $tbody.html(htmlArr.join(""));
                break;
            case "gettrialnoticedetail":
                //开庭公告
                var itemKey = [intl('138190' /* 案号 */ ), intl('138229' /* 开庭时间 */ ), intl('137829' /* 公告时间 */ ), intl('138196' /* 案由 */ )];
                var CaseCause = data.case_cause ? data.case_cause : "--";
                var HoldcourtTime = data.holdcourt_time ? Common.formatTime(data.holdcourt_time) : "--";
                var NoticeTime = data.notice_time ? Common.formatTime(data.notice_time) : "--";
                var CaseNo = data.case_no ? data.case_no : "--";
                var NoticeContent = data.notice_content ? data.notice_content : "--";
                var itemValue = [CaseNo, HoldcourtTime, NoticeTime, CaseCause];
                var htmlArr = [];
                var mainHtml = this.displayTable(itemKey, itemValue);
                htmlArr.push(mainHtml);
                htmlArr.push("<tr><td width='15%' class='title-item'>" + intl('138142' /* 公告内容 */ ) + "</td><td colspan=3>" + NoticeContent + "</td></tr>");
                $tbody.html(htmlArr.join(""));
                break;
            case "gettrialnoticedetail2":
                //历史开庭公告
                var itemKey = [intl('138190' /* 案号 */ ), intl('138229' /* 开庭时间 */ ), intl('137829' /* 公告时间 */ ), intl('138196' /* 案由 */ )];
                var CaseCause = data.announcement_no ? data.announcement_no : "--";
                var HoldcourtTime = data.court_time ? Common.formatTime(data.court_time) : "--";
                var NoticeTime = data.announcement_time ? Common.formatTime(data.announcement_time) : "--";
                var CaseNo = data.announcement_cause ? data.announcement_cause : "--";
                var NoticeContent = data.announcement_content ? data.announcement_content : "--";
                var itemValue = [CaseCause, HoldcourtTime, NoticeTime, CaseNo];
                var htmlArr = [];
                var mainHtml = this.displayTable(itemKey, itemValue);
                htmlArr.push(mainHtml);
                htmlArr.push("<tr><td width='15%' class='title-item'>" + intl('138142' /* 公告内容 */ ) + "</td><td colspan=3>" + NoticeContent + "</td></tr>");
                $tbody.html(htmlArr.join(""));
                break;
            case "getcourtannouncementdetail2":
                //历史法院公告
                var itemKey = [intl('138147' /* 公示类型 */ ), intl('138190' /* 案号 */ ), intl('138144' /* 公示时间 */ ), intl('138427' /* 当事人 */ ), intl('138148' /* 公告人 */ )];
                var CaseCause = data.CaseCause ? data.CaseCause : "--";
                var NoticeType = data.announcement_type ? data.announcement_type : "--";
                var Litigant = data.announcement_party ? data.announcement_party : "--";
                var CaseNo = data.announcement_no ? data.announcement_no : "--";
                var NoticeTime = data.announcement_time ? Common.formatTime(data.announcement_time) : "--";
                var NoticePerson = data.announcer ? data.announcer : "--";
                var NoticeContent = data.announcement_content ? data.announcement_content : "--";
                var itemValue = [NoticeType, CaseNo, NoticeTime, Litigant, NoticePerson];
                var htmlArr = [];
                var mainHtml = this.displayTable(itemKey, itemValue);
                htmlArr.push(mainHtml);
                htmlArr.push("<tr><td width='15%' class='title-item'>" + intl('138142' /* 公告内容 */ ) + "</td><td colspan=3>" + NoticeContent + "</td></tr>");
                $tbody.html(htmlArr.join(""));
                break;
            case "getrankedcompany":
                //上榜信息
                var rank = "";
                var rankDate = "";
                var rankLength = data.length;
                var htmlArr = [];
                htmlArr.push("<tr><td width='50%' class='title-item rankAlign'>" + intl('138794' /* 上榜时间 */ ) + "</td><td width='50%' class='title-item rankAlign'>" + intl('138925' /* 排名 */ ) + "</td></tr>");
                for (var rl = 0; rl < rankLength; rl++) {
                    rank = data[rl].rank ? data[rl].rank : "--";
                    rankDate = data[rl].rankDate ? Common.formatTime(data[rl].rankDate) : '--';
                    htmlArr.push("<tr><td width='50%' class='rankAlign'>" + rankDate + "</td><td width='50%' class='rankAlign'>" + rank + "</td></tr>");
                }
                $tbody.html(htmlArr.join(""));
                break;
            case "getspotcheckdetail":
                //var data=[{"check_item":"事项1","check_result":"结果1"},{"check_item":"事项2","check_result":"结果2"}]
                //双随机抽查
                var rank = "";
                var rankDate = "";
                var rankLength = data.length;
                var htmlArr = [];
                htmlArr.push("<tr><td width='50%' class='title-item rankAlign'>" + intl('145864' /* 检查事项 */ ) + "</td><td width='50%' class='title-item rankAlign'>" + intl('138492' /* 检查结果 */ ) + "</td></tr>");
                for (var rl = 0; rl < rankLength; rl++) {
                    rank = data[rl].check_item ? data[rl].check_item : "--";
                    rankDate = data[rl].check_result ? data[rl].check_result : '--';
                    htmlArr.push("<tr><td width='50%' class='rankAlign'>" + rank + "</td><td width='50%' class='rankAlign'>" + rankDate + "</td></tr>");
                }
                $tbody.html(htmlArr.join(""));
                break;
            case "getjudicialsaledetail":
                //司法拍卖
                var itemKey = [intl('138237' /* 拍卖日期 */ ), intl('138497' /* 拍卖轮次 */ ), intl('138517' /* 拍卖状态 */ ), intl('138491' /* 拍卖结果 */ ), intl('138515' /* 起拍价 */ ), intl('138715' /* 保证金 */ ), intl('138572' /* 评估价 */ ), intl('138338' /* 增加幅度 */ ), intl('138511' /* 权利来源 */ ), intl('138121' /* 权证情况 */ ), intl('138379' /* 权利限制情况 */ ), intl('138120' /* 拍品现状描述 */ )];
                var sale_title = data.sale_title ? data.sale_title : "--";
                var sale_target = data.sale_target ? data.sale_target : "--";
                var target_introduction = data.target_introduction ? data.target_introduction : "--";
                var documents_provided = data.documents_provided ? data.documents_provided : "--";
                var sale_court = data.sale_court ? data.sale_court : "--";
                var sale_date = data.sale_date ? data.sale_date : "--";
                var sale_turn = data.sale_turn ? data.sale_turn : "--";
                var sale_status = data.sale_status ? data.sale_status : "--";
                var sale_result = data.sale_result ? data.sale_result : "--";
                var starting_price = data.starting_price ? data.starting_price : "--";
                var deposit = data.deposit ? data.deposit : "--";
                var valuation_price = data.valuation_price ? data.valuation_price : "--";
                var increase_range = data.increase_range ? data.increase_range : "--";
                var power_source = data.power_source ? data.power_source : "--";
                var warrant_situation = data.warrant_situation ? data.warrant_situation : "--";
                var power_limitation = data.power_limitation ? data.power_limitation : "--";
                var target_status_description = data.target_status_description ? data.target_status_description : "--";

                var itemValue = [sale_date, sale_turn, sale_status, sale_result, starting_price, deposit, valuation_price, increase_range, power_source, warrant_situation, power_limitation, target_status_description];
                var htmlArr = [];
                htmlArr.push("<tr><td width='15%' class='title-item'>" + intl('138552' /* 拍卖公告标题 */ ) + "</td><td colspan=3>" + sale_title + "</td></tr>");
                htmlArr.push("<tr><td width='15%' class='title-item'>" + intl('138530' /* 拍卖标的 */ ) + "</td><td colspan=3>" + sale_target + "</td></tr>");
                htmlArr.push("<tr><td width='15%' class='title-item'>" + intl('138529' /* 标的介绍 */ ) + "</td><td colspan=3>" + target_introduction + "</td></tr>");
                htmlArr.push("<tr><td width='15%' class='title-item'>" + intl('138460' /* 提供的文件 */ ) + "</td><td colspan=3>" + documents_provided + "</td></tr>");
                htmlArr.push("<tr><td width='15%' class='title-item'>" + intl('138227' /* 拍卖法院 */ ) + "</td><td colspan=3>" + sale_court + "</td></tr>");
                var mainHtml = this.displayTable(itemKey, itemValue);
                htmlArr.push(mainHtml);
                $tbody.html(htmlArr.join(""));


                break;

            case "getadminipunishmentdetail":
                //行政处罚【信用中国】
                var itemKey = [intl('153358' /* 决定文书号 */ ), intl('153359' /* 处罚时间 */ ), intl('138464' /* 处罚机关 */ ), intl('138462' /* 处罚类别 */ )];
                var Title = data.title ? data.title : '--';
                var DocDo = data.docId ? data.docId : "--";
                var PunishCause = data.cause ? data.cause : "--";
                var PunishBasis = data.basis ? data.basis : "--";
                var PunishOrgan = data.orgName ? data.orgName : "--";

                var OrganStr = Common.addLinkForCompanyOrPerson(data.orgName, data.orgId);

                var PunishTime = data.time ? Common.formatTime(data.time) : "--";
                var PunishType = data.type ? data.type : "--";
                var result = data.result ? data.result : "--";
                var itemValue = [DocDo, PunishTime, PunishOrgan, PunishType];
                var htmlArr = [];
                htmlArr.push("<tr><td width='15%' class='title-item'>" + intl('153357' /* 处罚名称 */ ) + "</td><td colspan=3>" + Title + "</td></tr>");
                var mainHtml = this.displayTable(itemKey, itemValue);
                htmlArr.push(mainHtml);
                htmlArr.push("<tr><td width='15%' class='title-item'>" + intl('138463' /* 处罚事由 */ ) + "</td><td colspan=3>" + PunishCause + "</td></tr>");
                htmlArr.push("<tr><td width='15%' class='title-item'>" + intl('138461' /* 处罚依据 */ ) + "</td><td colspan=3>" + PunishBasis + "</td></tr>");
                htmlArr.push("<tr><td width='15%' class='title-item'>违法结果</td><td colspan=3>" + result + "</td></tr>");
                $tbody.html(htmlArr.join(""));
                break;
            case "gethisadminipunishmentdetail":
                //行政处罚【信用中国】
                var itemKey = [intl('153358' /* 决定文书号 */ ), intl('153359' /* 处罚时间 */ ), intl('138464' /* 处罚机关 */ ), intl('138462' /* 处罚类别 */ )];
                var Title = data.title ? data.title : '--';
                var DocDo = data.docId ? data.docId : "--";
                var PunishCause = data.cause ? data.cause : "--";
                var PunishBasis = data.basis ? data.basis : "--";
                var PunishOrgan = data.orgName ? data.orgName : "--";

                var OrganStr = Common.addLinkForCompanyOrPerson(data.orgName, data.orgId);

                var PunishTime = data.time ? Common.formatTime(data.time) : "--";
                var PunishType = data.type ? data.type : "--";
                var result = data.result ? data.result : "--";
                var itemValue = [DocDo, PunishTime, PunishOrgan, PunishType];
                var htmlArr = [];
                htmlArr.push("<tr><td width='15%' class='title-item'>" + intl('153357' /* 处罚名称 */ ) + "</td><td colspan=3>" + Title + "</td></tr>");
                var mainHtml = this.displayTable(itemKey, itemValue);
                htmlArr.push(mainHtml);
                htmlArr.push("<tr><td width='15%' class='title-item'>" + intl('138463' /* 处罚事由 */ ) + "</td><td colspan=3>" + PunishCause + "</td></tr>");
                htmlArr.push("<tr><td width='15%' class='title-item'>" + intl('138461' /* 处罚依据 */ ) + "</td><td colspan=3>" + PunishBasis + "</td></tr>");
                htmlArr.push("<tr><td width='15%' class='title-item'>" + intl('', '违法结果') + "</td><td colspan=3>" + result + "</td></tr>");
                $tbody.html(htmlArr.join(""));
                break;
            case "getfinancepunishmentdetail":
                //金融监管处罚
                var itemKey = [intl('', '处罚决定书号'), intl('138464', '处罚机关'), intl('153359', '决定日期'), intl('138143', '公示日期'), intl('', '被处罚对象名称'), intl('', '法定代表人(负责人)姓名'), intl('138462', '处罚类别'), intl('138461', '处罚依据'), intl('145345', '违法行为'), '违法结果'];
                var title = data.title ? data.title : '--';
                var docId = data.docId ? data.docId : "--";
                var orgStr = Common.addLinkForCompanyOrPerson(data.orgName, data.orgId);
                var decisionDate = data.decisionDate ? Common.formatTime(data.decisionDate) : "--";
                var announcementDate = data.announcementDate ? Common.formatTime(data.announcementDate) : "--";
                var punishList = [];
                var punishedArr = data.punished ? data.punished : [];
                for (var i = 0; i < punishedArr.length; i++) {
                    var tmpName = punishedArr[i].name;
                    var tmpId = punishedArr[i].id;
                    punishList.push(Common.addLinkForCompanyOrPerson(tmpName, tmpId))
                }
                var punishListStr = punishList.join("<br/>")
                var legalPersonStr = Common.addLinkForCompanyOrPerson(data.legalPersonName, data.legalPersonId);
                var type = data.type ? data.type : '--';
                var basis = data.basis ? data.basis : '--';
                var cause = data.cause ? data.cause : '--';
                var result = data.result ? data.result : '--';
                var itemValue = [docId, orgStr, decisionDate, announcementDate, punishListStr, legalPersonStr, type, basis, cause, result];
                var htmlArr = [];
                htmlArr.push("<tr><td width='15%' class='title-item'>" + intl('222774', '处罚标题') + "</td><td colspan=3>" + title + "</td></tr>");
                var mainHtml = this.displayTable(itemKey, itemValue);
                htmlArr.push(mainHtml);
                $tbody.html(htmlArr.join(""));
                break;
            case "getmarketpunishmentdetail":
                //市场监管处罚
                var itemKey = [intl('', '处罚决定书号'), intl('138464', '处罚机关'), intl('153359', '决定日期'), intl('138143', '公示日期'), intl('', '被处罚对象名称'), intl('', '法定代表人(负责人)姓名'), intl('138462', '处罚类别'), intl('138461', '处罚依据'), intl('145345', '违法行为'), '违法结果'];
                var title = data.title ? data.title : '--';
                var docId = data.docId ? data.docId : "--";
                var orgStr = Common.addLinkForCompanyOrPerson(data.orgName, data.orgId);
                var decisionDate = data.decisionDate ? Common.formatTime(data.decisionDate) : "--";
                var announcementDate = data.announcementDate ? Common.formatTime(data.announcementDate) : "--";
                var punishList = [];
                var punishedArr = data.punished ? data.punished : [];
                for (var i = 0; i < punishedArr.length; i++) {
                    var tmpName = punishedArr[i].name;
                    var tmpId = punishedArr[i].id;
                    punishList.push(Common.addLinkForCompanyOrPerson(tmpName, tmpId))
                }
                var punishListStr = punishList.join("<br/>")
                var legalPersonStr = Common.addLinkForCompanyOrPerson(data.legalPersonName, data.legalPersonId);
                var type = data.type ? data.type : '--';
                var basis = data.basis ? data.basis : '--';
                var cause = data.cause ? data.cause : '--';
                var result = data.result ? data.result : '--';
                var itemValue = [docId, orgStr, decisionDate, announcementDate, punishListStr, legalPersonStr, type, basis, cause, result];
                var htmlArr = [];
                htmlArr.push("<tr><td width='15%' class='title-item'>" + intl('222774', '处罚标题') + "</td><td colspan=3>" + title + "</td></tr>");
                var mainHtml = this.displayTable(itemKey, itemValue);
                htmlArr.push(mainHtml);
                $tbody.html(htmlArr.join(""));
                break;
            case "getfinancepunishmentdetail":
                //金融监管处罚
                var itemKey = [intl('', '处罚决定书号'), intl('138464', '处罚机关'), intl('153359', '决定日期'), intl('138143', '公示日期'), intl('', '被处罚对象名称'), intl('', '法定代表人(负责人)姓名'), intl('138462', '处罚类别'), intl('138461', '处罚依据'), intl('145345', '违法行为'), '违法结果'];
                var title = data.title ? data.title : '--';
                var docId = data.docId ? data.docId : "--";
                var orgStr = Common.addLinkForCompanyOrPerson(data.orgName, data.orgId);
                var decisionDate = data.decisionDate ? Common.formatTime(data.decisionDate) : "--";
                var announcementDate = data.announcementDate ? Common.formatTime(data.announcementDate) : "--";
                var punishList = [];
                var punishedArr = data.punished ? data.punished : [];
                for (var i = 0; i < punishedArr.length; i++) {
                    var tmpName = punishedArr[i].name;
                    var tmpId = punishedArr[i].id;
                    punishList.push(Common.addLinkForCompanyOrPerson(tmpName, tmpId))
                }
                var punishListStr = punishList.join("<br/>")
                var legalPersonStr = Common.addLinkForCompanyOrPerson(data.legalPersonName, data.legalPersonId);
                var type = data.type ? data.type : '--';
                var basis = data.basis ? data.basis : '--';
                var cause = data.cause ? data.cause : '--';
                var result = data.result ? data.result : '--';
                var itemValue = [docId, orgStr, decisionDate, announcementDate, punishListStr, legalPersonStr, type, basis, cause, result];
                var htmlArr = [];
                htmlArr.push("<tr><td width='15%' class='title-item'>" + intl('222774', '处罚标题') + "</td><td colspan=3>" + title + "</td></tr>");
                var mainHtml = this.displayTable(itemKey, itemValue);
                htmlArr.push(mainHtml);
                $tbody.html(htmlArr.join(""));
                break;
            case "getfoodanddrugpunishmentdetail":
                //食药监处罚
                var itemKey = [intl('', '处罚决定书号'), intl('138464', '处罚机关'), intl('153359', '决定日期'), intl('138143', '公示日期'), intl('', '被处罚对象名称'), intl('', '法定代表人(负责人)姓名'), intl('138462', '处罚类别'), intl('138461', '处罚依据'), intl('145345', '违法行为'), '违法结果'];
                var title = data.title ? data.title : '--';
                var docId = data.docId ? data.docId : "--";
                var orgStr = Common.addLinkForCompanyOrPerson(data.orgName, data.orgId);
                var decisionDate = data.decisionDate ? Common.formatTime(data.decisionDate) : "--";
                var announcementDate = data.announcementDate ? Common.formatTime(data.announcementDate) : "--";
                var punishList = [];
                var punishedArr = data.punished ? data.punished : [];
                for (var i = 0; i < punishedArr.length; i++) {
                    var tmpName = punishedArr[i].name;
                    var tmpId = punishedArr[i].id;
                    punishList.push(Common.addLinkForCompanyOrPerson(tmpName, tmpId))
                }
                var punishListStr = punishList.join("<br/>")
                var legalPersonStr = Common.addLinkForCompanyOrPerson(data.legalPersonName, data.legalPersonId);
                var type = data.type ? data.type : '--';
                var basis = data.basis ? data.basis : '--';
                var cause = data.cause ? data.cause : '--';
                var result = data.result ? data.result : '--';
                var itemValue = [docId, orgStr, decisionDate, announcementDate, punishListStr, legalPersonStr, type, basis, cause, result];
                var htmlArr = [];
                htmlArr.push("<tr><td width='15%' class='title-item'>" + intl('222774', '处罚标题') + "</td><td colspan=3>" + title + "</td></tr>");
                var mainHtml = this.displayTable(itemKey, itemValue);
                htmlArr.push(mainHtml);
                $tbody.html(htmlArr.join(""));
                break;
            case "getfinanciallicencedetail":
                //金融许可详情
                var itemKey = [intl('222773', '行政许可决定文书号'), intl('', '行政许可决定文书名称'), intl('205398', '许可证号'), intl('222783', '许可证名称'), intl('138245', '发证日期'), intl('222768', '有效期起止日期'), intl('138143', '公示日期'), intl('138377', '许可机关'), intl('', '许可类别'), intl('', '审核类型')];
                var sDate = data.startDate ? Common.formatTime(data.startDate) : '--'; //有效期起
                var eDate = data.endDate ? Common.formatTime(data.endDate) : '--'; //有效期止

                var itemId = data.orgId ? data.orgId : '';
                var otherCss = '';
                var pingParam = '&fromModule=getjrxkdetail&fromField=许可机关&opId=' + itemId; //bury


                var docId = data.docId ? Common.formatCont(data.docId) : '--'; //行政许可决定文书号
                var docName = data.docName ? Common.formatCont(data.docName) : '--'; //行政许可决定文书名称
                var licenceId = data.licenceId ? Common.formatCont(data.licenceId) : '--'; //许可证号
                var licenceName = data.licenceName ? Common.formatCont(data.licenceName) : '--'; //许可证名称
                var issueDate = data.issueDate ? Common.formatTime(data.issueDate) : '--'; //发证日期
                var seDate = (sDate == '--' && eDate == '--') ? '--' : (sDate + '至' + eDate); //有效期起止日期
                var reportDate = data.reportDate ? Common.formatTime(data.reportDate) : '--'; //公示日期
                var orgName = Common.jumpwithBury(data.orgName, itemId, otherCss, pingParam); //许可机关
                var licenceType = data.licenceType ? Common.formatCont(data.licenceType) : '--'; //许可类别
                var verifyType = data.verifyType ? Common.formatCont(data.verifyType) : '--'; //审核类型
                var content = data.content ? Common.formatCont(data.content) : '--'; //许可内容
                var itemValue = [docId, docName, licenceId, licenceName, issueDate, seDate, reportDate, orgName, licenceType, verifyType];

                var htmlArr = [];
                var mainHtml = this.displayTable(itemKey, itemValue);
                htmlArr.push(mainHtml);
                htmlArr.push("<tr><td width='15%' class='title-item'>" + intl('', '许可内容') + "</td><td class='' colspan=3>" + content + "</td></tr>");
                $tbody.html(htmlArr.join(""));
                break;
            case "getenvpenaltiesdetail":
                //环保处罚
                var itemKey = [intl('153358' /* 决定文书号 */ ), intl('153359' /* 决定日期 */ ), intl('205382' /* 执行状态 */ ), intl('138143' /* 公示日期 */ )];
                var docNo = data.punishDocNo ? data.punishDocNo : "--"; //文书号
                var decisionTime = data.punishDate ? Common.formatTime(data.punishDate) : "--"; //决定日期
                var doStaues = data.punishStatus ? data.punishStatus : "--"; //执行状态
                var publicTime = data.annDate ? Common.formatTime(data.annDate) : "--"; //公示日期
                var lawClassifyType = data.illegalActType ? data.illegalActType : "--"; //违法行为类型
                var lawClassify = data.illegalAct ? data.illegalAct : "--"; //违法行为
                var judgeGov = data.punishAgency ? data.punishAgency : "--"; //处罚机关
                var judgeBasis = data.punishBasis ? data.punishBasis : "--"; //处罚依据
                var judgeClassify = data.punishCat ? data.punishCat : "--"; //处罚类别
                var judgeResult = data.illegalResult ? data.illegalResult : "--"; //处罚结果
                var itemValue = [docNo, decisionTime, doStaues, publicTime];
                var htmlArr = [];
                var mainHtml = this.displayTable(itemKey, itemValue);
                htmlArr.push(mainHtml);
                htmlArr.push("<tr><td width='15%' class='title-item'>" + intl('153360' /* 违法行为类型 */ ) + "</td><td colspan=3>" + lawClassifyType + "</td></tr>");
                htmlArr.push("<tr><td width='15%' class='title-item'>" + intl('145345' /* 违法行为 */ ) + "</td><td colspan=3>" + lawClassify + "</td></tr>");
                htmlArr.push("<tr><td width='15%' class='title-item'>" + intl('138464' /* 处罚机关 */ ) + "</td><td colspan=3>" + judgeGov + "</td></tr>");
                htmlArr.push("<tr><td width='15%' class='title-item'>" + intl('138461' /* 处罚依据 */ ) + "</td><td colspan=3>" + judgeBasis + "</td></tr>");
                htmlArr.push("<tr><td width='15%' class='title-item'>" + intl('138462' /* 处罚类别 */ ) + "</td><td colspan=3>" + judgeClassify + "</td></tr>");
                htmlArr.push("<tr><td width='15%' class='title-item'>" + intl('138465' /* 处罚结果 */ ) + "</td><td colspan=3>" + judgeResult + "</td></tr>");
                $tbody.html(htmlArr.join(""));
                break;
            case "getowingtaxdetail":
                //欠税信息
                var itemKey = [intl('138654' /* 公告日期 */ ), intl('138145' /* 公告期次 */ ), intl('138194' /* 欠税税种 */ ), intl('138566' /* 欠税类型 */ ), intl('138172' /* 欠税余额 */ ), intl('138397' /* 当期新增欠税 */ ), intl('138177' /* 欠税开始日期 */ ), intl('138233', '欠税截止日期'), intl('138218', '主管税务机关')];
                var owing_tax_notice_period = data.owing_tax_notice_period ? data.owing_tax_notice_period : "--";
                var date = data.owing_tax_publish_time ? Common.formatTime(data.owing_tax_publish_time) : "--";
                var owing_tax_tax_type = data.owing_tax_tax_type ? data.owing_tax_tax_type : "--";
                var owing_tax_type = data.owing_tax_type ? data.owing_tax_type : "--";
                var owing_tax_balance = data.owing_tax_balance ? data.owing_tax_balance : "--";
                var new_owing_tax = data.new_owing_tax ? data.new_owing_tax : "--";
                var tax_start = data.tax_start ? Common.formatTime(data.tax_start) : "--";
                var tax_deadline = data.tax_deadline ? Common.formatTime(data.tax_deadline) : "--";
                var tax_authority = data.tax_authority ? data.tax_authority : "--";
                var itemValue = [date, owing_tax_notice_period, owing_tax_tax_type, owing_tax_type, owing_tax_balance, new_owing_tax, tax_start, tax_deadline, tax_authority];
                var htmlArr = [];
                var mainHtml = this.displayTable(itemKey, itemValue);
                htmlArr.push(mainHtml);
                $tbody.html(htmlArr.join(""));
                break;
            case "getchatteimortgageitem":
                //动产抵押
                var itemKey = [intl('138771' /* 动产抵押登记编号  */ ), intl('138479' /* 动产抵押登记日期  */ ), intl('138309' /* 履行债务的期限 */ ), intl('138391' /* 抵押权人 */ ), intl('138425' /* 抵押物所有权归属 */ ), intl('138331' /* 抵押权人证件类型 */ ), intl('138334' /* 抵押权人证件号码 */ ), intl('138617' /* 被担保债权数额 */ ), intl('138618' /* 被担保债权种类 */ ), intl('138781' /* 担保范围 */ ), intl('138481' /* 动产抵押登记机构 */ ), intl('138488' /* 动产抵押备注 */ )];
                var cm_reg_no = data.cm_reg_no ? data.cm_reg_no : "--";
                var cm_reg_date = data.cm_reg_date ? Common.formatTime(data.cm_reg_date) : "--";
                var cm_obligor_deadline = data.cm_obligor_deadline ? Common.formatTime(data.cm_obligor_deadline) : "--";
                var cm_mortgage_person_name = data.cm_mortgage_person_name ? data.cm_mortgage_person_name : "--";
                var cm_dpawn_owner = data.dpawminfo[0].cm_dpawn_owner ? data.dpawminfo[0].cm_dpawn_owner : "--";
                var cm_obligee_deadline = data.cm_obligee_deadline ? data.cm_obligee_deadline : "--";
                var cm_mortgage_person_card_type = data.cm_mortgage_person_card_type ? data.cm_mortgage_person_card_type : "--";
                var cm_mortgage_person_card_no = data.cm_mortgage_person_card_no ? data.cm_mortgage_person_card_no : "--";
                var cm_zq_amount = data.cm_zq_amount ? Common.formatMoney(data.cm_zq_amount) : "--";
                var cm_zq_type = data.cm_zq_type ? data.cm_zq_type : "--";
                var cm_guarantee_scope = data.cm_guarantee_scope ? data.cm_guarantee_scope : "--";
                var cm_reg_authority = data.cm_reg_authority ? data.cm_reg_authority : "--";
                var cm_remark = data.cm_remark ? data.cm_remark : "--";
                var dpawn_length = data.dpawminfo.length;
                var dpawn_dic = [dpawn_length];
                for (var dl = 0; dl < dpawn_length; dl++) {
                    var cm_dpawn_name = data.dpawminfo[dl].cm_dpawn_name ? data.dpawminfo[dl].cm_dpawn_name : '--';
                    var cm_dpawn_desc = data.dpawminfo[dl].cm_dpawn_desc ? data.dpawminfo[dl].cm_dpawn_desc : '--';
                    dpawn_dic.push(cm_dpawn_name, cm_dpawn_desc);
                }
                var itemValue = [cm_reg_no, cm_reg_date, cm_obligor_deadline, cm_mortgage_person_name, cm_dpawn_owner, cm_mortgage_person_card_type, cm_mortgage_person_card_no, cm_zq_amount, cm_zq_type, cm_guarantee_scope, cm_reg_authority, cm_remark];
                var htmlArr = [];
                var mainHtml = this.displayTable(itemKey, itemValue, dpawn_dic);
                htmlArr.push(mainHtml);
                $tbody.html(htmlArr.join(""));
                break;
            case "getbreakpromisedetail":
                //失信信息
                var itemKey = [intl('138190' /* 案号 */ ), intl('138774' /* 发布时间 */ ), intl('138294' /* 立案时间 */ ), intl('34378' /* 省份 */ ), intl('138228' /* 执行法院 */ ), intl('138286' /* 执行依据文号 */ ), intl('138250' /* 作出执行单位 */ ), intl('138435' /* 被执行人的履行情况 */ ), intl('138261' /* 具体情形 */ ), intl('138256' /* 生效法律文书确定的义务 */ )];
                var CaseNo = data.case_no ? data.case_no : "--";
                var PublishTime = data.publish_time ? Common.formatTime(data.publish_time) : "--";
                var DebetorName = data.debetor_name ? data.debetor_name : "--";
                var IdentityNo = data.identity_no ? data.identity_no : "--";
                var CaseTime = data.case_time ? Common.formatTime(data.case_time) : "--";
                var Province = data.province ? data.province : "--";
                var ExeCourt = data.exe_court ? data.exe_court : "--";
                var ExeBasisNo = data.exe_basis_no ? data.exe_basis_no : "--";
                var ExeBasisName = data.exe_basis_name ? data.exe_basis_name : "--";
                var DebetorFulfil = data.debetor_fulfil ? data.debetor_fulfil : "--";
                var DebetorAction = data.debetor_action ? data.debetor_action : "--";
                var LegalDocObligations = data.legal_doc_obligations ? data.legal_doc_obligations : "--";
                var itemValue = [CaseNo, PublishTime, CaseTime, Province, ExeCourt, ExeBasisNo, ExeBasisName, DebetorFulfil, DebetorAction, LegalDocObligations];
                var htmlArr = [];
                var mainHtml = this.displayTable(itemKey, itemValue);
                htmlArr.push(mainHtml);
                $tbody.html(htmlArr.join(""));
                break;
            case "gethisbreakpromisedetail":
                //历史失信信息
                var itemKey = [intl('138190' /* 案号 */ ), intl('138774' /* 发布时间 */ ), intl('138294' /* 立案时间 */ ), intl('34378' /* 省份 */ ), intl('138228' /* 执行法院 */ ), intl('138286' /* 执行依据文号 */ ), intl('138250' /* 作出执行单位 */ ), intl('138435' /* 被执行人的履行情况 */ ), intl('138261' /* 具体情形 */ ), intl('138256' /* 生效法律文书确定的义务 */ )];
                var CaseNo = data.case_no ? data.case_no : "--";
                var PublishTime = data.publish_time ? Common.formatTime(data.publish_time) : "--";
                var DebetorName = data.debetor_name ? data.debetor_name : "--";
                var IdentityNo = data.identity_no ? data.identity_no : "--";
                var CaseTime = data.case_time ? Common.formatTime(data.case_time) : "--";
                var Province = data.province ? data.province : "--";
                var ExeCourt = data.exe_court ? data.exe_court : "--";
                var ExeBasisNo = data.exe_basis_no ? data.exe_basis_no : "--";
                var ExeBasisName = data.exe_basis_name ? data.exe_basis_name : "--";
                var DebetorFulfil = data.debetor_fulfil ? data.debetor_fulfil : "--";
                var DebetorAction = data.debetor_action ? data.debetor_action : "--";
                var LegalDocObligations = data.legal_doc_obligations ? data.legal_doc_obligations : "--";
                var itemValue = [CaseNo, PublishTime, CaseTime, Province, ExeCourt, ExeBasisNo, ExeBasisName, DebetorFulfil, DebetorAction, LegalDocObligations];
                var htmlArr = [];
                var mainHtml = this.displayTable(itemKey, itemValue);
                htmlArr.push(mainHtml);
                $tbody.html(htmlArr.join(""));
                break;
            case "getbranddetail":
                //商标信息
                var htmlArr = [];

                var brand_graphic_link = data.brand_graphic_link ? data.brand_graphic_link : "";
                var str_img = "this.src='../resource/images/Reports/no_photo.png'";
                var str_no_img = "style='width:100px !important;background: #fafafa;padding: 40px;'"
                var brand_img = '<img src="' + brand_graphic_link + '" class="brand_images"' + ' onerror="' + str_img + ';' + str_no_img + ' "/>';
                htmlArr.push("<tr><td colspan=4 align='center'>" + brand_img + "</td></tr>");
                var brand_name = data.brand_name ? data.brand_name : "--";
                htmlArr.push("<tr><td width='15%' class='title-item item-middle'>" + intl('138798' /* 商标名称  */ ) + "</td><td colspan=3>" + brand_name + "</td></tr>");
                var itemKey = [intl('138476' /* 注册号 */ ), intl('138302' /* 流转状态 */ ), intl('138349' /* 国际类别 */ ), intl('138660' /* 申请日期 */ ), intl('206484' /* 专用期限 */ ), intl('138562' /* 商标类型 */ ), intl('138407' /* 初审公告号 */ ), intl('138405' /* 初审公告日期 */ ), intl('138408' /* 注册公告号 */ ), intl('138406' /* 注册公告日期 */ ), intl('138350' /* 国际注册日期 */ ), intl('138362' /* 后期指定日期 */ ), intl('138452' /* 优先权日期 */ ), intl('138210' /* 颜色组合 */ ), intl('138738' /* 申请人名称（中文）  */ ), intl('138644' /* 申请人地址（中文）  */ ), intl('138739' /* 申请人名称（英文）  */ ), intl('138645' /* 申请人地址（英文）  */ ), intl('138505' /* 是否有共有商标 */ ), intl('138136' /* 代理机构 */ ), intl('138669' /* 商品/服务项目  */ )];
                var brand_reg_no = data.brand_reg_no ? data.brand_reg_no : "--";
                var brand_state = data.brand_state ? data.brand_state : "--";
                var inter_type = data.inner_type ? data.inner_type : "--";
                var apply_date = data.apply_date ? Common.formatTime(data.apply_date) : "--";
                var special_term = '';
                if (data.special_term) {
                    var special_start = data.special_term.split('~')[0] ? Common.formatTime(data.special_term.split('~')[0]) : '--';
                    var special_end = data.special_term.split('~')[1] ? Common.formatTime(data.special_term.split('~')[1]) : '--';
                    special_term = special_start + '~' + special_end;
                } else {
                    special_term = '--';
                }
                var brand_type = data.brand_type ? data.brand_type : "--";
                var brand_audit_report_no = data.brand_audit_report_no ? data.brand_audit_report_no : "--";
                var brand_reg_report_no = data.brand_reg_report_no ? data.brand_reg_report_no : "--";
                var brand_audit_report_time = data.brand_audit_report_time ? Common.formatTime(data.brand_audit_report_time) : "--";
                var brand_reg_report_time = data.brand_reg_report_time ? Common.formatTime(data.brand_reg_report_time) : "--";
                var inter_reg_date = data.nter_reg_date ? Common.formatTime(data.nter_reg_date) : "--";
                var later_specified_date = data.later_specified_date ? Common.formatTime(data.later_specified_date) : "--";
                var priority_date = data.priority_date ? Common.formatTime(data.priority_date) : "--";
                var color_combination = data.color_combination ? data.color_combination : "--";
                var applicant_chinese_name = data.applicant_chinese_name ? data.applicant_chinese_name : "--";
                var applicant_chinese_adress = data.applicant_chinese_adress ? data.applicant_chinese_adress : "--";
                var applicant_english_name = data.applicant_english_name ? data.applicant_english_name : "--";
                var applicant_english_adress = data.applicant_english_adress ? data.applicant_english_adress : "--";
                var is_common_brand = data.is_common_brand ? data.is_common_brand : "--";
                if (is_common_brand == "0") {
                    is_common_brand = "否";
                } else if (is_common_brand == "1") {
                    is_common_brand = "是";
                }
                var brand_agent_org = data.brand_agent_org ? data.brand_agent_org : "--";
                var brand_item = data.brand_item ? data.brand_item : "--";
                var application_process = data.application_process ? data.application_process : "--";
                var BrandHistoryArr = [];
                var currentBrandHistory = "";
                if (data.brand_history) {
                    //currentBrandHistory = inter_type.split(",")[0];
                    BrandHistoryArr = data.brand_history.split(",");
                }

                var flowStr = "";
                if (BrandHistoryArr.length >= 1) {
                    for (var i = 0; i < BrandHistoryArr.length; i++) {
                        var historyTime, historyContent;
                        historyTime = BrandHistoryArr[i].split('|')[0];
                        historyTime = Common.formatTime(historyTime);
                        historyContent = BrandHistoryArr[i].split('|')[1];
                        flowStr += historyTime + '&nbsp;&nbsp;' + historyContent + "<br/>";
                    }
                } else {
                    flowStr = '--';
                }
                var itemValue = [brand_reg_no, brand_state, inter_type, apply_date, special_term, brand_type, brand_audit_report_no, brand_audit_report_time, brand_reg_report_no, brand_reg_report_time, inter_reg_date, later_specified_date, priority_date, color_combination, applicant_chinese_name, applicant_chinese_adress, applicant_english_name, applicant_english_adress, is_common_brand, brand_agent_org, brand_item];

                var mainHtml = this.displayTable(itemKey, itemValue);
                htmlArr.push(mainHtml);
                $tbody.html(htmlArr.join(""));
                break;
            case "getpatentdetail":
                //专利详细信息
                var itemKey = [intl('138748' /* 专利名称  */ ), intl('138154' /* 申请号 */ ), intl('138152' /* 申请日 */ ), intl('138169' /* 授权号 */ ), intl('148894' /* 授权日 */ ), intl('149731' /* 公开公告号 */ ), intl('149732' /* 公开公告日 */ ), intl('138372' /* 法律状态 */ ), intl('138430' /* 专利类型 */ ), intl('138209' /* 分类号 */ ), intl('23527' /* 分类 */ ), intl('138659' /* 申请(专利权)人  */ ), intl('138137' /* 代理人 */ ), intl('138351' /* 发明人 */ ), intl('138123' /* 摘要/简要说明 */ )];
                var PatentName = data.PatentName ? data.PatentName : "--";
                var ApplyNumber = data.ApplyNumber ? data.ApplyNumber : "--";
                var ApplyData = data.ApplyData ? data.ApplyData : "--";
                var GrantAuthorizationNumber = data.GrantAuthorizationNumber ? data.GrantAuthorizationNumber : "--";

                var GrantAuthorizationDate = data.GrantAuthorizationDate ? data.GrantAuthorizationDate : "--";
                var ReleaseNumber = data.ReleaseNumber ? data.ReleaseNumber : "--";
                var ReleaseDate = data.ReleaseDate ? data.ReleaseDate : "--";


                var LawStatus = data.LawStatus ? data.LawStatus : "--";
                var PatentType = data.PatentType ? data.PatentType : "--";
                var ClassificationNumber = data.ClassificationNumber ? data.ClassificationNumber : "--";
                var ClassificationName = data.ClassificationName ? data.ClassificationName : "--";
                var ApplyPerson = data.ApplyPerson ? data.ApplyPerson : "--";
                var Agent = data.Agent ? data.Agent : "--";
                var Inventor = data.Inventor ? data.Inventor : "--";
                var Abstract1 = data.Abstract1 ? data.Abstract1 : "--";
                var PatentImage = data.PatentImage ? data.PatentImage : "";
                var itemValue = [PatentName, ApplyNumber, ApplyData, GrantAuthorizationNumber, GrantAuthorizationDate, ReleaseNumber, ReleaseDate, LawStatus, PatentType, ClassificationNumber, ClassificationName, ApplyPerson, Agent, Inventor, Abstract1];
                var htmlArr = [];
                var mainHtml = this.displayTable(itemKey, itemValue);
                htmlArr.push(mainHtml);
                // var picStr = "https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1490101034804&di=49a8364d2ebea13b5ad283688a0fc50d&imgtype=0&src=http%3A%2F%2Fwww.seeyoucctv.com%2Fuploads%2F130511%2F1-1305111H5143H.jpg";
                var PatentImageArr = PatentImage.split(",");
                var PatentImageStr = "";
                for (var i = 0; i < PatentImageArr.length; i++) {
                    PatentImageStr += "<img src='" + PatentImageArr[i] + "' width=300 height=200 onerror='this.src=\"../resource/images/Reports/no_photo.png\"; style=\"width:50px;height:auto;\"'/>"
                }
                htmlArr.push("<tr><td width='15%' class='title-item'>" + intl('138428' /* 专利图片 */ ) + "</td><td colspan=3>" + PatentImageStr + "</td></tr>");
                $tbody.html(htmlArr.join(""));
                break;
            case "getpermissiondetail":
                //许可详细信息
                var itemKey = [intl('138677' /* 企业名称 */ ), intl('138769' /* 登记编号 */ ), intl('', '许可名称'), intl('32098' /* 状态 */ ), intl('', '批准/发证日期'), intl('', '有效期'), intl('', '许可项目'), intl('138378' /* 许可内容 */ ), intl('', '许可内容品种/规格'), intl('138377' /* 许可机关 */ ), intl('1919', '备注')];
                var EnterpriseName = data.enterprise_name ? data.enterprise_name : "--";
                var PermissionFileNumber = data.permission_file_number ? data.permission_file_number : "--";
                var PermissionFileName = data.permission_file_name ? data.permission_file_name : "--";
                var PermissionStatus = data.permission_status ? data.permission_status : "--";
                var IssueDate = data.issue_date ? Common.formatTime(data.issue_date) : "--";
                var EffectiveStartDate = data.effective_start_date ? Common.formatTime(data.effective_start_date) : "--"
                var EffectiveExpirationDate = data.effective_expiration_date ? Common.formatTime(data.effective_expiration_date) : "--";
                var EffectiveDate = EffectiveStartDate + " 至 " + EffectiveExpirationDate;
                var LicenseProj = data.license_proj ? data.license_proj : "--";
                var LicenseContent = data.license_content ? data.license_content : "--";
                var LicenseContentVariety = data.license_content_variety ? data.license_content_variety : "--"; //LicenseContentVariety
                var LicenseDepartment = data.license_department ? data.license_department : "--";
                var Remark = data.remark ? data.remark : "--";
                var itemValue = [EnterpriseName, PermissionFileNumber, PermissionFileName, PermissionStatus, IssueDate, EffectiveDate, LicenseProj, LicenseContent, LicenseContentVariety, LicenseDepartment, Remark];
                var htmlArr = [];
                var mainHtml = this.displayTable(itemKey, itemValue);
                htmlArr.push(mainHtml);
                $tbody.html(htmlArr.join(""));
                break;
            case "getcertificationdetail":
                // 这里有两种模式，一种原始的资质认证、一种是高新企业认证
                var page_type = 'general_type';
                try {
                    page_type = parameter && parameter.detailType ? parameter.detailType : 'general_type';
                } catch (e) {}
                if (page_type == 'general_type') {
                    //认证详细信息
                    var itemKey = [intl('138198' /* 认证项目 */ ), intl('138197' /* 证书编号 */ ), intl('138240' /* 初次获证日期 */ ), intl('138267' /* 证书到期日期 */ ), intl('138551' /* 监督次数 */ ), intl('138550' /* 再认证次数 */ ), intl('138200' /* 认证依据 */ ), intl('138514' /* 认证依据的标准和技术要求 */ ), intl('138170' /* 证书使用的认可标识 */ ), intl('138409' /* 认证相关员工数量 */ ), intl('138230' /* 是否覆盖多场所 */ ), intl('138438' /* 认证覆盖的场所名称及地址 */ ), intl('138201' /* 颁证日期 */ ), intl('138249' /* 信息上报日期 */ )];
                    var cert_proj = data.cert_proj ? data.cert_proj : "--";
                    var cert_number = data.cert_number ? data.cert_number : "--";
                    var first_date = data.first_date ? Common.formatTime(data.first_date) : "--";
                    var effective_expiration_date = data.effective_expiration_date ? Common.formatTime(data.effective_expiration_date) : "--";
                    var supervision_times = data.supervision_times ? data.supervision_times : "--"
                    var re_cert_times = data.re_cert_times ? data.re_cert_times : "--";
                    var cert_basis = data.cert_basis ? data.cert_basis : "--";
                    var cert_standards_and_TR = data.cert_standards_and_TR ? data.cert_standards_and_TR : "--";
                    var cert_accreditation_identification = data.cert_accreditation_identification ? data.cert_accreditation_identification : "--";
                    var cert_employees_number = data.cert_employees_number ? data.cert_employees_number : "--";
                    var is_covered_multiple_sites = data.is_covered_multiple_sites ? data.is_covered_multiple_sites : "--";
                    var cert_cover_site_name_adress = data.cert_cover_site_name_adress ? data.cert_cover_site_name_adress : "--";
                    var issue_date = data.issue_date ? Common.formatTime(data.issue_date) : "--";
                    var infor_submission_date = data.infor_submission_date ? Common.formatTime(data.infor_submission_date) : "--";
                    var itemValue = [cert_proj, cert_number, first_date, effective_expiration_date, supervision_times, re_cert_times, cert_basis, cert_standards_and_TR, cert_accreditation_identification, cert_employees_number, is_covered_multiple_sites, cert_cover_site_name_adress, issue_date, infor_submission_date];
                    var htmlArr = [];
                    var mainHtml = this.displayTable(itemKey, itemValue);
                    htmlArr.push(mainHtml);

                    var cert_status = data.cert_status ? data.cert_status : "--";
                    var change_category = data.change_category ? data.change_category : "--";
                    var change_date = data.change_date ? Common.formatTime(data.change_date) : "--";
                    var suspension_start_date = data.uspension_start_date ? Common.formatTime(data.uspension_start_date) : "--";
                    var suspension_end_date = data.suspension_end_date ? Common.formatTime(data.suspension_end_date) : "--";
                    var revocation_date = data.revocation_date ? Common.formatTime(data.revocation_date) : "--";
                    var logout_date = data.logout_date ? Common.formatTime(data.logout_date) : "--";
                    var replacement_date = data.replacement_date ? Common.formatTime(data.replacement_date) : "--";
                    var product_category = data.product_category ? data.product_category : "--";
                    var prod_name_and_unit_major = data.prod_name_and_unit_major ? data.prod_name_and_unit_major : "--";
                    var prod_name_and_unit_minor = data.prod_name_and_unit_minor ? data.prod_name_and_unit_minor : "--";
                    var specification_model = data.specification_model ? data.specification_model : "--";
                    var cert_cover_business_scope = data.cert_cover_business_scope ? data.cert_cover_business_scope : "--";
                    var cert_client = data.cert_client ? data.cert_client : "--";

                    var changeHtml = "";
                    if (cert_status == "变更") {
                        changeHtml = "<tr><td width='15%' class='title-item item-middle'>" + intl('138199' /* 证书状态 */ ) + "</td><td colspan=3>" + cert_status + "</td></tr>";
                        changeHtml += "<tr><td width='15%' class='title-item'>" + intl('138202' /* 变更类别 */ ) + "</td><td width='35%'>" + change_category + "</td><td width='15%' class='title-item'>" + intl('138203' /* 变更日期 */ ) + "</td><td width='35%'>" + change_date + "</td></tr>";
                    } else if (cert_status == "暂停") {
                        changeHtml = "<tr><td width='15%' class='title-item item-middle'>" + intl('138199' /* 证书状态 */ ) + "</td><td colspan=3>" + cert_status + "</td></tr>";
                        changeHtml += "<tr><td width='15%' class='title-item'>" + intl('138520' /* 暂停开始日期 */ ) + "</td><td width='35%'>" + suspension_start_date + "</td><td width='15%' class='title-item'>" + intl('138521' /* 暂停结束日期 */ ) + "</td><td width='35%'>" + suspension_end_date + "</td></tr>";
                    } else if (cert_status == "撤销") {
                        changeHtml = "<tr><td width='15%' class='title-item'>" + intl('138199' /* 证书状态 */ ) + "</td><td width='35%'>" + cert_status + "</td><td width='15%' class='title-item'>" + intl('138776' /* 撤销日期 */ ) + "</td><td width='35%'>" + revocation_date + "</td></tr>";
                    } else if (cert_status == "注销") {
                        changeHtml = "<tr><td width='15%' class='title-item'>" + intl('138199' /* 证书状态 */ ) + "</td><td width='35%'>" + cert_status + "</td><td width='15%' class='title-item'>" + intl('138186' /* 注销日期 */ ) + "</td><td width='35%'>" + logout_date + "</td></tr>";
                    } else if (cert_status == "换证") {
                        changeHtml = "<tr><td width='15%' class='title-item'>" + intl('138199' /* 证书状态 */ ) + "</td><td width='35%'>" + cert_status + "</td><td width='15%' class='title-item'>" + intl('138489' /* 换证日期 */ ) + "</td><td width='35%'>" + replacement_date + "</td></tr>";
                    } else {
                        changeHtml = "<tr><td width='15%' class='title-item item-middle'>" + intl('138199' /* 证书状态 */ ) + "</td><td colspan=3>" + cert_status + "</td></tr>";
                        changeHtml += "<tr><td width='15%' class='title-item'>" + intl('138202' /* 变更类别 */ ) + "</td><td width='35%'>" + change_category + "</td><td width='15%' class='title-item'>" + intl('138203' /* 变更日期 */ ) + "</td><td width='35%'>" + change_date + "</td></tr>";
                    }
                    htmlArr.push(changeHtml);
                    htmlArr.push("<tr><td width='15%' class='title-item item-middle'>" + intl('138754' /* 产品类别 */ ) + "</td><td colspan=3>" + product_category + "</td></tr>");
                    htmlArr.push("<tr><td width='15%' class='title-item item-middle'>" + intl('138453' /* 产品名称及单元(主) */ ) + "</td><td colspan=3>" + prod_name_and_unit_major + "</td></tr>")
                    htmlArr.push("<tr><td width='15%' class='title-item item-middle'>" + intl('138454' /* 产品名称及单元(次) */ ) + "</td><td colspan=3>" + prod_name_and_unit_minor + "</td></tr>")
                    htmlArr.push("<tr><td width='15%' class='title-item item-middle'>" + intl('138513' /* 规格型号 */ ) + "</td><td colspan=3>" + specification_model + "</td></tr>")
                    htmlArr.push("<tr><td width='15%' class='title-item item-middle'>" + intl('138231' /* 认证覆盖的业务范围 */ ) + "</td><td colspan=3>" + cert_cover_business_scope + "</td></tr>")
                    htmlArr.push("<tr><td width='15%' class='title-item item-middle'>" + intl('138151' /* 认证委托人 */ ) + "</td><td colspan=3>" + cert_client + "</td></tr>")
                    $tbody.html(htmlArr.join(""));
                    break;
                } else {
                    //高新企业认证详细信息
                    var itemKey = [intl('138198', '认证项目'), intl('138197', '证书编号'), intl('', '有效期起'), intl('138802', '有效期至'), intl('', '认证机关')];
                    var cert_proj = data.cert_proj ? data.cert_proj : "--"; // 认证项目
                    var cert_number = data.cert_number ? data.cert_number : "--"; // 证书编号
                    var start_date = data.start_date ? Common.formatTime(data.start_date) : "--"; // 有效期起
                    var end_date = data.end_date ? Common.formatTime(data.end_date) : "--"; // 有效期至
                    var cert_authority = data.cert_authority ? data.cert_authority : "--"; // 认证机关
                    var itemValue = [cert_proj, cert_number, start_date, end_date, cert_authority];
                    var htmlArr = [];
                    var mainHtml = this.displayTable(itemKey, itemValue);
                    htmlArr.push(mainHtml);
                    $tbody.html(htmlArr.join(""));
                    break;

                }

            case "getinvitationbiddetail":
                //招投标-招标信息
                $tit.text("招标详细信息");
                var itemKey = [intl('114650', '项目编号'), intl('142476', '采购单位'), intl('34886', '项目名称'), intl('', '采购单位联系人'), intl('', '项目联系人'), intl('', '采购单位联系电话'), intl('', '项目联系电话'), intl('222824', '采购单位地址'), intl('222825', '行政区域'), intl('138908', '发布日期'), intl('32564', '代理机构名称'), intl('222826', '代理机构联系方式'), intl('222827', '代理机构地址'), intl('222793', '品目')];
                var ProjNum = data.ProjNum ? data.ProjNum : "--";
                var ProcurementUnit = data.ProcurementUnit ? data.ProcurementUnit : "--";
                var ProjName = data.ProjName ? data.ProjName : "--";
                var ProcurementPreson = data.ProcurementPreson ? data.ProcurementPreson : "--";
                var ProjPerson = data.ProjPerson ? data.ProjPerson : "--";
                var ProcurementTel = data.ProcurementTel ? data.ProcurementTel : "--";
                var ProjTel = data.ProjTel ? data.ProjTel : "--"
                var ProcurementAdd = data.ProcurementAdd ? data.ProcurementAdd : "--";
                var AdminDivision = data.AdminDivision ? data.AdminDivision : "--";
                var CertBasis = data.CertBasis ? data.CertBasis : "--";
                var IssueDate = data.IssueDate ? data.IssueDate : "--";
                var AgencyName = data.AgencyName ? data.AgencyName : "--";
                var AgencyTel = data.AgencyTel ? data.AgencyTel : "--";
                var AgencyAdd = data.AgencyAdd ? data.AgencyAdd : "--";
                var Items = data.Items ? data.Items : "--";
                var itemValue = [ProjNum, ProcurementUnit, ProjName, ProcurementPreson, ProjPerson, ProcurementTel, ProjTel, ProcurementAdd, AdminDivision, CertBasis, IssueDate, AgencyName, AgencyTel, AgencyAdd];
                var htmlArr = [];
                var mainHtml = this.displayTable(itemKey, itemValue);
                htmlArr.push(mainHtml);
                $tbody.html(htmlArr.join(""));
                break;
            case "getadminilicencedetail":
                //行政许可（信用中国）
                var itemKey = [intl('222773', '行政许可决定文书号'), intl('', '行政许可决定文书名称'), intl('222828', '许可编号'), intl('222830', '许可证书名称'), intl('222771', '许可决定日期'), intl('222768', '有效期起止日期'), intl('138377', '许可机关'), intl('', '审核类型')];
                var docId = data.docId ? data.docId : "--";
                var docName = data.docName ? data.docName : "--";
                var licenceId = data.licenceId ? data.licenceId : "--";
                var licenceName = data.licenceName ? data.licenceName : "--";
                var licenceDate = data.licenceDate ? Common.formatTime(data.licenceDate) : "--";
                var starDate = Common.formatTime(data.startDate);
                var endDate = Common.formatTime(data.endDate);
                var scopeDate = starDate + "至" + endDate;
                var officeStr = Common.formatCont(data.orgName);
                var type = data.type ? data.type : "--";
                if (data.orgId) {
                    officeStr = '<a class="underline wi-secondary-color wi-link-color" target="_blank" data-name="' + data.orgName + '" data-code="' + data.orgId + '">' + Common.formatCont(data.orgName) + '</a>'
                }
                var itemValue = [docId, docName, licenceId, licenceName, licenceDate, scopeDate, officeStr, type];
                var htmlArr = [];
                var mainHtml = this.displayTable(itemKey, itemValue);
                htmlArr.push(mainHtml);
                htmlArr.push(changeHtml);
                htmlArr.push("<tr><td width='15%' class='title-item item-middle' >" + intl('138378', '许可内容') + "</td><td colspan=3>" + Common.formatCont(data.content) + "</td></tr>");
                $tbody.html(htmlArr.join(""));
                break;
            case "gethisadminlicensedetail":
                //历史行政许可（信用中国）
                var itemKey = [intl('222773', '行政许可决定文书号'), intl('', '行政许可决定文书名称'), intl('222828', '许可编号'), intl('222830', '许可证书名称'), intl('222771', '许可决定日期'), intl('222768', '有效期起止日期'), intl('138377', '许可机关'), intl('', '审核类型')];
                var docId = data.docId ? data.docId : "--";
                var docName = data.docName ? data.docName : "--";
                var licenceId = data.licenceId ? data.licenceId : "--";
                var licenceName = data.licenceName ? data.licenceName : "--";
                var licenceDate = data.licenceDate ? Common.formatTime(data.licenceDate) : "--";
                var starDate = Common.formatTime(data.startDate);
                var endDate = Common.formatTime(data.endDate);
                var scopeDate = starDate + "至" + endDate;
                var officeStr = Common.formatCont(data.orgName);
                var type = data.type ? data.type : "--";
                if (data.orgId) {
                    officeStr = '<a class="underline wi-secondary-color wi-link-color" target="_blank" data-name="' + data.orgName + '" data-code="' + data.orgId + '">' + Common.formatCont(data.orgName) + '</a>'
                }
                var itemValue = [docId, docName, licenceId, licenceName, licenceDate, scopeDate, officeStr, type];
                var htmlArr = [];
                var mainHtml = this.displayTable(itemKey, itemValue);
                htmlArr.push(mainHtml);
                htmlArr.push(changeHtml);
                htmlArr.push("<tr><td width='15%' class='title-item item-middle' >" + intl('138378', '许可内容') + "</td><td colspan=3>" + Common.formatCont(data.content) + "</td></tr>");
                $tbody.html(htmlArr.join(""));
                break;
            case "getcommoditydetail":
                //商品_产品详细信息
                var nameStr = (data.CommodityName ? data.CommodityName : "") + '<i style="color:gray">' + (data.CommodityName2 ? data.CommodityName2 : "") + '</i>';
                var itemKey = [intl('138665' /* 品牌名称 */ ), intl('138758' /* 产品系列 */ ), intl('138867' /* 关键字 */ ), intl('138184' /* 简短描述 */ ), intl('138567' /* UNSPSC分类 */ ), intl('138174' /* 商品条形码 */ ), intl('138175' /* 条码类型 */ ), intl('138225' /* 原产国 */ ), intl('138439' /* 产地 */ ), intl('138161' /* 装配国 */ ), intl('138513' /* 规格型号 */ ), intl('9730' /* 宽度 */ ) + "/" + intl('6041' /* 高度 */ ) + "/" + intl('36515' /* 深度 */ ), intl('138584' /* 包装材料 */ ), intl('138426' /* 包装类型 */ )];
                var BrandName = data.BrandName ? data.BrandName : "--";
                var ProdSeries = data.ProdSeries ? data.ProdSeries : "--";
                var KeyWords = data.KeyWords ? data.KeyWords : "--";
                var ShortDescription = data.ShortDescription ? data.ShortDescription : "--";
                var UnspscClassifiction = data.UnspscClassifiction ? data.UnspscClassifiction : "--";
                var CommodityBarcodeNum = data.CommodityBarcodeNum ? data.CommodityBarcodeNum : "--";
                var BarcodeType = data.BarcodeType ? data.BarcodeType : "--";
                var OrginCountry = data.OrginCountry ? data.OrginCountry : "--"
                var OrginPlace = data.OrginPlace ? data.OrginPlace : "--";
                var AssmblyCountry = data.AssmblyCountry ? data.AssmblyCountry : "--";
                var SpecificationNum = data.SpecificationNum ? data.SpecificationNum : "--";
                var Width = data.Width ? data.Width : "--";
                var Height = data.Height ? data.Height : "--";
                var Depth = data.Depth ? data.Depth : "--";
                var AgencyAdd = data.AgencyAdd ? data.AgencyAdd : "--";
                var Size = Width + "/" + Height + "/" + Depth
                var Packaging = data.Packaging ? data.Packaging : "--";
                var PackageType = data.PackageType ? data.PackageType : "--";
                var itemValue = [BrandName, ProdSeries, KeyWords, ShortDescription, UnspscClassifiction, CommodityBarcodeNum, BarcodeType, OrginCountry, OrginPlace, AssmblyCountry, SpecificationNum, Size, Packaging, PackageType];
                var htmlArr = [];
                var mainHtml = this.displayTable(itemKey, itemValue);
                htmlArr.push(mainHtml);
                $tbody.html(htmlArr.join(""));
                break;
            case "getteleLicsdetail":
                //电信许可详细信息
                var itemKey = [intl('138677' /*企业名称*/ ), intl('138808' /*统一社会信用代码*/ ), intl('5529' /*法定代表人*/ ), intl('205398' /*许可证号*/ ), intl('138870' /*企业性质*/ ), intl('35779' /*注册资本*/ ), intl('205401' /*注册属地*/ ), intl('35776' /*注册地址*/ ), intl('205402' /*上市情况*/ ), intl('6440' /*股票代码*/ )];
                var companyName = data.corpName ? data.corpName : "--"; //企业名称
                var comId = data.creditCode ? data.creditCode : "--"; //信用代码
                var legalPerson = data.legalPerson ? data.legalPerson : '--'; //法人
                var permitNo = data.licNo ? data.licNo : '--'; //许可证号
                var comType = data.corpNat ? data.corpNat : '--'; //企业性质
                var registerMoney = data.regCapital ? Common.formatMoney(data.regCapital) : '--'; //注册资本
                var registerOf = data.regAreaCode ? data.regAreaCode : '--'; //注册属地
                var registerAddress = data.regAddress ? data.regAddress : '--'; //注册地址
                var listingStetus = data.listed ? data.listed : '--'; //上市情况
                var stockCode = data.stockCode ? data.stockCode : '--'; //股票代码
                var permitType = data.licCat ? data.licCat : '--'; //业务种类
                var phoneNum = data.complaintTel ? data.complaintTel : '--'; //服务电话
                var complaintNum = data.complaintNum ? data.complaintNum : '--'; //投诉量
                var complaintReply = data.complaintAnswer ? data.complaintAnswer : '--'; //投诉回复率
                var itemValue = [companyName, comId, legalPerson, permitNo, comType, registerMoney, registerOf, registerAddress, listingStetus, stockCode]
                var htmlArr = [];
                var mainHtml = this.displayTable(itemKey, itemValue);
                htmlArr.push(mainHtml);
                htmlArr.push("<tr><td width='20%' class='title-item'>" + intl('205403' /* 许可证业务种类 */ ) + "</td><td colspan=3>" + permitType + "</td></tr>");
                htmlArr.push("<tr><td width='20%' class='title-item'>" + intl('205385' /* 客户服务投诉电话 */ ) + "</td><td colspan=3>" + phoneNum + "</td></tr>");
                htmlArr.push("<tr><td width='20%' class='title-item'>" + intl('205391' /* 用户投诉量 */ ) + "</td><td width='30%'>" + phoneNum + "</td>");
                htmlArr.push("<td width='20%' class='title-item'>" + intl('205404' /* 用户投诉回复率 */ ) + "</td><td width='30%'>" + phoneNum + "</td></tr>");
                $tbody.html(htmlArr.join(""));
                break;
            case "getimpexpdetail":
                //进出口信用数据详情
                //注意这里分成了两个表
                var table_1_name = intl('138480' /*注册信息*/ );
                var table_2_name = intl('138480' /*信用异常信息*/ );
                var itemKey = [intl('205942' /*海关注册编码*/ ), intl('205420' /*注册海关*/ ), intl('205384' /*行政地区*/ ), intl('205423' /*经济地区*/ ), intl('205421' /*经营类别*/ ), intl('205424' /*特殊贸易区域*/ ), intl('205425' /*海关注销标志*/ ), intl('205426' /*年报情况*/ ), intl('138478' /*注册日期*/ ), intl('205427' /*报关有效期*/ ), intl('205428' /*行业种类*/ ), intl('205429' /*跨境贸易电子商务类型*/ ), intl('34947' /*信用等级*/ ), intl('205430' /*信用信息异常情况*/ )];
                var itemTitle = [intl('138741' /*序号*/ ), intl('205420' /*注册海关*/ ), intl('34947' /*信用等级*/ ), intl('205393' /*移入原因*/ ), intl('205395' /*移入时间*/ )];

                var customsId = data.hsCode ? data.hsCode : '--'; //海关注册编码
                var customs = data.regCust ? data.regCust : '--'; //注册海关
                var administration = data.areaName ? data.areaName : '--'; //行政地区
                var economic = data.ecoName ? data.ecoName : '--'; //经济地区
                var businessType = data.bizCatName ? data.bizCatName : '--'; //经营类别
                var specialArea = data.stzCode ? data.stzCode : '--'; //特殊贸易区域
                var customslogout = data.customFlag ? data.customFlag : '--'; //海关注销标志
                var report = data.annualDesc ? data.annualDesc : '--'; //年报情况
                var registerDate = data.regDate ? Common.formatTime(data.regDate) : '--'; //注册日期
                var validity = data.customExpires ? data.customExpires : '--'; //报关有效期
                var industryType = data.industry ? data.industry : '--'; //行业种类
                var onlineType = data.bizCode ? data.bizCode : '--'; //电商类型
                var creditLevel = data.creditLvlName ? data.creditLvlName : '--'; //信用等级
                var creditAbnormal = data.creditEx ? data.creditEx : '--'; //信用异常
                var itemValue = [customsId, customs, administration, economic, businessType, specialArea, customslogout, report, registerDate, validity, industryType, onlineType, creditLevel, creditAbnormal];
                var htmlArr = [];
                var mainHtml = this.displayTable(itemKey, itemValue);
                htmlArr.push(mainHtml);
                $tbody.html(htmlArr.join(""));
                $('#main').prepend('<div>' + intl('138480' /*注册信息*/ ) + '</div>')
                var creditAbnormalList = data.fails ? data.fails : []; //信用异常信息列表
                var htmlArr2 = [];
                if (creditAbnormalList.length > 0) {
                    //展示第二张表
                    $('#main').append('<div>' + intl('205422' /*信用异常信息*/ ) + '</div>');
                    htmlArr2.push('<table class="show-table"><tbody>');
                    htmlArr2.push('<tr><th class="bold_important ">' + intl('138741' /*序号*/ ) + '</th><th class="bold_important " align="left">' + intl('205420' /*注册海关*/ ) + '</th><th class="bold_important " align="left">' + intl('34947' /*信用等级*/ ) + '</th><th class="bold_important " align="left">' + intl('205393' /*移入原因*/ ) + '</th><th class="bold_important " align="left">' + intl('205395' /*移入时间*/ ) + '</th></tr>');
                    for (var i = 0; i < creditAbnormalList.length; i++) {
                        htmlArr2.push('<tr>');
                        htmlArr2.push('<td width="5%">' + (i + 1) + '</td>');
                        htmlArr2.push('<td width="25%">' + creditAbnormalList[i].custName + '</td>');
                        htmlArr2.push('<td width="25%">' + creditAbnormalList[i].creditLvl + '</td>');
                        htmlArr2.push('<td width="25%">' + creditAbnormalList[i].inCause + '</td>');
                        htmlArr2.push('<td width="20%">' + (creditAbnormalList[i].inDate ? Common.formatTime(creditAbnormalList[i].inDate) : '--') + '</td>');
                        htmlArr2.push('</tr>');
                    }
                    htmlArr2.push('</tbody></table>');
                    $('#main').append(htmlArr2.join(""));
                }
                break;
            case "getpublicnoticedetail":
                //公示催告详情
                var itemKey = [intl('138148' /*公告人*/ ), intl('137829' /*公告时间*/ )];
                var party = data.announcement_party ? Company.splitComKeyValueDetail(data.announcement_party) : '--'; //当事人
                var announcer = data.announcer ? data.announcer : '--'; //公告人
                var announcerTime = data.announcement_time ? Common.formatTime(data.announcement_time) : '--'; //公告时间
                var announcerContent = data.announcement_content ? data.announcement_content : '--'; //公告内容
                var itemValue = [announcer, announcerTime];
                var htmlArr = [];
                htmlArr.push("<tr><td width='20%' class='title-item'>" + intl('138427' /* 当事人 */ ) + "</td><td colspan=3>" + party + "</td></tr>");
                var mainHtml = this.displayTable(itemKey, itemValue);
                htmlArr.push(mainHtml);
                htmlArr.push("<tr><td width='20%' class='title-item'>" + intl('138142' /* 公告内容 */ ) + "</td><td colspan=3>" + announcerContent + "</td></tr>");
                $tbody.html(htmlArr.join(""));
                break;
            case "getfilinginfodetail":
                //立案信息详情
                var itemKey = [intl('138190' /*案号*/ ), intl('138196' /*案由*/ ), intl('205387' /*立案日期*/ ), intl('138229' /*开庭时间*/ ), intl('138144' /*公示时间*/ ), intl('149981' /*法院名称*/ )];
                var caseNo = data.announcement_no ? data.announcement_no : '--'; //案号
                var caseCause = data.announcement_cause ? data.announcement_cause : '--'; //案由
                var caseDate = data.filing_time ? Common.formatTime(data.filing_time) : '--'; //立案日期
                var openingTime = data.court_time ? Common.formatTime(data.court_time) : '--'; //开庭时间
                var publicTime = data.announcement_time ? Common.formatTime(data.announcement_time) : '--'; //公示时间
                var courtName = data.announcer ? data.announcer : '--'; //法院名称
                var party = data.announcement_party ? Company.splitComKeyValueDetail(data.announcement_party) : '--'; //当事人
                var publicContent = data.announcement_content ? data.announcement_content : '--'; //公示内容
                var itemValue = [caseNo, caseCause, caseDate, openingTime, publicTime, courtName];
                var htmlArr = [];
                var mainHtml = this.displayTable(itemKey, itemValue);
                htmlArr.push(mainHtml);
                htmlArr.push("<tr><td width='20%' class='title-item'>" + intl('138427' /* 当事人 */ ) + "</td><td colspan=3>" + party + "</td></tr>");
                htmlArr.push("<tr><td width='20%' class='title-item'>" + intl('205405' /* 公示内容 */ ) + "</td><td colspan=3>" + publicContent + "</td></tr>");
                $tbody.html(htmlArr.join(""));
                break;
            case "getlandmortgagedetail":
                //土地抵押详情
                var itemKey = [intl('205410' /*宗地标识*/ ), intl('100916' /*宗地编号*/ ), intl('205383' /*行政区*/ ), intl('100868' /*土地用途*/ ), intl('205411' /*土地他项权利人证号*/ ), intl('205412' /*土地使用权证号*/ ), intl('205413' /*土地抵押人*/ ), intl('205414' /*土地抵押人性质*/ ), intl('205390' /*土地抵押权人*/ ), intl('205415' /*抵押土地权属性质与使用权类型*/ ), intl('205389' /*土地面积(公顷)*/ ), intl('205408' /*抵押面积(公顷)*/ ), intl('205416' /*评估金额(万元)*/ ), intl('205409' /*抵押金额(万元)*/ ), intl('205417' /*抵押登记起始时间*/ ), intl('205418' /*抵押登记结束时间*/ )];
                var landLocation = data.landPos ? data.landPos : '--'; //土地坐落
                var landmark = data.parcelId ? data.parcelId : '--'; //宗地标识
                var landNo = data.parcelCode ? data.parcelCode : '--'; //宗地编号
                var administrative = data.regionCode ? data.regionCode : '--'; //行政区
                var landUse = data.landUsage ? data.landUsage : '--'; //土地用途
                var landPersonId = data.landHolderNum ? data.landHolderNum : '--'; //土地他项权利人证号
                var landUseId = data.landUseNum ? data.landUseNum : '--'; //土地使用权证号
                var landMortgagor = data.landMger ? data.landMger : '--'; //土地抵押人
                var landMortgagorType = data.landMgType ? data.landMgType : '--'; //土地抵押人性质
                var landMortgagorRight = data.landMgee ? data.landMgee : '--'; //土地抵押权人
                var landType = data.landPropRight ? data.landPropRight : '--'; //土地权属性与类型
                var landArea = data.landHa ? data.landHa : '--'; //土地面积
                var mortgageArea = data.landMgHa ? data.landMgHa : '--'; //抵押面积
                var assessmentMoney = data.landMgAmt ? Common.formatMoney(data.landMgAmt, [4, '&nbsp;']) : '--'; //评估金额
                var mortgageMoney = data.assessAmt ? Common.formatMoney(data.assessAmt, [4, '&nbsp;']) : '--'; //抵押金额
                var startTime = data.landMgStart ? Common.formatTime(data.landMgStart) : '--'; //开始时间
                var endTime = data.landMgEnd ? Common.formatTime(data.landMgEnd) : '--'; //结束时间
                var itemValue = [landmark, landNo, administrative, landUse, landPersonId, landUseId, landMortgagor, landMortgagorType, landMortgagorRight, landType, landArea, mortgageArea, assessmentMoney, mortgageMoney, startTime, endTime];
                var htmlArr = [];
                htmlArr.push("<tr><td width='20%' class='title-item'>" + intl('205407' /* 土地坐落 */ ) + "</td><td colspan=3>" + landLocation + "</td></tr>");
                var mainHtml = this.displayTable(itemKey, itemValue);
                htmlArr.push(mainHtml);
                $tbody.html(htmlArr.join(""));
                break;
            case "getlandannsdetail":
                //土地信息-地块公示
                //注意这里有两个表需要进行展示
                var itemKey = [intl('100916' /*宗地编号*/ ), intl('205383' /*行政区*/ ), intl('100868' /*土地用途*/ ), intl('205389' /*土地面积(公顷)*/ ), intl('205474' /*出让年限(年)*/ ), intl('205386' /*成交价格(万元)*/ ), intl('205473' /*受让单位*/ ), intl('205435' /*发布机关*/ ), intl('205440' /*公示期*/ ), intl('138908' /*发布日期*/ )];
                var publicTitle = data.annTitle ? data.annTitle : '--'; //公示标题
                var projectName = data.projName ? data.projName : '--'; //项目名称
                var landPosition = data.landLoc ? data.landLoc : '--'; //地块位置
                var landId = data.landNode ? data.landNode : '--'; //宗地编号
                var administration = data.regionCode ? data.regionCode : '--'; //行政区
                var landUse = data.landUsage ? data.landUsage : '--'; //土地用途
                var landMap = data.landHa ? data.landHa : '--'; //土地面积
                var outyear = data.landYeasNum ? data.landYeasNum : '--'; //出让年限???
                var getPrise = data.dealPrice ? Common.formatMoney(data.dealPrice, [4, '&nbsp;']) : '--'; //成交价格
                var getUnit = data.transferee ? data.transferee : '--'; //受让单位
                var gov = data.relAgency ? data.relAgency : '--'; //发布机关
                var publicDate = data.annStart ? (data.annEnd ? Common.formatTime(data.annStart) + '至' + Common.formatTime(data.annEnd) : '--') : '--'; //公示期???需要前端计算
                var outDate = data.relDate ? Common.formatTime(data.relDate) : '--'; //发布日期
                var opinion = data.feedbackMth ? data.feedbackMth : '--'; //意见反馈方式
                var tips = data.comment ? data.comment : '--'; //备注
                var itemValue = [landId, administration, landUse, landMap, outyear, getPrise, getUnit, gov, publicDate, outDate];
                var htmlArr = [];
                htmlArr.push("<tr><td width='20%' class='title-item'>" + intl('205475' /* 公示标题 */ ) + "</td><td colspan=3>" + publicTitle + "</td></tr>");
                htmlArr.push("<tr><td width='20%' class='title-item'>" + intl('205469' /* 项目名称 */ ) + "</td><td colspan=3>" + projectName + "</td></tr>");
                htmlArr.push("<tr><td width='20%' class='title-item'>" + intl('205434' /* 地块位置 */ ) + "</td><td colspan=3>" + landPosition + "</td></tr>");
                var mainHtml = this.displayTable(itemKey, itemValue);
                htmlArr.push(mainHtml);
                htmlArr.push("<tr><td width='20%' class='title-item'>" + intl('205943' /* 意见反馈方式 */ ) + "</td><td colspan=3>" + opinion + "</td></tr>");
                htmlArr.push("<tr><td width='20%' class='title-item'>" + intl('1919' /* 备注 */ ) + "</td><td colspan=3>" + tips + "</td></tr>");
                $tbody.html(htmlArr.join(""));
                $('#main').prepend('<div>' + intl('205476' /*地块基本信息*/ ) + '</div>');
                //第二张表
                var itemKey2 = [intl('205478' /*联系单位*/ ), intl('205477' /*单位地址*/ ), intl('16758' /*邮政编码*/ ), intl('205472' /*联系电话*/ ), intl('205467' /*联系人*/ ), intl('205466' /*电子邮件*/ )];
                var contactUnit = data.contactOrg ? data.contactOrg : '--'; //联系单位
                var address = data.orgAddr ? data.orgAddr : '--'; //单位地址
                var postalCode = data.postcode ? data.postcode : '--'; //邮政编码
                var contactPhone = data.contactTel ? data.contactTel : '--'; //联系电话
                var contactPeople = data.contactPsn ? data.contactPsn : '--'; //联系人
                var mail = data.email ? data.email : '--'; //电子邮件
                var itemValue2 = [contactUnit, address, postalCode, contactPhone, contactPeople, mail];
                var htmlArr2 = [];
                $('#main').append('<div>' + intl('205422' /*信用异常信息*/ ) + '</div>');
                htmlArr2.push('<table class="show-table"><tbody>');
                var mainHtml2 = this.displayTable(itemKey2, itemValue2);
                htmlArr2.push(mainHtml2);
                htmlArr2.push('</tbody></table>');
                $('#main').append(htmlArr2.join(""));
                break;
            case "getlandpurchasedetail":
                //土地信息-购地信息????
                //注意这里有两个表需要进行展示
                var itemKey = [intl('205383' /*行政区*/ ), intl('205491' /*电子监管号*/ ), intl('205389' /*土地面积(公顷)*/ ), intl('205462' /*土地资源*/ ), intl('205490' /*土地来源*/ ), intl('100868' /*土地用途*/ ), intl('205489' /*土地级别*/ ), intl('205488' /*供地方式*/ ), intl('205487' /*土地使用年限(年)*/ ), intl('205386' /*成交价格(万元)*/ ), intl('205486' /*土地使用权人*/ ), intl('15854' /*行业分类*/ ), intl('205485' /*约定容积率下限*/ ), intl('205484' /*约定容积率上限*/ ), intl('205436' /*合同签订日期*/ ), intl('205483' /*约定交地时间*/ ), intl('205482' /*约定开工时间*/ ), intl('205481' /*约定竣工时间*/ ), intl('205480' /*实际开工时间*/ ), intl('205479' /*实际竣工时间*/ )];
                var projectName = data.projName ? data.projName : '--'; //项目名称
                var projectPos = data.projPos ? data.projPos : '--'; //项目位置
                var administration = data.regionCode ? data.regionCode : '--'; //行政区
                var superviseId = data.supervisionCode ? data.supervisionCode : '--'; //电子监管号
                var landMap = data.landHa ? data.landHa : '--'; //土地面积
                var land = data.landRes ? data.landRes : '--'; //土地资源
                var landSouse = data.landOrigin ? data.landOrigin : '--'; //土地来源
                var landUse = data.landUsage ? data.landUsage : '--'; //土地用途
                var landLevel = data.levelName ? data.levelName : '--'; //土地级别
                var landType = data.landProvName ? data.landProvName : '--'; //供地方式
                var landYear = data.landYearsNum ? data.landYearsNum : '--'; //土地使用年限???
                var getMoney = data.dealPrice ? Common.formatMoney(data.dealPrice, [4, '&nbsp;']) : '--'; //成交价格
                var landPeople = data.landUser ? data.landUser : '--'; //土地使用权人
                var industry = data.industry ? data.industry : '--'; //行业分类
                var plotSub = data.maxVolRate ? data.maxVolRate : '--'; //容积率上限
                var plotPub = data.volRate ? data.volRate : '--'; //容积率下限
                var signDate = data.contractDate ? Common.formatTime(data.contractDate) : '--'; //合同签订日期
                var appointLandDate = data.promiseDeliverTime ? Common.formatTime(data.promiseDeliverTime) : '--'; //约定交地时间
                var appointStartDate = data.promiseStartTime ? Common.formatTime(data.promiseStartTime) : '--'; //约定开工时间
                var appointEndDate = data.promiseEndTime ? Common.formatTime(data.promiseEndTime) : '--'; //约定竣工时间
                var actualStartDate = data.realStartTime ? Common.formatTime(data.realStartTime) : '--'; //实际开工时间
                var actualEndDate = data.realEndTime ? Common.formatTime(data.realEndTime) : '--'; //实际竣工时间
                var ratifyUnit = data.approver ? data.approver : '--'; //批准单位
                var itemValue = [administration, superviseId, landMap, land, landSouse, landUse, landLevel, landType, landYear, getMoney, landPeople, industry, plotSub, plotPub, signDate, appointLandDate, appointStartDate, appointEndDate, actualStartDate, actualEndDate];
                var htmlArr = [];
                htmlArr.push("<tr><td width='20%' class='title-item'>" + intl('34886' /* 项目名称 */ ) + "</td><td colspan=3>" + projectName + "</td></tr>");
                htmlArr.push("<tr><td width='20%' class='title-item'>" + intl('205437' /* 项目位置 */ ) + "</td><td colspan=3>" + projectPos + "</td></tr>");
                var mainHtml = this.displayTable(itemKey, itemValue);
                htmlArr.push(mainHtml);
                htmlArr.push("<tr><td width='20%' class='title-item'>" + intl('205492' /* 批准单位 */ ) + "</td><td colspan=3>" + ratifyUnit + "</td></tr>");
                $tbody.html(htmlArr.join(""));
                $('#main').prepend('<div>' + intl('205468' /*基本信息*/ ) + '</div>');
                //第二张表
                var paymentList = data.pays ? data.pays : []; //分期支付约定list
                var htmlArr2 = [];
                if (paymentList.length > 0) {
                    //展示第二张表??后台没有这个数据
                    $('#main').append('<div>' + intl('205493' /*分期支付约定*/ ) + '</div>');
                    htmlArr2.push('<table class="show-table"><tbody>');
                    htmlArr2.push('<tr><th class="bold_important ">' + intl('138741' /*序号*/ ) + '</th><th class="bold_important " align="left">' + intl('205494' /*支付期号*/ ) + '</th><th class="bold_important " align="left">' + intl('205495' /*约定支付日期*/ ) + '</th><th class="bold_important " align="left">' + intl('205496' /*约定支付金额(万元)*/ ) + '</th><th class="bold_important " align="left">' + intl('205497' /*补充说明*/ ) + '</th><th class="bold_important " align="left">' + intl('1919' /*备注*/ ) + '</th></tr>');
                    for (var i = 0; i < paymentList.length; i++) {
                        htmlArr2.push('<tr>');
                        htmlArr2.push('<td>' + (i + 1) + '</td>');
                        htmlArr2.push('<td>' + (paymentList[i].payCode ? paymentList[i].payCode : '--') + '</td>');
                        htmlArr2.push('<td>' + (paymentList[i].payDate ? Common.formatTime(paymentList[i].payDate) : '--') + '</td>');
                        htmlArr2.push('<td>' + (paymentList[i].payAmt ? Common.formatMoney(paymentList[i].payAmt, [4, '&nbsp;']) : '--') + '</td>');
                        htmlArr2.push('<td>' + (paymentList[i].addtion ? paymentList[i].addtion : '--') + '</td>');
                        htmlArr2.push('<td>' + (paymentList[i].comment ? paymentList[i].comment : '--') + '</td>');
                        htmlArr2.push('</tr>');
                    }
                    htmlArr2.push('</tbody></table>');
                    $('#main').append(htmlArr2.join(""));
                }
                break;
            case "getlandtransdetail":
                //土地信息-土地转让
                var itemKey = [intl('205410' /*宗地标识*/ ), intl('100916' /*宗地编号*/ ), intl('205383' /*行政区*/ ), intl('205389' /*土地面积(公顷)*/ ), intl('100868' /*土地用途*/ ), intl('205489' /*土地级别*/ ), intl('205439' /*原土地使用权人*/ ), intl('205438' /*现土地使用权人*/ ), intl('206119' /*土地使用权类型*/ ), intl('205487' /*土地使用年限(年)*/ ), intl('205498' /*土地利用状况*/ ), intl('205463' /*转让方式*/ ), intl('205396' /*转让价格(万元)*/ ), intl('113991' /*成交时间*/ )];
                var landPos = data.landPos ? data.landPos : '--'; //土地坐落
                var landMark = data.parcelId ? data.parcelId : '--'; //宗地标识
                var landId = data.parcelCode ? data.parcelCode : '--'; //宗地编号
                var administration = data.regionCode ? data.regionCode : '--'; //行政区
                var landMap = data.landHa ? data.landHa : '--'; //土地面积
                var landUse = data.landUsage ? data.landUsage : '--'; //土地用途
                var landLevel = data.landLvl ? data.landLvl : '--'; //土地级别
                var oldLandPople = data.oldUser ? data.oldUser : '--'; //原土地使用权人
                var nowLandPople = data.curUser ? data.curUser : '--'; //现土地使用权人
                var landType = data.landPropRight ? data.landPropRight : '--'; //土地使用权类型
                var landYear = data.landYearsNum ? data.landYearsNum : '--'; //土地使用年限???
                var landState = data.landUseState ? data.landUseState : '--'; //土地利用状况
                var changeType = data.transType ? data.transType : '--'; //转让方式
                var changeMoney = data.transPrice ? Common.formatMoney(data.transPrice, [4, '&nbsp;']) : '--'; //转让价格
                var dealDate = data.dealTime ? Common.formatTime(data.dealTime) : '--'; //成交时间
                var itemValue = [landMark, landId, administration, landMap, landUse, landLevel, oldLandPople, nowLandPople, landType, landYear, landState, changeType, changeMoney, dealDate];
                var htmlArr = [];
                htmlArr.push("<tr><td width='20%' class='title-item'>" + intl('205407' /* 土地坐落 */ ) + "</td><td colspan=3>" + landPos + "</td></tr>");
                var mainHtml = this.displayTable(itemKey, itemValue);
                htmlArr.push(mainHtml);
                $tbody.html(htmlArr.join(""));
                break;
            case "getprojectsinfodetail":
                //企业业务-项目信息
                var projectName = data.projName ? data.projName : '--'; //项目名称
                var tags = data.tags ? data.tags : '--'; //标签
                var territory = data.domain ? data.domain : '--'; //所属领域
                var member = data.members ? data.members : '--'; //团队成员
                var webset = data.corpUrl ? Common.formatWebsite(data.corpUrl) : '--'; //企业官网
                var projDetail = data.projDetail ? data.projDetail : '--'; //项目简介
                var htmlArr = [];
                htmlArr.push("<tr><td width='20%' class='title-item'>" + intl('34886' /* 项目名称 */ ) + "</td><td width='30%' >" + projectName + "</td><td width='20%' class='title-item'>" + intl('205503' /*所属领域 */ ) + "</td><td width='30%' >" + territory + "</td></tr>");
                htmlArr.push("<tr><td width='20%' class='title-item'>" + intl('134893' /* 团队成员 */ ) + "</td><td width='80%' colspan=3>" + member + "</td></tr>");
                htmlArr.push("<tr><td width='20%' class='title-item'>" + intl('206243' /* 项目网址 */ ) + "</td><td width='80%' colspan=3>" + webset + "</td></tr>");
                htmlArr.push("<tr><td width='20%' class='title-item'>" + intl('15431' /* 项目简介 */ ) + "</td><td width='80%' colspan=3>" + projDetail + "</td></tr>");
                $tbody.html(htmlArr.join(""));
                $('#main a').removeClass('underline');
                break;
            case "gettradelblsdetail":
                //企业业务-品牌信息
                var itemKey = [intl('138665' /*品牌名称*/ ), intl('205508' /*产品品类*/ ), intl('205507' /*品牌中文名称*/ ), intl('205506' /*品牌英文名称*/ ), intl('205505' /*创立时间*/ ), intl('205504' /*发源地*/ )];
                var brandName = data.brandName ? data.brandName : '--'; //品牌名称
                var brandType = data.brandCategory ? data.brandCategory : '--'; //产品品类
                var brandNameCN = data.brandNameCN ? data.brandNameCN : '--'; //品牌中文名称
                var brandNameEN = data.brandNameEN ? data.brandNameEN : '--'; //品牌英文名称
                var brandBeginTime = data.brandBeginTime ? data.brandBeginTime : '--'; //创立时间
                var brandOrigin = data.brandOrigin ? data.brandOrigin : '--'; //发源地
                var brandUrl = data.brandUrl ? Common.formatWebsite(data.brandUrl) : '--'; //企业官网
                var brandAdWords = data.brandAdWords ? data.brandAdWords : '--'; //品牌广告词
                var brandCategory = data.brandDetail ? data.brandDetail : '--'; //品牌详情介绍
                var itemValue = [brandName, brandType, brandNameCN, brandNameEN, brandBeginTime, brandOrigin];
                var htmlArr = [];
                var mainHtml = this.displayTable(itemKey, itemValue);
                htmlArr.push(mainHtml);
                htmlArr.push("<tr><td width='20%' class='title-item'>" + intl('206242' /* 品牌网址 */ ) + "</td><td colspan=3>" + brandUrl + "</td></tr>");
                htmlArr.push("<tr><td width='20%' class='title-item'>" + intl('205509' /* 品牌广告词 */ ) + "</td><td colspan=3>" + brandAdWords + "</td></tr>");
                htmlArr.push("<tr><td width='20%' class='title-item'>" + intl('205510' /* 品牌详情介绍 */ ) + "</td><td colspan=3>" + brandCategory + "</td></tr>");
                $tbody.html(htmlArr.join(""));
                $('#main a').removeClass('underline');
                break;
            case "getbrandcombiningdetail":
                //品牌加盟
                var itemKey = [intl('222797', '加盟行业'), intl('222829', '门店总数'), intl('222798', '加盟模式'), intl('222803', '经营模式'), intl('222799', '基本投资'), intl('222800', '加盟费用'), intl('222831', '联系方'), intl('205472', '联系电话'), intl('222832', '联系传真'), intl('140100', '联系邮箱'), intl('222833', '适合人群')];
                var img = data.brandLogo ? data.brandLogo : '';
                var imgStr = '<span class="person_img"><img class="big-logo" width="40" src=' + img + ' onerror="src=\'../resource/images/Company/no-product.png\'"></span>';
                var brandName = imgStr + Common.formatCont(data.brandName); //品牌名称
                var industry = Common.formatCont(data.industry); //加盟行业
                var storeCount = Common.formatCont(data.storeCount); //门店总数
                var joinModel = Common.formatCont(data.joinModel); //加盟模式
                var businessModel = Common.formatCont(data.businessModel); //经营模式
                var basicInvestment = Common.formatCont(data.basicInvestment); //基本投资
                var joiningFree = Common.formatCont(data.joiningFree); //加盟费用
                var contact = Common.formatCont(data.contact); //联系方
                var phone = Common.formatCont(data.phone); //联系电话
                var fax = Common.formatCont(data.fax); //联系传真
                var email = Common.formatCont(data.email); //联系邮箱
                var suitablePerson = Common.formatCont(data.suitablePerson); //适合人群
                var itemValue = [industry, storeCount, joinModel, businessModel, basicInvestment, joiningFree, contact, phone, fax, email, suitablePerson];
                var htmlArr = [];
                var mainHtml = this.displayTable(itemKey, itemValue);
                htmlArr.push("<tr><td width='20%' class='title-item v-m'>" + intl('', '品牌名称') + "</td><td class='v-m text-c' colspan=3>" + brandName + "</td></tr>");
                htmlArr.push(mainHtml);
                $tbody.html(htmlArr.join(""));
                break;
            case "getecommercestoredetail":
                //电商店铺
                var itemKey = [intl('222802', '店铺类型'), intl('222804', '所属平台'), intl('222803', '经营模式'), intl('205467', '联系人'), intl('4944', '电话'), intl('3163', '传真'), intl('121011', '所在地区'), intl('37130', '邮编'), intl('19414', '地址')];
                var img = data.shopLogo ? data.shopLogo : '';
                var imgStr = "";
                if (img) {
                    imgStr = '<span class="person_img big-detail-img" style="margin-bottom:10px"><img class="big-logo" width="90" src=' + img + ' onerror="src=\'../resource/images/Company/no-shop.png\'"></span><br/>';
                } else {
                    imgStr = '<span class="person_img big-detail-img"><img class="big-logo" width="90" src="../resource/images/Company/no-shop.png"></span><br/>';
                }
                var shopName = imgStr + Common.formatCont(data.shopName); //店铺名称
                var shopType = Common.formatCont(data.shopType); //店铺类型
                var platformName = Common.formatCont(data.platformName); //所属平台
                var businessModel = Common.formatCont(data.businessModel); //经营模式
                var contactPerson = Common.formatCont(data.contactPerson); //联系人
                var phone = Common.formatCont(data.phone); //电话
                var fax = Common.formatCont(data.fax); //传真
                var area = Common.formatCont(data.area); //所在地区
                var postcode = data.postcode ? data.postcode : "--"; //邮编
                var address = Common.formatCont(data.address); //地址
                var htmlArr = [];
                var itemValue = [shopType, platformName, businessModel, contactPerson, phone, fax, area, postcode, address];
                htmlArr.push("<tr><td width='20%' class='title-item v-m'>" + intl('222801', '店铺名称') + "</td><td class='v-m text-c' colspan=3>" + shopName + "</td></tr>");
                var mainHtml = this.displayTable(itemKey, itemValue);
                htmlArr.push(mainHtml);
                $tbody.html(htmlArr.join(""));
                break;
            case "getstockpledgersdetail":
            case "getstockpledgeesdetail":
            case "getstockplexesdetail":
                //股票质押-出质人-质权人-出质标的
                var itemKey = [intl('138447' /*出质人*/ ), intl('138446' /*质权人*/ ), intl('138528' /*出质股权标的企业*/ ), intl('205511' /*质押数量(万股)*/ ), intl('205515' /*质押起始时间*/ ), intl('205514' /*质押结束时间*/ ), intl('205513' /*是否股权质押回购*/ ), intl('138143' /*公示日期*/ ), intl('205512' /*是否解押*/ ), intl('205464' /*解押日期*/ ), ];
                var pledger_id = data.pledger_id ? data.pledger_id : ''; //出质人id
                var pledgee_id = data.pledgee_id ? data.pledgee_id : ''; //质权人id
                var plex_id = data.plex_id ? data.plex_id : ''; //出质标的企业id
                var pledgor = data.pledger_name ? data.pledger_name : '--'; //出质人
                pledgor = pledger_id ? Common.jumpPersonOrCompany(pledgor, pledger_id) : pledgor; //出质人跳转
                var pledgee = data.pledgee_name ? data.pledgee_name : '--'; //质权人
                pledgee = pledgee_id ? Common.jumpPersonOrCompany(pledgee, pledgee_id) : pledgee; //质权人跳转
                var outCom = data.plex_name ? data.plex_name : '--'; //出质股权标的企业
                outCom = plex_id ? Common.jumpPersonOrCompany(outCom, plex_id) : outCom; //出质标的企业跳转
                var pledgeNum = data.amount ? data.amount : '--'; //质押数量
                var pledgeStartDate = data.startTime ? Common.formatTime(data.startTime) : '--'; //质押起始时间
                var pledgeEndDate = data.endTime ? Common.formatTime(data.endTime) : '--'; //质押结束时间
                var pledgeBack = data.isBuyback ? data.isBuyback : '--'; //是否股权质押回购
                var pubDate = data.announceDate ? Common.formatTime(data.announceDate) : '--'; //公示日期
                var soluPledge = data.isRelease ? data.isRelease : '--'; //是否解押
                var soluPledgeData = data.releaseDate ? Common.formatTime(data.releaseDate) : '--'; //解押日期
                var tips = data.brief ? data.brief : '--'; //相关说明
                var itemValue = [pledgor, pledgee, outCom, pledgeNum, pledgeStartDate, pledgeEndDate, pledgeBack, pubDate, soluPledge, soluPledgeData];
                var htmlArr = [];
                var mainHtml = this.displayTable(itemKey, itemValue);
                htmlArr.push(mainHtml);
                htmlArr.push("<tr><td width='20%' class='title-item'>" + intl('205465' /* 相关说明 */ ) + "</td><td colspan=3>" + tips + "</td></tr>");
                $tbody.html(htmlArr.join(""));
                $('#main a').removeClass('underline');
                break;
            case "getresearchreportdetail":
                //评级报告详细
                var nameStr = data.Title ? data.Title : "";
                var itemKey = [intl('9754' /* 来源 */ ), intl('19528' /* 时间 */ ), intl('19500' /* 内容 */ )];
                var Broker = data.Broker ? data.Broker : "--";
                var Date = data.Date ? data.Date : "--";
                var Abstractdata = data.Abstractdata ? data.Abstractdata : "--";
                var itemValue = [Broker, Date, Abstractdata];
                var htmlArr = [];
                var mainHtml = this.displayTable(itemKey, itemValue);
                htmlArr.push(mainHtml);
                $tbody.html(htmlArr.join(""));
                break;
            case "getrecuritdetail": //招聘
                var itemKey = [intl('138583' /* 工作地点 */ ), intl('9754' /* 来源 */ ), intl('138355' /* 职位描述 */ )];
                var workplace = data.workplace ? data.workplace : "--";
                var data_source = data.data_source ? data.data_source : "--";
                var job_description = data.job_description ? data.job_description : "--";
                var itemValue = [workplace, data_source, job_description];
                var htmlArr = [];
                var mainHtml = this.displayTable(itemKey, itemValue);
                htmlArr.push(mainHtml);
                $tbody.html(htmlArr.join(""));
                break;
            case "getdeliveryannouncedetail": //送达公告
                var itemKey = [intl('138190' /* 案号 */ ), intl('137829' /* 公告时间 */ ), intl('138148' /* 公告人 */ )];
                var CaseCause = data.announcement_no ? data.announcement_no : "--"; // 公告号
                var Time = data.announcement_time ? data.announcement_time : "--"; // 公告时间
                var Announcer = data.announcer ? data.announcer : "--"; // 公告人
                var Party = data.announcement_party ? Company.splitComKeyValueDetail(data.announcement_party) : "--"; // 当事人
                var NoticeContent = data.announcement_content ? data.announcement_content : "--"; // 公告内容
                var itemValue = [CaseCause, Time, Announcer, Party, NoticeContent];
                var htmlArr = [];
                var mainHtml = this.displayTable(itemKey, itemValue);
                htmlArr.push(mainHtml);
                htmlArr.push("<tr><td width='15%' class='title-item'>" + intl('138427' /* 当事人 */ ) + "</td><td colspan=3>" + Party + "</td></tr>");
                htmlArr.push("<tr><td width='15%' class='title-item'>" + intl('138142' /* 公告内容 */ ) + "</td><td colspan=3>" + NoticeContent + "</td></tr>");
                $tbody.html(htmlArr.join(""));
                break;
            case "getillegaltaxdetail": //税收违法
                var htmlArr = [];
                htmlArr.push("<tr><td colspan=4 class='title-tax-detail'>" + intl('138480' /* 注册信息 */ ) + "</td></tr>");
                var taxpayer_name = data.taxpayer_name ? data.taxpayer_name : "--";
                var taxpayer_id = data.taxpayer_id ? data.taxpayer_id : "--";
                var orga_code = data.orga_code ? data.orga_code : "--";
                var reg_adress = data.reg_adress ? data.reg_adress : "--";
                var itemKey = [intl('100095' /* 组织机构代码 */ ), intl('138767' /* 注册地址 */ )];
                var itemValue = [orga_code, reg_adress];
                var mainHtml = this.displayTable(itemKey, itemValue);
                if (taxpayer_name === Company.companyName) {
                    taxpayer_name = '<a class="underline wi-secondary-color wi-link-color" data-code="' + Company.companyCode + '" data-name="' + taxpayer_name + '" target="_blank" href="#">' + taxpayer_name + '</a>';
                }
                htmlArr.push("<tr><td colspan=1 class='title-item'>" + intl('138538' /* 纳税人名称 */ ) + "</td><td colspan=1>" + taxpayer_name + "</td><td colspan=1 class='title-item'>" + intl('138539', '纳税人识别号') + "</td><td colspan=1>" + taxpayer_id + "</td></tr>");
                htmlArr.push(mainHtml);

                htmlArr.push("<tr><td colspan=4 class='title-tax-detail'>" + intl('138188' /* 案件信息 */ ) + "</td></tr>");
                var release_date = data.release_date ? Common.formatTime(data.release_date) : "--";
                var case_nature = data.case_nature ? data.case_nature : "--";
                var illegal_facts = data.illegal_facts ? data.illegal_facts : "--";
                var inspection_unit = data.inspection_unit ? data.inspection_unit : "--";
                var itemKey = [intl('138908' /* 发布日期 */ ), intl('138189' /* 案件性质 */ )];
                var itemValue = [release_date, case_nature];
                var mainHtml = this.displayTable(itemKey, itemValue);
                htmlArr.push(mainHtml);
                htmlArr.push("<tr><td colspan=1 class='title-item'>" + intl('138384' /* 主要违法事实 */ ) + "</td><td colspan=3>" + illegal_facts + "</td></tr>");
                htmlArr.push("<tr><td colspan=1 class='title-item'>" + intl('138346' /* 实施检查单位 */ ) + "</td><td colspan=3>" + inspection_unit + "</td></tr>");

                htmlArr.push("<tr><td colspan=4 class='title-tax-detail'>" + intl('138487' /* 相关人员及公司 */ ) + "</td></tr>");
                var itemKey = [intl('138329' /* 证件名称 */ ), intl('138332' /* 证件号码 */ )];
                var legal_id = data.legal_id ? data.legal_id : "";
                var legal_name = data.legal_name ? data.legal_name : "--";
                var legal_gender = data.legal_gender ? data.legal_gender : "--";
                var legal_certificate_name = data.legal_certificate_name ? data.legal_certificate_name : "--";
                var legal_certificate_no = data.legal_certificate_no ? data.legal_certificate_no : "--";
                var itemValue = [legal_certificate_name, legal_certificate_no];
                var mainHtml = this.displayTable(itemKey, itemValue)

                if (legal_id) {
                    legal_name = '<a class="underline wi-secondary-color wi-link-color" data-code="' + legal_id + '" data-name="' + legal_name + '" target="_blank" href="#">' + legal_name + '</a>';
                }
                htmlArr.push("<tr><td colspan=1 class='title-item'>" + intl('138371' /* 法定代表人或者负责人 */ ) + "</td><td colspan=1>" + legal_name + "</td><td colspan=1 class='title-item'>" + intl('138713' /* 性别 */ ) + "</td><td colspan=1>" + legal_gender + "</td></tr>");

                htmlArr.push(mainHtml);

                var itemKey = [intl('138329' /* 证件名称 */ ), intl('138332' /* 证件号码 */ )];
                var financer_id = data.financer_id ? data.financer_id : "";
                var financer_name = data.financer_name ? data.financer_name : "--";
                var financer_gender = data.financer_gender ? data.financer_gender : "--";
                var legal_certificate_name = data.legal_certificate_name ? data.legal_certificate_name : "N/A";
                var legal_certificate_no = data.legal_certificate_no ? data.legal_certificate_no : "--";
                var itemValue = [legal_certificate_name, legal_certificate_no];
                var mainHtml = this.displayTable(itemKey, itemValue);

                if (financer_id) {
                    financer_name = '<a class="underline wi-secondary-color wi-link-color" data-code="' + financer_id + '" data-name="' + financer_name + '" target="_blank" href="#">' + financer_name + '</a>';
                }
                htmlArr.push("<tr><td colspan=1 class='title-item'>" + intl('138295' /* 负有直接责任的财务负责人 */ ) + "</td><td colspan=1>" + financer_name + "</td><td colspan=1 class='title-item'>" + intl('138713' /* 性别 */ ) + "</td><td colspan=1>" + financer_gender + "</td></tr>");

                htmlArr.push(mainHtml);

                //htmlArr.push("<tr><td colspan=4 class='title-tax-detail'></td></tr>");
                var agency_name = data.agency_name ? data.agency_name : "--";
                var agency_id = data.agency_id ? data.agency_id : "";
                if (agency_id) {
                    agency_name = '<a class="underline wi-secondary-color wi-link-color" data-code="' + agency_id + '" data-name="' + agency_name + '" target="_blank" href="#">' + agency_name + '</a>';
                }
                htmlArr.push("<tr><td>" + intl('138138' /* 负有直接责任的中介机构 */ ) + "</td>><td colspan=3>" + agency_name + "</td></tr>");

                var itemKey = [intl('138329' /* 证件名称 */ ), intl('138332' /* 证件号码 */ )];
                var agency_employee_id = data.agency_employee_id ? data.agency_employee_id : "";
                var agency_employee_name = data.agency_employee_name ? data.agency_employee_name : "--";
                var agency_employee_gender = data.agency_employee_gender ? data.agency_employee_gender : "--";
                var agency_employee_certificate_name = data.agency_employee_certificate_name ? data.agency_employee_certificate_name : "N/A";
                var agency_employee_certificate_no = data.agency_employee_certificate_no ? data.agency_employee_certificate_no : "--";
                var itemValue = [agency_employee_certificate_name, agency_employee_certificate_no];
                var mainHtml = this.displayTable(itemKey, itemValue);
                //htmlArr.push("<tr><td colspan=4></td></tr>");
                if (agency_employee_id) {
                    agency_employee_name = '<a class="underline wi-secondary-color wi-link-color" data-code="' + agency_employee_id + '" data-name="' + agency_employee_name + '" target="_blank" href="#">' + agency_employee_name + '</a>';
                }
                htmlArr.push("<tr><td colspan=1 class='title-item'>" + intl('138271' /* 负有直接责任的从业人员 */ ) + "</td><td colspan=1>" + agency_employee_name + "</td><td colspan=1 class='title-item'>性别</td><td colspan=1>" + agency_employee_gender + "</td></tr>");
                htmlArr.push(mainHtml);
                $tbody.html(htmlArr.join(""));

                $($tbody).off('click').on('click', '.underline', Company.linkWithCodeEventHandler);
                break;
            case "judicailassistdetail": //司法协助详情
                var itemKeys = [intl('138228' /* 执行法院 */ ), intl('138336' /* 执行事项 */ ), intl('149982', '执行裁定文书号'), intl('138523' /* 执行通知书文号 */ ), intl('138592' /* 被执行人 */ ), intl('138616' /* 被执行人持有股权、其它投资权益的数额 */ )];
                var itemOne = [intl('138307' /* 冻结期限自 */ ), intl('138308' /* 冻结期限至 */ ), intl('138306' /* 冻结期限 */ ), intl('138143' /* 公示日期 */ ), intl('138277' /* 股权所在企业 */ )];
                var itemTwo = [intl('138238' /* 解除冻结日期 */ ), intl('138143' /* 公示日期 */ )];
                var itemThree = [intl('138290' /* 失效原因 */ ), intl('138291' /* 失效时间 */ ), intl('138143' /* 公示日期 */ )];
                var itemFour = [intl('138163' /* 受让人 */ ), intl('138330' /* 受让人证件类型 */ ), intl('138333' /* 受让人证件号码 */ ), intl('138143' /* 公示日期 */ )];
                var state = data.status || '冻结';
                var stateObjs = { '冻结': 1, '部分股权冻结': 1, '全部股权冻结': 1, '续行冻结等': 1, '解除冻结': 2, '续行解除冻结': 2, '已解冻': 2, '失效': 3, '续行失效': 3, '股权变更': 4 };
                var val = stateObjs[state];

                var displayKey = itemKeys;
                var exe_court = data.exe_court ? data.exe_court : "--";
                var exe_item = data.exe_item ? data.exe_item : "--";
                var exe_notice_no = data.exe_notice_no ? data.exe_notice_no : "--";
                var exe_ruling_no = data.exe_ruling_no ? data.exe_ruling_no : "--";
                var executed_person = data.executed_person ? data.executed_person : "--";
                var stock_share = data.stock_share ? data.stock_share + '万' + (data.currency ? data.currency : '') : "--";
                var displayVal = [exe_court, exe_item, exe_notice_no, exe_ruling_no, executed_person, stock_share];
                switch (val) {
                    case 1:
                        displayKey = displayKey.concat(itemOne);
                        var start_freeze_date = Common.formatTime(data.start_freeze_date);
                        var end_freeze_date = Common.formatTime(data.end_freeze_date);
                        var freeze_due_date = Common.formatTime(data.freeze_due_date);
                        var announce_date = Common.formatTime(data.announce_date);
                        var belong_corp = data.belong_corp || '--';
                        displayVal = displayVal.concat([start_freeze_date, end_freeze_date, freeze_due_date, announce_date, belong_corp]);
                        var htmlArr = [];
                        var mainHtml = this.displayTable(displayKey, displayVal);
                        htmlArr.push(mainHtml);
                        $tbody.html(htmlArr.join(""));
                        break;
                    case 2:
                        displayKey = displayKey.concat(itemTwo);
                        var freeze_period = data.freeze_period || '--';
                        var announce_date = Common.formatTime(data.announce_date);
                        displayVal = displayVal.concat([freeze_period, announce_date]);
                        var htmlArr = [];
                        var mainHtml = this.displayTable(displayKey, displayVal);
                        htmlArr.push(mainHtml);
                        $tbody.html(htmlArr.join(""));
                        break;
                    case 3:
                        displayKey = displayKey.concat(itemThree);
                        var invalid_reason = data.invalid_reason || '--';
                        var invalid_time = data.invalid_time || '--';
                        var announce_date = Common.formatTime(data.announce_date);
                        displayVal = displayVal.concat([invalid_reason, invalid_time, announce_date]);
                        var htmlArr = [];
                        var mainHtml = this.displayTable(displayKey, displayVal);
                        htmlArr.push(mainHtml);
                        $tbody.html(htmlArr.join(""));
                        break;
                    case 4:
                        displayKey = displayKey.concat(itemFour);
                        var assignee = data.assignee || '--';
                        var assignee_ident_type = data.assignee_ident_type || '--';
                        var assignee_ident_id = data.assignee_ident_id || '--';
                        var announce_date = Common.formatTime(data.announce_date);
                        displayVal = displayVal.concat([assignee, assignee_ident_type, assignee_ident_id, announce_date]);
                        var htmlArr = [];
                        var mainHtml = this.displayTable(displayKey, displayVal);
                        htmlArr.push(mainHtml);
                        $tbody.html(htmlArr.join(""));
                        break;
                    default:
                        var htmlArr = [];
                        var mainHtml = this.displayTable(displayKey, displayVal);
                        htmlArr.push(mainHtml);
                        $tbody.html(htmlArr.join(""));
                        break;
                }
                break;

        }
    },
    splitComKeyValueDetail: function(input_data) {
        //用来拆分例如 '当事人:xxx|123456,被告:yyy|89757' 这种情况(用于详情)
        var announcement_party = input_data;
        var announcement_party_dic = {}; //用来存不同key下的实体连接
        var htmlStr = ''; //存放带有跳转链接的公司或人物实体
        if (announcement_party && announcement_party.length > 0) {
            var announcement_party_arr = announcement_party.split(',');
            for (var i = 0; i < announcement_party_arr.length; i++) {
                var pro_item = announcement_party_arr[i];
                var pro_key = pro_item.split("-")[0].replace(/(^\s*)|(\s*$)/g, "");
                var pro_name_code = pro_item.split("-")[1].replace(/(^\s*)|(\s*$)/g, "");
                var pro_name = pro_name_code.split('|')[0];
                var pro_code = pro_name_code.split('|')[1];
                var pro_input = pro_code ? Common.jumpPersonOrCompany(pro_name, pro_code) : pro_name;
                if (announcement_party_dic.hasOwnProperty(pro_key)) {
                    announcement_party_dic[pro_key].push(pro_input);
                } else {
                    announcement_party_dic[pro_key] = [];
                    announcement_party_dic[pro_key].push(pro_input);
                }
            }
            var title_value = ''; //存放不带链接的公司或人物实体(可删除)
            for (var p_key in announcement_party_dic) {
                var p_value = announcement_party_dic[p_key].join(',');
                title_value += announcement_party_dic[p_key].join(',') + ',';
                htmlStr += p_key + ' - ' + p_value + '<br/>';
            }
            title_value = title_value.substring(0, title_value.length - 1);

            return htmlStr;
        } else {
            return "--";
        }
    },
    splitComKeyValueList: function(input_data) {
        //用来拆分例如 {当事人:xxx|123456,被告:yyy|89757} 这种情况(用于列表)
        //  	input_data = {'当事人':["天津世隆华昇科技发展有限公司|1171127474","天津|1171127474","天津世|"],'被告':["ssss|"]}
        var announcement_party = input_data;
        var announcement_party_dic = {}; //用来存不同key下的实体连接
        var htmlStr = ''; //存放带有跳转链接的公司或人物实体
        if (input_data) {
            for (var p_key in input_data) {
                var p_value_list = input_data[p_key];
                for (var pii = 0; pii < p_value_list.length; pii++) {
                    var pro_name = p_value_list[pii].split('|')[0];
                    var pro_code = p_value_list[pii].split('|')[1];
                    var pro_input = pro_code ? Common.jumpPersonOrCompany(pro_name, pro_code) : pro_name;
                    if (announcement_party_dic.hasOwnProperty(p_key)) {
                        announcement_party_dic[p_key].push(pro_input);
                    } else {
                        announcement_party_dic[p_key] = [];
                        announcement_party_dic[p_key].push(pro_input);
                    }
                }
            }
            var title_value = ''; //存放不带链接的公司或人物实体(可删除)
            for (var p_key in announcement_party_dic) {
                var p_value = announcement_party_dic[p_key].join(',');
                title_value += announcement_party_dic[p_key].join(',') + ',';
                htmlStr += p_key + ' - ' + p_value + '<br/>';
            }
            title_value = title_value.substring(0, title_value.length - 1);

            return htmlStr;
        } else {
            return '--';
        }

    },
    displayTable: function(itemKey, itemValue, arr, changeCss) {
        var htmlArr = [];
        var len = Math.ceil(itemKey.length / 2);
        var isYushu = itemKey.length % 2 != 0 ? true : false; //是否有余数,true代表有,有余数最后一行则需要合并表格
        var itemTitleCss = changeCss ? ' detail-item-title' : '';
        var itemValueCss = changeCss ? ' detail-item-value' : '';
        for (var i = 0; i < len; i++) {
            var tmpHtml = "";
            if (i == len - 1 && isYushu) {
                var tmpHtml = "<tr><td width='20%' class='title-item item-middle" + itemTitleCss + "''>" + itemKey[i * 2] + "</td><td class='" + itemTitleCss + "' colspan=3>" + itemValue[i * 2] + "</td></tr>";
            } else {
                var tmpHtml = "<tr><td width='20%' class='title-item" + itemTitleCss + "'>" + itemKey[i * 2] + "</td><td class='" + itemValueCss + "' width='30%'>" + itemValue[i * 2] + "</td><td width='20%' class='title-item" + itemTitleCss + "''>" + itemKey[i * 2 + 1] + "</td><td class='" + itemValueCss + "'  width='30%'>" + itemValue[i * 2 + 1] + "</td></tr>";
            }
            htmlArr.push(tmpHtml);
        }
        if (arr) {
            var tmpHtml = "<tr><td width='15%' class='title-item' rowspan='" + arr[0] + "'>" + intl('138620' /* 抵押物描述 */ ) + "</td>";
            htmlArr.push(tmpHtml);
            for (var dld = 0; dld < arr[0]; dld++) {
                var tmpHtml = "<td width='35%' class='dpawn_back'>" + arr[dld * 2 + 1] + "</td><td width='50%' colspan='2' class='dpawn_back'>" + arr[dld * 2 + 2] + "</td>";
                tmpHtml = tmpHtml + '</tr>';
                htmlArr.push(tmpHtml);
            }
        }
        return htmlArr.join("");
    },
    drawCourt: function() {
        //裁判文书图
        var tmpStr = [];
        tmpStr.push('<div class="widget-model" id="modelDrawCount"><div class="widget-header"><span class="fl">裁判文书统计分析</span>');
        tmpStr.push('<div class="fl tab-chart"><a class="tab-change-chart wi-secondary-color">案由Top10</a><a class="tab-change-chart">案件类型</a><a class="tab-change-chart">判决结果</a><a class="tab-change-chart">原告被告角色</a><a class="tab-change-chart">判决年份分布</a></div></div>')
        tmpStr.push('<div class="draw-court-container" id="drawCountCon"></div>')
        tmpStr.push('</div>')
        return tmpStr.join("");
    },
    drawBrand: function() {
        //商标图
        var tmpStr = [];
        tmpStr.push('<div class="widget-model" id="modelDrawBrand"><div class="widget-header"><span class="fl">商标统计分析</span>');
        tmpStr.push('<div class="fl tab-chart"><a class="tab-change-chart wi-secondary-color">申请年份分布</a><a class="tab-change-chart">商标分类分布</a><a class="tab-change-chart">商标状态分布</a></div></div>')
        tmpStr.push('<div class="draw-court-container" id="drawBrandCon"></div>')
        tmpStr.push('</div>')
        return tmpStr.join("");
    },
    drawPatent: function() {
        //专利图
        var tmpStr = [];
        tmpStr.push('<div class="widget-model" id="modelDrawPatent"><div class="widget-header"><span class="fl">专利统计分析</span>');
        tmpStr.push('<div class="fl tab-chart"><a class="tab-change-chart wi-secondary-color">专利年份分布</a><a class="tab-change-chart">专利类型分布</a><a class="tab-change-chart">专利状态分布</a>  <a class="tab-change-chart">专利类型统计表</a>  <a class="tab-change-chart">专利分类统计表</a>  </div></div>')
        tmpStr.push('<div class="draw-court-container" id="drawPatentCon"></div>')
        tmpStr.push('</div>')
        return tmpStr.join("");
    },
    showSecondTabInfo: function() {
        //画医药库产品信息里面的表格数字
        console.log(Company.productType)
        var type = Company.productType;
        var tmpArr = [];
        var oIndex = Company.productTypeArr.indexOf(Company.productType);
        oIndex++
        tmpArr.push('<div class="change-medicine-info" id="changemedicineinfo">');
        var nameArr = ['临床申请记录', '临床试验记录', '上市申请记录', '获批上市记录']
        var numArr = ['_clinicalApplication', '_clinicalTest', '_listingApplication', '_listedApproved'];
        var starNum = oIndex == 4 ? 2 : 0
        for (var i = starNum; i < nameArr.length; i++) {
            if (Company.basicNum['num0' + oIndex + numArr[i]]) {
                tmpArr.push('<span class="each-change-tag" data-val="' + nameArr[i] + '">' + nameArr[i] + '(' + Company.basicNum['num0' + oIndex + numArr[i]] + ')</span>');
            } else {
                tmpArr.push('<span class="each-change-tag nojump" data-val="' + nameArr[i] + '">' + nameArr[i] + '(0)</span>');
            }
        }
        tmpArr.push('</div>')
        return tmpArr.join("")
    },
    drawTab: function(tableSetting, tableId, tbodyId, noloading, hasMore, oIndex) {
        //画表头
        var tableHtmlArr = [];
        var moreStr = "";
        var outExcelType = ""; //需要导出excel的模块
        var tabStr = ""
        if (oIndex == 0 || oIndex) {

            var firstTableSetting = tableSetting[0];
            var oldtableSetting = tableSetting;
            tableSetting = tableSetting[oIndex];
            var tabStrArr = [];
            tabStrArr.push('<div class="fl tab-style" data-fn="' + firstTableSetting.fn + '">');
            var tabChange = firstTableSetting.tabChange;
            if (tabChange) {
                if (tableSetting.fn == "showmedicinebid") {
                    oIndex = Company.bidTypeArr.indexOf(Company.bidType);
                }
                for (var i = 0; i < tabChange.type.length; i++) {
                    var eachBasicNum = tabChange.typeBasicNum[i];
                    if (eachBasicNum === true || (eachBasicNum && Company.basicNum[eachBasicNum] && Company.basicNum[eachBasicNum] != 0)) {
                        var tabNumStr = eachBasicNum === true ? '' : '(' + Company.basicNum[eachBasicNum] + ')'
                        if (oIndex == i) {
                            tabStrArr.push('<a class="tab-second-style wi-secondary-color" data-fn="' + (oldtableSetting[i] ? oldtableSetting[i].fn : '') + '" data-index="' + i + '">' + tabChange.type[i] + tabNumStr + '</a>')
                        } else {
                            tabStrArr.push('<a class="tab-second-style" data-fn="' + (oldtableSetting[i] ? oldtableSetting[i].fn : '') + '" data-index="' + i + '">' + tabChange.type[i] + tabNumStr + '</a>')
                        }

                    } else {
                        var numText = ''
                        if (tableSetting.interface !== 'getcompbussinessdata') {
                            numText = '(0)'
                        }
                        if (oIndex == i) {
                            tabStrArr.push('<a class="nojump wi-secondary-color tab-second-style" data-fn="' + (oldtableSetting[i] ? oldtableSetting[i].fn : '') + '" data-index="' + i + '">' + tabChange.type[i] + numText + '</a>')
                        } else {
                            tabStrArr.push('<a class="nojump tab-second-style" data-fn="' + (oldtableSetting[i] ? oldtableSetting[i].fn : '') + '" data-index="' + i + '">' + tabChange.type[i] + numText + '</a>')
                        }
                    }
                }
            }
            tabStrArr.push("</div>");
            tabStr = tabStrArr.join("");
        }
        var changeTab = ""; //切换表格，目前只有医药库有
        if (tableSetting.fn == "showmedicineinfo") {
            var showmedicineinfoNum = Company.basicNum.num01 + Company.basicNum.num02 + Company.basicNum.num03 + Company.basicNum.num04
            if (showmedicineinfoNum > 0) {
                //有数据才显示
                changeTab = '<div class="module-medicineinfo"><div id="drawMedicineInfo"></div>'
                changeTab += Company.showSecondTabInfo()
            }
        }
        if (tableSetting.fn == "showmedicinebid") {
            changeTab = '<div class="module-medicineinfo"><div id="drawMedicineBid"></div><div class="change-medicine-info" id="changemedicineBid">';
            if (Company.basicNum.drug_bid_num && Company.basicNum.drug_bid_num != 0) {
                changeTab += '<span class="each-change-tag" data-val="药品">药品(' + Company.basicNum.drug_bid_num + ')</span>'
            } else {
                changeTab += '<span class="each-change-tag nojump" data-val="药品">药品(' + Company.basicNum.drug_bid_num + ')</span>'
            }
            if (Company.basicNum.instrument_bid_num && Company.basicNum.instrument_bid_num != 0) {
                changeTab += '<span class="each-change-tag" data-val="器械">器械(' + Company.basicNum.instrument_bid_num + ')</span>'
            } else {
                changeTab += '<span class="each-change-tag nojump" data-val="器械">器械(' + Company.basicNum.instrument_bid_num + ')</span>'
            }
            changeTab += "</div>"
        }
        switch (tableSetting.interface) {
            case "GetCompanyMainMemberInfo":
                outExcelType = "member";
                break;
            case "getshareholder":
                outExcelType = "shareholder";
                break;
            case "GetCompanyBranchInfo":
                outExcelType = "branch";
                break;
            case "getforeigninvest":
                outExcelType = "invest";
                break;
        }
        var connectWFTStr = "";
        var selStr = "";
        switch (tableSetting.moreLink) {
            case "getcourtannouncement":
                selStr = '<select data-dom="getcourtannouncement" class="sel-status" data-val="courtannouncementSelVal" data-fn="getcourtannouncement"><option value="">全部案由</option></select>';
                break;
            case "getcourtopenannouncement":
                selStr = '<select data-dom="getcourtopenannouncement" class="sel-status" data-val="courtopenannouncementSelVal" data-fn="getcourtopenannouncement"><option value="">全部案由</option></select>';
                break;
            case "getbrand":
                selStr = '<select data-dom="getbrand" class="sel-status" data-val="brandSelVal" data-fn="getbrand"><option value="">全部状态</option></select>';
                break;
            case "getproductioncopyright":
                selStr = '<select data-dom="getproductioncopyright" class="sel-status" data-val="productioncopyrightSelVal" data-fn="getproductioncopyright"><option value="">全部类型</option></select>';
                break;
            case "getcourtdecision":
                selStr = '<select data-dom="getcourtdecision" class="sel-status" data-val="courtTypeVal" data-fn="getcourtdecision"><option value="">全部案件类型</option></select><select data-dom="getcourtdecision" class="sel-status" data-val="courtdecisionResultVal" data-fn="getcourtdecision"><option value="">全部判决结果</option></select><select data-dom="getcourtdecision" class="sel-status" data-val="courtdecisionCauseVal" data-fn="getcourtdecision"><option value="">全部案由</option></select>';
                break;
            case "getauthentication":
                selStr = '<select data-dom="getauthentication" class="sel-status" data-val="authenticationTypeSelVal" data-fn="getauthentication"><option value="">全部类型</option></select><select data-dom="getauthentication" class="sel-status" data-val="authenticationSelVal" data-fn="getauthentication"><option value="">全部状态</option></select>';
                break;
            case "getowingtax":
                selStr = '<select data-dom="getowingtax" class="sel-status" data-val="owingtaxSelVal" data-fn="getowingtax"><option value="">全部税种</option></select>';
                break;
            case "getjudicialsale":
                selStr = '<select data-dom="getjudicialsale" class="sel-status" data-val="judicialsaleSelVal" data-fn="getjudicialsale"><option value="">全部状态</option></select>';
                break;
            case "showDirectInvestment":
                selStr = '<select data-dom="showDirectInvestment" class="sel-status" data-val="investStatusVal" data-fn="showDirectInvestment"><option value="">全部状态</option></select><select data-dom="showDirectInvestment" class="sel-status" data-val="investRatioVal" data-fn="showDirectInvestment"><option value="">全部持股比例</option></select>';
                break;
            case "biddingInfo":
                selStr = '<select data-dom="biddingInfo" class="sel-status" data-val="biddingVal" data-fn="biddingInfo"><option value="">全部角色</option></select>';
                break;
            case "showCustomersSup": //客户和供应商 筛选
                if (tableSetting.interface == 'getcorpsupplier') {
                    selStr = '<select data-dom="showCustomersSup" data-index="1" class="sel-status" data-val="supplierVal" data-fn="showCustomersSup"><option value="">全部报告期</option></select>';
                } else {
                    selStr = '<select data-dom="showCustomersSup" data-index="0" class="sel-status" data-val="customerSupVal" data-fn="showCustomersSup"><option value="">全部报告期</option></select>';
                }
                break;
            case "getmultiplecertificate":
                //多证合一多显示一行字
                selStr = '<span class="dzhy-text">下列证照事项通过"多证合一"已整合至该企业营业执照</span>';
                break;
            case "historycourtannouncement":
                selStr = '<select data-dom="historycourtannouncement" class="sel-status" data-val="hisCourtannouncementSelVal" data-fn="historycourtannouncement"><option value="">全部案由</option></select>';
                break;
            case "historycourtdecision":
                selStr = '<select data-dom="historycourtdecision" class="sel-status" data-val="hisCourtdecisionResultVal" data-fn="historycourtdecision"><option value="">全部判决结果</option></select><select data-dom="historycourtdecision" class="sel-status" data-val="hisCourtdecisionCauseVal" data-fn="historycourtdecision"><option value="">全部案由</option></select>';
                break;
            case "historycourtopenannouncement":
                selStr = '<select data-dom="historycourtopenannouncement" class="sel-status" data-val="hisCourtopenannouncementSelVal" data-fn="historycourtopenannouncement"><option value="">全部案由</option></select>';
                break;
        }


        //标题边上的文字
        var numStr = "";
        if (tableSetting.modelNum && tableSetting.modelNum != true && Company.basicNum[tableSetting.modelNum] != 0 && Company.basicNum[tableSetting.modelNum] != null) {
            numStr = '<span class="fl modle-num">(' + Company.basicNum[tableSetting.modelNum] + ')</span>'
        }
        if (tableSetting.modelNumFromSHBDG) {
            numStr = '<span class="fl modle-num"></span>'
        }
        var hrefStr = '';
        if (outExcelType != "") {
            hrefStr = '/Wind.WFC.Enterprise.Web/Enterprise/ExcelDownload.aspx?moduletype=' + outExcelType + '&companycode=' + Company.companyCode + '&filename=' + outExcelType;
            if (!global_isRelease) {
                hrefStr = global_site + hrefStr + "&wind.sessionid=" + global_wsid;
            }
            hrefStr = '#';
        }
        var vipTips = tableSetting.notVipTitle ? '<span class="fl module-vip-tips" title="您正在使用付费高级功能"><i>' + intl('209302' /* 高级功能 */ ) + '</i></span>' : '';
        tableHtmlArr.push('<div class="widget-model"><div class="widget-header"><span class="fl">' + tableSetting.moduleName + '</span>' + numStr + vipTips + tabStr + connectWFTStr + moreStr + selStr + '</div>');
        if (changeTab) {
            tableHtmlArr.push(changeTab)
        }
        var tableId = tableId ? tableId : "tabCompany";
        tableHtmlArr.push('<div class="table-container"><table id="' + tableId + '" class="table-company"><thead><tr>');
        var len = tableSetting.thWidthRadio.length;
        for (var i = 0; i < len; i++) {
            var alignStr = "left";
            var itemArr = "";
            itemArr = String(tableSetting.align[i]).split("|")
            if (itemArr[0] == 1) {
                alignStr = "center";
            } else if (itemArr[0] == 2) {
                alignStr = "right";
            } else if (itemArr[0] == 0) {
                alignStr = "left";
            }
            var classStr = "";
            if (itemArr[1]) {
                classStr = itemArr[1]
            }
            tableHtmlArr.push('<th align="' + alignStr + '" class="' + classStr + '" width="' + tableSetting.thWidthRadio[i] + '">' + tableSetting.thName[i] + '</th>')
        }
        var tbodyId = tbodyId ? tbodyId : "tabContent";
        var loadingStr = noloading ? "" : '<div class="tab-loading"><span class="loading-text-style">加载中...</span></div>';
        tableHtmlArr.push('</tr></thead><tbody id="' + tbodyId + '"><tr><td colspan="' + len + '" class="loading-td">' + loadingStr + '</td></tr></tbody></table><div class="M-box"></div></div></div>');
        if (tableSetting.fn == "showmedicineinfo") {
            tableHtmlArr.push("</div>")
        }
        return tableHtmlArr.join("");
    },
    strlen: function(str) {
        //计算中英文字符长度
        var len = 0;
        for (var i = 0; i < str.length; i++) {
            var c = str.charCodeAt(i);
            //单字节加1 
            if ((c >= 0x0001 && c <= 0x007e) || (0xff60 <= c && c <= 0xff9f)) {
                len++;
            } else {
                len += 2;
            }
        }
        return len;
    },
    pageSetting_new: function(moduleName, tableSetting, moduleData, columnDefsSet, selfParam, $dom, oIndex) {
        var hasCount;
        var modelNumIsNum;
        if (/^\d+$/.test(tableSetting.modelNum)) {
            hasCount = tableSetting.modelNum;
            modelNumIsNum = true;
            if ($dom.find(".modle-num").length > 0) {
                $dom.find(".modle-num").html("(" + tableSetting.modelNum + ")")
            }
        }
        if (!moduleData || moduleData.length == 0) {
            $(moduleName).empty().html("<tr><td class='dataTables_empty' >" + intl('132725' /* 暂无数据 */ ) + "</td></tr>")
            return false;
        }

        if (oIndex == 0 || oIndex) {
            tableSetting = tableSetting[oIndex];
            columnDefsSet = columnDefsSet[oIndex];
        }
        var pageSet = ((Company.basicNum[tableSetting.modelNum] > Company.eachPageNum) || modelNumIsNum) ? true : false;
        // 多页签重新绘制不再绑定事件
        if (tableSetting.drawChart) {
            if (tableSetting.interface === 'GetCompanyMainMemberInfo') {
                if ($dom) {
                    $dom.find('.widget-header').on('click', '.icon-chart', tableSetting.drawChart)
                } else {
                    $('#workspace').find('.widget-header').on('click', '.icon-chart', tableSetting.drawChart)
                }
            } else if (tableSetting.modelNum && Company.basicNum[tableSetting.modelNum] != 0) {
                if ($dom) {
                    $dom.find('.widget-header').on('click', '.icon-chart', tableSetting.drawChart)
                } else {
                    $('#workspace').find('.widget-header').on('click', '.icon-chart', tableSetting.drawChart)
                }
            }
        };
        var columnsArr = [];
        for (var i = 0; i < tableSetting.fields.length; i++) {
            var tmp = {};
            if (tableSetting.fields[i] == "NO.") {
                tmp = {
                    "data": null,
                    "render": function(data, type, full, meta) {
                        var startIndex = meta.settings._iDisplayStart;
                        return startIndex + meta.row + 1;
                    }
                }
            } else {
                tmp = { "data": tableSetting.fields[i].split("|")[0] }
            }
            columnsArr.push(tmp);
        };
        if (moduleData) {
            $(moduleName).DataTable({
                data: moduleData,
                "info": false, //当前显示几页到几页
                "lengthChange": false,
                language: Company.lang, //提示信息
                autoWidth: false, //禁用自动调整列宽
                //stripeClasses: ["odd", "even"], //为奇偶行加上样式，兼容不支持CSS伪类的场合
                processing: false, //隐藏加载提示,自行处理
                serverSide: true, //启用服务器端分页
                searching: false, //禁用原生搜索
                orderMulti: false, //启用多列排序
                order: [], //取消默认排序查询,否则复选框一列会出现小箭头
                scrollCollapse: false, //开启滚动条
                ordering: false,
                // paging: false,
                pageLength: Company.eachPageNum,
                paging: pageSet,
                showRowNumber: true,
                retrieve: true,
                columnDefs: columnDefsSet,
                columns: columnsArr,
                fnDrawCallback: function(opts) {

                    if (tableSetting.callback) {
                        tableSetting.callback.call(this, tableSetting);
                    }

                    if (arguments[0]._iRecordsTotal <= Company.eachPageNum) {
                        $(this).siblings('.dataTables_paginate').hide()
                    }
                    if (opts._iRecordsTotal >= maxItem) {
                        $(moduleName + "_paginate").prepend('<div class="page-tip">' + intl('222840', '注：最多展示5000条数据') + '</div>');
                    }
                    $(moduleName + "_paginate").append("  " + intl('134821', '跳至') + " <input class='pagiate-page-num' id='" + moduleName.substring(1) + "-changePage' type='text'> " + intl('32047', '页') + " ");
                    var oTable = $(moduleName).dataTable();
                    $(document).off("keydown", moduleName + "-changePage");
                    $(document).on("keydown", moduleName + "-changePage", function() {
                        switch (event.keyCode) {
                            case 13:
                                if ($(moduleName + "-changePage").val() && $(moduleName + "-changePage").val() > 0) {
                                    var maxPage = Math.ceil(opts._iRecordsTotal / Company.eachPageNum);
                                    var inputPage = parseInt($(moduleName + "-changePage").val()) ? parseInt($(moduleName + "-changePage").val()) : "1";
                                    if (inputPage >= maxPage) {
                                        inputPage = maxPage;
                                    }
                                    var redirectpage = inputPage - 1;
                                } else {
                                    var redirectpage = 0;
                                }
                                oTable.fnPageChange(redirectpage);
                                return false;
                                break;
                        }
                    })
                },
                ajax: function(data1, callback1, settings1) {

                    if (moduleData) {
                        var returnData = {};
                        returnData.data = moduleData;
                        returnData.draw = data1.draw; //这里直接自行返回了draw计数器,应该由后台返回

                        returnData.recordsTotal = hasCount || (Company.basicNum[tableSetting.modelNum] >= maxItem ? maxItem : Company.basicNum[tableSetting.modelNum]); //返回数据全部记录
                        returnData.recordsFiltered = hasCount || (Company.basicNum[tableSetting.modelNum] >= maxItem ? maxItem : Company.basicNum[tableSetting.modelNum]); //后台不实现过滤功能，每次查询均视作全部结果

                        callback1(returnData);

                        arguments[2].ajax = function(data, callback, settings) {
                            //封装请求参数
                            var param = {};
                            var regexPage = /http:\/\/[^/]+\/[^/]+\/([\S]+)\.html/;
                            var page = "";
                            var route = "";
                            if (location.href.indexOf('#') != -1) {
                                route = location.href.split('#')[1];
                            }
                            if (location.href.match(regexPage)) {
                                page = location.href.match(regexPage)[1];
                            }
                            var tUrl = "/Wind.WFC.Enterprise.Web/Enterprise/WindSecureApi.aspx?cmd=" + tableSetting.interface + "&s=" + Math.random();
                            if (!global_isRelease) {
                                tUrl = global_site + "/Wind.WFC.Enterprise.Web/Enterprise/WindSecureApi.aspx?cmd=" + tableSetting.interface + "&s=" + Math.random() + "&wind.sessionid=" + global_wsid;
                            }
                            tUrl = tUrl + "&page=" + page + "&route=" + route;
                            param.companyid = Company.companyId;
                            param.companycode = Company.companyCode;
                            if (Company.companyCode01) { param.companycode = Company.companyCode01; }
                            param.pageNo = (data.start / data.length);
                            param.pageSize = $dom ? Company.eachPageNum : 10;
                            if (selfParam) {
                                for (item in selfParam) {
                                    param[item] = selfParam[item];
                                }
                            }
                            if ($(event.target).context) { //bury这个可以区分是否是加载页面时调用的
                                var activeType = 'view';
                                var opEntity = tableSetting.moreLink ? tableSetting.moreLink : tableSetting.interface;
                                var otherParam = [$(event.target), tableSetting.interface, param];
                                buryFCode.bury(activeType, opEntity, otherParam); //唯一入口函数
                            }
                            $.ajax({
                                url: tUrl,
                                type: "POST",
                                cache: false, //禁用缓存
                                data: param, //传入组装的参数
                                dataType: "json",
                                success: function(result) {
                                    if (result.ErrorCode && result.Data) {
                                        //封装返回数据
                                        var returnData = {};
                                        returnData.draw = data.draw; //这里直接自行返回了draw计数器,应该由后台返回
                                        returnData.recordsTotal = hasCount || (result.Page.Records >= maxItem ? maxItem : result.Page.Records); //返回数据全部记录
                                        returnData.recordsFiltered = hasCount || (result.Page.Records >= maxItem ? maxItem : result.Page.Records); //后台不实现过滤功能，每次查询均视作全部结果
                                        if (moduleName == "#tabpeve") {
                                            Company.peveData = result.Data.Groups || [];
                                            returnData.data = result.Data.report || []; //返回的数据列表
                                        } else if (moduleName == '#tabshareholder') {
                                            returnData.data = result.Data.ShareHolder;
                                        } else {
                                            returnData.data = result.Data; //返回的数据列表
                                        }
                                        //调用DataTables提供的callback方法，代表数据已封装完成并传回DataTables进行渲染
                                        //此时的数据需确保正确无误，异常判断应在执行此回调前自行处理完毕
                                        callback(returnData);
                                    } else {
                                        callback({ data: [], recordsTotal: 0, recordsFiltered: 0 });
                                    }
                                },
                                error: function(data) {
                                    console.log("error!");
                                }
                            });
                        }
                        return;
                    }
                },
                preDrawCallback: function(opts) {
                    if (arguments[0].oClasses.sPageButtonActive.indexOf('wi-secondary-bg') < 0) {
                        arguments[0].oClasses.sPageButtonActive = arguments[0].oClasses.sPageButtonActive + ' wi-secondary-bg ';
                    }
                },
                createdRow: function(row, data, dataIndex) {
                    //对齐的设置
                    $.each(tableSetting.align, function(i, item) {
                        var itemArr = String(item).split("|"); //传入的align进行split，"|"后为处理的函数，一般加上一个class，主要处理边距的问题
                        if (itemArr[0] == 1) {
                            $(row).find('td').eq(i).attr('align', 'center');
                            if (moduleName == '#tabBand') {
                                $(row).find('td').eq(i).attr('style', 'vertical-align: middle;');
                            }

                        } else if (itemArr[0] == 2) {
                            $(row).find('td').eq(i).attr('align', 'right');
                        } else {
                            $(row).find('td').eq(i).attr('align', 'left');
                        }
                        if (itemArr[1]) {
                            $(row).find('td').eq(i).addClass(itemArr[1]);
                        }
                    })
                }
            })
        }
    },
    pageSetting: function(moduleName, tableSetting, columnDefsSet, selfParam, $dom, oIndex) {
        // oIndex用在股权质押这类的标题栏有切换功能的模块
        if (oIndex == 0 || oIndex) {
            tableSetting = tableSetting[oIndex];
            columnDefsSet = columnDefsSet[oIndex];
        }
        var hasCount;
        var modelNumIsNum;
        if (/^\d+$/.test(tableSetting.modelNum)) {
            hasCount = tableSetting.modelNum;
            modelNumIsNum = true;
        }
        var pageSet = "";
        var showPageArr = ["advicelisttag", "getclinicalapplicationrecord", "getclinicalexperimentrecord", "getlistapplicationrecord", "getapprovedlistedrecord", "getownedfundperformance", "getallpublicchildfunds", "getownedfundmanagers", "getcompbussinessdata", "getyeardrugbidvalue", "getinstrumentwinningbidrecord", "getdrugwinningbidrecord"]
        if (showPageArr.indexOf(tableSetting.interface) > -1) {
            pageSet = true;
        } else {
            pageSet = ((Company.basicNum[tableSetting.modelNum] > Company.eachPageNum) || modelNumIsNum) ? true : false;
        }
        // 多页签重新绘制不再绑定事件
        if (tableSetting.drawChart) {
            if (tableSetting.interface === 'GetCompanyMainMemberInfo') {
                if ($dom) {
                    $dom.find('.widget-header').on('click', '.icon-chart', tableSetting.drawChart)
                } else {
                    $('#workspace').find('.widget-header').on('click', '.icon-chart', tableSetting.drawChart)
                }
            } else if (tableSetting.modelNum && Company.basicNum[tableSetting.modelNum] != 0) {
                if ($dom) {
                    $dom.find('.widget-header').on('click', '.icon-chart', tableSetting.drawChart)
                } else {
                    $('#workspace').find('.widget-header').on('click', '.icon-chart', tableSetting.drawChart)
                }
            }
        };
        var columnsArr = [];
        for (var i = 0; i < tableSetting.fields.length; i++) {
            var tmp = {};
            if (tableSetting.fields[i] == "NO.") {
                tmp = {
                    "data": null,
                    "render": function(data, type, full, meta) {
                        var startIndex = meta.settings._iDisplayStart;
                        return startIndex + meta.row + 1;
                    }
                }
            } else {
                tmp = { "data": tableSetting.fields[i].split("|")[0] }
            }
            columnsArr.push(tmp);
        };

        // TODO 控股企业目前暂时单独处理
        if (tableSetting.interface === 'getcontrolledcompany') {
            pageSet = true;
        }
        $(moduleName).DataTable({
            "info": false, //当前显示几页到几页
            "lengthChange": false,
            language: Company.lang, //提示信息
            autoWidth: false, //禁用自动调整列宽
            //stripeClasses: ["odd", "even"], //为奇偶行加上样式，兼容不支持CSS伪类的场合
            processing: false, //隐藏加载提示,自行处理
            serverSide: true, //启用服务器端分页
            searching: false, //禁用原生搜索
            orderMulti: false, //启用多列排序
            order: [], //取消默认排序查询,否则复选框一列会出现小箭头
            scrollCollapse: false, //开启滚动条
            pageLength: selfParam && selfParam.pageSize ? selfParam.pageSize : Company.eachPageNum, //首次加载的数据条数
            ordering: false,
            paging: pageSet,
            showRowNumber: true,
            retrieve: true,
            columnDefs: columnDefsSet,
            columns: columnsArr,
            fnDrawCallback: function(opts) {
                if (tableSetting.callback) {
                    tableSetting.callback.call(this, tableSetting);
                }
                if (opts._iRecordsTotal <= Company.eachPageNum) {
                    $(this).siblings('.dataTables_paginate').hide()
                }
                if (selfParam && selfParam.pageSize && (opts._iRecordsTotal > selfParam.pageSize)) { //对核心基金经理等分页不是10页的处理进行分页处理
                    $(this).siblings('.dataTables_paginate').show();
                }
                if (opts._iRecordsTotal >= maxItem) {
                    $(moduleName + "_paginate").prepend('<div class="page-tip">' + intl('222840', '注：最多展示5000条数据') + '</div>');
                }
                $(moduleName + "_paginate").append("  " + intl('134821', '跳至') + " <input class='pagiate-page-num' id='" + moduleName.substring(1) + "-changePage' type='text'> " + intl('32047', '页') + " ");
                var oTable = $(moduleName).dataTable();
                $(document).off("keydown", moduleName + "-changePage");
                $(document).on("keydown", moduleName + "-changePage", function() {
                    switch (event.keyCode) {
                        case 13:
                            if ($(moduleName + "-changePage").val() && $(moduleName + "-changePage").val() > 0) {
                                var dymaEachPageNum = selfParam && selfParam.pageSize ? selfParam.pageSize : Company.eachPageNum;
                                var maxPage = Math.ceil(opts._iRecordsTotal / dymaEachPageNum);
                                var inputPage = parseInt($(moduleName + "-changePage").val()) ? parseInt($(moduleName + "-changePage").val()) : "1";
                                if (inputPage >= maxPage) {
                                    inputPage = maxPage;
                                }
                                var redirectpage = inputPage - 1;
                            } else {
                                var redirectpage = 0;
                            }
                            oTable.fnPageChange(redirectpage);
                            return false;
                            break;
                    }
                })
            },
            preDrawCallback: function(opts) {

                if (arguments[0].oClasses.sPageButtonActive.indexOf('wi-secondary-bg') < 0) {
                    arguments[0].oClasses.sPageButtonActive = arguments[0].oClasses.sPageButtonActive + ' wi-secondary-bg ';
                }
            },
            createdRow: function(row, data, dataIndex) {
                //对齐的设置
                $.each(tableSetting.align, function(i, item) {
                    var itemArr = String(item).split("|"); //传入的align进行split，"|"后为处理的函数，一般加上一个class，主要处理边距的问题
                    if (itemArr[0] == 1) {
                        $(row).find('td').eq(i).attr('align', 'center');
                        if (moduleName == '#tabBand') {
                            $(row).find('td').eq(i).attr('style', 'vertical-align: middle;');
                        }

                    } else if (itemArr[0] == 2) {
                        $(row).find('td').eq(i).attr('align', 'right');
                    } else {
                        $(row).find('td').eq(i).attr('align', 'left');
                    }
                    if (itemArr[1]) {
                        $(row).find('td').eq(i).addClass(itemArr[1]);
                    }
                })
            },
            ajax: function(data, callback, settings) {
                //封装请求参数
                var param = {};
                var regexPage = /http:\/\/[^/]+\/[^/]+\/([\S]+)\.html/;
                var page = "";
                var route = "";
                if (location.href.indexOf('#') != -1) {
                    route = location.href.split('#')[1];
                }
                if (location.href.match(regexPage)) {
                    page = location.href.match(regexPage)[1];
                }
                var tUrl = "/Wind.WFC.Enterprise.Web/Enterprise/WindSecureApi.aspx?cmd=" + tableSetting.interface + "&s=" + Math.random();
                if (!global_isRelease) {
                    tUrl = global_site + "/Wind.WFC.Enterprise.Web/Enterprise/WindSecureApi.aspx?cmd=" + tableSetting.interface + "&s=" + Math.random() + "&wind.sessionid=" + global_wsid;
                }
                tUrl = tUrl + "&page=" + page + "&route=" + route;
                if (tableSetting.interface !== 'getcompbussinessdata') {
                    param.companyid = Company.companyId;
                }
                param.companycode = Company.companyCode;
                if (Company.companyCode01) { param.companycode = Company.companyCode01; }
                param.pageNo = (data.start / data.length);
                param.pageSize = $dom ? Company.eachPageNum : 10;

                if (selfParam) {
                    for (item in selfParam) {
                        param[item] = selfParam[item];
                    }
                }
                if (event && $(event.target).context) { //bury这个可以区分是否是加载页面时调用的
                    var activeType = 'view';
                    var opEntity = tableSetting.moreLink ? tableSetting.moreLink : tableSetting.interface;
                    var otherParam = [$(event.target), tableSetting.interface, param];
                    buryFCode.bury(activeType, opEntity, otherParam); //唯一入口函数
                }

                if (window.external && "undefined" != typeof window.external.ClientFunc && $.client) {
                    $.client.getAppType(function(apptype) {
                        tUrl = tUrl + "&apptype=" + (apptype == "S" ? "1" : "0");
                        //ajax请求数据
                        $.ajax({
                            url: tUrl,
                            type: "POST",
                            cache: false, //禁用缓存
                            data: param, //传入组装的参数
                            dataType: "json",
                            success: function(result) {
                                if (tableSetting.interface === 'getcompbussinessdata') {
                                    Company.ipoChartinit(result, moduleName, param)
                                    result.Data && result.Data.forEach(item => {
                                        if (Number(item.latestDate[4]) === 0 && Number(item.latestDate[5]) === 2) {
                                            item.latestDate = item.latestDate.substring(0, 4) + '-' + item.latestDate.substring(4, 6) + '-28'
                                        } else {
                                            item.latestDate = item.latestDate.substring(0, 4) + '-' + item.latestDate.substring(4, 6) + '-30'
                                        }
                                        item.latestValue = (Number(item.latestValue)).toLocaleString('en-US')
                                        item.moMGrowth = (Number(item.moMGrowth)).toLocaleString('en-US')
                                        item.moMGrowthRatio = (Number(item.moMGrowthRatio)).toLocaleString('en-US') + '%'
                                        item.yoYGrowth = (Number(item.yoYGrowth)).toLocaleString('en-US')
                                        item.yoYGrowthRatio = (Number(item.yoYGrowthRatio)).toLocaleString('en-US') + '%'
                                    })
                                }

                                var showDynaNumber = ['showItsFunds', 'showFundManager']; //需要根据接口返回数量显示统计数字的模块
                                if (result.ErrorCode && result.Data) {
                                    // 非VIP用户
                                    if (result.ErrorCode == '-10') {
                                        Common.notVipModule($(moduleName).empty(), tableSetting.notVipTitle, tableSetting.notVipTips ? tableSetting.notVipTips.replace(/企业套餐/g, 'VIP/SVIP套餐') : '购买VIP/SVIP，即可查看具体信息');
                                        return;
                                    }

                                    var returnData = {};
                                    returnData.draw = data.draw; //这里直接自行返回了draw计数器,应该由后台返回
                                    var orgTotal = result.Page.Records; //保留原始的数据条数

                                    if (showDynaNumber.indexOf(tableSetting.moreLink) > -1) {
                                        try {
                                            if (result.Data.length > 0) {
                                                switch (tableSetting.moreLink) {
                                                    case 'showItsFunds':
                                                        SearchNavInit.navDic['旗下基金']['旗下基金'][2] = 1;
                                                        break;
                                                    case 'showFundManager':
                                                        SearchNavInit.navDic['核心基金经理']['核心基金经理'][2] = 1;
                                                        break;
                                                }
                                            } else {
                                                switch (tableSetting.moreLink) {
                                                    case 'showItsFunds':
                                                        $('#showItsFunds').remove();
                                                        $('#linkshowItsFunds').remove();
                                                        break;
                                                    case 'showFundManager':
                                                        $('#showFundManager').remove();
                                                        $('#linkshowFundManager').remove();
                                                        break;
                                                }
                                            }
                                        } catch (error) {}
                                        if ($('#' + tableSetting.moreLink + ' .widget-header .modle-num').length > 0) {
                                            $('#' + tableSetting.moreLink + ' .widget-header .modle-num').html('(' + orgTotal + ')');
                                        } else {
                                            $('#' + tableSetting.moreLink + ' .widget-header').append('<span class="fl modle-num">(' + orgTotal + ')</span>');
                                        }
                                    }

                                    returnData.recordsTotal = result.Page.Records >= maxItem ? maxItem : result.Page.Records; //返回数据全部记录
                                    returnData.recordsFiltered = result.Page.Records >= maxItem ? maxItem : result.Page.Records;; //后台不实现过滤功能，每次查询均视作全部结果
                                    if (moduleName == '#tabshareholder') {
                                        Company.afterMergeData = result.Data;

                                        returnData.data = result.Data.ShareHolder;

                                    } else if (moduleName == '#tabCourtannouncement' || moduleName == '#tabCourtopenannouncement' || moduleName == '#tabPersonenforced' || moduleName == '#tabBand' || moduleName == '#tabPatent' ||
                                        moduleName == '#tabProductioncopyright' || moduleName == "#tabJudgeinfo" || moduleName == "#tabforeigninvest" || moduleName == "#tabbidding" || moduleName == "#tabJudicialsale" ||
                                        moduleName == "#tabowingtax" || moduleName == "#tabAuthentication" || moduleName == "#tabHisCourtannouncement" || moduleName == "#tabHisJudgeinfo" || moduleName == "#tabHisCourtopenannouncement" ||
                                        moduleName == "#tabDeliveryAnnouncement" || moduleName == "#tabCustomerSuplist" || moduleName == "#tabfilinginfo" || moduleName == "#tabpublicnotice" || (moduleName == "#tabcompanybulist" && tableSetting.interface == "getbrandnamelist")) {
                                        var $dom = "";
                                        if ($("#" + tableSetting.moreLink).length > 0) {
                                            $dom = $("#" + tableSetting.moreLink);
                                        } else {
                                            $dom = $("#workspace");
                                        }
                                        if ($dom.find(".modle-num").length > 0) {
                                            if (moduleName == "#tabCustomerSuplist") { //带下拉框选择的表格切换-客户和供应商
                                                $dom.find(".modle-num").html("(" + Company.basicNum[tableSetting.modelNum] + ")");
                                            } else {
                                                $dom.find(".modle-num").html("(" + orgTotal + ")");
                                            }

                                        }
                                        returnData.data = result.Data.list;
                                        if (!result.Data.list || result.Data.list.length <= 0) {
                                            callback({ data: [], recordsTotal: 0, recordsFiltered: 0 });
                                            return false
                                        }
                                        if (result.Data.aggregations && JSON.stringify(result.Data.aggregations) != "{}") {
                                            Company.showDraw(result.Data.aggregations, tableSetting)
                                        }
                                    } else {
                                        returnData.data = result.Data; //返回的数据列表
                                    }

                                    //调用DataTables提供的callback方法，代表数据已封装完成并传回DataTables进行渲染
                                    //此时的数据需确保正确无误，异常判断应在执行此回调前自行处理完毕
                                    callback(returnData);
                                } else {
                                    callback({ data: [], recordsTotal: 0, recordsFiltered: 0 });
                                    try {
                                        if (showDynaNumber.indexOf(tableSetting.moreLink) > -1) {
                                            switch (tableSetting.moreLink) {
                                                case 'showItsFunds':
                                                    $('#showItsFunds').remove();
                                                    $('#linkshowItsFunds').remove();
                                                    break;
                                                case 'showFundManager':
                                                    $('#showFundManager').remove();
                                                    $('#linkshowFundManager').remove();
                                                    break;
                                            }

                                        }
                                    } catch (error) {}
                                }
                            },
                            error: function(data) {
                                console.log("error!");
                                var showDynaNumber = ['showItsFunds', 'showFundManager']; //需要根据接口返回数量显示统计数字的模块
                                try {
                                    if (showDynaNumber.indexOf(tableSetting.moreLink) > -1) {
                                        switch (tableSetting.moreLink) {
                                            case 'showItsFunds':
                                                $('#showItsFunds').remove();
                                                $('#linkshowItsFunds').remove();
                                                break;
                                            case 'showFundManager':
                                                $('#showFundManager').remove();
                                                $('#linkshowFundManager').remove();
                                                break;
                                        }

                                    }
                                } catch (error) {}
                            }
                        });
                    });
                } else {
                    //ajax请求数据
                    $.ajax({
                        url: tUrl,
                        type: "POST",
                        cache: false, //禁用缓存
                        data: param, //传入组装的参数
                        dataType: "json",
                        success: function(result) {
                            if (tableSetting.interface === 'getcompbussinessdata') {
                                Company.ipoChartinit(result, moduleName, param)
                                result.Data && result.Data.forEach(item => {
                                    if (Number(item.latestDate[4]) === 0 && Number(item.latestDate[5]) === 2) {
                                        item.latestDate = item.latestDate.substring(0, 4) + '-' + item.latestDate.substring(4, 6) + '-28'
                                    } else {
                                        item.latestDate = item.latestDate.substring(0, 4) + '-' + item.latestDate.substring(4, 6) + '-30'
                                    }
                                    item.latestValue = (Number(item.latestValue)).toLocaleString('en-US')
                                    item.moMGrowth = (Number(item.moMGrowth)).toLocaleString('en-US')
                                    item.moMGrowthRatio = (Number(item.moMGrowthRatio)).toLocaleString('en-US') + '%'
                                    item.yoYGrowth = (Number(item.yoYGrowth)).toLocaleString('en-US')
                                    item.yoYGrowthRatio = (Number(item.yoYGrowthRatio)).toLocaleString('en-US') + '%'
                                })
                            }

                            var showDynaNumber = ['showItsFunds', 'showFundManager']; //需要根据接口返回数量显示统计数字的模块
                            if (result.Data) {

                                var returnData = {};
                                var orgTotal = result.Page.Records; //保留原始的数据条数

                                if (showDynaNumber.indexOf(tableSetting.moreLink) > -1) {
                                    try {
                                        if (result.Data.length > 0) {
                                            switch (tableSetting.moreLink) {
                                                case 'showItsFunds':
                                                    SearchNavInit.navDic['旗下基金']['旗下基金'][2] = 1;
                                                    break;
                                                case 'showFundManager':
                                                    SearchNavInit.navDic['核心基金经理']['核心基金经理'][2] = 1;
                                                    break;
                                            }
                                        } else {
                                            switch (tableSetting.moreLink) {
                                                case 'showItsFunds':
                                                    $('#showItsFunds').remove();
                                                    $('#linkshowItsFunds').remove();
                                                    break;
                                                case 'showFundManager':
                                                    $('#showFundManager').remove();
                                                    $('#linkshowFundManager').remove();
                                                    break;
                                            }
                                        }
                                    } catch (error) {}
                                    if ($('#' + tableSetting.moreLink + ' .widget-header .modle-num').length > 0) {
                                        $('#' + tableSetting.moreLink + ' .widget-header .modle-num').html('(' + orgTotal + ')');
                                    } else {
                                        $('#' + tableSetting.moreLink + ' .widget-header').append('<span class="fl modle-num">(' + orgTotal + ')</span>');
                                    }
                                }

                                returnData.draw = data.draw; //这里直接自行返回了draw计数器,应该由后台返回
                                returnData.recordsTotal = result.Page.Records >= maxItem ? maxItem : result.Page.Records; //返回数据全部记录
                                returnData.recordsFiltered = result.Page.Records >= maxItem ? maxItem : result.Page.Records;; //后台不实现过滤功能，每次查询均视作全部结果
                                if (moduleName == '#tabshareholder') {
                                    returnData.data = result.Data.ShareHolder;
                                    Company.afterMergeData = result.Data;
                                } else if (moduleName == '#tabCourtannouncement' || moduleName == '#tabCourtopenannouncement' || moduleName == '#tabPersonenforced' || moduleName == '#tabBand' || moduleName == '#tabPatent' ||
                                    moduleName == '#tabProductioncopyright' || moduleName == "#tabJudgeinfo" || moduleName == "#tabforeigninvest" || moduleName == "#tabbidding" || moduleName == "#tabJudicialsale" || moduleName == "#tabowingtax" ||
                                    moduleName == "#tabAuthentication" || moduleName == "#tabHisCourtannouncement" || moduleName == "#tabHisJudgeinfo" || moduleName == "#tabHisCourtopenannouncement" || moduleName == "#tabDeliveryAnnouncement" || moduleName == "#tabpublicnotice" || moduleName == "#tabfilinginfo" || moduleName == "#tabCustomerSuplist" || moduleName == "#tabbusinesschange" || (moduleName == "#tabcompanybulist" && tableSetting.interface == "getbrandnamelist")) {
                                    var $dom = "";
                                    if ($("#" + tableSetting.moreLink).length > 0) {
                                        $dom = $("#" + tableSetting.moreLink);
                                    } else {
                                        $dom = $("#workspace");
                                    }
                                    if ($dom.find(".modle-num").length > 0) {
                                        if (moduleName == "#tabCustomerSuplist") { //带下拉框选择的表格切换-客户和供应
                                            $dom.find(".modle-num").html("(" + Company.basicNum[tableSetting.modelNum] + ")");
                                        } else {
                                            $dom.find(".modle-num").html("(" + orgTotal + ")");
                                        }

                                    }
                                    returnData.data = result.Data.list;
                                    if (!result.Data.list || result.Data.list.length <= 0) {
                                        callback({ data: [], recordsTotal: 0, recordsFiltered: 0 });
                                        return false
                                    }
                                    if (result.Data.aggregations && JSON.stringify(result.Data.aggregations) != "{}") {
                                        Company.showDraw(result.Data.aggregations, tableSetting)
                                    }
                                } else {
                                    returnData.data = result.Data; //返回的数据列表
                                }

                                //调用DataTables提供的callback方法，代表数据已封装完成并传回DataTables进行渲染
                                //此时的数据需确保正确无误，异常判断应在执行此回调前自行处理完毕
                                callback(returnData);
                            } else {
                                callback({ data: [], recordsTotal: 0, recordsFiltered: 0 });
                                try {
                                    if (showDynaNumber.indexOf(tableSetting.moreLink) > -1) {
                                        switch (tableSetting.moreLink) {
                                            case 'showItsFunds':
                                                $('#showItsFunds').remove();
                                                $('#linkshowItsFunds').remove();
                                                break;
                                            case 'showFundManager':
                                                $('#showFundManager').remove();
                                                $('#linkshowFundManager').remove();
                                                break;
                                        }

                                    }
                                } catch (error) {}
                            }
                        },
                        error: function(data) {
                            console.log("error!");
                            var showDynaNumber = ['showItsFunds', 'showFundManager']; //需要根据接口返回数量显示统计数字的模块
                            try {
                                if (showDynaNumber.indexOf(tableSetting.moreLink) > -1) {
                                    switch (tableSetting.moreLink) {
                                        case 'showItsFunds':
                                            $('#showItsFunds').remove();
                                            $('#linkshowItsFunds').remove();
                                            break;
                                        case 'showFundManager':
                                            $('#showFundManager').remove();
                                            $('#linkshowFundManager').remove();
                                            break;
                                    }

                                }
                            } catch (error) {}
                        }
                    });
                }
            },
        });
    },
    shbdgPageSetting: function(moduleName, tableSetting, columnDefsSet, selfParam, $dom, oIndex) {
        // oIndex用在股权质押这类的标题栏有切换功能的模块
        if (oIndex == 0 || oIndex) {
            tableSetting = tableSetting[oIndex];
            columnDefsSet = columnDefsSet[oIndex];
        }
        var hasCount;
        var modelNumIsNum;
        if (/^\d+$/.test(tableSetting.modelNum)) {
            hasCount = tableSetting.modelNum;
            modelNumIsNum = true;
        }
        var pageSet = true;
        var columnsArr = [];
        for (var i = 0; i < tableSetting.fields.length; i++) {
            var tmp = {};
            if (tableSetting.fields[i] == "NO.") {
                tmp = {
                    "data": null,
                    "render": function(data, type, full, meta) {
                        var startIndex = meta.settings._iDisplayStart;
                        return startIndex + meta.row + 1;
                    }
                }
            } else {
                tmp = { "data": tableSetting.fields[i].split("|")[0] }
            }
            columnsArr.push(tmp);
        };
        $(moduleName).DataTable({
            "info": false, //当前显示几页到几页
            "lengthChange": false,
            language: Company.lang, //提示信息
            autoWidth: false, //禁用自动调整列宽
            //stripeClasses: ["odd", "even"], //为奇偶行加上样式，兼容不支持CSS伪类的场合
            processing: false, //隐藏加载提示,自行处理
            serverSide: true, //启用服务器端分页
            searching: false, //禁用原生搜索
            orderMulti: false, //启用多列排序
            order: [], //取消默认排序查询,否则复选框一列会出现小箭头
            scrollCollapse: false, //开启滚动条
            pageLength: selfParam && selfParam.pageSize ? selfParam.pageSize : Company.eachPageNum, //首次加载的数据条数
            ordering: false,
            paging: pageSet,
            showRowNumber: true,
            retrieve: true,
            columnDefs: columnDefsSet,
            columns: columnsArr,
            fnDrawCallback: function(opts) {
                if (tableSetting.callback) {
                    tableSetting.callback.call(this, tableSetting);
                }
                if (opts._iRecordsTotal <= Company.eachPageNum) {
                    $(this).siblings('.dataTables_paginate').hide()
                }
                if (selfParam && selfParam.pageSize && (opts._iRecordsTotal > selfParam.pageSize)) { //对核心基金经理等分页不是10页的处理进行分页处理
                    $(this).siblings('.dataTables_paginate').show();
                }
                if (opts._iRecordsTotal >= maxItem) {
                    $(moduleName + "_paginate").prepend('<div class="page-tip">' + intl('222840', '注：最多展示5000条数据') + '</div>');
                }
                $(moduleName + "_paginate").append("  " + intl('134821', '跳至') + " <input class='pagiate-page-num' id='" + moduleName.substring(1) + "-changePage' type='text'> " + intl('32047', '页') + " ");
                var oTable = $(moduleName).dataTable();
                $(document).off("keydown", moduleName + "-changePage");
                $(document).on("keydown", moduleName + "-changePage", function() {
                    switch (event.keyCode) {
                        case 13:
                            if ($(moduleName + "-changePage").val() && $(moduleName + "-changePage").val() > 0) {
                                var dymaEachPageNum = selfParam && selfParam.pageSize ? selfParam.pageSize : Company.eachPageNum;
                                var maxPage = Math.ceil(opts._iRecordsTotal / dymaEachPageNum);
                                var inputPage = parseInt($(moduleName + "-changePage").val()) ? parseInt($(moduleName + "-changePage").val()) : "1";
                                if (inputPage >= maxPage) {
                                    inputPage = maxPage;
                                }
                                var redirectpage = inputPage - 1;
                            } else {
                                var redirectpage = 0;
                            }
                            oTable.fnPageChange(redirectpage);
                            return false;
                            break;
                    }
                })
            },
            preDrawCallback: function(opts) {

                if (arguments[0].oClasses.sPageButtonActive.indexOf('wi-secondary-bg') < 0) {
                    arguments[0].oClasses.sPageButtonActive = arguments[0].oClasses.sPageButtonActive + ' wi-secondary-bg ';
                }
            },
            createdRow: function(row, data, dataIndex) {
                //对齐的设置
                $.each(tableSetting.align, function(i, item) {
                    var itemArr = String(item).split("|"); //传入的align进行split，"|"后为处理的函数，一般加上一个class，主要处理边距的问题
                    if (itemArr[0] == 1) {
                        $(row).find('td').eq(i).attr('align', 'center');
                        if (moduleName == '#tabBand') {
                            $(row).find('td').eq(i).attr('style', 'vertical-align: middle;');
                        }

                    } else if (itemArr[0] == 2) {
                        $(row).find('td').eq(i).attr('align', 'right');
                    } else {
                        $(row).find('td').eq(i).attr('align', 'left');
                    }
                    if (itemArr[1]) {
                        $(row).find('td').eq(i).addClass(itemArr[1]);
                    }
                })
            },
            ajax: function(data, callback, settings) {
                //封装请求参数
                var param = {};
                var regexPage = /http:\/\/[^/]+\/[^/]+\/([\S]+)\.html/;
                var page = "";
                var route = "";
                if (location.href.indexOf('#') != -1) {
                    route = location.href.split('#')[1];
                }
                if (location.href.match(regexPage)) {
                    page = location.href.match(regexPage)[1];
                }
                var tUrl = Common.shbdgServer + tableSetting.interface;
                param.companycode = Company.companyCode;
                if (Company.companyCode01) { param.companycode = Company.companyCode01; }
                param.pageNo = (data.start / data.length);
                param.pageSize = $dom ? Company.eachPageNum : 10;

                if (selfParam) {
                    for (item in selfParam) {
                        param[item] = selfParam[item];
                    }
                }
                //ajax请求数据
                $.ajax({
                    url: tUrl,
                    type: "GET",
                    cache: false, //禁用缓存
                    data: param, //传入组装的参数
                    dataType: "json",
                    success: function(result) {
                        if (result && result.code && result.code == 200) {
                            var returnData = {};
                            returnData.draw = data.draw; //这里直接自行返回了draw计数器,应该由后台返回
                            var orgTotal = result.total; //保留原始的数据条数                                    

                            returnData.recordsTotal = result.total >= maxItem ? maxItem : result.total; //返回数据全部记录
                            returnData.recordsFiltered = result.total >= maxItem ? maxItem : result.total; //后台不实现过滤功能，每次查询均视作全部结果

                            returnData.data = result.data; //返回的数据列表
                            $('#' + tableSetting.moreLink).find('.modle-num').text(orgTotal ? '(' + orgTotal + ')' : '');
                            //调用DataTables提供的callback方法，代表数据已封装完成并传回DataTables进行渲染
                            //此时的数据需确保正确无误，异常判断应在执行此回调前自行处理完毕
                            callback(returnData);
                        } else {
                            callback({ data: [], recordsTotal: 0, recordsFiltered: 0 });
                            try {} catch (error) {}
                        }
                    },
                    error: function(data) {
                        console.log("error!");
                        try {} catch (error) {}
                    }
                });
            },
        });
    },
    showDraw: function(arr, tableSetting) {
        /*
            arr:下拉框的聚合数组,每个下拉弹是一个字段对象。
         */
        var $sel = $("#" + tableSetting.moreLink).find(".sel-status");
        if ($("#" + tableSetting.moreLink) && $("#" + tableSetting.moreLink).length > 0) {
            $sel = $("#" + tableSetting.moreLink).find(".sel-status");
        } else {
            $sel = $("#workspace").find(".sel-status");
        }
        //var $sel = $("#" + tableSetting.moreLink).find(".sel-status");
        if (tableSetting.selName && tableSetting.selName.length > 0) {
            for (i = 0; i < tableSetting.selName.length; i++) {
                var titleArr = [];
                var allSel = $sel.eq(i).find("option")[0].outerHTML;
                titleArr.push(allSel)
                    //console.log(arr[tableSetting.aggName[i]])
                if (tableSetting.moreLink == 'showCustomersSup') { //客户和供应商筛选条件时间戳转换
                    if (tableSetting.aggName[i] && arr[tableSetting.aggName[i]]) {
                        $.each(arr[tableSetting.aggName[i]], function(k, v) {
                            var count = v.doc_count ? v.doc_count : "0";
                            var name = v.key ? v.key : "--";
                            var eachVal = v.key ? Common.formatTime(v.key) : "--";
                            titleArr.push('<option data-count="' + count + '" value="' + name + '">' + eachVal + '(' + count + ')</option>')
                        })
                    }
                } else if (tableSetting.aggName[i] && arr[tableSetting.aggName[i]]) {
                    $.each(arr[tableSetting.aggName[i]], function(k, v) {
                        var count = v.doc_count ? v.doc_count : "0";
                        var name = v.key ? v.key : "--";
                        var eachVal = v.key ? v.key : "--";
                        if (eachVal == "0.0-5.0") {
                            eachVal = "持股不到5%";
                        } else if (eachVal == "5.0-50.0") {
                            eachVal = "持股5%以上（含）";
                        } else if (eachVal == "50.0-100.1") {
                            eachVal = "持股50%以上（含）";
                        }
                        if (tableSetting.moreLink == "getcourtdecision" && eachVal == "--") {
                            // console.log('1111');
                        } else {
                            titleArr.push('<option data-count="' + count + '" value="' + name + '">' + eachVal + '(' + count + ')</option>')
                        }
                    })
                }
                $sel.eq(i).html(titleArr.join(""));
                if (Company[tableSetting.selName[i]]) {
                    $sel.eq(i).find("option[value='" + Company[tableSetting.selName[i]] + "']").prop("selected", true);
                }
            }
        }
    },
    /**
     * 使用id跳转
     */
    linkWithIdEventHandler: function(e) {
        var target = e.target;
        var id = $(target).attr('data-id');
        if (id) {
            Common.linkCompany('Bu3', '', id);
        }
        return false;
    },
    /**
     * 使用code跳转
     */
    linkWithCodeEventHandler: function(e) {
        var target = e.target;
        var code = $(target).attr('data-code');
        var name = $(target).attr('data-name');
        var type = $(target).attr('data-type');
        var buryParam = $(target).attr('data-pingParam') ? (($(target).attr('data-pingParam') == 'undefined') ? '' : $(target).attr('data-pingParam')) : '';
        if (code && code.length) {
            if (code.length < 16) {
                Common.linkCompany('Bu3', code, null, null, buryParam); //bury
            }
        }
        return false;
    },
    /**
     * 跳转图谱中心
     */
    redirectToChart: function(hash) {
        window.open('CompanyChart.html?companycode=' + Company.companyCode + '&companyname=' + Company.companyName + '&companyid=' + Company.companyId + hash);
        return false;
    },
    /**
     * 弹框事件注册
     */
    bindPopupEvent: function() {

        $('.company-banner').on('click', 'li', function() {
            var txt = $(this).attr('alt');
            popUpHandler(txt);
        })

        function popUpHandler(txt) {
            window._childParams = { companyName: Company.companyName, companyCode: Company.companyCode, companyId: Company.companyId };
            switch (txt) {
                case '股权穿透图':
                    window._childParams.popupTitle = intl('138279' /* 股权穿透图 */ );
                    Common.burypcfunctioncode('922602100376');
                    window._childParams.popupType = 'gqct';
                    break;
                case '疑似关系图':
                    window._childParams.popupTitle = intl('138485' /* 疑似关系图 */ );
                    Common.burypcfunctioncode('922602100377');
                    window._childParams.popupType = 'ysgx';
                    break;
                case '企业受益人图':
                    window._childParams.popupTitle = intl('214864' /* 企业受益人图 */ ) + '<span class="module-vip-tips" title="您正在使用付费高级功能">' + intl('209302' /* 高级功能 */ ) + '</span>'
                        // TODO 埋点
                    window._childParams.popupType = 'qysyr';
                    break;
                case '关系图谱':
                    if (!Company.companyName) {
                        return;
                    }
                    var url = 'CompanyChart.html?companycode=' + Company.companyCode + '&companyid=' + Company.companyId + '&companyname=' + encodeURIComponent(Company.companyName);
                    window.open(url);
                    return false;
                    break;
                default:
                    window._childParams.popupTitle = intl('138282' /* 股权结构图 */ ) + '<span class="module-vip-tips" title="您正在使用付费高级功能">' + intl('209302' /* 高级功能 */ ) + '</span>'
                    Common.burypcfunctioncode('922602100375');
                    window._childParams.popupType = 'gqjg';
                    break;
            }
            if ((txt == '股权结构图' || txt == '企业受益人图') && !Company.isVip) {
                var contSet = {
                    // 无权限
                    title: txt,
                    // dec: intl('208266'),
                    dec: ['购买VIP/SVIP套餐，即可不限次查看企业的' + txt, '购买VIP/SVIP套餐，即可不限次查看企业的' + txt]
                };
                Common.Popup([1, true], true, contSet);
                return false;
            }

            layer.open({
                title: [window._childParams.popupTitle || '', 'font-size:18px;'],
                skin: 'feedback-body',
                type: 2,
                area: ['960px', '720px'], //宽高        
                content: '../Company/chartPopup.html' + location.search + '&v=20200930',
                shadeClose: true,
                scrollbar: false
            })
            return false;
        }
    }
}

$(document).on("mouseover", ".module-vip-tips,.export-vip-tips", function(e) {
    $(e.target).attr('title', intl('209303' /* 您正在使用付费高级功能 */ ));
})

var funcList = [copyInit, Company.init]
Common.internationToolInfo(funcList);